!function(){window.twaver&&(window.twaver.animateLoopId&&cancelAnimationFrame(window.twaver.animateLoopId),window.twaver.animateLoopId=null),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.indexOf(t,e=e||0)===e});var x={_isInitializing:!1},Y={isDeserializing:!1,isCalculatingBus:!1,images:{},registerImage:function(t,e,i,n,o){Y.images[t]=new x.ImageAsset(t,e,i,n,o),ge(t)},getRegisteredImageNames:function(){return Object.keys(Y.images)},unregisterImage:function(t){delete Y.images[t]},getImageAsset:function(t){if("string"==typeof t)return Y.images[t]},showVersion:function(t){Y.isCtrlDown(t)&&t.shiftKey&&76==t.keyCode&&alert("TWaver HTML5 "+x.Util.getVersion()+"\n"+e)},callLater:function(t,e,i,n){return setTimeout(function(){t.apply(e,i)},n||ye.CALL_LATER_DELAY)},isEmptyObject:function(t){for(var e in t)return!1;return!0},xml:function(t){if(window.DOMParser)return(new DOMParser).parseFromString(t,"text/xml");var e=new ActiveXObject("Microsoft.XmlDOM");return e.async=!1,e.loadXml(t),e},num:function(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)},getter:function(t){var e=t.charAt(0).toUpperCase()+t.slice(1);return(/ble$/.test(t)||/ed$/.test(t)?"is":"get")+e},setter:function(t){return"set"+(t.charAt(0).toUpperCase()+t.slice(1))},_id:["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],id:function(){for(var t=[],e=0;e<32;e++)t[e]=this._id[Math.floor(16*x.Util.random())];return t[12]="4",t[16]=this._id[3&t[16]|8],t.join("")},keys:function(t){var e,i=new ie;for(e in t)i.add(e);return i},es:["toString","toLocaleString","valueOf"],ip:function(t,i){var n="_"+i;t[Y.getter(i)]=function(){return this[n]},t[Y.setter(i)]=function(t){var e=this[n];this[n]=t,this.firePropertyChange(i,e,t)}},validateLicense:function(t){e=t,q()},ibool:function(t,i){var n="_"+i;t["is"+(i.charAt(0).toUpperCase()+i.slice(1))]=function(){return this[n]},t[Y.setter(i)]=function(t){var e=this[n];this[n]=t,this.firePropertyChange(i,e,t)}},getValue:function(t,e,i){var n=e.charAt(0).toUpperCase()+e.slice(1),o="get"+n,n="is"+n;return i?"boolean"===i?t[n]():t[o]():t[o]?t[o]():t[n]?t[n]():t[e]},setValue:function(t,e,i){t["set"+e.charAt(0).toUpperCase()+e.slice(1)](i)},clone:function(t){if(!t)return null;var e,i={};for(e in t)i[e]=t[e];return i},cloneRect:function(t){return t?{x:t.x,y:t.y,width:t.width,height:t.height}:null},classCache:{},getClass:function(t){if(!(n=Y.classCache[t])){for(var e=t.split("."),i=e.length,n=window,o=0;o<i;o++)(n=n[e[o]])||"twaver"===e[o]&&(n=x);Y.classCache[t]=n}return n},newInstance:function(t){var e=Y.getClass(t)||window[t];if(!e)return null;var i=arguments.length,n=arguments;if(1===i)return new e;if(2===i)return new e(n[1]);if(3===i)return new e(n[1],n[2]);if(4===i)return new e(n[1],n[2],n[3]);if(5===i)return new e(n[1],n[2],n[3],n[4]);if(6===i)return new e(n[1],n[2],n[3],n[4],n[5]);if(7===i)return new e(n[1],n[2],n[3],n[4],n[5],n[6]);if(8===i)return new e(n[1],n[2],n[3],n[4],n[5],n[6],n[7]);throw"don't support args more than 7"},addMethod:function(t,e){var i,n=t.prototype;for(i in e)n[i]=e[i]},ext:function(t,e,i){var n,o;if("string"==typeof t&&(n=t,t=Y.getClass(t)),e&&((o=function(){}).prototype=e.prototype,t.prototype=new o,(t.prototype.constructor=t).superClass=e.prototype,e.prototype.constructor==Object.prototype.constructor&&(e.prototype.constructor=e)),n&&(t.prototype.getClassName=function(){return n}),i){var s,a=t.prototype;for(s in i)l.ext(s,a,i);for(var r=Y.es.length,h=0;h<r;h++)s=Y.es[h],i.hasOwnProperty(s)&&!i.propertyIsEnumerable(s)&&(a[s]=i[s])}},setViewBounds:function(t,e){var i;t&&(t.adjustBounds?t.adjustBounds(e):(i=!(i=t.style)&&t.getView()?t.getView().style:i)&&(i.position="absolute",i.left=e.x+"px",i.top=e.y+"px",i.width=e.width+"px",i.height=e.height+"px"))},getImageSrc:function(t){var e=Y.getImageAsset(t);return e?e.getSrc()?e.getSrc():e.getImage().getAttribute("src"):t},nextColorCount:0,nextColor:function(){return Y.nextColorCount>=ye.COLORS.length&&(Y.nextColorCount=0),ye.COLORS[Y.nextColorCount++]},isCtrlDown:function(t){return t.ctrlKey||t.metaKey},isShiftDown:function(t){return t.shiftKey},isAltDown:function(t){return t.altKey},setText:function(t,e,i){i?g.isFirefox?t.textContent=e:t.innerText=e:t.innerHTML=e},fillDescendant:function(t,e){e.add(t),t.hasChildren()&&t.getChildren().forEach(function(t){Y.fillDescendant(t,e)})}},e=(Date,"l=1.0\ntype=1\ngis=0\n3d=0\nstart=2018-06-10\nend=2018-10-01\nnote=This license applies to the evaluation version of TWaver. The License is limited to noncommercial use. Noncommercial use relates only to educational, research, personal or evaluation purposes. Any other use is commercial use. You may not use the Software in connection with any business activities.And You are not permitted to modify the software or attempt to decipher, decompile, disassemble or reverse engineer this Software.\nsignature=1f897768fb5142a58952c945765759d9ee5f8dbfc64dcb7159c4607d93b0ddb1479431f8a8bc32f35db3f2a881f80d98a0c7218266989c865824d8c7f46a24b9f3b28de5a23d661d85e6a0e35e35d0188bfbebd1665234c03a4cb073fc1ca11458703f348444c6870939edfb18e4291c67d44a1cfe2f1044176d28dc8ceb284d4e8a3b83e8e47676f371ceffee001326414ced054caf635889a79a50fdc37749f3ae6c96093f383ec29b31f694f991603fd1232aa130aa8bfe2a1765d52a011c4208e913ebf1d3135c22bda064d8dc34862b0f7af775453c3e4ab63f306ec03f8db8e26ab5d9fa71cb539c3463358758d78cb653a044899b243dcf2e8ac8a39c097ad71db019c58def664c5c314bce2ef0c8b0372a9bed4e7f1e98e92d6a89a3a16d89ad9b8884c972e7cc2797d24509943753d2f65a89ba20a1c539e44863ee463149e897078200c9d89f7986837087e756b5fd41009be8b06a24817a9e4350929916da11ea9657077276da3c05255fcbd5a3e2894954f050f968b42fe00ec63bb10e1bc63c5c1788440272dd154631f63044347bf9316e70a83a76644d18ec98de6bc1a1d46bdf303191261c173288bec19dbc0cef94d4e1f175f54f23368042ccf4eefe2bd0a8fd0e4b7bc544d6d9a6e92b629d730e44db44f41e4b0c10395b54d0a5f725afb78f19d74bca148f3b342ff219a6c82d892f5c9d106b3a96f14d4112398afc1f57ae46123cda51be78cca6e7d4f70c7eb1b0abd728623df5805066832cacec35536c265463519f8ae2bddea39fdb9a8e0b5d59f9cfbdf19ffb4ba47d5e729ebe8b81c6168dd2e44138a0cbf98d940345c3e8a831a0182e6fc44859be8d541079d4a238b2cbec386085dac25f80fcb4cf382976374e6c232468");"function"==typeof define?define(function(){return x}):"object"==typeof exports&&(module.exports=x),window&&(window.twaver=x,window._twaver=Y,window.R2D=x),x.animate={},x.network={},x.network.interaction={},x.controls={},x.charts={},x.layout={};var n,o,s=window.navigator,E=window.document,a=window.Image;window.document||(o=!0,a=(n=function(){}).Image,s={userAgent:""},E={});var g=(Ot={},se=s.userAgent.toLowerCase(),Ot.isOpera=/opera/.test(se),Ot.isIE=/msie/.test(se)||/trident/.test(se)||/edge/.test(se),Ot.isFirefox=/firefox/i.test(se),Ot.isChrome=/chrome/i.test(se),Ot.isSafari=!Ot.isChrome&&/safari/i.test(se),Ot.isIPhone=/iphone/.test(se),Ot.isIPod=/ipod/.test(se),Ot.isIPad=/ipad/.test(se),Ot.isAndroid=/android/i.test(se),Ot.isWebOS=/webos/i.test(se),Ot.isMSTouchable=Ot.isIE&&(s.msMaxTouchPoints&&1<s.msMaxTouchPoints||s.maxTouchPoints&&1<s.maxTouchPoints),Ot.isTouchable="ontouchend"in E||Ot.isMSTouchable,Ot);Y.ua=g;var l={__accessor:function(t,e){for(var i=e.__accessor,n=i.length,o=0;o<n;o++)Y.ip(t,i[o])},__bool:function(t,e){for(var i=e.__bool,n=i.length,o=0;o<n;o++)Y.ibool(t,i[o])},__client:function(t,e){t.getClient=function(t){return this._clientMap[t]},t.setClient=function(t,e){var i=this._clientMap[t];return null==e?delete this._clientMap[t]:this._clientMap[t]=e,this.firePropertyChange("C:"+t,i,e)&&this.onClientChanged(t,i,e),this},t.getClientProperties=function(){return Y.keys(this._clientMap)},t.getClientMap=function(){return this._clientMap},t.onClientChanged=function(t,e,i){}},__style:function(t,e){t.getStyle=function(t){var e=this._styleMap[t];return null==e?xe._m[t]:e},t.setStyle=function(t,e){var i=this._styleMap[t];return null==e?delete this._styleMap[t]:this._styleMap[t]=e,this.firePropertyChange("S:"+t,i,e)&&this.onStyleChanged(t,i,e),this},t.getStyleProperties=function(){return Y.keys(this._styleMap)},t.onStyleChanged=function(t,e,i){}},__new:function(t,e){t.newInstance=function(){var t=Y.getClass(this.getClassName());if(!t)return null;var e=arguments.length,i=arguments;if(0===e)return new t;if(1===e)return new t(i[0]);if(2===e)return new t(i[0],i[1]);if(3===e)return new t(i[0],i[1],i[2]);if(4===e)return new t(i[0],i[1],i[2],i[3]);if(5===e)return new t(i[0],i[1],i[2],i[3],i[4]);if(6===e)return new t(i[0],i[1],i[2],i[3],i[4],i[5]);if(7===e)return new t(i[0],i[1],i[2],i[3],i[4],i[5],i[6]);throw"don't support args more than 7"}},__property:function(t,e){t.getValue=function(t,e){return"accessor"===this._propertyType?Y.getValue(t,this._propertyName):"style"===this._propertyType&&t.getStyle?t.getStyle(this._propertyName):"client"===this._propertyType&&t.getClient?t.getClient(this._propertyName):"field"===this._propertyType?t[this._propertyName]:null},t.setValue=function(t,e,i){if("accessor"===this._propertyType)t[Y.setter(this._propertyName)](e);else{if("style"===this._propertyType&&t.setStyle)return t.setStyle(this._propertyName,e);{if("client"===this._propertyType&&t.setClient)return t.setClient(this._propertyName,e);"field"===this._propertyType&&(t[this._propertyName]=e)}}}},map:{__accessor:1,__bool:1,__client:1,__style:1,__new:1,__tree:1,__property:1},ext:function(t,e,i){1===l.map[t]?l[t](e,i):e[t]=i[t]}};Y.extend=l;var X=Y.Matrix=function(t,e,i,n,o,s){this.setMatrix(t,e,i,n,o,s)};X.identity=function(){return new X(1,0,0,1,0,0)},X.prototype.setMatrix=function(t,e,i,n,o,s){this._m11=t,this._m12=e,this._m21=i,this._m22=n,this._offsetX=o,this._offsetY=s,(this._type=0)!=this._m21||0!=this._m12?this._type=4:(1==this._m11&&1==this._m22||(this._type=2),0==this._offsetX&&0==this._offsetY||(this._type|=1),0==(3&this._type)&&(this._type=0))},X.prototype.transform=function(){var t=2===arguments.length?{x:arguments[0],y:arguments[1]}:arguments[0];if(!t||!Y.num(t.x)||!Y.num(t.y))throw"arguments should contain x, y";switch(this._type){case 0:return{x:t.x,y:t.y};case 1:return{x:this._offsetX+t.x,y:this._offsetY+t.y};case 2:return{x:t.x*this._m11,y:t.y*this._m22};case 3:return{x:t.x*this._m11+this._offsetX,y:t.y*this._m22+this._offsetY}}return{x:this._m11*t.x+t.y*this._m21+this._offsetX,y:this._m22*t.y+t.x*this._m12+this._offsetY}},X.prototype.translate=function(t,e){this.multiply(new X(1,0,0,1,t,e))},X.prototype.scale=function(t,e){this.multiply(new X(t,0,0,e,0,0))},X.prototype.rotate=function(t,e,i){t=t*Math.PI/180;var n=Math.sin(t),t=Math.cos(t);this.multiply(new X(t,n,-n,t,e*(1-t)+i*n,i*(1-t)-e*n))},X.prototype.skew=function(t,e){this.multiply(new X(1,Math.tan(e*Math.PI/180),Math.tan(t*Math.PI/180),1,0,0))},X.prototype.multiply=function(t){var e=this,i=t,n=e._type,o=i._type;if(0!=o)if(0==n)e.setMatrix(i._m11,i._m12,i._m21,i._m22,i._offsetX,i._offsetY);else if(1==o)e._offsetX+=i._offsetX,e._offsetY+=i._offsetY,4!=n&&(e._type|=1);else if(1==n){var s=e._offsetX,t=e._offsetY;e.setMatrix(i._m11,i._m12,i._m21,i._m22,i._offsetX,i._offsetY),e._offsetX=s*i._m11+t*i._m21+i._offsetX,e._offsetY=s*i._m12+t*i._m22+i._offsetY,e._type=4==o?4:3}else switch(n<<4|o){case 34:return e._m11*=i._m11,void(e._m22*=i._m22);case 35:return e._m11*=i._m11,e._m22*=i._m22,e._offsetX=i._offsetX,e._offsetY=i._offsetY,void(e._type=3);case 36:case 52:case 66:case 67:case 68:return void e.setMatrix(e._m11*i._m11+e._m12*i._m21,e._m11*i._m12+e._m12*i._m22,e._m21*i._m11+e._m22*i._m21,e._m21*i._m12+e._m22*i._m22,e._offsetX*i._m11+e._offsetY*i._m21+i._offsetX,e._offsetX*i._m12+e._offsetY*i._m22+i._offsetY);case 50:return e._m11*=i._m11,e._m22*=i._m22,e._offsetX*=i._m11,void(e._offsetY*=i._m22);case 51:return e._m11*=i._m11,e._m22*=i._m22,e._offsetX=i._m11*e._offsetX+i._offsetX,void(e._offsetY=i._m22*e._offsetY+i._offsetY);default:console.log("Matrix multiply hit an invalid case: "+combinedType)}};var b={getDistance:function(t,e){var i=e.x-t.x,t=e.y-t.y;return Math.sqrt(i*i+t*t)},getCenterPoint:function(t,e){return t&&e?{x:(t.x+e.x)/2,y:(t.y+e.y)/2}:null==e&&t.width?{x:t.x+t.width/2,y:t.y+t.height/2}:void 0},isPointInPolygon:function(t,e){for(var i=0,n=0,o=!1,s=(t=t._as||t).length,i=0,n=s-1;i<s;n=i++){var a=t[i],r=t[n];a.y>e.y!=r.y>e.y&&e.x<(r.x-a.x)*(e.y-a.y)/(r.y-a.y)+a.x&&(o=!o)}return o},unionRect:function(t,e){if(t&&!e)return Y.cloneRect(t);if(!t&&e)return Y.cloneRect(e);if(t&&e){var i=Math.min(t.x,e.x),n=Math.min(t.y,e.y),o=Math.max(t.x+t.width,e.x+e.width)-i,e=Math.max(t.y+t.height,e.y+e.height)-n;return t.x=i,t.y=n,t.width=o,t.height=e,t}return null},intersects:function(t,e){if(!t||!e)return!1;var i=e.width,n=e.height,o=t.width,s=t.height;if(o<=0||s<=0||i<=0||n<=0)return!1;var a=e.x,r=e.y,e=t.x,t=t.y;return s+=t,i+=a,n+=r,((o+=e)<e||a<o)&&(s<t||r<s)&&(i<a||e<i)&&(n<r||t<n)},intersection:function(t,e){if(!t||!e)return!1;var i=e.x,n=e.y,o=t.x,s=t.y,a=i;a+=e.width;var r=n;r+=e.height;var h=o,e=s;return(h+=t.width)<a&&(a=h),(e+=t.height)<r&&(r=e),r-=n=n<s?s:n,0===(a-=i=i<o?o:i)||0===r?null:{x:i,y:n,width:a,height:r}},contains:function(t,e){var i=e.x,n=e.y,o=e.width,s=e.height,a=t.width,r=t.height;if((a|r|o|s)<0)return!1;e=t.x,t=t.y;if(i<e||n<t)return!1;if(a+=e,(o+=i)<=i){if(e<=a||a<o)return!1}else if(e<=a&&a<o)return!1;if(r+=t,(s+=n)<=n){if(t<=r||r<s)return!1}else if(t<=r&&r<s)return!1;return!0},getLinePoints:function(t){if(!t)return null;var e=new ie;return t.forEach(function(t){e.addAll(t)}),e},getLineRect:function(t){t=b.getLinePoints(t);return b.getRect(t)},getRect:function(t,e){if(!t)return null;var i=(t=t._as?t._as:t).length;if(i<=0)return null;var n=t[0];e=e||{x:null,y:null,width:0,height:0};for(var o,s,a,r,h=0;h<i;h++)(n=t[h])instanceof ie?b.getRect(n,e):(null==e.x&&(e.x=n.x,e.y=n.y),o=Math.min(e.x,n.x),s=Math.min(e.y,n.y),a=Math.max(e.x+e.width,n.x),r=Math.max(e.y+e.height,n.y),e.x=o,e.y=s,e.width=a-o,e.height=r-s);return e},addPadding:function(t,e,i,n){n=n||-1;var o=e.getStyle(i)*n;0!=o&&b.grow(t,o,o),0!=(o=e.getStyle(i+".left")*n)&&(t.x-=o,t.width+=o),0!=(o=e.getStyle(i+".right")*n)&&(t.width+=o),0!=(o=e.getStyle(i+".top")*n)&&(t.y-=o,t.height+=o),0!=(o=e.getStyle(i+".bottom")*n)&&(t.height+=o),t.width<0&&(t.width=-t.width,t.x-=t.width),t.height<0&&(t.height=-t.height,t.y-=t.height)},grow:function(t,e,i){if(null==t)return null;null==i&&(i=e);var n=t.width+e+e;if(!(n<0)){var o=t.height+i+i;if(!(o<0))return t.x-=e,t.y-=i,t.width=n,t.height=o,t}},containsPoint:function(t,e,i){return arguments.length<3&&(i=e.y,e=e.x),!(!t||e<t.x||i<t.y||e>t.x+t.width||i>t.y+t.height)},getHotSpot:function(t,e,i,n,o){if("oval"===o)return{x:t+.5*i+.35*i,y:e+n/2-Math.sqrt(.1275)*n};if("circle"===o){var s=t+i/2,a=e+n/2,o=Math.min(i,n)/2;t=s-o,e=a-o;a=(i=2*o)/2,o=(n=2*o)/2,o=a*o/Math.sqrt(a*a+o*o);return{x:t+i/2+o,y:e+n/2-o}}e={x:t+i,y:e};return 3<i&&(e.x-=3),3<n&&(e.y+=3),e},getCircleRect:function(t){var e=Math.min(t.width,t.height)/2;return{x:t.x+t.width/2-e,y:t.y+t.height/2-e,width:2*e,height:2*e}},getEllipsePoint:function(t,e){if(!t||!e)return null;var i=t.x+t.width/2,n=t.y+t.height/2,o=e.x-i,s=e.y-n,e=t.width/2,t=t.height/2,e=Math.sqrt(1/(1/e/e+s*s/o/o/t/t));return{x:i+(e=o<0?-e:e),y:n+(0==o?0<s?t:-t:e*s/o)}},createMatrix:function(t,e,i){var n=Math.sin(t),t=Math.cos(t);return new X(t,n,-n,t,e*(1-t)+i*n,i*(1-t)-e*n)},calculatePointInfoAlongLineBySegments:function(t,e,i,n,o){return b.calculatePointInfoAlongLine(b.getPointObject(t,e),i,n,o)},calculatePointInfoAlongLine:function(t,e,i,n){if(e=void 0===e||e,i=i||0,n=n||0,!t||t.size()<2)throw"must more than two points";if(!e){var o=b.reversePath(t);return b.calculatePointInfoAlongLine(o,!0,i,n)}for(var s,a,r,h,l,c=0,u=(t=t._as?t._as:t).length,d=0;d<u;d++)if(r=t[d],0!=d){if(i<=0){s=l=b.calculatePointInfoOnStraightLine(b._getPoint(h),b._getControlPoint(r),i,n);break}if(i<c+(a=b._getLength(r,h))){s=l=b.getPathInfo(r,h,i-c,n,a);break}c+=a,h=r}else h=r;return null==s&&(h=t[u-1],e=b._getPoint(h),o=(h=h instanceof ie?h._as:h)instanceof Array?b._getControlPoint(h):b._getPoint(t[u-2]),o=Math.atan2(e.y-o.y,e.x-o.x),(l=b.transformPoint(e,o,i-c,n)).angle=o,s=l),s},reversePath:function(t){for(var e,i=new ie,n=null,o=(t=t._as?t._as:t).length-1;0<=o;o--)e=t[o],i.add(b._getReversePath(e,n)),n=e;return i},_getPoint:function(t){return(t=t._as?t._as:t)instanceof Array?t[t.length-1]:t},_getControlPoint:function(t){return(t=t._as?t._as:t)instanceof Array?t[t.length-2]:t},_getReversePath:function(t,e){t=b._getPoint(t);return null!=(e=e&&e._as?e._as:e)&&e instanceof Array?2==e.length?new ie([e[0],t]):new ie([e[1],e[0],t]):t},_getLength:function(t,e){var i=b._getPoint(e),e=b._getPoint(t);if((t=t instanceof ie?t._as:t)instanceof Array)return b.calculateCurveLength(i,t,1);t=e.y-i.y,i=e.x-i.x;return Math.sqrt(i*i+t*t)},getPathInfo:function(t,e,i,n,o){var s,a=b._getPoint(e),r=b._getPoint(t);return(t=t instanceof ie?t._as:t)instanceof Array?(o<0&&(o=b._getLength(t,e)),a=(s=b.calculatePointInfoOnCurveLine(a,t,i/o)).point,s=s.angle,i=0):s=Math.atan2(r.y-a.y,r.x-a.x),b.transformPoint(a,s,i,n)},transformPoint:function(t,e,i,n){n={x:i,y:n};return(n=b.createMatrix(e,0,0).transform(n)).x+=t.x,n.y+=t.y,{point:n,angle:e}},calculatePointInfoOnStraightLine:function(t,e,i,n){e=Math.atan2(e.y-t.y,e.x-t.x);return b.transformPoint(t,e,i,n)},calculatePointInfoOnCurveLine:function(t,e,i){if(i<0||1<i)throw"Illegal arguments";return 2==(e=e._as?e._as:e).length?b._calculatePointInfoOnCurveLine2(t,e[0],e[1],i):b._calculatePointInfoOnCurveLine3(t,e[0],e[1],e[2],i)},_calculatePointInfoOnCurveLine2:function(t,e,i,n){var o=2*(t.x+i.x-2*e.x)*n+2*e.x-2*t.x,s=2*(t.y+i.y-2*e.y)*n+2*e.y-2*t.y,o=Math.atan2(s,o);return{point:{x:(t.x+i.x-2*e.x)*n*n+(2*e.x-2*t.x)*n+t.x,y:(t.y+i.y-2*e.y)*n*n+(2*e.y-2*t.y)*n+t.y},angle:o}},_calculatePointInfoOnCurveLine3:function(t,e,i,n,o){var s=1-o,a=s*s*s,r=o*o*o;return{point:{x:a*t.x+3*o*s*s*e.x+3*o*o*s*i.x+r*n.x,y:a*t.y+3*o*s*s*e.y+3*o*o*s*i.y+r*n.y},angle:Math.atan2(b._bezeSpeedY(t,e,i,n,o),b._bezeSpeedX(t,e,i,n,o))}},calculateCurveLength:function(t,e,i){return 2==(e=e._as?e._as:e).length?b._calculateCurveLength(t,e[0],e[1],i):b._calculateBezierCurveLength(t,e[0],e[1],e[2],i)},_calculateCurveLength:function(t,e,i,n){if(n<=0||1<n)return 0;for(var o,s,a,r=Math.floor(n*(Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))+Math.sqrt((i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y)))/2),h=0,l=n/(r=r<=0?1:r),c=0;c<r;c++)o=2*(t.x+i.x-2*e.x)*(a=l*c)+2*e.x-2*t.x,s=2*(t.y+i.y-2*e.y)*a+2*e.y-2*t.y,o*=l,s*=l,h+=Math.sqrt(o*o+s*s);return h},_calculateBezierCurveLength:function(t,e,i,n,o){if(o<=0||1<o)return 0;var s=Math.floor(1e4*o);if(1==(1&s)&&s++,0==s)return 0;for(var a=Math.floor(s/2),r=0,h=0,l=o/s,c=0;c<a;c++)r+=b._bezeSpeed(t,e,i,n,(2*c+1)*l);for(c=1;c<a;c++)h+=b._bezeSpeed(t,e,i,n,2*c*l);return(b._bezeSpeed(t,e,i,n,0)+b._bezeSpeed(t,e,i,n,1)+2*h+4*r)*l/3},_bezeSpeedX:function(t,e,i,n,o){var s=1-o;return-3*t.x*s*s+3*e.x*s*s-6*e.x*s*o+6*i.x*s*o-3*i.x*o*o+3*n.x*o*o},_bezeSpeedY:function(t,e,i,n,o){var s=1-o;return-3*t.y*s*s+3*e.y*s*s-6*e.y*s*o+6*i.y*s*o-3*i.y*o*o+3*n.y*o*o},_bezeSpeed:function(t,e,i,n,o){var s=b._bezeSpeedX(t,e,i,n,o),o=b._bezeSpeedY(t,e,i,n,o);return Math.sqrt(s*s+o*o)},getPointObject:function(t,e){if(e&&0!=e.size()){var i=new ie;e=e._as,t=t._as;for(var n,o=0,s=e.length,a=t.length,r=0;r<s&&(n=e[r],o!=a);r++)"cubicto"===n?o<a-2&&i.add([t[o++],t[o++],t[o++]]):"quadto"===n?o<a-1&&i.add([t[o++],t[o++]]):o<a&&i.add(t[o++]);for(;o<a;o++)i.add(t[o]);return i}return t},calculateLineLength:function(t,e){if(!t||t.size()<2)return 0;if(e)return b.calculateLineLength(b.getPointObject(t,e));for(var i,n,o,s,a,r,h=(t=t._as).length,l=0,c=0;c<h;c++)o=t[c],0!=c?(i=(n=(n=o)instanceof ie?n._as:n)instanceof Array?(s=b.calculateCurveLength(i,n,1),n[n.length-1]):(r=o.y-i.y,a=o.x-i.x,s=Math.sqrt(a*a+r*r),n),l+=s):i=o;return l},toDegrees:function(t){return 180*t/Math.PI},toRadians:function(t){return t/180*Math.PI},getRadiansBetweenLines:function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},getAngle:function(t,e){return t.x===e.x?e.y===t.y?0:e.y>t.y?Math.PI/2:-Math.PI/2:Math.atan((e.y-t.y)/(e.x-t.x))}};Y.math=b;var r={getPoints:function(t){var e=new ie;return t.forEach(function(t){e.add({x:t.x,y:t.y}),e.add({x:t.x+t.width,y:t.y+t.height}),e.add({x:t.x+t.width,y:t.y}),e.add({x:t.x,y:t.y+t.height})}),e},rectangle:function(t){var e;return t.forEach(function(t){e=b.unionRect(e,t)}),e},oval:function(t){var e=r.rectangle(t),i=0,n=e.height/e.width,o=n*n,s=e.x+e.width/2,a=e.y+e.height/2;r.getPoints(t).forEach(function(t){var e=t.x-s,t=t.y-a,t=e*e+t*t/o;i<t&&(i=t)});n*=i=Math.sqrt(i);return{x:s-i,y:a-n,width:2*i,height:2*n}},circle:function(t){var e=r.rectangle(t),i=0,n=e.x+e.width/2,o=e.y+e.height/2;return r.getPoints(t).forEach(function(t){var e=t.x-n,t=t.y-o,t=e*e+t*t;i<t&&(i=t)}),i=Math.sqrt(i),{x:n-i,y:o-i,width:2*i,height:2*i}},roundrect:function(t){var e=r.rectangle(t),t=Math.min(e.width,e.height)/16;return b.grow(e,t,t),e},star:function(t){t=r.rectangle(t);return b.grow(t,t.width,t.height),t},triangle:function(t){t=r.rectangle(t);return t.x-=t.width/2,t.width*=2,t.y-=t.height,t.height*=2,t},hexagon:function(t){t=r.rectangle(t);return t.x-=t.width/2,t.width*=2,t},pentagon:function(t){t=r.rectangle(t);return t.x-=t.width/6,t.width+=t.width/3,t.y-=t.height/4,t.height+=t.height/4,t},diamond:function(t){t=r.rectangle(t);return t.x-=t.width/2,t.width+=t.width,t.y-=t.height/2,t.height+=t.height,t},trapezoidal:function(t){t=r.rectangle(t);return t.x-=t.width/2,t.width+=t.width,t.y-=t.height/2,t.height+=t.height,t}};Y.group=r;var h={"topleft.topleft":function(t,e){return{x:t.x-e.width,y:t.y-e.height}},"topleft.topright":function(t,e){return{x:t.x,y:t.y-e.height}},"top.top":function(t,e){return{x:t.x+t.width/2-e.width/2,y:t.y-e.height}},"topright.topleft":function(t,e){return{x:t.x+t.width-e.width,y:t.y-e.height}},"topright.topright":function(t,e){return{x:t.x+t.width,y:t.y-e.height}},topleft:function(t,e){return{x:t.x-e.width/2,y:t.y-e.height/2}},top:function(t,e){return{x:t.x-e.width/2+t.width/2,y:t.y-e.height/2}},topright:function(t,e){return{x:t.x-e.width/2+t.width,y:t.y-e.height/2}},"topleft.bottomleft":function(t,e){return{x:t.x-e.width,y:t.y}},"topleft.bottomright":function(t,e){return{x:t.x,y:t.y}},"top.bottom":function(t,e){return{x:t.x+t.width/2-e.width/2,y:t.y}},"topright.bottomleft":function(t,e){return{x:t.x-e.width+t.width,y:t.y}},"topright.bottomright":function(t,e){return{x:t.x+t.width,y:t.y}},"left.left":function(t,e){return{x:t.x-e.width,y:t.y+t.height/2-e.height/2}},left:function(t,e){return{x:t.x-e.width/2,y:t.y+t.height/2-e.height/2}},"left.right":function(t,e){return{x:t.x,y:t.y+t.height/2-e.height/2}},center:function(t,e){return{x:t.x+t.width/2-e.width/2,y:t.y+t.height/2-e.height/2}},"right.left":function(t,e){return{x:t.x+t.width-e.width,y:t.y+t.height/2-e.height/2}},right:function(t,e){return{x:t.x+t.width-e.width/2,y:t.y+t.height/2-e.height/2}},"right.right":function(t,e){return{x:t.x+t.width,y:t.y+t.height/2-e.height/2}},"bottomleft.topleft":function(t,e){return{x:t.x-e.width,y:t.y+t.height-e.height}},"bottomleft.topright":function(t,e){return{x:t.x,y:t.y+t.height-e.height}},"bottom.top":function(t,e){return{x:t.x+t.width/2-e.width/2,y:t.y+t.height-e.height}},"bottomright.topleft":function(t,e){return{x:t.x+t.width-e.width,y:t.y+t.height-e.height}},"bottomright.topright":function(t,e){return{x:t.x+t.width,y:t.y+t.height-e.height}},bottomleft:function(t,e){return{x:t.x-e.width/2,y:t.y+t.height-e.height/2}},bottom:function(t,e){return{x:t.x+t.width/2-e.width/2,y:t.y+t.height-e.height/2}},bottomright:function(t,e){return{x:t.x+t.width-e.width/2,y:t.y+t.height-e.height/2}},"bottomleft.bottomleft":function(t,e){return{x:t.x-e.width,y:t.y+t.height}},"bottomleft.bottomright":function(t,e){return{x:t.x,y:t.y+t.height}},"bottom.bottom":function(t,e){return{x:t.x+t.width/2-e.width/2,y:t.y+t.height}},"bottomright.bottomleft":function(t,e){return{x:t.x+t.width-e.width,y:t.y+t.height}},"bottomright.bottomright":function(t,e){return{x:t.x+t.width,y:t.y+t.height}},get:function(t,e,i){if(!e)throw"refRect can not be null";i=i||{width:0,height:0};var n=h[t];if(n)return n(e,i);throw"Can not resolve '"+t+"' position"}};Y.position=h;var m={preventDefault:function(t){ye.KEEP_DEFAULT_FUNCTION(t)||(t.preventDefault?t.preventDefault():t.preventManipulation?t.preventManipulation():t.returnValue=!1)},insertAfter:function(t,e){return e?e.parentNode.insertBefore(t,e.nextSibling):t.parentNode.insertBefore(t,t.parentNode.firstChild),t},forEach:function(t,e,i){if(m.isVisible(t)){for(var n=t.childNodes.length,o=0;o<n;o++)m.forEach(t.childNodes[o],e,i);i?e.call(i,t):e(t)}},setVisible:function(t,e){t.style.display=e?"block":"none"},isVisible:function(t){return"style"in t&&"none"!==t.style.display},release:function(t){for(var e=t.childNodes.length,i=0;i<e;i++)m.release(t.childNodes[i]);0<e&&m.clear(t),t._pool&&t._pool.release(t)},clear:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},setZoom:function(t,e){var i,n=t.style;n.setProperty&&(g.isFirefox?(n.setProperty("-moz-transform","scale("+e+")",null),n.setProperty("-moz-transform-origin","0 0",null)):g.isOpera?(n.setProperty("-o-transform","scale("+e+")",null),n.setProperty("-o-transform-origin","0 0",null)):g.isChrome||g.isSafari?(n.setProperty("-webkit-transform","scale("+e+")",null),n.setProperty("-webkit-transform-origin","0 0",null),i=null,t._webkitInvaildateDiv?i=t._webkitInvaildateDiv:(i=E.createElement("div"),t._webkitInvaildateDiv=i),i.parentNode&&i.parentNode==t?t.removeChild(i):t.appendChild(i)):g.isIE?(n.setProperty("-ms-transform","scale("+e+")",null),n.setProperty("-ms-transform-origin","0 0",null)):(n.setProperty("transform","scale("+e+")",null),n.setProperty("transform-origin","0 0",null)))},setRotate:function(t,e){var i,n=t.style;n.setProperty&&(g.isFirefox?(n.setProperty("-moz-transform","scale("+e+")",null),n.setProperty("-moz-transform-origin","0 0",null)):g.isOpera?(n.setProperty("-o-transform","scale("+e+")",null),n.setProperty("-o-transform-origin","0 0",null)):g.isChrome||g.isSafari?(n.setProperty("-webkit-transform","scale("+e+")",null),n.setProperty("-webkit-transform-origin","0 0",null),i=null,t._webkitInvaildateDiv?i=t._webkitInvaildateDiv:(i=E.createElement("div"),t._webkitInvaildateDiv=i),i.parentNode&&i.parentNode==t?t.removeChild(i):t.appendChild(i)):g.isIE?(n.setProperty("-ms-transform","scale("+e+")",null),n.setProperty("-ms-transform-origin","0 0",null)):(n.setProperty("transform","scale("+e+")",null),n.setProperty("transform-origin","0 0",null)))},setCSSStyle:function(t,e,i){t.style.setProperty(e,i,null)},removeCSSStyle:function(t,e){t.style.removeProperty(e)},getCSSStyle:function(t,e){return t.style.getPropertyValue(e)},setBorderRaidus:function(t,e){g.isFirefox?t.style.MozBorderRadius=e:t.style.borderRadius=e},createSelect:function(t,e){var i,n,o,s=E.createElement("select");if(Array.isArray(t))for(i=0;i<t.length;i++)n=t[i],(o=E.createElement("option")).innerHTML=n,o.setAttribute("value",n),n===e&&o.setAttribute("selected","true"),s.appendChild(o);else for(i=0;i<t.values.length;i++)n=t.values[i],(o=E.createElement("option")).innerHTML=t.map[n],o.setAttribute("value",n),n===e&&o.setAttribute("selected","true"),s.appendChild(o);return s},createImg:function(t){var e=E.createElement("img");return e.style.position="absolute","string"==typeof t&&e.setAttribute("src",t),e},createView:function(t,e){var i=E.createElement("div");return i.style.position=ye.VIEW_POSITION,i.style.fontSize=ye.VIEW_FONT_SIZE,i.style.fontFamily=ye.VIEW_FONT_FAMILY,i.style.cursor="default",i.style.outline="none",i.style.textAlign="left",i.style.msTouchAction="none",i.style.touchAction="none",i.tabIndex=0,e||(i.onmousedown=m.preventDefault),i.style.setProperty&&(i.style.setProperty("-khtml-user-select","none",null),i.style.setProperty("-webkit-user-select","none",null),i.style.setProperty("-moz-user-select","none",null),i.style.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",null)),t&&(i.style.overflow=t),i},createDiv:function(){var t=E.createElement("div");return t.style.position="absolute",t.style.msTouchAction="none",t.style.touchAction="none",t},createCanvas:function(t,e){if(t=t||0,e=e||0,o)return new n(t,e);var i=E.createElement("canvas");return i.style.position="absolute",i.style.msTouchAction="none",i.style.touchAction="none",i.width=t,i.height=e,i},setCanvas:function(t,e,i,n,o){2===arguments.length&&(i=e.y,n=e.width,o=e.height,e=e.x),t.style.left=e+"px",t.style.top=i+"px",t.setAttribute("width",n),t.setAttribute("height",o),t._viewRect={x:e,y:i,width:n,height:o};var s=t.getContext("2d");return 0!==s.shadowBlur&&(s.shadowOffsetX=0,s.shadowOffsetY=0,s.shadowBlur=0,s.shadowColor="rgba(0,0,0,0.0)"),s.clearRect(0,0,n,o),s.translate(-e,-i),s},setImg:function(t,e,i){t.setAttribute("src",e),t.style.left=i.x+"px",t.style.top=i.y+"px",t.style.width=i.width+"px",t.style.height=i.height+"px",t._viewRect=Y.clone(i)},setDiv:function(t,e,i,n,o){n=Y.num(n)?n:0,t.style.left=e.x-n+"px",t.style.top=e.y-n+"px",t.style.width=e.width+"px",t.style.height=e.height+"px",t._viewRect=Y.clone(e),t.style.backgroundColor=i||"",t.style.border=0<n?n+"px "+o+" solid":""},changeTypeForMS:function(t){var e,i=t;return 0!==t.indexOf("MSPointer")&&0!==t.indexOf("pointer")||(0===t.indexOf("MSPointer")?(e=t.substring(9,10).toLowerCase(),e+=t.substring(10)):e=t.substring(7,8),window.MSPointerEvent?i="MSPointer"+e.substring(0,1).toUpperCase()+e.substring(1):window.PointerEvent&&(i="pointer"+e)),i},addEventListener:function(t,e,i,n){var o,s="_"+(t=this.changeTypeForMS(t))+"_";n[s]||((o=function(t){o.instance[o.method](t)}).method=e,(o.instance=n)[s]=o,i.addEventListener(t,o,!1))},removeEventListener:function(t,e,i){var n="_"+(t=this.changeTypeForMS(t))+"_",o=i[n];o&&(e.removeEventListener(t,o,!1),delete i[n])},isValidEvent:function(t,e){if(!e)return!1;if(e.target===t)if(g.isFirefox){if(t.clientHeight<t.scrollHeight&&e.layerX<25)return!1;if(t.clientWidth<t.scrollWidth&&e.layerY<25)return!1}else if(e.offsetX>t.clientWidth||e.offsetY>t.clientHeight)return!1;return!0},getLogicalPoint:function(t,e,i,n){i=i||1;var o=t.getBoundingClientRect();if(g.isTouchable&&e.changedTouches&&0<e.changedTouches.length)var s=e.changedTouches[0],a=g.isAndroid?0:lt.scrollLeft(),r=g.isAndroid?0:lt.scrollTop(),r={x:(s.clientX+t.scrollLeft-o.left-a)/i,y:(s.clientY+t.scrollTop-o.top-r)/i};else{if(!m.isValidEvent(t,e))return null;r={x:(e.clientX-o.left+t.scrollLeft)/i,y:(e.clientY-o.top+t.scrollTop)/i}}return r},handle_mousedown:function(t,e){m.target&&m.handle_mouseup(e),window.addEventListener("mousemove",m.handle_mousemove,!1),window.addEventListener("mouseup",m.handle_mouseup,!1),m.target=t},handle_mousemove:function(t){m.target.handle_mousemove&&m.target.handle_mousemove(t),m.target.handleMouseMove&&m.target.handleMouseMove(t)},handle_mouseup:function(t){m.target.handle_mouseup&&m.target.handle_mouseup(t),m.target.handleMouseUp&&m.target.handleMouseUp(t),window.removeEventListener("mousemove",m.handle_mousemove,!1),window.removeEventListener("mouseup",m.handle_mouseup,!1),delete m.target},getClientPoint:function(t){return{x:t.clientX,y:t.clientY}},windowWidth:function(){return"number"==typeof window.innerWidth?window.innerWidth:E.documentElement&&E.documentElement.clientWidth?E.documentElement.clientWidth:E.body&&E.body.clientWidth?E.body.clientWidth:0},windowHeight:function(){return"number"==typeof window.innerHeight?window.innerHeight:E.documentElement&&E.documentElement.clientHeight?E.documentElement.clientHeight:E.body&&E.body.clientHeight?E.body.clientHeight:0}},R={cache:{},g:(Y.html=m).createCanvas().getContext("2d"),getTextSize:function(t,e){R.g.font=t||ye.FONT;t=R.cache[R.g.font];t||(t=2*R.g.measureText("e").width+4,R.cache[R.g.font]=t),e=e||"";for(var i,n=(e=String(e)).split("\n"),e=n.length,o=0,s=e-1;0<=s;s--)o<(i=R.g.measureText(n[s]).width)&&(o=i);return{width:o+4,height:t*e}},getSubStringInLength:function(t,e,i){var r=this,h=function(t,e,i,n,o){if(e<=t)return n.substring(0,t+1);var s=Math.floor((t+e)/2),a=n.substring(0,s+1);if(o<r.getTextSize(i,a).width)return h(t,s-1,i,n,o);t=s+1,s=n.substring(0,t+1);return o<r.getTextSize(i,s).width?a:h(t,e,i,n,o)};return i<this.getTextSize(t,e).width?h(0,e.length-1,t,e,i):e},_getCollapseTextInLength:function(t,e,i){var n=this.getTextSize(t,e).width;if(i<n){for(var o=0,s="",a=e,r=n;i<r;){var h=this.getSubStringInLength(t,a,i),s=s+h+"\n";o+=h.length,a=e.substring(o),r=this.getTextSize(t,a).width}return s+a}return e},getCollapseTextInLength:function(t,e,i){for(var n=e,o=e,s="",a=0;a<n.length;a++)(l=n.charAt(a)).match(/[^\x00-\x80]/g)?s+="2":l.match(/\s/)?s+="3":s+="1";for(var r=1;r<4;r++)for(var h=1;h<4;h++)r!==h&&(s=s.replace(new RegExp(r+""+h,"g"),r+"^"+h));for(var l,r=0;r<s.length;r++)(l=s.charAt(r)).match(/\^/g)&&(o=this.replacePos(o,r+1,"^"));for(var c=o.split("^"),u="",d=i,_=0,g=!1,r=0;r<c.length;r++){for(var f=Y.g.getTextSize(t,c[0]),A=c[0],p=Y.g._getCollapseTextInLength(t,A,d).split("\n"),m=Math.ceil(f.width/d),h=0;h<m;h++)if(""===u)u=p[h];else{if(""===p[h])break;u+="\n"+p[h]}if(0===r)break}for(r=1;r<c.length;r++)if(g?_+=Y.g.getTextSize(t,c[r-1]).width:_=Y.g.getTextSize(t,c[r-1]).width,(f=Y.g.getTextSize(t,c[r])).width+_%d<d)u+=c[r],g=!0;else for(A=c[r],p=Y.g._getCollapseTextInLength(t,A,d).split("\n"),m=Math.ceil(f.width/d),h=0;h<m;h++)u+="\n"+p[h],_=0;return u},replacePos:function(t,e,i){return t=t.substr(0,e-1)+i+t.substring(e-1,t.length)},drawText:function(t,e,i,n,o,s,a){e=e||"",e=String(e),n=n||ye.FONT;var r=s?s:"center";t.font=n,t.fillStyle=o,t.textAlign=r,t.textBaseline="middle";var h,l=e.split("\n"),c=l.length,u=0,d=i?void 0===i.width?(h=i.x,i.y):(u=a||i.height/c,"left"==r?h=i.x:"center"==r&&(h=i.x+i.width/2),i.y+u/2):h=0;g.isOpera&&(d-=2);for(var _=0;_<c;_++)"right"==r&&(t.textAlign="left",h=i.x+i.width-R.getTextSize(n,l[_]).width),t.fillText(l[_],h,d),d+=u},drawArc:function(t,e,i,n,o,s,a,r){var h,l,c,u,d,_=-((o=Math.abs(o)>2*Math.PI?2*Math.PI:o)/(h=Math.ceil(Math.abs(o)/(Math.PI/4)))),g=-n;if(0<h){o=e+Math.cos(n)*s,n=i+Math.sin(-n)*a,r?t.lineTo(o,n):t.moveTo(o,n);for(var f=0;f<h;f++)d=(g+=_)-_/2,l=e+Math.cos(g)*s,c=i+Math.sin(g)*a,u=e+Math.cos(d)*(s/Math.cos(_/2)),d=i+Math.sin(d)*(a/Math.cos(_/2)),t.quadraticCurveTo(u,d,l,c)}},dashedLine:function(t,e,i,n,o,s,a){var r=s-n,h=a-o,a=Math.sqrt(r*r+h*h);if(0!=a){r/=a,h/=a;for(var l=a,c=-i.offset,u=i.drawing,d=i.patternIndex;c<l;)l<=(c+=e[d])&&(i.offset=e[d]-(c-l),i.patternIndex=d,i.drawing=u,c=l),u?t.lineTo(n+c*r,o+c*h):t.moveTo(n+c*r,o+c*h),u=!u,d=(d+1)%e.length}},drawLinePoints:function(t,e,i,n,o){var s,a,r,h,l,c=0,u=0,d=e.size(),_=i&&0<i.length&&i[0]&&i[1]?new ot(t,i[0],1<i.length?i[1]:i[0]):t;if(n)for(u=0,l=n.size();u<l;u++)if("moveto"===(s=n.get(u))&&c<d)a=e.get(c++),_.moveTo(a.x,a.y);else if("lineto"===s&&c<d)a=e.get(c++),_.lineTo(a.x,a.y);else if("cubicto"===s&&c<d-2)a=e.get(c++),r=e.get(c++),h=e.get(c++),_.bezierCurveTo(a.x,a.y,r.x,r.y,h.x,h.y);else{if(!("quadto"===s&&c<d-1))throw"Can not resolve segment '"+s+"'";a=e.get(c++),r=e.get(c++),_.quadraticCurveTo(a.x,a.y,r.x,r.y)}else this._drawLine(e,_);o&&_.closePath()},_drawLine:function(t,e){var i,n,o,s=0,a=t.size(),r=t.get(0);for(e.moveTo(r.x,r.y),s=1;s<a;s++)(o=t.get(s)).size?2===(n=o.size())?(r=o.get(0),i=o.get(1),e.quadraticCurveTo(r.x,r.y,i.x,i.y)):3===n&&(r=o.get(0),i=o.get(1),n=o.get(2),e.bezierCurveTo(r.x,r.y,i.x,i.y,n.x,n.y)):e.lineTo(o.x,o.y)},drawRoundRect:function(t,e,i,n,o,s,a,r,h){6===arguments.length&&(h=r=a=s);var l=e+n,c=i+o,u=n<o?2*n:2*o;s=s<u?s:u,a=a<u?a:u,r=r<u?r:u;var d=.292893218813453*(h=h<u?h:u),u=.585786437626905*h;t.moveTo(l,c-h),t.quadraticCurveTo(l,c-u,l-d,c-d),t.quadraticCurveTo(l-u,c,l-h,c),d=.292893218813453*r,u=.585786437626905*r,t.lineTo(e+r,c),t.quadraticCurveTo(e+u,c,e+d,c-d),t.quadraticCurveTo(e,c-u,e,c-r),d=.292893218813453*s,u=.585786437626905*s,t.lineTo(e,i+s),t.quadraticCurveTo(e,i+u,e+d,i+d),t.quadraticCurveTo(e+u,i,e+s,i),d=.292893218813453*a,u=.585786437626905*a,t.lineTo(l-a,i),t.quadraticCurveTo(l-u,i,l-d,i+d),t.quadraticCurveTo(l,i+u,l,i+a),t.lineTo(l,c-h)},drawVector:function(t,e,i,n,o,s,a){var r;4===arguments.length?(o=n.y,s=n.width,a=n.height,n=n.x):5===arguments.length&&"roundrect"===e&&((r={}).topLeft=o,r.topRight=o,r.bottomLeft=o,r.bottomRight=o,o=n.y,s=n.width,a=n.height,n=n.x);var h=R["_"+e];h&&(t.beginPath(),i&&0<i.length&&(t=new ot(t,i[0],1<i.length?i[1]:i[0])),5===arguments.length&&"roundrect"===e?h(t,{x:n,y:o,width:s,height:a},r):h(t,n,o,s,a))},_rectangle:function(t,e,i,n,o){t.rect(e,i,n,o)},_circle:function(t,e,i,n,o){e+=n/2,i+=o/2,o=Math.min(n,o)/2;t instanceof ot?R.drawArc(t,e,i,0,2*Math.PI,o,o,!1):t.arc(e,i,o,0,2*Math.PI,!0)},_oval:function(t,e,i,n,o){var s,a,r,h;t instanceof ot?R.drawArc(t,e+n/2,i+o/2,0,2*Math.PI,n/2,o/2,!1):(s=n/2*.5522848,a=o/2*.5522848,r=e+n,h=i+o,n=e+n/2,t.moveTo(e,o=i+o/2),t.bezierCurveTo(e,o-a,n-s,i,n,i),t.bezierCurveTo(n+s,i,r,o-a,r,o),t.bezierCurveTo(r,o+a,n+s,h,n,h),t.bezierCurveTo(n-s,h,e,o+a,e,o))},_roundrect:function(t,e,i,n,o){var s;3===arguments.length?(s=i,i=e.y,n=e.width,o=e.height,e=e.x,s.topLeft?R.drawRoundRect(t,e,i,n,o,s.topLeft):R.drawRoundRect(t,e,i,n,o,Math.min(Math.min(n,o)/4,10))):R.drawRoundRect(t,e,i,n,o,Math.min(Math.min(n,o)/4,10))},_star:function(t,e,i,n,o){var s=2*n,a=2*o,r=e+n/2,h=i+o/2;t.moveTo(r-s/4,h-a/12),t.lineTo(e+.306*n,i+.579*o),t.lineTo(r-s/6,h+a/4),t.lineTo(e+n/2,i+.733*o),t.lineTo(r+s/6,h+a/4),t.lineTo(e+.693*n,i+.579*o),t.lineTo(r+s/4,h-a/12),t.lineTo(e+.611*n,i+.332*o),t.lineTo(r+0,h-a/4),t.lineTo(e+.388*n,i+.332*o),t.closePath()},_triangle:function(t,e,i,n,o){t.moveTo(e+n/2,i),t.lineTo(e+n,i+o),t.lineTo(e,i+o),t.closePath()},_hexagon:function(t,e,i,n,o){t.moveTo(e,i+o/2),t.lineTo(e+n/4,i+o),t.lineTo(e+3*n/4,+i+o),t.lineTo(e+n,i+o/2),t.lineTo(e+3*n/4,i),t.lineTo(e+n/4,i),t.closePath()},_pentagon:function(t,e,i,n,o){var s=2*n,a=2*o,n=e+n/2,o=i+o/2;t.moveTo(n-s/4,o-a/12),t.lineTo(n-s/6,o+a/4),t.lineTo(n+s/6,o+a/4),t.lineTo(n+s/4,o-a/12),t.lineTo(n+0,o-a/4),t.closePath()},_trapezoidal:function(t,e,i,n,o){t.moveTo(e+n/4,i),t.lineTo(e,i+o),t.lineTo(e+n,i+o),t.lineTo(e+3*n/4,i),t.closePath()},_diamond:function(t,e,i,n,o){t.moveTo(e+n/2,i),t.lineTo(e,i+o/2),t.lineTo(e+n/2,i+o),t.lineTo(e+n,i+o/2),t.closePath()},fill:function(t,e,i,n,o,s,a,r){var h=j[i];t.fillStyle=h?5===arguments.length?h(t,e,n,o.x,o.y,o.width,o.height):h(t,e,n,o,s,a,r):e},createRadialGradient:function(t,e,i,n,o,s,a,r,h){a=t.createRadialGradient(n+s*r,o+a*h,Math.min(s,a)/24,n+s/2,o+a/2,Math.max(s,a)/2);return a.addColorStop(0,i),a.addColorStop(1,e),a},drawPath:function(t,e,i,n,o,s,a,r){var h=t._element,l=t.getBodyRect();n&&b.addPadding(l,h,i+".padding",1);var c=Y.clone(l),u=h.getStyle(i+".outline.width");0<u&&b.grow(c,u/2,u/2);n=t.setShadow(t,e,c);0!=h.getAngle()&&(h instanceof Me||(l=h.getOriginalRect()),x.Util.rotateCanvas(n,l,h.getAngle()));e=h.getStyle(i+".fill");e&&(_=t._innerColor&&!st.hasDefault(t._element)?t._innerColor:h.getStyle(i+".fill.color"),(d=h.getStyle(i+".gradient"))?R.fill(n,_,d,h.getStyle(i+".gradient.color"),l):n.fillStyle=_);var d=h.getStyle(i+".shape"),_=h.getStyle("group.shape.roundrect.radius");return e&&(n.beginPath(),s?R.drawLinePoints(n,s,null,a,r):"roundrect"===d&&"group"===i?R.drawVector(n,d,null,l,_):R.drawVector(n,d,null,l),n.fill()),0<u&&(n.lineWidth=u,n.lineCap=h.getStyle(i+".cap"),n.lineJoin=h.getStyle(i+".join"),n.strokeStyle=h.getStyle(i+".outline.color"),n.beginPath(),s?R.drawLinePoints(n,s,o,a,r):"roundrect"===d&&"group"===i?R.drawVector(n,d,o,l,_):R.drawVector(n,d,o,l),n.stroke()),c},draw3DRect:function(t,e,i,n,o,s,a){if(0!==i){arguments.length<=4&&(a=n.height,s=n.width,o=n.y,n=n.x);var r,h,l=0<i;if(i=Math.abs(i),t.lineWidth=1,t.lineCap="square",1===i)r=R.brighter(e),h=R.darker(e),t.strokeStyle=l?r:h,t.beginPath(),t.moveTo(n,o),t.lineTo(n,o+a),t.moveTo(n,o),t.lineTo(n+s,o),t.closePath(),t.stroke(),t.strokeStyle=l?h:r,t.beginPath(),t.moveTo(n,o+a),t.lineTo(n+s,o+a),t.moveTo(n+s,o),t.lineTo(n+s,o+a),t.closePath(),t.stroke();else for(var c=2*i,u=50/c,d=0;d<c;d++)r=R.brighter(e,50-d*u),h=R.darker(e,50-d*u),n+=.5,o+=.5,--s,--a,t.strokeStyle=l?r:h,t.beginPath(),t.moveTo(n,o),t.lineTo(n,o+a),t.moveTo(n,o),t.lineTo(n+s,o),t.closePath(),t.stroke(),t.strokeStyle=l?h:r,t.beginPath(),t.moveTo(n,o+a),t.lineTo(n+s,o+a),t.moveTo(n+s,o),t.lineTo(n+s,o+a),t.closePath(),t.stroke()}},brighter:function(t,e){return R.adjustBrightness2(t,e=e||50)},darker:function(t,e){return R.adjustBrightness2(t,-(e=e||50))},adjustBrightness2:function(t,e){var i,n;if(0===e)return t;var t=le(t),o=e<0?(e=(100+e)/100,i=Math.ceil(t.r*e),n=Math.ceil(t.g*e),Math.ceil(t.b*e)):(i=t.r,n=t.g,o=t.b,i+=(255-i)*(e/=100),n+=(255-n)*e,o+=(255-o)*e,i=Math.min(Math.ceil(i),255),n=Math.min(Math.ceil(n),255),Math.min(Math.ceil(o),255));return"rgba("+i+","+n+","+o+",1)"},getColorArray:function(t){return he.clearRect(0,0,1,1),he.fillStyle=t,he.fillRect(0,0,1,1),he.getImageData(0,0,1,1).data},hit:function(t,e,i,n){if(!t)return!1;var o=t._viewRect;if(!o)return!1;if(e-=o.x,i-=o.y,e<0||i<0||e>=o.width||i>=o.height)return!1;try{for(var s=t.getContext("2d").getImageData(e,i,1,1).data,a=0,r=s.length;a<r;a+=4)if(0!==s[a+3])return!0}catch(t){return!0}return!1},intersects:function(t,e){if(!t)return!1;if(!(e=b.intersection(e,t._viewRect)))return!1;e.x-=t._viewRect.x,e.y-=t._viewRect.y;try{for(var i=t.getContext("2d").getImageData(e.x,e.y,e.width,e.height).data,n=0,o=i.length;n<o;n+=4)if(0!==i[n+3])return!0}catch(t){}return!1},strokeRect:function(t,e,i,n){e&&(t.beginPath(),t.strokeStyle=i||x.Util.randomColor(),t.lineWidth=n||2,t.strokeRect(e.x,e.y,e.width,e.height),t.stroke())}};Y.g=R;var j={"linear.southwest":function(t,e,i,n,o,s,a){o=t.createLinearGradient(n,o+a,n+s,o);return o.addColorStop(0,i),o.addColorStop(1,e),o},"linear.southeast":function(t,e,i,n,o,s,a){o=t.createLinearGradient(n+s,o+a,n,o);return o.addColorStop(0,i),o.addColorStop(1,e),o},"linear.northwest":function(t,e,i,n,o,s,a){o=t.createLinearGradient(n+s,o+a,n,o);return o.addColorStop(0,e),o.addColorStop(1,i),o},"linear.northeast":function(t,e,i,n,o,s,a){a=t.createLinearGradient(n+s,o,n,o+a);return a.addColorStop(0,i),a.addColorStop(1,e),a},"linear.north":function(t,e,i,n,o,s,a){a=t.createLinearGradient(n,o,n,o+a);return a.addColorStop(0,i),a.addColorStop(1,e),a},"linear.south":function(t,e,i,n,o,s,a){a=t.createLinearGradient(n,o,n,o+a);return a.addColorStop(0,e),a.addColorStop(1,i),a},"linear.west":function(t,e,i,n,o,s,a){o=t.createLinearGradient(n,o,n+s,o);return o.addColorStop(0,i),o.addColorStop(1,e),o},"linear.east":function(t,e,i,n,o,s,a){o=t.createLinearGradient(n,o,n+s,o);return o.addColorStop(0,e),o.addColorStop(1,i),o},"radial.center":function(t,e,i,n,o,s,a){return R.createRadialGradient(t,e,i,n,o,s,a,.5,.5)},"radial.southwest":function(t,e,i,n,o,s,a){return R.createRadialGradient(t,e,i,n,o,s,a,.25,.75)},"radial.southeast":function(t,e,i,n,o,s,a){return R.createRadialGradient(t,e,i,n,o,s,a,.75,.75)},"radial.northwest":function(t,e,i,n,o,s,a){return R.createRadialGradient(t,e,i,n,o,s,a,.25,.25)},"radial.northeast":function(t,e,i,n,o,s,a){return R.createRadialGradient(t,e,i,n,o,s,a,.75,.25)},"radial.north":function(t,e,i,n,o,s,a){return R.createRadialGradient(t,e,i,n,o,s,a,.5,.25)},"radial.south":function(t,e,i,n,o,s,a){return R.createRadialGradient(t,e,i,n,o,s,a,.5,.75)},"radial.west":function(t,e,i,n,o,s,a){return R.createRadialGradient(t,e,i,n,o,s,a,.25,.5)},"radial.east":function(t,e,i,n,o,s,a){return R.createRadialGradient(t,e,i,n,o,s,a,.75,.5)},"spread.horizontal":function(t,e,i,n,o,s,a){o=t.createLinearGradient(n,o,n+s,o);return o.addColorStop(0,e),o.addColorStop(.5,i),o.addColorStop(1,e),o},"spread.vertical":function(t,e,i,n,o,s,a){a=t.createLinearGradient(n,o,n,o+a);return a.addColorStop(0,e),a.addColorStop(.5,i),a.addColorStop(1,e),a},"spread.diagonal":function(t,e,i,n,o,s,a){a=t.createLinearGradient(n+s,o,n,o+a);return a.addColorStop(0,e),a.addColorStop(.5,i),a.addColorStop(1,e),a},"spread.antidiagonal":function(t,e,i,n,o,s,a){a=t.createLinearGradient(n,o,n+s,o+a);return a.addColorStop(0,e),a.addColorStop(.5,i),a.addColorStop(1,e),a},"spread.north":function(t,e,i,n,o,s,a){a=t.createLinearGradient(n,o-a/4,n,o+a+a/4);return a.addColorStop(0,e),a.addColorStop(1/3,i),a.addColorStop(2/3,e),a.addColorStop(1,i),a},"spread.south":function(t,e,i,n,o,s,a){a=t.createLinearGradient(n,o-a/4,n,o+a+a/4);return a.addColorStop(0,i),a.addColorStop(1/3,e),a.addColorStop(2/3,i),a.addColorStop(1,e),a},"spread.west":function(t,e,i,n,o,s,a){o=t.createLinearGradient(n-s/4,o,n+s+s/4,o);return o.addColorStop(0,e),o.addColorStop(1/3,i),o.addColorStop(2/3,e),o.addColorStop(1,i),o},"spread.east":function(t,e,i,n,o,s,a){o=t.createLinearGradient(n-s/4,o,n+s+s/4,o);return o.addColorStop(0,i),o.addColorStop(1/3,e),o.addColorStop(2/3,i),o.addColorStop(1,e),o}};x.Util={getVersion:function(){return"5.8.4"},registerImage:function(t,e,i,n,o){Y.registerImage(t,e,i,n,o)},registerImageByUrl:function(t,e,i,n){var o,s;e&&t&&0<t.indexOf(".json")?((o=new XMLHttpRequest).onreadystatechange=function(){var t;4===o.readyState&&200===o.status&&(t=JSON.parse(o.responseText),x.Util.registerImage(e,t),i&&i.invalidateElementUIs(),n&&n())},o.open("GET",t,!0),o.send()):((s=new a).src=t,s.onload=function(){x.Util.registerImage(e,s,s.width,s.height),s.onload=null,i&&i.invalidateElementUIs(),n&&n()})},getRegisteredImageNames:function(){return Y.getRegisteredImageNames()},unregisterImage:function(t){Y.unregisterImage(t)},getImageAsset:function(t){return Y.getImageAsset(t)},validateLicense:function(t){Y.validateLicense(t)},getLicense:function(){return e},isPermissionGIS:function(){return nt()},moveElements:function(t,e,i,n,o,s){var a,r,h;0===e&&0===i||t&&!t.isEmpty()&&((a=x.animate.AnimateManager).endAnimate(),t=st.filterMovingElements(t),n&&(r=new ie,h=new ie),t.forEach(function(t){t instanceof Re&&(n?(r.add(t),h.add({x:t.getX()+e,y:t.getY()+i})):t.translate(e,i))}),n?a.start(new x.animate.AnimateLocation(r,h,o)):o&&o())},isTypeOf:function(t,e){if(t===e)return!0;for(var i=t.superClass;i;){if(i===e.prototype)return!0;i=i.constructor.superClass}return!1},setFocus:function(t){var e,i,n,o,s;E.activeElement!==t&&(n=E.documentElement,o=E.body,n&&(g.isIE||g.isOpera||n.scrollLeft||n.scrollTop)?(e=n.scrollLeft,i=n.scrollTop,s=n):o&&(e=o.scrollLeft,i=o.scrollTop,s=o),t.focus(),s&&(s.scrollLeft=e,s.scrollTop=i))},isOpera:g.isOpera,isIE:g.isIE,isFirefox:g.isFirefox,isChrome:g.isChrome,isSafari:g.isSafari,isIPhone:g.isIPhone,isIPod:g.isIPod,isIPad:g.isIPad,isAndroid:g.isAndroid,isWebOS:g.isWebOS,isTouchable:g.isTouchable,ext:function(t,e,i){Y.ext(t,e,i)},getValue:function(t,e,i){return Y.getValue(t,e,i)},setValue:function(t,e,i){Y.setValue(t,e,i)},grow:function(t,e,i){b.grow(t,e,i)},containsPoint:function(t,e,i){return b.containsPoint.apply(null,arguments)},intersects:function(t,e){return b.intersects(t,e)},getRect:function(t){return b.getRect(t)},unionRect:function(t,e){return b.unionRect(t,e)},createDiv:function(){return m.createDiv()},createCanvas:function(){return m.createCanvas()},setCanvas:function(t,e,i,n,o){return m.setCanvas.apply(null,arguments)},drawVector:function(t,e,i,n,o,s,a){R.drawVector.apply(null,arguments)},fill:function(t,e,i,n,o,s,a,r){R.fill.apply(null,arguments)},getClass:function(t){return Y.getClass(t)},getAllClassNames:function(){var t,e=[];for(t in Y.classCache)e.push(t);return e},newInstance:function(t){return Y.newInstance.apply(null,arguments)},isDeserializing:function(){return Y.isDeserializing},addEventListener:function(t,e,i,n){m.addEventListener(t,e,i,n)},removeEventListener:function(t,e,i){m.removeEventListener(t,e,i)},drawArrow:function(t,e,i,n,o,s,a,r,h,l,c,u,d){ne.drawArrow.apply(null,arguments)},calculatePointAngleAlongLine:function(t,e,i,n,o){return b.calculatePointInfoAlongLineBySegments(t,e,i,n,o)},getSubNetwork:function(t){return st.getSubNetwork(t)},transformPoint:function(t,e,i,n){return b.transformPoint(t,e,i,n)},getToolTipDiv:function(){return ut.getToolTipDiv()},showToolTip:function(t,e){ut.showToolTip(t,e)},hideToolTip:function(){ut.hideToolTip()},resetToolTip:function(){ut.resetToolTip()},setCSSStyle:function(t,e,i){m.setCSSStyle(t,e,i)},removeCSSStyle:function(t,e){m.removeCSSStyle(t,e)},getCSSStyle:function(t,e){return m.getCSSStyle(t,e)},toDegrees:function(t){return b.toDegrees(t)},toRadians:function(t){return b.toDegrees(t)},getRadiansBetweenLines:function(t,e){return b.getRadiansBetweenLines(t,e)},getElementsBounds:function(t,n){var o=null;return t.forEach(function(t){var e,i;t.getRect&&(i=(i=n&&(e=n.getElementUI(t))?e.getViewRect():i)||t.getRect(),o=o?x.Util.unionRect(o,i):i)}),o},getPointIndex:function(t,e,i){if(i=i||10,t)for(var n=t.size();n--;)if(b.getDistance(t.get(n),e)<=i)return n;return-1},registerVectorShape:function(t,e){Y.g["_"+t]=e},rotateCanvas:function(t,e,i){t.translate(e.x+e.width/2,e.y+e.height/2),t.rotate(i*Math.PI/180),t.translate(-(e.x+e.width/2),-(e.y+e.height/2))},registerShape:function(t,e){Ft(t,e)},registerDraw:function(t,e){zt(t,e)},getFilterColor:function(t,e){return ce(t,e)},registerGifImage:function(t,e){},parseVectorData:function(t){return gt(t)},getSharedLinks:function(e,i){var t=e.getLinks(),n=i.getLinks();return t&&0!=t.size()&&n&&0!=n.size()?(t.size()>n.size()?t:n).toList(function(t){return t.getFromNode()==e&&t.getToNode()==i||t.getFromNode()==i&&t.getToNode()==e}):null},isSharedLinks:function(e,i){var n=!1,t=e.getLinks(),o=i.getLinks();return t&&0!=t.size()&&o&&0!=o.size()&&(t.size()>o.size()?t:o).forEach(function(t){return!(t.getFromNode()==e&&t.getToNode()==i||t.getFromNode()==i&&t.getToNode()==e)||!(n=!0)}),n},playAnimate:Wt,pauseAnimate:function(t){t.pause()},resumeAnimate:function(t){t.resume()},stopAnimate:function(t,e){Zt(t,e)},pauseAllAnimates:function(){Object.keys(Kt).forEach(function(t){t=Kt[t];t&&t.pause()})},resumeAllAnimates:function(){Object.keys(Kt).forEach(function(t){t=Kt[t];t&&t.resume()})},stopAllAnimates:function(t){var e;null==(e=t)&&(e=!0),Object.keys(Kt).forEach(function(t){t=Kt[t];t&&(e&&Yt(t,t.to),t.onStop&&t.onStop())}),Kt={}},randomColor:function(){return"#"+("00000"+(16777216*this.random()<<0).toString(16)).substr(-6)},random:function(){return Math.random()},getHSVColor:function(t,e,i){var n,o,s,a,r,h,l;switch(t&&void 0===e&&void 0===i&&(e=t.s,i=t.v,t=t.h),r=i*(1-e),h=i*(1-(t=6*t-(a=Math.floor(6*t)))*e),l=i*(1-(1-t)*e),a%6){case 0:n=i,o=l,s=r;break;case 1:n=h,o=i,s=r;break;case 2:n=r,o=i,s=l;break;case 3:n=r,o=h,s=i;break;case 4:n=l,o=r,s=i;break;case 5:n=i,o=r,s=h}return"#"+toHex(255*n)+toHex(255*o)+toHex(255*s)},toHex:function(t){t=parseInt(t).toString(16);return t=1==t.length?"0"+t:t},makeHighRes:function(t){var e=t.getContext("2d"),i=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,o=i/n;i!==n&&(i=t.width,n=t.height,t.width=Math.round(i*o),t.height=Math.round(n*o),t.style.width=i+"px",t.style.height=n+"px",e.scale(o,o))},newFunction:function(){var t=arguments,e=t.length;return 1===e?Y.newInstance("Function",t[0]):2===e?Y.newInstance("Function",t[0],t[1]):3===e?Y.newInstance("Function",t[0],t[1],t[2]):4===e?Y.newInstance("Function",t[0],t[1],t[2],t[3]):5===e?Y.newInstance("Function",t[0],t[1],t[2],t[3],t[4]):6===e?Y.newInstance("Function",t[0],t[1],t[2],t[3],t[4],t[5]):7===e?Y.newInstance("Function",t[0],t[1],t[2],t[3],t[4],t[5],t[6]):8===e?Y.newInstance("Function",t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):null}},Y.ext("twaver.Util",Object,{});function p(t,e,i){null!=t&&("number"==typeof t?this.fromNumber(t,e,i):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function v(){return new p(null)}se="Microsoft Internet Explorer"==s.appName?(p.prototype.am=function(t,e,i,n,o,s){for(var a=32767&e,r=e>>15;0<=--s;){var h=32767&this[t],l=this[t++]>>15,c=r*h+l*a;o=((h=a*h+((32767&c)<<15)+i[n]+(1073741823&o))>>>30)+(c>>>15)+r*l+(o>>>30),i[n++]=1073741823&h}return o},30):"Netscape"!=s.appName?(p.prototype.am=function(t,e,i,n,o,s){for(;0<=--s;){var a=e*this[t++]+i[n]+o;o=Math.floor(a/67108864),i[n++]=67108863&a}return o},26):(p.prototype.am=function(t,e,i,n,o,s){for(var a=16383&e,r=e>>14;0<=--s;){var h=16383&this[t],l=this[t++]>>14,c=r*h+l*a;o=((h=a*h+((16383&c)<<14)+i[n]+o)>>28)+(c>>14)+r*l,i[n++]=268435455&h}return o},28),p.prototype.DB=se,p.prototype.DM=(1<<se)-1,p.prototype.DV=1<<se;p.prototype.FV=Math.pow(2,52),p.prototype.F1=52-se,p.prototype.F2=2*se-52;for(var c="0123456789abcdefghijklmnopqrstuvwxyz",u=new Array,t="0".charCodeAt(0),d=0;d<=9;++d)u[t++]=d;for(t="a".charCodeAt(0),d=10;d<36;++d)u[t++]=d;for(t="A".charCodeAt(0),d=10;d<36;++d)u[t++]=d;function _(t){return c.charAt(t)}function f(t,e){e=u[t.charCodeAt(e)];return null==e?-1:e}function A(t){var e=v();return e.fromInt(t),e}function y(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function w(t){this.m=t}function C(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function T(t,e){return t&e}function I(t,e){return t|e}function L(t,e){return t^e}function S(t,e){return t&~e}function P(){}function M(t){return t}function D(t){this.r2=v(),this.q3=v(),p.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}w.prototype.convert=function(t){return t.s<0||0<=t.compareTo(this.m)?t.mod(this.m):t},w.prototype.revert=function(t){return t},w.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},w.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},w.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},C.prototype.convert=function(t){var e=v();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&0<e.compareTo(p.ZERO)&&this.m.subTo(e,e),e},C.prototype.revert=function(t){var e=v();return t.copyTo(e),this.reduce(e),e},C.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=32767&t[e],n=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[i=e+this.m.t]+=this.m.am(0,n,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),0<=t.compareTo(this.m)&&t.subTo(this.m,t)},C.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},C.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},p.prototype.copyTo=function(t){for(var e=this.t-1;0<=e;--e)t[e]=this[e];t.t=this.t,t.s=this.s},p.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,0<t?this[0]=t:t<-1?this[0]=t+DV:this.t=0},p.prototype.fromString=function(t,e){var i;if(16==e)i=4;else if(8==e)i=3;else if(256==e)i=8;else if(2==e)i=1;else if(32==e)i=5;else{if(4!=e)return void this.fromRadix(t,e);i=2}this.t=0,this.s=0;for(var n=t.length,o=!1,s=0;0<=--n;){var a=8==i?255&t[n]:f(t,n);a<0?"-"==t.charAt(n)&&(o=!0):(o=!1,0==s?this[this.t++]=a:s+i>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,(s+=i)>=this.DB&&(s-=this.DB))}8==i&&0!=(128&t[0])&&(this.s=-1,0<s&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),o&&p.ZERO.subTo(this,this)},p.prototype.clamp=function(){for(var t=this.s&this.DM;0<this.t&&this[this.t-1]==t;)--this.t},p.prototype.dlShiftTo=function(t,e){for(var i=this.t-1;0<=i;--i)e[i+t]=this[i];for(i=t-1;0<=i;--i)e[i]=0;e.t=this.t+t,e.s=this.s},p.prototype.drShiftTo=function(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s},p.prototype.lShiftTo=function(t,e){for(var i=t%this.DB,n=this.DB-i,o=(1<<n)-1,s=Math.floor(t/this.DB),a=this.s<<i&this.DM,r=this.t-1;0<=r;--r)e[r+s+1]=this[r]>>n|a,a=(this[r]&o)<<i;for(r=s-1;0<=r;--r)e[r]=0;e[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()},p.prototype.rShiftTo=function(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)e.t=0;else{var n=t%this.DB,o=this.DB-n,s=(1<<n)-1;e[0]=this[i]>>n;for(var a=i+1;a<this.t;++a)e[a-i-1]|=(this[a]&s)<<o,e[a-i]=this[a]>>n;0<n&&(e[this.t-i-1]|=(this.s&s)<<o),e.t=this.t-i,e.clamp()}},p.prototype.subTo=function(t,e){for(var i=0,n=0,o=Math.min(t.t,this.t);i<o;)n+=this[i]-t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n-=t[i],e[i++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[i++]=this.DV+n:0<n&&(e[i++]=n),e.t=i,e.clamp()},p.prototype.multiplyTo=function(t,e){var i=this.abs(),n=t.abs(),o=i.t;for(e.t=o+n.t;0<=--o;)e[o]=0;for(o=0;o<n.t;++o)e[o+i.t]=i.am(0,n[o],e,o,0,i.t);e.s=0,e.clamp(),this.s!=t.s&&p.ZERO.subTo(e,e)},p.prototype.squareTo=function(t){for(var e=this.abs(),i=t.t=2*e.t;0<=--i;)t[i]=0;for(i=0;i<e.t-1;++i){var n=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,n,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}0<t.t&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()},p.prototype.divRemTo=function(t,e,i){var n=t.abs();if(!(n.t<=0)){var o=this.abs();if(o.t<n.t)return null!=e&&e.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=v());var s=v(),a=this.s,r=t.s,t=this.DB-y(n[n.t-1]);0<t?(n.lShiftTo(t,s),o.lShiftTo(t,i)):(n.copyTo(s),o.copyTo(i));var h=s.t,l=s[h-1];if(0!=l){var o=l*(1<<this.F1)+(1<h?s[h-2]>>this.F2:0),c=this.FV/o,u=(1<<this.F1)/o,d=1<<this.F2,_=i.t,g=_-h,f=null==e?v():e;for(s.dlShiftTo(g,f),0<=i.compareTo(f)&&(i[i.t++]=1,i.subTo(f,i)),p.ONE.dlShiftTo(h,f),f.subTo(s,s);s.t<h;)s[s.t++]=0;for(;0<=--g;){var A=i[--_]==l?this.DM:Math.floor(i[_]*c+(i[_-1]+d)*u);if((i[_]+=s.am(0,A,i,g,0,h))<A)for(s.dlShiftTo(g,f),i.subTo(f,i);i[_]<--A;)i.subTo(f,i)}null!=e&&(i.drShiftTo(h,e),a!=r&&p.ZERO.subTo(e,e)),i.t=h,i.clamp(),0<t&&i.rShiftTo(t,i),a<0&&p.ZERO.subTo(i,i)}}},p.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return 0<(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)?this.DV-e:-e},p.prototype.isEven=function(){return 0==(0<this.t?1&this[0]:this.s)},p.prototype.exp=function(t,e){if(4294967295<t||t<1)return p.ONE;var i,n=v(),o=v(),s=e.convert(this),a=y(t)-1;for(s.copyTo(n);0<=--a;)e.sqrTo(n,o),0<(t&1<<a)?e.mulTo(o,s,n):(i=n,n=o,o=i);return e.revert(n)},p.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var i,n=(1<<e)-1,o=!1,s="",a=this.t,r=this.DB-a*this.DB%e;if(0<a--)for(r<this.DB&&0<(i=this[a]>>r)&&(o=!0,s=_(i));0<=a;)r<e?(i=(this[a]&(1<<r)-1)<<e-r,i|=this[--a]>>(r+=this.DB-e)):(i=this[a]>>(r-=e)&n,r<=0&&(r+=this.DB,--a)),(o=0<i?!0:o)&&(s+=_(i));return o?s:"0"},p.prototype.negate=function(){var t=v();return p.ZERO.subTo(this,t),t},p.prototype.abs=function(){return this.s<0?this.negate():this},p.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;if(0!=(e=i-t.t))return e;for(;0<=--i;)if(0!=(e=this[i]-t[i]))return e;return 0},p.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+y(this[this.t-1]^this.s&this.DM)},p.prototype.mod=function(t){var e=v();return this.abs().divRemTo(t,null,e),this.s<0&&0<e.compareTo(p.ZERO)&&t.subTo(e,e),e},p.prototype.modPowInt=function(t,e){return e=new(t<256||e.isEven()?w:C)(e),this.exp(t,e)},p.ZERO=A(0),p.ONE=A(1),P.prototype.convert=M,P.prototype.revert=M,P.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i)},P.prototype.sqrTo=function(t,e){t.squareTo(e)},D.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=v();return t.copyTo(e),this.reduce(e),e},D.prototype.revert=function(t){return t},D.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);0<=t.compareTo(this.m);)t.subTo(this.m,t)},D.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},D.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var k=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],O=(1<<26)/k[k.length-1];function B(){this.i=0,this.j=0,this.S=new Array}p.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},p.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||36<t)return"0";var e=this.chunkSize(t),i=Math.pow(t,e),n=A(i),o=v(),s=v(),a="";for(this.divRemTo(n,o,s);0<o.signum();)a=(i+s.intValue()).toString(t).substr(1)+a,o.divRemTo(n,o,s);return s.intValue().toString(t)+a},p.prototype.fromRadix=function(t,e){this.fromInt(0);for(var i=this.chunkSize(e=null==e?10:e),n=Math.pow(e,i),o=!1,s=0,a=0,r=0;r<t.length;++r){var h=f(t,r);h<0?"-"==t.charAt(r)&&0==this.signum()&&(o=!0):(a=e*a+h,++s>=i&&(this.dMultiply(n),this.dAddOffset(a,0),a=s=0))}0<s&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(a,0)),o&&p.ZERO.subTo(this,this)},p.prototype.fromNumber=function(t,e,i){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,i),this.testBit(t-1)||this.bitwiseTo(p.ONE.shiftLeft(t-1),I,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(p.ONE.shiftLeft(t-1),this);else{var n=new Array,i=7&t;n.length=1+(t>>3),e.nextBytes(n),0<i?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}},p.prototype.bitwiseTo=function(t,e,i){for(var n,o=Math.min(t.t,this.t),s=0;s<o;++s)i[s]=e(this[s],t[s]);if(t.t<this.t){for(n=t.s&this.DM,s=o;s<this.t;++s)i[s]=e(this[s],n);i.t=this.t}else{for(n=this.s&this.DM,s=o;s<t.t;++s)i[s]=e(n,t[s]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()},p.prototype.changeBit=function(t,e){return t=p.ONE.shiftLeft(t),this.bitwiseTo(t,e,t),t},p.prototype.addTo=function(t,e){for(var i=0,n=0,o=Math.min(t.t,this.t);i<o;)n+=this[i]+t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n+=t[i],e[i++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,0<n?e[i++]=n:n<-1&&(e[i++]=this.DV+n),e.t=i,e.clamp()},p.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},p.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},p.prototype.multiplyLowerTo=function(t,e,i){var n,o=Math.min(this.t+t.t,e);for(i.s=0,i.t=o;0<o;)i[--o]=0;for(n=i.t-this.t;o<n;++o)i[o+this.t]=this.am(0,t[o],i,o,0,this.t);for(n=Math.min(t.t,e);o<n;++o)this.am(0,t[o],i,o,0,e-o);i.clamp()},p.prototype.multiplyUpperTo=function(t,e,i){var n=i.t=this.t+t.t- --e;for(i.s=0;0<=--n;)i[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)i[this.t+n-e]=this.am(e-n,t[n],i,0,0,this.t+n-e);i.clamp(),i.drShiftTo(1,i)},p.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,i=this.s<0?t-1:0;if(0<this.t)if(0==e)i=this[0]%t;else for(var n=this.t-1;0<=n;--n)i=(e*i+this[n])%t;return i},p.prototype.millerRabin=function(t){var e=this.subtract(p.ONE),i=e.getLowestSetBit();if(i<=0)return!1;var n=e.shiftRight(i);k.length<(t=t+1>>1)&&(t=k.length);for(var o=v(),s=0;s<t;++s){o.fromInt(k[Math.floor(x.Util.random()*k.length)]);var a=o.modPow(n,this);if(0!=a.compareTo(p.ONE)&&0!=a.compareTo(e)){for(var r=1;r++<i&&0!=a.compareTo(e);)if(0==(a=a.modPowInt(2,this)).compareTo(p.ONE))return!1;if(0!=a.compareTo(e))return!1}}return!0},p.prototype.clone=function(){var t=v();return this.copyTo(t),t},p.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},p.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},p.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},p.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},p.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var i,n=this.DB-t*this.DB%8,o=0;if(0<t--)for(n<this.DB&&(i=this[t]>>n)!=(this.s&this.DM)>>n&&(e[o++]=i|this.s<<this.DB-n);0<=t;)n<8?(i=(this[t]&(1<<n)-1)<<8-n,i|=this[--t]>>(n+=this.DB-8)):(i=this[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&i)&&(i|=-256),0==o&&(128&this.s)!=(128&i)&&++o,(0<o||i!=this.s)&&(e[o++]=i);return e},p.prototype.equals=function(t){return 0==this.compareTo(t)},p.prototype.min=function(t){return this.compareTo(t)<0?this:t},p.prototype.max=function(t){return 0<this.compareTo(t)?this:t},p.prototype.and=function(t){var e=v();return this.bitwiseTo(t,T,e),e},p.prototype.or=function(t){var e=v();return this.bitwiseTo(t,I,e),e},p.prototype.xor=function(t){var e=v();return this.bitwiseTo(t,L,e),e},p.prototype.andNot=function(t){var e=v();return this.bitwiseTo(t,S,e),e},p.prototype.not=function(){for(var t=v(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},p.prototype.shiftLeft=function(t){var e=v();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},p.prototype.shiftRight=function(t){var e=v();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},p.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+function(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}(this[t]);return this.s<0?this.t*this.DB:-1},p.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,i=0;i<this.t;++i)t+=function(t){for(var e=0;0!=t;)t&=t-1,++e;return e}(this[i]^e);return t},p.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},p.prototype.setBit=function(t){return this.changeBit(t,I)},p.prototype.clearBit=function(t){return this.changeBit(t,S)},p.prototype.flipBit=function(t){return this.changeBit(t,L)},p.prototype.add=function(t){var e=v();return this.addTo(t,e),e},p.prototype.subtract=function(t){var e=v();return this.subTo(t,e),e},p.prototype.multiply=function(t){var e=v();return this.multiplyTo(t,e),e},p.prototype.divide=function(t){var e=v();return this.divRemTo(t,e,null),e},p.prototype.remainder=function(t){var e=v();return this.divRemTo(t,null,e),e},p.prototype.divideAndRemainder=function(t){var e=v(),i=v();return this.divRemTo(t,e,i),new Array(e,i)},p.prototype.modPow=function(t,e){var i=t.bitLength(),n=A(1);if(i<=0)return n;var o=i<18?1:i<48?3:i<144?4:i<768?5:6,s=new(i<8?w:e.isEven()?D:C)(e),a=new Array,r=3,h=o-1,l=(1<<o)-1;if(a[1]=s.convert(this),1<o){var c=v();for(s.sqrTo(a[1],c);r<=l;)a[r]=v(),s.mulTo(c,a[r-2],a[r]),r+=2}for(var u,d,_=t.t-1,g=!0,f=v(),i=y(t[_])-1;0<=_;){for(h<=i?u=t[_]>>i-h&l:(u=(t[_]&(1<<i+1)-1)<<h-i,0<_&&(u|=t[_-1]>>this.DB+i-h)),r=o;0==(1&u);)u>>=1,--r;if((i-=r)<0&&(i+=this.DB,--_),g)a[u].copyTo(n),g=!1;else{for(;1<r;)s.sqrTo(n,f),s.sqrTo(f,n),r-=2;0<r?s.sqrTo(n,f):(d=n,n=f,f=d),s.mulTo(f,a[u],n)}for(;0<=_&&0==(t[_]&1<<i);)s.sqrTo(n,f),d=n,n=f,f=d,--i<0&&(i=this.DB-1,--_)}return s.revert(n)},p.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return p.ZERO;for(var i=t.clone(),n=this.clone(),o=A(1),s=A(0),a=A(0),r=A(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),e?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(t,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),e?(a.isEven()&&r.isEven()||(a.addTo(this,a),r.subTo(t,r)),a.rShiftTo(1,a)):r.isEven()||r.subTo(t,r),r.rShiftTo(1,r);0<=i.compareTo(n)?(i.subTo(n,i),e&&o.subTo(a,o),s.subTo(r,s)):(n.subTo(i,n),e&&a.subTo(o,a),r.subTo(s,r))}return 0!=n.compareTo(p.ONE)?p.ZERO:0<=r.compareTo(t)?r.subtract(t):r.signum()<0?(r.addTo(t,r),r.signum()<0?r.add(t):r):r},p.prototype.pow=function(t){return this.exp(t,new P)},p.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();e.compareTo(i)<0&&(o=e,e=i,i=o);var n=e.getLowestSetBit(),o=i.getLowestSetBit();if(o<0)return e;for(0<(o=n<o?n:o)&&(e.rShiftTo(o,e),i.rShiftTo(o,i));0<e.signum();)0<(n=e.getLowestSetBit())&&e.rShiftTo(n,e),0<(n=i.getLowestSetBit())&&i.rShiftTo(n,i),0<=e.compareTo(i)?(e.subTo(i,e),e.rShiftTo(1,e)):(i.subTo(e,i),i.rShiftTo(1,i));return 0<o&&i.lShiftTo(o,i),i},p.prototype.isProbablePrime=function(t){var e,i=this.abs();if(1==i.t&&i[0]<=k[k.length-1]){for(e=0;e<k.length;++e)if(i[0]==k[e])return!0;return!1}if(i.isEven())return!1;for(e=1;e<k.length;){for(var n=k[e],o=e+1;o<k.length&&n<O;)n*=k[o++];for(n=i.modInt(n);e<o;)if(n%k[e++]==0)return!1}return i.millerRabin(t)},p.prototype.square=function(){var t=v();return this.squareTo(t),t},B.prototype.init=function(t){for(var e,i,n=0;n<256;++n)this.S[n]=n;for(n=e=0;n<256;++n)e=e+this.S[n]+t[n%t.length]&255,i=this.S[n],this.S[n]=this.S[e],this.S[e]=i;this.i=0,this.j=0},B.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]};var N,U=256;function z(){var t;t=(new Date).getTime(),F[V++]^=255&t,F[V++]^=t>>8&255,F[V++]^=t>>16&255,F[V++]^=t>>24&255,U<=V&&(V-=U)}if(null==F){var F=new Array,V=0;if("Netscape"==s.appName&&s.appVersion<"5"&&window.crypto)for(var G=window.crypto.random(32),H=0;H<G.length;++H)F[V++]=255&G.charCodeAt(H);for(;V<U;)H=Math.floor(65536*x.Util.random()),F[V++]=H>>>8,F[V++]=255&H;V=0,z()}function W(){if(null==N){for(z(),(N=new B).init(F),V=0;V<F.length;++V)F[V]=0;V=0}return N.next()}function Z(){}Z.prototype.nextBytes=function(t){for(var e=0;e<t.length;++e)t[e]=W()};function Q(t,e){return new p(t,e)}function K(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}K.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},K.prototype.setPublic=function(t,e){this.n=Q(t,16),this.e=parseInt(e,16)},K.prototype.encrypt=function(t){return null==(t=function(t,e){if(e<t.length+11)return null;for(var i=new Array,n=t.length-1;0<=n&&0<e;){var o=t.charCodeAt(n--);o<128?i[--e]=o:127<o&&o<2048?(i[--e]=63&o|128,i[--e]=o>>6|192):(i[--e]=63&o|128,i[--e]=o>>6&63|128,i[--e]=o>>12|224)}i[--e]=0;for(var s=new Z,a=new Array;2<e;){for(a[0]=0;0==a[0];)s.nextBytes(a);i[--e]=a[0]}return i[--e]=2,i[--e]=0,new p(i)}(t,this.n.bitLength()+7>>3))||null==(t=this.doPrivate(t))?null:0==(1&(t=t.toString(16)).length)?t:"0"+t},K.prototype.doPrivate=function(t){if(null==this.p||null==this.q)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),i=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(i)<0;)e=e.add(this.p);return e.subtract(i).multiply(this.coeff).mod(this.p).multiply(this.q).add(i)},K.prototype.setPrivate=function(t,e,i){this.n=Q(t,16),this.e=parseInt(e,16),this.d=Q(i,16)},K.prototype.setPrivateEx=function(t,e,i,n,o,s,a,r){this.n=Q(t,16),this.e=parseInt(e,16),this.d=Q(i,16),this.p=Q(n,16),this.q=Q(o,16),this.dmp1=Q(s,16),this.dmq1=Q(a,16),this.coeff=Q(r,16)},K.prototype.decrypt=function(t){return t=Q(t,16),null==(t=this.doPublic(t))?null:function(t,e){for(var i=t.toByteArray(),n=0;n<i.length&&0==i[n];)++n;if(i.length-n!=e-1||2!=i[n])return null;for(++n;0!=i[n];)if(++n>=i.length)return null;for(var o="";++n<i.length;){var s=255&i[n];s<128?o+=String.fromCharCode(s):191<s&&s<224?(o+=String.fromCharCode((31&s)<<6|63&i[n+1]),++n):(o+=String.fromCharCode((15&s)<<12|(63&i[n+1])<<6|63&i[n+2]),n+=2)}return o}(t,this.n.bitLength()+7>>3)};var q=function(){J.v(e)},J={},$="6a384c1259bdb5e731ec96b3174683f48a2c56a85e52e7a5bb20b58711ce50c1a294bd5e1d1752e766085e9ae94bae6d217c25dbb5fcdb86a8a9a7e180fa066723d00fcb85fcf7c9d29f8cc8859f53244a49c0bc30dcc45156daf8843ce1d24fe8ebc9a3c186bb26e9d0714041aef160304c1db8cc5728cf4acb39d29755f319",tt="10001",et="b881f568eb43e7a60c256a8a90e08b7c7638fd66ce3cded9005c72e283ca4f2b8601e2edc687d7f898348a05723b515d9edeb626af7b499a56ddaea93b0c2047";J.cross=function(t){if(t){for(var e="",i=0;i<t.length;)i+1<t.length&&(e+=t[i+1]),e+=t[i],i+=2;return e}return null},J.reverse=function(t){if(t){for(var e="",i=t.length;0<i;i--)e+=t[i-1];return e}return null},J.v=function(t){if(t){var e=J;if(e.start=null,e.beginDate=null,e.end=null,e.endDate=null,e.gis=null,e["3D"]=null,e["3d"]=null,e.l=null,e.__li__=null,0<t.indexOf("signature=")){var i=t.split("signature="),n=i[0],i=i[1],o=new K;o.setPublic($,tt);for(var s,a=i,r=a.length,h=0,l="";h<r;)s=a.substr(h,256),l+=o.decrypt(s),h+=256;if(l===n)return e.i(t),!0}}return!1},J.i=function(t){for(var e,i,n=J,o=(n.__li__=t).split("\n"),s=o.length-1;0<=s;s--)e=(i=o[s].split("="))[0],i=i[1],n[e]=i;null!=n.start&&(n.beginDate=new Date(Date.parse(n.start.replace(/-/g,"/")))),null!=n.end&&(n.endDate=new Date(Date.parse(n.end.replace(/-/g,"/"))));t=n.gis;(t=null!=t?parseInt(t):t)&&(n._isPermissionGIS=!0);t=n["3D"]||n["3d"];(t=null!=t?parseInt(t):t)&&(n._isPermission3D=!0),n["3D"]&&(n._isPermission3D=!0),null!=n.l&&(n.version=n.l)};function it(t){if(void 0===(e=t).__li__||e._isPermission3D)return!0;var e=new Date;return null!=t.beginDate&&0<=t.beginDate.getTime()-e.getTime()||null!=t.endDate&&t.endDate.getTime()-e.getTime()<=0}var nt=function(){return!it(J)&&J._isPermissionGIS};J.$z=function(t){var e=new K;e.setPublic($,tt);for(var i,n=t,o=n.length,s=0,a="";s<o;)i=n.substr(s,256),a+=e.decrypt(i),s+=256;return a},J.twm=function(t){var e,i,n,o=J,s=o.$z("4cd18113d0c7046bfe51f7a3fbd41c2b7cf14dd785d6ea7cec9da17710d3acfb8ce0cb9cf10839f4bd51e88819de19cdc0db09278584396156fcb65abe0353ac49d01326b30efa0ea98a07da9f8ceeb7572fc1b37b5965ba6103ccba4913b62e36e49425c6ff21a2f008830c59cff8f29058769f858c8a9f0bab3eaea7fb8a9e"),a=this.type,r=this.markText;t[o.$z("648be38cd61c870e95ffc1ea0676af40736c1365015abc326e891a4de67b4de3d4b05da70b9aebedc83ec26ecf71eb74c72f42f6d9a4be2d507d2f67d2860b7b66e3ba1d565e15923f2db335ff922eef17c01b59818b583d5656412d6cc9d9ba70001c2c88e3efd492c6b13a07fda5f325b333138a2036f4696542ec137cc341")]=o.__li__,"3"===a&&!it(J)&&void 0===r||(null==t.__liLabel&&(t.__liLabel=E.createElement("div")),void 0===o.startDate&&(o.startDate=new Date),(i=(new Date).getTime()-o.startDate.getTime())<3e5||(n=r,(e=it(o)&&3e5<i)?n=o.$z("0dd629dbd0ce341ecdd447e35ddc3135a0b46916f7571a687f38ae665cf0ae095fee885e14329caa75112d8787508da17285b0897845d8ccae73e6a2727dd19f1ca335fe139d0e60d240f9ececc78f81c2c5667f51aeed4135b9c4bb436b8acb7cd418eeeb404bc4f3bcdedb481ac0edff7644435ce2b9f2bda78c892bd56d73"):"2"!=a||void 0!==n&&""!=n?"1"!=a||r||(n=s):n=o.$z("644d54bf9c59afbd8a742a9e7e2731f23f149ccb7f04c3547548c50ac2d77faea108b55f1f6261e99869f1c06b84e8abdefdf45b5170048531421f3d528123972ba2f03d70f37c33f1341dc12f986e0089e42bab517e2a05b455d12d90991bbba9bc45c715a81943062ea5fa5408c8b1b9270d260cc5a67b38ecc4178ce512fc"),void 0!==n&&((s=(i=t).__liLabel).innerHTML=n,i._rootCanvas?(s.type=a,s.mark=r,s.expired=e,i._xyz=s):(t=o=0,s.style.position="absolute",n=i.getView().style,t=null!=r&&""!=r||"2"==a?(o=10-i.getView().scrollLeft,10-i.getView().scrollTop):(o=n.width.replace("px","")/2-50-i.getView().scrollLeft,n.height.replace("px","")/2-i.getView().scrollTop),s.style.right=o+"px",s.style.bottom=t+"px",s.style.fontSize="120%",e&&(i.getView().style.opacity=.1,s.style.color="red",s.style.fontSize="150%"),i.getView().appendChild(s)))))},Y.validateLicense(e);var ot=function(t,e,i){this.g=t,this.onLength=e,this.offLength=i,this.isLine=!0,this.overflow=0,this.dashLength=e+i,this.pen={x:0,y:0}};Y.ext(ot,Object,{_curveaccuracy:6,moveTo:function(t,e){this.pen={x:t,y:e},this.g.moveTo(t,e),this.start||(this.start={x:t,y:e})},lineTo:function(t,e){var i=t-this.pen.x,n=e-this.pen.y,o=Math.atan2(n,i),n=Math.cos(o),i=Math.sin(o),o=this.lineLength(this.pen.x,this.pen.y,t,e);if(this.overflow){if(this.overflow>o)return this.isLine?this._lineTo(t,e):this.moveTo(t,e),void(this.overflow-=o);if(this.isLine?this._lineTo(this.pen.x+n*this.overflow,this.pen.y+i*this.overflow):this.moveTo(this.pen.x+n*this.overflow,this.pen.y+i*this.overflow),o-=this.overflow,this.overflow=0,this.isLine=!this.isLine,!o)return}var s=Math.floor(o/this.dashLength);if(s){for(var a=n*this.onLength,r=i*this.onLength,h=n*this.offLength,l=i*this.offLength,c=0;c<s;c++)this.isLine?(this._lineTo(this.pen.x+a,this.pen.y+r),this.moveTo(this.pen.x+h,this.pen.y+l)):(this.moveTo(this.pen.x+h,this.pen.y+l),this._lineTo(this.pen.x+a,this.pen.y+r));o-=this.dashLength*s}this.isLine?o>this.onLength?(this._lineTo(this.pen.x+n*this.onLength,this.pen.y+i*this.onLength),this.moveTo(t,e),this.overflow=this.offLength-(o-this.onLength),this.isLine=!1):(this._lineTo(t,e),o==this.onLength?(this.overflow=0,this.isLine=!this.isLine):(this.overflow=this.onLength-o,this.moveTo(t,e))):o>this.offLength?(this.moveTo(this.pen.x+n*this.offLength,this.pen.y+i*this.offLength),this._lineTo(t,e),this.overflow=this.onLength-(o-this.offLength),this.isLine=!0):(this.moveTo(t,e),o==this.offLength?(this.overflow=0,this.isLine=!this.isLine):this.overflow=this.offLength-o)},quadraticCurveTo:function(t,e,i,n){var o,s=this.pen.x,a=this.pen.y,r=this.curveLength(s,a,t,e,i,n),h=0,l=0;if(this.overflow){if(this.overflow>r)return this.isLine?this._curveTo(t,e,i,n):this.moveTo(i,n),void(this.overflow-=r);if(h=this.overflow/r,o=this.curveSliceUpTo(s,a,t,e,i,n,h),this.isLine?this._curveTo(o[2],o[3],o[4],o[5]):this.moveTo(o[4],o[5]),this.overflow=0,this.isLine=!this.isLine,!r)return}var c=r-r*h,u=Math.floor(c/this.dashLength),d=this.onLength/r,_=this.offLength/r;if(u)for(var g=0;g<u;g++)this.isLine?(o=this.curveSlice(s,a,t,e,i,n,h,l=h+d),this._curveTo(o[2],o[3],o[4],o[5]),h=l,o=this.curveSlice(s,a,t,e,i,n,h,l=h+_),this.moveTo(o[4],o[5])):(o=this.curveSlice(s,a,t,e,i,n,h,l=h+_),this.moveTo(o[4],o[5]),h=l,o=this.curveSlice(s,a,t,e,i,n,h,l=h+d),this._curveTo(o[2],o[3],o[4],o[5])),h=l;c=r-r*h,this.isLine?c>this.onLength?(o=this.curveSlice(s,a,t,e,i,n,h,l=h+d),this._curveTo(o[2],o[3],o[4],o[5]),this.moveTo(i,n),this.overflow=this.offLength-(c-this.onLength),this.isLine=!1):(o=this.curveSliceFrom(s,a,t,e,i,n,h),this._curveTo(o[2],o[3],o[4],o[5]),r==this.onLength?(this.overflow=0,this.isLine=!this.isLine):(this.overflow=this.onLength-c,this.moveTo(i,n))):c>this.offLength?(o=this.curveSlice(s,a,t,e,i,n,h,l=h+_),this.moveTo(o[4],o[5]),o=this.curveSliceFrom(s,a,t,e,i,n,l),this._curveTo(o[2],o[3],o[4],o[5]),this.overflow=this.onLength-(c-this.offLength),this.isLine=!0):(this.moveTo(i,n),c==this.offLength?(this.overflow=0,this.isLine=!this.isLine):this.overflow=this.offLength-c)},bezierCurveTo:function(t,e,i,n,o,s){this.pen={x:o,y:s};var a=[this.onLength,this.offLength];this.g.setLineDash&&this.g.setLineDash(a),this.g.lineDash=a,this.g.bezierCurveTo(t,e,i,n,o,s)},rect:function(t,e,i,n){this.pen={x:t,y:e},this.moveTo(t,e),this.lineTo(t,e+n),this.lineTo(t+i,e+n),this.lineTo(t+i,e),this.lineTo(t,e)},closePath:function(){this.lineTo(this.start.x,this.start.y)},lineLength:function(t,e,i,n){t=i-t,e=n-e;return Math.sqrt(t*t+e*e)},curveLength:function(t,e,i,n,o,s,a){for(var r,h,l,c,u=0,d=t,_=e,g=0<a?a:this._curveaccuracy,f=1;f<=g;f++)u+=this.lineLength(d,_,r=(h=(c=1-(r=f/g))*c)*t+(l=2*r*c)*i+(c=r*r)*o,c=h*e+l*n+c*s),d=r,_=c;return u},curveSlice:function(t,e,i,n,o,s,a,r){if(0==a)return this.curveSliceUpTo(t,e,i,n,o,s,r);if(1==r)return this.curveSliceFrom(t,e,i,n,o,s,a);s=this.curveSliceUpTo(t,e,i,n,o,s,r);return s.push(a/r),this.curveSliceFrom.apply(this,s)},curveSliceUpTo:function(t,e,i,n,o,s,a){var r,h;return 1!=a&&(r=i+(o-i)*a,h=n+(s-n)*a,o=(i=t+(i-t)*a)+(r-i)*a,s=(n=e+(n-e)*a)+(h-n)*a),[t,e,i,n,o,s]},curveSliceFrom:function(t,e,i,n,o,s,a){var r;return 1!=a&&(t=(r=t+(i-t)*a)+((i+=(o-i)*a)-r)*a,e=(r=e+(n-e)*a)+((n+=(s-n)*a)-r)*a),[t,e,i,n,o,s]},_lineTo:function(t,e){t==this.pen.x&&e==this.pen.y||(this.pen={x:t,y:e},this.g.lineTo(t,e))},_curveTo:function(t,e,i,n){t==i&&e==n&&i==this.pen.x&&n==this.pen.y||(this.pen={x:i,y:n},this.g.quadraticCurveTo(t,e,i,n))}}),Y.DashedLine=ot;var st={DEFAULTS:{default:1,"default.vector":1,"vector.default":1},VECTORS:{vector:1,"default.vector":1,"vector.default":1},hasDefault:function(t){if(t instanceof Re){t=t.getStyle("body.type");return 1===st.DEFAULTS[t]}return!0},hasVector:function(t){if(t instanceof Re){t=t.getStyle("body.type");return 1===st.VECTORS[t]}return!1},hasAgentLinks:function(t){for(var e=t.getChildrenSize(),i=0;i<e;i++){var n=t.getChildAt(i);if(n instanceof Re&&st.hasAgentLinks(n))return!0}return t.hasAgentLinks()},getParents:function(t,e,i){i=i||!0;for(var n=new ie,o=t._parent;null!=o&&o!==e;)n.add(o,0),o=o._parent;return i&&null!=o&&o===e&&n.add(o,0),n},getSubNetwork:function(t){if(!t)return null;if(t instanceof x.Link){var e=t._fromAgent,i=t._toAgent;if(!e||!i)return null;e=st.getSubNetwork(e);return e===st.getSubNetwork(i)?e:null}var n=t._parent;if(!n)return null;for(;n instanceof x.Link&&!n.ISubNetwork;)n=n._parent;return n.ISubNetwork?n:st.getSubNetwork(n)},figureSameSubNetworkAgent:function(t){if(!t)return null;for(var e=t._parent;e instanceof Me;){if(!(e._parent instanceof Me))return e.isExpanded()?t:e;e.isExpanded()||(t=e),e=e._parent}return t},figureSpanSubNetworkAgent:function(t,e){if(!t||!e)return null;var i=st.getSubNetwork(t),n=st.getSubNetwork(e);if(i==n)return t;for(;null!=n&&i!=n;)n=st.getSubNetwork(n);if(i===n)return t;var o=new ie;o.add(t,0);for(var s=t._parent;s instanceof Re&&!e.isDescendantOf(s);)o.add(s,0),s=s._parent;for(var a=o.size(),r=0;r<a;r++){var h=o.get(r);if(h instanceof Me&&!h.isExpanded())return h;if(h.ISubNetwork)return h}return t},figureFromAgent:function(t){if(t.isLooped())return t.getFromNode();var e=st.figureSameSubNetworkAgent(t.getFromNode()),i=st.figureSameSubNetworkAgent(t.getToNode());return e===i?t.getFromNode():st.figureSpanSubNetworkAgent(e,i)},figureToAgent:function(t){if(t.isLooped())return t.getToNode();var e=st.figureSameSubNetworkAgent(t.getFromNode()),i=st.figureSameSubNetworkAgent(t.getToNode());return e===i?t.getToNode():st.figureSpanSubNetworkAgent(i,e)},getBundleLinks:function(t,e){if(!t||!e)return null;var i,n,o,s;if(t===e){if(!(s=t.getLoopedLinks()))return null;s=new ie(s)}else{var a=t.getAgentLinks(),r=e.getAgentLinks();if(!a||!r)return null;for(n=a.size(),i=0;i<n;i++)o=a.get(i),r.contains(o)&&(s=s||new ie).add(o)}if(null!=s)for(i=0;i<s.size();i++)(o=s.get(i)).getStyle("link.bundle.enable")||(o._setBundleLinks(null),s.removeAt(i),i--);return s},resetBundleLinks:function(t,e){var i=st.getBundleLinks(t,e);if(i&&0!==i.size()){var n=null;if(1!==i.size()){var o,s=new ie;for(c=0;c<i.size();c++)h=(n=i.get(c)).getStyle("link.bundle.id"),s.indexOf(h)<0&&s.add(h);s.sort();for(var a=new ie,r=0;r<s.size();r++){for(var h=s.get(r),l=new ie,c=0;c<i.size();c++)h===(n=i.get(c)).getStyle("link.bundle.id")&&l.add(n);o=new x.BundleLinks(l,a),a.add(o)}for(r=0;r<a.size();r++)for(o=a.get(r),c=0;c<o.getLinks().size();c++)(n=o.getLinks().get(c))._setBundleLinks(o)}else(n=i.get(0))._setBundleLinks(null)}},moveElements:function(t,e,i,n){for(var o=st.filterMovingElements(t,n),s=o.size(),a=0;a<s;a++)o.get(a).translate(e,i)},filterMovingElements:function(t,e){for(var i=new ie,n=t.size(),o=0;o<n;o++){var s=t.get(o);if(s instanceof Re&&(!e||e(s))){for(var a=!0,r=i.toArray(),h=0;h<r.length;h++){var l=r[h];a&&l instanceof x.Follower&&s instanceof x.Follower&&s.isLoopedHostOn(l)?a=!1:l instanceof x.Follower&&l.isHostOn(s)?i.remove(l):a&&s instanceof x.Follower&&l instanceof Re&&s.isHostOn(l)?a=!1:st.isDescendantOfGroup(l,s)?i.remove(l):a&&st.isDescendantOfGroup(s,l)&&(a=!1)}a&&i.add(s)}}return i},isDescendantOfGroup:function(t,e){if(!(t&&e instanceof Me))return!1;if(!e.hasChildren())return!1;for(t=t._parent;t instanceof Me;){if(t===e)return!0;t=t._parent}return!1}};Y.element=st;var at={between:function(t,e,i){return t<=i&&i<=e||e<=i&&i<=t},considerEast:function(t,e,i){return!e||(at.between(e.x,i.x,t.x)?i.x>e.x:Math.abs(e.x-t.x)>Math.abs(i.x-t.x))},considerWest:function(t,e,i){return!e||(at.between(e.x,i.x,t.x)?i.x<e.x:Math.abs(e.x-t.x)>Math.abs(i.x-t.x))},considerNorth:function(t,e,i){return!e||(at.between(e.y,i.y,t.y)?i.y<e.y:Math.abs(e.y-t.y)>Math.abs(i.y-t.y))},considerSouth:function(t,e,i){return!e||(at.between(e.y,i.y,t.y)?i.y>e.y:Math.abs(e.y-t.y)>Math.abs(i.y-t.y))},getHorizontalPoint:function(t,e,i){return at.between(e.x,i.x,t.x)?{x:t.x,y:e.y}:Math.abs(t.x-e.x)<Math.abs(t.x-i.x)?{x:e.x,y:e.y}:{x:i.x,y:i.y}},getVerticalPoint:function(t,e,i){return at.between(e.y,i.y,t.y)?{x:e.x,y:t.y}:Math.abs(t.y-e.y)<Math.abs(t.y-i.y)?{x:e.x,y:e.y}:{x:i.x,y:i.y}},getPoint:function(t,e,i,n,o){var s=Math.abs(n.x-i.x)>Math.abs(n.y-i.y);if("south"===o)return s&&at.considerSouth(e,t,i)?at.getHorizontalPoint(e,i,n):null;if("north"===o)return s&&at.considerNorth(e,t,i)?at.getHorizontalPoint(e,i,n):null;if("west"===o)return!s&&at.considerWest(e,t,i)?at.getVerticalPoint(e,i,n):null;if("east"===o)return!s&&at.considerEast(e,t,i)?at.getVerticalPoint(e,i,n):null;if("nearby"!==o)return null;n=s?at.getHorizontalPoint(e,i,n):at.getVerticalPoint(e,i,n);return!t||b.getDistance(t,e)>b.getDistance(n,e)?n:null},getBusPoint:function(t,e,i){var n,o=t.size();if(0<o){for(var s=t.get(0),a=1;a<o;a++){var r=t.get(a),h=at.getPoint(n,e,s,r,i);h&&(n=h),s=r}n=n||{x:s.x,y:s.y}}return n}};Y.bus=at;var rt={createFromPoint:function(t,e){var i=t._element;if(!i.getFromAgent())return{x:0,y:0};var n,o,s=i.getStyle("link.from.position"),a=i.getStyle("link.from.xoffset"),r=i.getStyle("link.from.yoffset"),h=i.getStyle("link.from.percent");if(h&&h instanceof Array&&2===h.length&&h[0]<=1&&0<=h[0]&&h[1]<=1&&0<=h[1]){var l=(c=i.getFromAgent()).getSize();return{x:c.getRect().x+l.width*h[0],y:c.getRect().y+l.height*h[1]}}if(t._network._edgeDetect){var c=i.getFromAgent(),u=i.getToAgent(),d=c.getImage(),l=Y.images[d],h=c.getCenterLocation(),_=u.getCenterLocation(),u=this._getPointAngleDegree(_.x,_.y,h.x,h.y),_={x:0,y:0};if(l){h=l._image;if(h&&Nt(h)||h&&x.Util.getImageAsset(d)._cache)return Nt(h)?l._edgeData||(l._edgeData=l._createEdgeData(h,c._width,c._height)):"object"==typeof h&&(l._edgeData||(l._edgeData=l._createEdgeData(x.Util.getImageAsset(d)._cache,c.getWidth(),c.getHeight()))),_.x=l._edgeData[u].x+c.getRect().x,_.y=l._edgeData[u].y+c.getRect().y,_}}return Y.isCalculatingBus||(Y.isCalculatingBus=!0,i.getFromAgent()instanceof x.Bus&&(u=i.getFromAgent(),st.hasVector(u)?(c=e?e._getElementZoomRect(t,u.getRect()):u.getRect(),"oval"===(_=u.getStyle("vector.shape"))?o=b.getEllipsePoint(c,rt.createToPoint(t)):"circle"===_?o=b.getEllipsePoint(b.getCircleRect(c),rt.createToPoint(t)):"rectangle"!==_&&"roundrect"!==_||((n=new ie).add({x:u.x,y:u.y}),n.add({x:u.x+u.width,y:u.y}),n.add({x:u.x+u.width,y:u.y+u.height}),n.add({x:u.x,y:u.y+u.height}),n.add({x:u.x,y:u.y}),n=e?e._getShapeNodeZoomPoints(t,n):n,o=at.getBusPoint(n,rt.createToPoint(t),u.getStyle("bus.style")))):(n=e?e._getShapeNodeZoomPoints(t,u.getPoints()):u.getPoints(),o=at.getBusPoint(n,rt.createToPoint(t),u.getStyle("bus.style")))),Y.isCalculatingBus=!1),o?(o.x+=a,o.y+=r):o=t._network.getPosition(s,i.getFromAgent(),null,a,r,!0),o},createToPoint:function(t,e){var i=t._element;if(!i.getToAgent())return{x:0,y:0};var n,o,s=i.getStyle("link.to.position"),a=i.getStyle("link.to.xoffset"),r=i.getStyle("link.to.yoffset"),h=i.getStyle("link.to.percent");if(h&&h instanceof Array&&2===h.length&&h[0]<=1&&0<=h[0]&&h[1]<=1&&0<=h[1]){var l=(c=i.getToAgent()).getSize();return{x:c.getRect().x+l.width*h[0],y:c.getRect().y+l.height*h[1]}}if(t._network._edgeDetect){var c,u=i.getFromAgent(),d=(c=i.getToAgent()).getImage(),l=Y.images[d],_=u.getLocation(),h=c.getCenterLocation(),u=this._getPointAngleDegree(_.x,_.y,h.x,h.y),_={x:0,y:0};if(l){h=l._image;if(h&&Nt(h)||h&&x.Util.getImageAsset(d)._cache)return Nt(h)?l._edgeData||(l._edgeData=l._createEdgeData(h,c.getWidth(),c.getHeight())):"object"==typeof h&&(l._edgeData||(l._edgeData=l._createEdgeData(x.Util.getImageAsset(d)._cache,c.getWidth(),c.getHeight()))),_.x=l._edgeData[u].x+c.getRect().x,_.y=l._edgeData[u].y+c.getRect().y,_}}return Y.isCalculatingBus||(Y.isCalculatingBus=!0,i.getToAgent()instanceof x.Bus&&(u=i.getToAgent(),st.hasVector(u)?(c=e?e._getElementZoomRect(t,u.getRect()):u.getRect(),"oval"===(_=u.getStyle("vector.shape"))?o=b.getEllipsePoint(c,rt.createFromPoint(t)):"circle"===_?o=b.getEllipsePoint(b.getCircleRect(c),rt.createFromPoint(t)):"rectangle"!==_&&"roundrect"!==_||((n=new ie).add({x:u.x,y:u.y}),n.add({x:u.x+u.width,y:u.y}),n.add({x:u.x+u.width,y:u.y+u.height}),n.add({x:u.x,y:u.y+u.height}),n.add({x:u.x,y:u.y}),n=e?e._getShapeNodeZoomPoints(t,n):n,o=at.getBusPoint(n,rt.createFromPoint(t),u.getStyle("bus.style")))):(n=e?e._getShapeNodeZoomPoints(t,u.getPoints()):u.getPoints(),o=at.getBusPoint(n,rt.createFromPoint(t),u.getStyle("bus.style")))),Y.isCalculatingBus=!1),o?(o.x+=a,o.y+=r):o=t._network.getPosition(s,i.getToAgent(),null,a,r,!0),o},fillLoopedPoints:function(t,e,i){var n,o=rt.getBundleGap(t,!0),s=o,a=t.getStyle("link.looped.type"),t=t.getStyle("link.looped.direction");if("north"===t)return"arc"===a?rt.drawArc(e.x+e.width/2,e.y,0,Math.PI,o,o,!1,i):(n={x:e.x+e.width/2,y:e.y},i.add({x:n.x+s,y:n.y}),i.add({x:n.x+s,y:n.y-o}),i.add({x:n.x-s,y:n.y-o}),i.add({x:n.x-s,y:n.y})),{x:e.x+e.width/2,y:e.y-o};if("northeast"===t)return"arc"===a?rt.drawArc(e.x+e.width,e.y,1.5*Math.PI,1.5*Math.PI,o,o,!1,i):(n={x:e.x+e.width,y:e.y},i.add({x:n.x,y:n.y+s}),i.add({x:n.x+s,y:n.y+s}),i.add({x:n.x+s,y:n.y-o}),i.add({x:n.x-s,y:n.y-o}),i.add({x:n.x-s,y:n.y})),{x:e.x+e.width+.707*o,y:e.y-.707*o};if("east"===t)return"arc"===a?rt.drawArc(e.x+e.width,e.y+e.height/2,1.5*Math.PI,Math.PI,o,o,!1,i):(n={x:e.x+e.width,y:e.y+e.height/2},i.add({x:n.x,y:n.y-s}),i.add({x:n.x+o,y:n.y-s}),i.add({x:n.x+o,y:n.y+s}),i.add({x:n.x,y:n.y+s})),{x:e.x+e.width+o,y:e.y+e.height/2};if("southeast"===t)return"arc"===a?rt.drawArc(e.x+e.width,e.y+e.height,Math.PI,1.5*Math.PI,o,o,!1,i):(n={x:e.x+e.width,y:e.y+e.height},i.add({x:n.x,y:n.y-s}),i.add({x:n.x+s,y:n.y-s}),i.add({x:n.x+s,y:n.y+o}),i.add({x:n.x-s,y:n.y+o}),i.add({x:n.x-s,y:n.y})),{x:e.x+e.width+.707*o,y:e.y+e.height+.707*o};if("south"===t)return"arc"===a?rt.drawArc(e.x+e.width/2,e.y+e.height,Math.PI,Math.PI,o,o,!1,i):(n={x:e.x+e.width/2,y:e.y+e.height},i.add({x:n.x-s,y:n.y}),i.add({x:n.x-s,y:n.y+o}),i.add({x:n.x+s,y:n.y+o}),i.add({x:n.x+s,y:n.y})),{x:e.x+e.width/2,y:e.y+e.height+o};if("southwest"===t)return"arc"===a?rt.drawArc(e.x,e.y+e.height,.5*Math.PI,1.5*Math.PI,o,o,!1,i):(n={x:e.x,y:e.y+e.height},i.add({x:n.x,y:n.y-s}),i.add({x:n.x-s,y:n.y-s}),i.add({x:n.x-s,y:n.y+o}),i.add({x:n.x+s,y:n.y+o}),i.add({x:n.x+s,y:n.y})),{x:e.x-.707*o,y:e.y+e.height+.707*o};if("west"===t)return"arc"===a?rt.drawArc(e.x,e.y+e.height/2,.5*Math.PI,Math.PI,o,o,!1,i):(n={x:e.x,y:e.y+e.height/2},i.add({x:n.x,y:n.y-s}),i.add({x:n.x-o,y:n.y-s}),i.add({x:n.x-o,y:n.y+s}),i.add({x:n.x,y:n.y+s})),{x:e.x-o,y:e.y+e.height/2};if("northwest"===t)return"arc"===a?rt.drawArc(e.x,e.y,0,1.5*Math.PI,o,o,!1,i):(n={x:e.x,y:e.y},i.add({x:n.x,y:n.y+s}),i.add({x:n.x-s,y:n.y+s}),i.add({x:n.x-s,y:n.y-o}),i.add({x:n.x+s,y:n.y-o}),i.add({x:n.x+s,y:n.y})),{x:e.x-.707*o,y:e.y-.707*o};throw"Can not resolve link looped direction '"+t+"'"},drawArc:function(t,e,i,n,o,s,a,r){var h,l=-((n=Math.abs(n)>2*Math.PI?2*Math.PI:n)/(h=Math.ceil(Math.abs(n)/(Math.PI/4)))),c=-i;if(0<h){n=t+Math.cos(i)*o,i=e+Math.sin(-i)*s,r.add({x:n,y:i});for(var u=0;u<h;u++){var d=(c+=l)-l/2,_=t+Math.cos(c)*o,g=e+Math.sin(c)*s,f=t+Math.cos(d)*(o/Math.cos(l/2)),A=e+Math.sin(d)*(s/Math.cos(l/2)),d=new ie;d.add({x:f,y:A}),d.add({x:_,y:g}),r.add(d)}}},fillBundlePoints:function(t,e,i,n,o,s){var a;t._element.getBundleCount(),t._element.getBundleIndex(),t.getStyle("link.bundle.expanded");if("parallel"!==e&&0===(a=rt.getBundleGap(t,!1)))return o.add(i),o.add(n),b.getCenterPoint(i,n);void 0===a&&(a=rt.getBundleGap(t,!1));var r=rt.getBundleOffset(t),t=b.getDistance(i,n);s&&(r*=s=s.getSizeZoom(),a*=s),"arc"!==e&&"triangle"!==e||o.add({x:0,y:0}),"arc"===e&&o.add({x:0,y:a}),o.add({x:r,y:a}),o.add({x:t-r,y:a}),"arc"===e&&o.add({x:t,y:a}),"arc"!==e&&"triangle"!==e||o.add({x:t,y:0});for(var n=Math.atan2(n.y-i.y,n.x-i.x),h=b.createMatrix(n,0,0),l=0,c=o.size();l<c;l++){var u=o.get(l);(u=h.transform(u)).x+=i.x,u.y+=i.y,o.set(l,u)}if("arc"!==e)return rt.calculateCenterPoint(o);n=b.getCenterPoint(o.get(2),o.get(3)),e=new ie;return e.add(o.get(1)),e.add(o.get(2)),o.set(1,e),(e=new ie).add(o.get(4)),e.add(o.get(5)),o.set(4,e),o.removeAt(5),o.removeAt(2),n},calculateCenterPoint:function(t){var e=t.size();if(null==t||e<1)return{x:0,y:0};if(e%2!=0)return t.get((e-1)/2);var i=e/2,e=t.get(i-1),i=t.get(i);return{x:(e.x+i.x)/2,y:(e.y+i.y)/2}},getBundleOffset:function(t){var e=b.getDistance(t.getFromPoint(),t.getToPoint()),t=t.getStyle("link.bundle.offset");return 2*t<e?t:e/2},getBundleGap:function(t,e){var i=t._element;if(!i.getBundleLinks())return e?i.getStyle("link.looped.gap"):0;for(var n=e?"link.looped.gap":"link.bundle.gap",o=null,s=0,a=0,r=i.getBundleLinks().getSiblings(),h=0,l=i.getStyle("link.bundle.independent"),c=i.getStyle("link.bundle.group.gap"),u=0,d=r.size();u<d;u++){var _=r.get(u);if(!l||_===i.getBundleLinks()){for(var g=0,f=_.getLinks().size();g<f;g++){var A,p=_.getLinks().get(g);l===p.getStyle("link.bundle.independent")&&t._network.isVisible(p)&&(h=null==o?(o=p).getStyle(n):(a+=h/2+(A=p.getStyle(n))/2,A),p===i&&(s=a+c/2))}a+=c}}if(e)return a-s+h;e=s-a/2;return e=null!=o&&i.getFromAgent()!==o.getFromAgent()?-e:e},isTargetPriority:function(t,e,i){if(t){if(e.height<i.height)return e.height+i.height<Math.max(e.y+e.height,i.y+i.height)-Math.min(e.y,i.y)+e.height/2}else if(e.width<i.width)return e.width+i.width<Math.max(e.x+e.width,i.x+i.width)-Math.min(e.x,i.x)+e.width/2;return!0},calculateOrthogonalAndFlexionalLinkPoints:function(t,e,i,n){var o,s=rt.isHorizontal(t,e,i,n),a=new ie;rt.isFlexionalTypeLink(t)?rt.flexional(s,e,i,a,n.getStyle("link.extend")):(rt.orthogonal(t,e,i,a,s,n),0===(rt.isSplitByPercent(t,n)?rt.calculateSplitValueByPercent(t,s,e,i,n.getStyle("link.split.percent")):n.getStyle("link.split.value"))&&(s=!s)),0===a.size()?rt.isTargetPriority(s,e,i)?(o={x:i.x+i.width/2,y:i.y+i.height/2},a.add(rt.rectanglePerimeter(e,!0,o)),a.add(rt.rectanglePerimeter(i,!1,a.get(a.size()-1)))):(o={x:e.x+e.width/2,y:e.y+e.height/2},o=rt.rectanglePerimeter(i,!1,o),a.add(rt.rectanglePerimeter(e,!0,o)),a.add(o)):(o=a.get(0),a.add(rt.rectanglePerimeter(e,!0,o),0),a.add(rt.rectanglePerimeter(i,!1,a.get(a.size()-1))));var r=a.size();if(r<2)return a;for(var h=a.get(0),l=1;l<r-1;l++){var c=a.get(l);c.x===h.x&&c.y===h.y&&(a.remove(c),r--,l--),h=c}return a},isHorizontal:function(t,e,i,n){if(t){if("flexional.horizontal"===t||"orthogonal.horizontal"===t||"orthogonal.H.V"===t||"extend.left"===t||"extend.right"===t)return!0;if("flexional.vertical"===t||"orthogonal.vertical"===t||"orthogonal.V.H"===t||"extend.top"===t||"extend.bottom"===t)return!1}t=rt.calculateXGap(e,i);return rt.calculateYGap(e,i)<=t},flexional:function(t,e,i,n,o){t?rt.flexionalHorizontal(e,i,n,o):rt.flexionalVertical(e,i,n,o)},isSplitByPercent:function(t,e){return e.getStyle("link.split.by.percent")},isExtendTypeLink:function(t){return t&&("extend.top"===t||"extend.left"===t||"extend.bottom"===t||"extend.right"===t)},isFlexionalTypeLink:function(t){return t&&("flexional"===t||"flexional.horizontal"===t||"flexional.vertical"===t)},calculateControlPoint:function(t,e,i,n,o){if("orthogonal.H.V"===t||"orthogonal.V.H"===t)return{x:n.x+n.width/2,y:n.y+n.height/2};if(rt.isExtendTypeLink(t)){var s=Math.min(i.y,n.y),a=Math.min(i.x,n.x),r=Math.max(i.y+i.height,n.y+n.height),h=Math.max(i.x+i.width,n.x+n.width),l=o.getStyle("link.extend");if("extend.top"===t)return{x:(a+h)/2,y:s-l};if("extend.left"===t)return{x:a-l,y:(s+r)/2};if("extend.bottom"===t)return{x:(a+h)/2,y:r+l};if("extend.right"===t)return{x:h+l,y:(s+r)/2}}if((l=rt.isSplitByPercent(t,o)?rt.calculateSplitValueByPercent(t,e,i,n,o.getStyle("link.split.percent")):o.getStyle("link.split.value"))===Number.NEGATIVE_INFINITY||l===Number.POSITIVE_INFINITY)return{x:n.x+n.width/2,y:n.y+n.height/2};if(0===l)return{x:i.x+i.width/2,y:i.y+i.height/2};if(e){e=i.x+i.x+i.width<n.x+n.x+n.width;return{x:rt.calculateSplitLocation(e,l,i.x,i.width),y:i.y+i.height/2}}n=i.y+i.y+i.height<n.y+n.y+n.height;return{x:i.x+i.width/2,y:rt.calculateSplitLocation(n,l,i.y,i.height)}},calculateGap:function(t,e,i,n){return Math.max(e,n)-Math.min(t,i)-(e-t+n-i)},calculateXGap:function(t,e){return Math.max(t.x+t.width,e.x+e.width)-Math.min(t.x,e.x)-t.width-e.width},calculateYGap:function(t,e){return Math.max(t.y+t.height,e.y+e.height)-Math.min(t.y,e.y)-t.height-e.height},calculateSplitValueByPercent:function(t,e,i,n,o){return rt.calculateSplitGapByPercent(o,e,i,n)*o},calculateSplitGapByPercent:function(t,e,i,n,o){return e?rt._calculateSplitGapByPercent(t,i.x,i.x+i.width,n.x,n.x+n.width):rt._calculateSplitGapByPercent(t,i.y,i.y+i.height,n.y,n.y+n.height)},_calculateSplitGapByPercent:function(t,e,i,n,o){var s=rt.calculateGap(e,i,n,o),a=e+i<n+o;if(0<s){if(1===t)return s+(o-n)/2;if(0<=t&&t<1)return s;if(t<0)return a?n-e:i-o}return a&&0<t||!a&&t<0?Math.abs(i-o):Math.abs(e-n)},calculateSplitPercentByControlPoint:function(t,e,i,n){return e?rt.calculateSplitPercent(t.x,i.x,i.x+i.width,n.x,n.x+n.width):rt.calculateSplitPercent(t.y,i.y,i.y+i.height,n.y,n.y+n.height)},calculateSplitPercent:function(t,e,i,n,o){if(e<=t&&t<=i)return 0;var s=rt.calculateGap(e,i,n,o);if(0<s&&n<=t&&t<=o)return 1;var a=e+i<n+o;if(0<s){if(t>Math.min(i,o)&&t<Math.max(e,n))return Math.abs(t-(a?i:e))/s;if(a){if(t<e)return(t-e)/(n-e)}else if(i<t)return(i-t)/(i-o)}return i<t?(a?t-i:i-t)/Math.abs(i-o):(a?t-e:e-t)/Math.abs(e-n)},calculateSplitLocation:function(t,e,i,n){return t===0<e?i+n+Math.abs(e):i-Math.abs(e)},calculateAngle:function(t,e){if(0!==t&&0!==e)return Math.atan2(t,e);if(0===t){if(0<e)return 0;if(e<0)return Math.PI}return 0<t?Math.PI/2:-Math.PI/2},drawCorner:function(t,e){var i=t.size();if(!(i<3)){var n=e.getStyle("link.corner");if("none"!==n){for(var o,s,a,r=e.getStyle("link.xradius"),h=e.getStyle("link.yradius"),l=t.get(0),c=t.get(1),u=2;u<i;u++){var d,_=t.get(u),g=c.x-l.x,f=c.y-l.y,A=_.x-c.x,p=_.y-c.y;(0==g&&0==p||0==f&&0==A)&&(d=0==f?(o=Math.min(2===u?Math.abs(g):Math.abs(g)/2,r),s=Math.min(u===i-1?Math.abs(p):Math.abs(p)/2,h),a={x:c.x-(0<g?o:-o),y:c.y},{x:c.x,y:c.y+(0<p?s:-s)}):(o=Math.min(u===i-1?Math.abs(A):Math.abs(A)/2,r),s=Math.min(2===u?Math.abs(f):Math.abs(f)/2,h),a={x:c.x,y:c.y-(0<f?s:-s)},{x:c.x+(0<A?o:-o),y:c.y}),t.remove(c),u--,i--,a.x===l.x&&a.y===l.y||(t.add(a,u),u++,i++),"bevel"===n?(t.add(d,u),u++,i++):"round"===n&&((A=new ie).add(c),A.add(d),t.add(A,u),u++,i++)),l=c,c=_}d&&d.x===c.x&&d.y===c.y&&t.remove(c)}}},orthogonal:function(t,e,i,n,o,s){var a,r=s.getStyle("link.control.point"),h=null==r;r?(a=b.unionRect(e,i),b.containsPoint(a,r)||(o=rt.calculateIsHorizontalByControlPoint(r.x,r.y,a.y,a.x,a.y+a.height,a.x+a.width))):r=rt.calculateControlPoint(t,o,e,i,s),o?rt.sideToSide(e,i,r,n,h):rt.topToBottom(e,i,r,n,h)},calculateIsHorizontalByControlPoint:function(t,e,i,n,o,s){return!(e<i&&n-t<i-e&&t-s<i-e||o<e&&n-t<e-o&&t-s<e-o)},contains:function(t,e,i){return e>=t.x&&e<=t.x+t.width&&i>=t.y&&i<=t.y+t.height},topToBottom:function(t,e,i,n,o){var s=Math.max(t.y,e.y),a=Math.min(t.y+t.height,e.y+e.height),r=i?i.y:a+(s-a)/2,s=t.x+t.width/2,a=e.x+e.width/2;!o&&i&&(i.x>=t.x&&i.x<=t.x+t.width&&(s=i.x),i.x>=e.x&&i.x<=e.x+e.width&&(a=i.x)),rt.contains(e,s,r)||rt.contains(t,s,r)||n.add({x:s,y:r}),rt.contains(e,a,r)||rt.contains(t,a,r)||n.add({x:a,y:r}),0===n.size()&&(i?rt.contains(e,i.x,r)||rt.contains(t,i.x,r)||n.add({x:i.x,y:r}):(i=Math.max(t.x,e.x),e=Math.min(t.x+t.width,e.x+e.width),n.add({x:i+(e-i)/2,y:r})))},sideToSide:function(t,e,i,n,o){var s=Math.max(t.x,e.x),a=Math.min(t.x+t.width,e.x+e.width),r=i?i.x:a+(s-a)/2,s=t.y+t.height/2,a=e.y+e.height/2;!o&&i&&(i.y>=t.y&&i.y<=t.y+t.height&&(s=i.y),i.y>=e.y&&i.y<=e.y+e.height&&(a=i.y)),rt.contains(e,r,s)||rt.contains(t,r,s)||n.add({x:r,y:s}),rt.contains(e,r,a)||rt.contains(t,r,a)||n.add({x:r,y:a}),0===n.size()&&(i?rt.contains(e,r,i.y)||rt.contains(t,r,i.y)||n.add({x:r,y:i.y}):(i=Math.max(t.y,e.y),e=Math.min(t.y+t.height,e.y+e.height),n.add({x:r,y:i+(e-i)/2})))},flexionalHorizontal:function(t,e,i,n){var o=e.x+e.width<t.x,s=t.x+t.width<e.x,a=o?t.x:t.x+t.width,r=t.y+t.height/2,h=s?e.x:e.x+e.width,l=e.y+e.height/2,t={x:a+(o?-n:n),y:r},e={x:h+(s?-n:n),y:l};o==s?(n=o?Math.min(a,h)-n:Math.max(a,h)+n,i.add({x:n,y:r}),i.add({x:n,y:l})):(t.x<e.x==o?(r=r+(l-r)/2,i.add(t),i.add({x:t.x,y:r}),i.add({x:e.x,y:r})):i.add(t),i.add(e))},flexionalVertical:function(t,e,i,n){var o=e.y+e.height<t.y,s=t.y+t.height<e.y,a=t.x+t.width/2,r=o?t.y:t.y+t.height,h=e.x+e.width/2,l=s?e.y:e.y+e.height,t={x:a,y:r+(o?-n:n)},e={x:h,y:l+(s?-n:n)};o==s?(n=o?Math.min(r,l)-n:Math.max(r,l)+n,i.add({x:a,y:n}),i.add({x:h,y:n})):(t.y<e.y==o?(a=a+(h-a)/2,i.add(t),i.add({x:a,y:t.y}),i.add({x:a,y:e.y})):i.add(t),i.add(e))},rectanglePerimeter:function(t,e,i){var n=t.x+t.width/2,o=t.y+t.height/2,s=i.x-n,a=i.y-o,r=Math.atan2(a,s),h={x:0,y:0},l=Math.PI,a=Math.PI/2-r,s=Math.atan2(t.height,t.width);return r<-l+s||l-s<r?(h.x=t.x,h.y=o-t.width*Math.tan(r)/2):r<-s?(h.y=t.y,h.x=n-t.height*Math.tan(a)/2):r<s?(h.x=t.x+t.width,h.y=o+t.width*Math.tan(r)/2):(h.y=t.y+t.height,h.x=n+t.height*Math.tan(a)/2),i.x>=t.x&&i.x<=t.x+t.width?h.x=i.x:i.y>=t.y&&i.y<=t.y+t.height&&(h.y=i.y),i.x<t.x?h.x=t.x:i.x>t.x+t.width&&(h.x=t.x+t.width),i.y<t.y?h.y=t.y:i.y>t.y+t.height&&(h.y=t.y+t.height),h},isSplitTypeLink:function(t){return t&&("orthogonal"===t||"orthogonal.horizontal"===t||"orthogonal.vertical"===t)},isOrthogonalOrFlexionalLink:function(t){if(t instanceof x.ShapeLink)return!1;if(t.isLooped())return!1;t=t.getStyle("link.type");return rt.isOrthogonalOrFlexionalType(t)},isOrthogonalLink:function(t){if(t instanceof x.ShapeLink)return!1;if(t.isLooped())return!1;t=t.getStyle("link.type");return rt.isOrthogonalType(t)},isOrthogonalOrFlexionalType:function(t){return"orthogonal"===t||"orthogonal.horizontal"===t||"orthogonal.H.V"===t||"orthogonal.vertical"===t||"orthogonal.V.H"===t||"extend.top"===t||"extend.left"===t||"extend.bottom"===t||"extend.right"===t||"flexional"===t||"flexional.horizontal"===t||"flexional.vertical"===t},isOrthogonalType:function(t){return"orthogonal"===t||"orthogonal.horizontal"===t||"orthogonal.H.V"===t||"orthogonal.vertical"===t||"orthogonal.V.H"===t||"extend.top"===t||"extend.left"===t||"extend.bottom"===t||"extend.right"===t},hasControlPoint:function(t){return"orthogonal"===t||"orthogonal.horizontal"===t||"orthogonal.vertical"===t||"extend.bottom"===t||"extend.left"===t||"extend.right"===t||"extend.top"===t},getControlPoint:function(t,e,i){if(!t)throw"link can't be null";var n=t.getStyle("link.type");if(!rt.hasControlPoint(n))return null;var o=t.getStyle("link.control.point");if(o)return o;var s,i=null==e?(s=t.getFromAgent().getRect(),t.getToAgent().getRect()):(s=rt.getLinkSourceBounds(e,i),rt.getLinkTargetBounds(e,i));if(null==s||null==i)return null;n=rt.isHorizontal(n,s,i,t);return rt.calculateControlPoint(t.getStyle("link.type"),n,s,i,t)},getSplitValueByControlPoint:function(t,e,i,n,o){return"extend.top"===e?Math.min(i.y,n.y)-t.y:"extend.left"===e?Math.min(i.x,n.x)-t.x:"extend.bottom"===e?t.y-Math.max(i.y+i.height,n.y+n.height):"extend.right"===e?t.x-Math.max(i.x+i.width,n.x+n.width):o?0<(s=i.x+i.x+i.width<n.x+n.x+n.width?t.x-i.x+i.width:i.x-t.x)?s:s>-i.width?0:s+i.width:0<(s=i.y+i.y+i.height<n.y+n.y+n.height?t.y-i.y-i.height:i.y-t.y)?s:s>-i.height?0:s+i.height;var s},isHorizontalByControlPoint:function(t,e,i,n,o){var s=b.unionRect(i,n);return b.containsPoint(s,t)?rt.isHorizontal(e,i,n,o):rt.calculateIsHorizontalByControlPoint(t.x,t.y,s.y,s.x,s.y+s.height,s.x+s.width)},setParamsByControlPoint:function(t,e,i,n,o){var s=rt.isHorizontalByControlPoint(t,n,e,i,o),a=o.getStyle("link.control.point");!a&&"orthogonal"!==n&&"orthogonal.horizontal"!==n&&"orthogonal.vertical"!==n||o.setStyle("link.type",s?"orthogonal.horizontal":"orthogonal.vertical"),a?o.setStyle("link.control.point",t):(a=rt.getSplitValueByControlPoint(t,n,e,i,s),rt.isExtendTypeLink(n)?o.setStyle("link.extend",a):rt.isSplitByPercent(n,o)?0!==a?o.setStyle("link.split.percent",rt.calculateSplitPercentByControlPoint(t,s,e,i)):o.setStyle("link.split.percent",0):o.setStyle("link.split.value",a))},getLinkNodeBounds:function(t,e,i,n,o,s){var a,r;return s&&(a=s.getLocationZoom(),s.getSizeZoom(t)),null==t?null:(n?(s?(r=t.getZoomBodyRect()).x+=e:(r=t.getBodyRect()).x+=e,r.y+=i):(i=t.getNetwork().getPosition(o,t,null,e,i),r=s?{x:i.x*a,y:i.y*a,width:1,height:1}:{x:i.x,y:i.y,width:1,height:1}),r)},getLinkSourceBounds:function(t,e){var i=t._element,n=t.getNetwork().getElementUI(i.getFromAgent());if(null==n)return null;var o=i.getStyle("link.from.position"),s=i.getStyle("link.from.xoffset"),t=i.getStyle("link.from.yoffset"),i=i.getStyle("link.from.at.edge");return rt.getLinkNodeBounds(n,s,t,i,o,e)},getLinkTargetBounds:function(t,e){var i=t._element,n=t.getNetwork().getElementUI(i.getToAgent());if(null==n)return null;var o=i.getStyle("link.to.position"),s=i.getStyle("link.to.xoffset"),t=i.getStyle("link.to.yoffset"),i=i.getStyle("link.to.at.edge");return rt.getLinkNodeBounds(n,s,t,i,o,e)},orthogonalAndFlexional:function(t,e,i){var n=rt.getLinkSourceBounds(t,i);if(null==n)return null;i=rt.getLinkTargetBounds(t,i);if(null==i)return null;i=rt.calculateOrthogonalAndFlexionalLinkPoints(e,n,i,t._element);return rt.offsetLink(t,i),t.setHotSpot(rt.calculateCenterPoint(i)),"flexional"!==e&&rt.drawCorner(i,t._element),i},offsetLink:function(t,e){if(!t._element.isBundleAgent()){var i=rt.getBundleGap(t,!1);if(0!==i)for(var n,o=!1,s=!1,a=e.get(0),r=Y.clone(a),h=1,l=e.size();h<l;h++){var c=e.get(h),u=c.x-r.x,d=c.y-r.y,r=Y.clone(c),_=rt.calculateAngle(u,d);0===u?((_-n)%Math.PI==0&&(_-n)%(2*Math.PI)!=0&&(o=!o)&&(d=-d),(_-n)%Math.PI!=0&&(a.x+=d<0?i:-i),c.x+=d<0?i:-i):0===d&&((_-n)%Math.PI==0&&(_-n)%(2*Math.PI)!=0&&(s=!s)&&(u=-u),n&&(_-n)%Math.PI==0||(a.y-=u<0?i:-i),c.y-=u<0?i:-i),n=_,a=c}}},_getPointAngleDegree:function(t,e,i,n){t=(t=Math.atan2(n-e,i-t))/Math.PI*180;return t=parseInt(t)+180,t%=360}};Y.link=rt;var ht={findMoveToBottomDatas:function(t,e,i){for(var n=0;n<i.size();n++){var o=i.get(n);t.contains(o)&&e.add(o)}for(n=0;n<i.size();n++)o=i.get(n),ht.findMoveToBottomDatas(t,e,o.getChildren())},findMoveToTopDatas:function(t,e,i){for(var n=0;n<i.size();n++){var o=i.get(i.size()-1-n);t.contains(o)&&e.add(o)}for(n=0;n<i.size();n++)o=i.get(n),ht.findMoveToTopDatas(t,e,o.getChildren())},findMoveUpDatas:function(t,e,i){for(var n=!1,o=0;o<i.size();o++){var s=i.get(o);t.contains(s)?n&&e.add(s):n=!0}for(o=0;o<i.size();o++)s=i.get(o),ht.findMoveUpDatas(t,e,s.getChildren())},findMoveDownDatas:function(t,e,i){for(var n=!1,o=0;o<i.size();o++){var s=i.get(i.size()-1-o);t.contains(s)?n&&e.add(s):n=!0}for(o=0;o<i.size();o++)s=i.get(o),ht.findMoveDownDatas(t,e,s.getChildren())},doLayout:function(t,e){(e=e||{}).type=e.type||"round",e.animate=e.animate||!0,e.elements=e.elements||new x.List,e.repulsion=e.repulsion||1,e.expandGroup=e.expandGroup||!1,new x.layout.AutoLayouter(t.getElementBox()).getElements=function(){}}};Y.box=ht;var lt={scrollLeft:function(){return lt._filterResults(window.pageXOffset||0,E.documentElement?E.documentElement.scrollLeft:0,E.body?E.body.scrollLeft:0)},scrollTop:function(){return lt._filterResults(window.pageYOffset||0,E.documentElement?E.documentElement.scrollTop:0,E.body?E.body.scrollTop:0)},_filterResults:function(t,e,i){t=t||0;return e&&(!t||e<t)&&(t=e),i&&(!t||i<t)?i:t},isSingleTouch:function(t){return t.touches&&1==t.touches.length},isMultiTouch:function(t){return t.touches&&1<t.touches.length},getDistance:function(t){if(!lt.isMultiTouch(t))return 0;var e=t.touches[0],t=t.touches[1];return Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2))},getCenterLocation:function(t){if(!lt.isMultiTouch(t))return 0;var e=t.touches[0],t=t.touches[1];return{x:(e.clientX+t.clientX)/2,y:(e.clientY+t.clientY)/2}}};Y.touch=lt;var ct={_string:function(t,e,i,n){i=i._stringPool.get();i.style.whiteSpace="nowrap",i.style.verticalAlign="middle",i.style.padding="0px 2px",Y.setText(i,t,n),i.setAttribute("title",t),e.appendChild(i)},_boolean:function(t,e,i){i=i._booleanPool.get();e._editInfo?(i._editInfo=e._editInfo,delete e._editInfo,i.disabled=!1):i.disabled=!0,i.keepDefault=!0,i.type="checkbox",i.style.margin="0px 2px",i.style.verticalAlign="middle",i.checked=t,e.appendChild(i),""===e.style.textAlign&&(e.style.textAlign="center")},_color:function(t,e,i){i=i._colorPool.get();i.style.width="100%",i.style.height="100%",i.style.backgroundColor=t,i.setAttribute("title",t),e.appendChild(i)},_listPoints:function(t,e,i,n){i=i._stringPool.get();i.style.whiteSpace="nowrap",i.style.verticalAlign="middle",i.style.padding="0px 2px";var o=t._as||t,s="";o.forEach(function(t,e){s+=e==o.length-1?"["+t.x+","+t.y+"]":"["+t.x+","+t.y+"],"}),t=s,Y.setText(i,t,n),i.setAttribute("title",t),e.appendChild(i)},render:function(t,e,i,n,o){null!=e&&((t=ct["_"+t])?t(e,i,n,o):"boolean"==typeof e?ct._boolean(e,i,n,o):e instanceof x.List?ct._listPoints(e,i,n,o):ct._string(e,i,n,o))}};Y.render=ct;var ut={toolTipDiv:null,getToolTipDiv:function(){var t,e;return ut.toolTipDiv||(ut.toolTipDiv=E.createElement("div"),t=ye,(e=ut.toolTipDiv.style).position="absolute",e.color=t.TOOLTIP_COLOR,e.background=t.TOOLTIP_BACKGROUND,e.fontSize=t.TOOLTIP_FONT_SIZE,e.padding=t.TOOLTIP_PADDING,e.border=t.TOOLTIP_BORDER,e.borderRadius=t.TOOLTIP_BORDER_RADIUS,e.boxShadow=t.TOOLTIP_BOX_SHADOW,e.zIndex=t.TOOLTIP_ZINDEX,e.setProperty&&e.setProperty("-webkit-box-shadow",t.TOOLTIP_BOX_SHADOW,null)),ut.toolTipDiv},isToolTipVisible:function(){return!!ut.getToolTipDiv().parentNode},hideToolTip:function(){var t;ut._clearTimeout(),ut._clearDismiss(),!ut.isToolTipVisible()||(t=ut.getToolTipDiv()).parentNode&&t.parentNode.removeChild(t)},showToolTip:function(t,e,i){t&&e?ut.isToolTipVisible()||ut._reshow_timeout?ut._showToolTip(t,e,i):(ut._clearTimeout(),ut._show_timeout=setTimeout(function(){ut._showToolTip(t,e,i)},ye.TOOLTIP_INITIAL_DELAY)):ut.hideToolTip()},_showToolTip:function(t,e,i){var n,o=t.target?(n=t.clientX,t.clientY):(n=t.x,t.y),s=ut.getToolTipDiv();m.clear(s),e instanceof Element?(t=e.cloneNode(!0),s.appendChild(t)):s.innerHTML=e,s.style.left=n+ye.TOOLTIP_XOFFSET+"px",s.style.top=o+ye.TOOLTIP_YOFFSET+"px",s.parentNode||E.body.appendChild(s),i&&i(s),ut._clearDismiss(),ut._dismiss_timeout=setTimeout(ut.hideToolTip,ye.TOOLTIP_DISMISS_DELAY),ut._clearReshow(),ut._reshow_timeout=setTimeout(ut._clearReshow,ye.TOOLTIP_RESHOW_DELAY)},_clearDismiss:function(){ut._dismiss_timeout&&(clearTimeout(ut._dismiss_timeout),ut._dismiss_timeout=null)},_clearReshow:function(){ut._reshow_timeout&&(clearTimeout(ut._reshow_timeout),ut._reshow_timeout=null)},_clearTimeout:function(){ut._show_timeout&&(clearTimeout(ut._show_timeout),ut._show_timeout=null)},resetToolTip:function(){ut.hideToolTip(),ut.toolTipDiv=null}};Y.popup=ut;var dt={handleClicked:function(t,e,i){var n;t.isSelectingElement()||!g.isTouchable&&0!==e.button||(i?((n=_t(i))&&n.onClick&&n.onClick(i,t),t.onClickElement(i,e),t.fireInteractionEvent({kind:"clickElement",event:e,element:i})):(t.onClickBackground(e),t.fireInteractionEvent({kind:"clickBackground",event:e})))},handleDoubleClicked:function(t,e,i){var n;!g.isTouchable&&0!==e.button||t.isEditingElement()||(i?((n=_t(i))&&n.onDoubleClick&&n.onDoubleClick(i,t),t.onDoubleClickElement(i,e),t.fireInteractionEvent({kind:"doubleClickElement",event:e,element:i})):(t.onDoubleClickBackground(e),t.fireInteractionEvent({kind:"doubleClickBackground",event:e})),i?i instanceof x.Link&&t.isDoubleClickToLinkBundle()?i.ISubNetwork&&t.isDoubleClickToSubNetwork()&&!Y.isCtrlDown(e)?(t.isDoubleClickToEmptySubNetwork()||0<i.getChildrenSize())&&t.setCurrentSubNetwork(i,t.isSubNetworkAnimate(),function(){t.fireInteractionEvent({kind:"enterSubNetwork",event:e,element:i})}):i.reverseBundleExpanded()&&t.fireInteractionEvent({kind:"bundleLink",event:e,element:i}):i.ISubNetwork&&t.isDoubleClickToSubNetwork()?(t.isDoubleClickToEmptySubNetwork()||0<i.getChildrenSize())&&t.setCurrentSubNetwork(i,t.isSubNetworkAnimate(),function(){t.fireInteractionEvent({kind:"enterSubNetwork",event:e,element:i})}):i instanceof Me&&t.isDoubleClickToGroupExpand()&&(i.reverseExpanded(),t.fireInteractionEvent({kind:"expandGroup",event:e,element:i})):t.isDoubleClickToUpSubNetwork()&&t.upSubNetwork(t.isSubNetworkAnimate(),function(){t.fireInteractionEvent({kind:"upSubNetwork",event:e})}))},handleKeyDown:function(t,e){Y.isCtrlDown(e)&&65==e.keyCode?(t.isKeyboardSelectEnabled()&&0<t.selectAll().size()&&t.fireInteractionEvent({kind:"selectAll"}),m.preventDefault(e)):46==e.keyCode?(t.isKeyboardRemoveEnabled()&&t.removeSelection()&&t.fireInteractionEvent({kind:"removeElement"}),m.preventDefault(e)):Y.showVersion(e)},handleLongClicked:function(t,e,i){var n;!g.isTouchable&&0!==e.button||(i?((n=_t(i))&&n.onLongClick&&n.onLongClick(i,t),t.onLongClickElement(i,e),t.fireInteractionEvent({kind:"longClickElement",event:e,element:i})):(t.onLongClickBackground(e),t.fireInteractionEvent({kind:"longClickBackground",event:e})))}},_t=function(t){if(t&&t._image){if("object"==typeof t._image)return t._image;t=Y.getImageAsset(t._image);if(t)return t._image}return null};Y.interaction=dt;var gt=function(t){return(t.trim()[0].match(/[mlhvcsqta]/i)?yt:At)(t)},ft={},At=function(t){var e=ft[t];return e||(ft[t]=e=[],t.trim().split(" ").forEach(function(t){2===(t=t.split(",")).length?e.push({x:parseFloat(t[0]),y:parseFloat(t[1])}):e.push(t[0])}),e)},pt={},mt=/[mlhvcsqtaz][\d.,\-\s]*/gi,vt=/-?(\d)+(\.(\d)+)?/g,yt=function(t){var e,s=pt[t];return s||(e=t.trim().match(mt),pt[t]=s=[],e&&e.forEach(function(t){var e,i=t[0],n=t.match(vt),o=n&&n.length;if(s.push(t={c:i}),o)switch(n.forEach(function(t,e){n[e]=parseFloat(t)}),i){case"M":case"m":case"L":case"l":for(e=0;e<o;e+=2)0!==e&&s.push(t={c:"M"===i||"L"===i?"L":"l"}),t.x=n[e],t.y=n[e+1];break;case"H":case"h":for(e=0;e<o;e++)0!==e&&s.push(t={c:i}),t.x=n[e];break;case"V":case"v":for(e=0;e<o;e++)0!==e&&s.push(t={c:i}),t.y=n[e];break;case"C":case"c":for(e=0;e<o;e+=6)0!==e&&s.push(t={c:i}),t.x1=n[e],t.y1=n[e+1],t.x2=n[e+2],t.y2=n[e+3],t.x=n[e+4],t.y=n[e+5];break;case"S":case"s":for(e=0;e<o;e+=4)0!==e&&s.push(t={c:i}),t.x2=n[e],t.y2=n[e+1],t.x=n[e+2],t.y=n[e+3];break;case"Q":case"q":for(e=0;e<o;e+=4)0!==e&&s.push(t={c:i}),t.x1=n[e],t.y1=n[e+1],t.x=n[e+2],t.y=n[e+3];break;case"T":case"t":for(e=0;e<o;e+=2)0!==e&&s.push(t={c:i}),t.x=n[e],t.y=n[e+1]}}),s)},wt=function(t){return t.replace(/[\s\r\t\n]+/gm," ").trim().replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/).map(function(t){return t.replace(")","").trim().split(/\s*\(\s*|\s+,?\s*|,\s*/).map(function(t,e){return 0===e?t:parseFloat(t)})})},xt=x.Util.drawImage=function(t,e,i,n,o,s,a){var r,h,l,c=1;"object"!=typeof e&&(l=e,e=(r=Y.images[e])&&r.getImage()),Nt(e)?t.drawImage(r?r.getImage(i,n.width,n.height):e,n.x,n.y,n.width,n.height):e&&"object"==typeof e&&(t._data=o,t._view=s,l?(h=n.width/(e.w&&Pt(o,e,e,"w")||o.getWidth()),l=n.height/(e.h&&Pt(o,e,e,"h")||o.getHeight()),s&&(c=s.getSizeZoom?s.getSizeZoom()*s.getGraphicsZoom():s.getZoom()),!r._cache||1<Math.max(h*c,l*c)?Et(t,e,i,n,o,s,a):t.drawImage(i?r.getImage(i,n.width,n.height):r._cache,n.x,n.y,n.width,n.height)):Et(t,e,i,n,o,s,a),t._data=null,t._view=null)},Et=function(e,t,i,n,o,s,a){var r,h,l,c,u,d,_,g,f=o&&o.getStyle("image.state"),A=e._vector,p=e._color,m=e._fill,v=e._pattern,y=e._lineWidth,w=e._alpha,x=e._sx,E=e._sy,C=t;if(!1!==Pt(o,C,C,"visible",s)){for(e._color=i,(r=Pt(o,C,C,"v",s))&&r.length,_=C.w&&Pt(o,C,C,"w")||o.getWidth(),g=C.h&&Pt(o,C,C,"h")||o.getHeight(),t=n.width/_,i=n.height/g,!0===a?(e._fill=null,e._pattern=null,e._lineWidth=null,e._alpha=null):(e._sx=t,e._sy=i),e.save(),e.translate(n.x+n.width/2,n.y+n.height/2),1==t&&1==i||e.scale(t,i),C.origin&&e.translate((C.origin.x-.5)*_,(C.origin.y-.5)*g),(e._vector=C).clip&&(e.beginPath(),!0===C.clip?e.rect(-(C.origin?C.origin.x:.5)*_,-(C.origin?C.origin.y:.5)*g,_,g):C.clip.length?C.clip.forEach(function(t){e.drawShape(t)}):e.drawShape(C.clip),e.clip()),Lt(o,C,C,e,s),l=0,h=r.length;l<h;l++)u=r[l],e._shapeData=u,s&&(s._shapeDataIndex=l,u.animate&&Vt(u,C,o,s)),d=Pt(o,C,u,"state",s),!1===Pt(o,C,u,"visible",s)||d&&!(Array.isArray(d)?0<=d.indexOf(f):d===f)||(c=Ct[u.shape])&&(e.save(),"vector"===u.shape||"g"===u.shape?c(e,u,o,s):Lt(o,C,u,e,s,function(){c(e,u,o,s)}),e.restore()),s&&(s._shapeDataIndex=null),e._shapeData=null;e.restore(),e._vector=A,e._shapeData=null,e._color=p,e._fill=m,e._pattern=v,e._lineWidth=y,e._alpha=w,e._sx=x,e._sy=E}},Ct={line:function(t,e,i,n){var o,s,a=Pt(i,t._vector,e,"p1",n),r=Pt(i,t._vector,e,"p2",n),a=a?(o=Mt(a.length?a[0]:a.x,t),Dt(a.length?a[1]:a.y,t)):(o=Pt(i,t._vector,e,"x1",n,!0),Pt(i,t._vector,e,"y1",n,!1)),n=r?(s=Mt(r.length?r[0]:r.x,t),Dt(r.length?r[1]:r.y,t)):(s=Pt(i,t._vector,e,"x2",n,!0),Pt(i,t._vector,e,"y2",n,!1));t.moveTo(o,a),t.lineTo(s,n)},rect:function(t,e,i,n){var o,s,a,r=Pt(i,t._vector,e,"rect",n),h=Pt(i,t._vector,e,"r",n),l=r?(l=Array.isArray(r)?(o=r[0],s=r[1],a=r[2],r[3]):(o=r.x,s=r.y,a=r.w,r.h),o=Mt(o,t),s=Dt(s,t),a=Mt(a,t),Dt(l,t)):(o=Pt(i,t._vector,e,"x",n,!0),s=Pt(i,t._vector,e,"y",n,!1),a=Pt(i,t._vector,e,"w",n,!0),Pt(i,t._vector,e,"h",n,!1));t.drawRoundRect(o,s,a,l,h),(t._gradientFunc||t._pattern)&&(t._rect={x:o,y:s,w:a,h:l})},circle:function(t,e,i,n){var o=Pt(i,t._vector,e,"cx",n,!0),s=Pt(i,t._vector,e,"cy",n,!1),a=t._vector.w&&Pt(i,t._vector,t._vector,"w")||i.getWidth(),r=t._vector.h&&Pt(i,t._vector,t._vector,"h")||i.getHeight(),h=kt(Pt(i,t._vector,e,"r",n),Math.min(a,r),e,t._vector),l=Pt(i,t._vector,e,"startAngle",n),a=Pt(i,t._vector,e,"endAngle",n),r=Pt(i,t._vector,e,"anticlockwise",n),n=Pt(i,t._vector,e,"close",n);null==l&&(l=0),null==a&&(a=360),null==r&&(r=!1),n&&t.moveTo(o,s),t.arc(o,s,h,l/180*Math.PI,a/180*Math.PI,r),n&&t.closePath(),(t._gradientFunc||t._pattern)&&(t._rect={x:o-h,y:s-h,w:2*h,h:2*h})},ellipse:function(t,e,i,n){var o=Pt(i,t._vector,e,"cx",n,!0),s=Pt(i,t._vector,e,"cy",n,!1),a=Pt(i,t._vector,e,"rx",n,!0),r=Pt(i,t._vector,e,"ry",n,!1),h=Pt(i,t._vector,e,"startAngle",n),l=Pt(i,t._vector,e,"endAngle",n),c=Pt(i,t._vector,e,"anticlockwise",n),n=Pt(i,t._vector,e,"close",n);null==h&&(h=0),null==l&&(l=360),null==c&&(c=!1),n&&t.moveTo(o,s),t.ellipse(o,s,a,r,0,h/180*Math.PI,l/180*Math.PI,c),n&&t.closePath(),(t._gradientFunc||t._pattern)&&(t._rect={x:o-a,y:s-r,w:2*a,h:2*r})},path:function(t,e,i,n){n=Pt(i,t._vector,e,"data",n);t.drawPath(n)},text:function(l,t,e,i){var c,u,d,_,g,f,n=Pt(e,l._vector,t,"text",i),A=Pt(e,l._vector,t,"x",i,!0),p=Pt(e,l._vector,t,"y",i,!1),m=Pt(e,l._vector,t,"w",i,!0);null!=n&&(i=(n=String(n)).split("\n"),c=2*l.measureText("e").width,u=l,d=m,g=_=0,n=(n=n).split("\n"),f=2*u.measureText("e").width,n.forEach(function(t){if(d)for(var e,i,n,o,s=t.split(" "),a=s.length,r="",h=0;h<a;h++)if(e=s[h]+(h===a-1?"":" "),(n=u.measureText(i=r+e).width)<d)r=i;else if(n==d)r="",g+=f;else{for(o=0;o<e.length;o++)if(i=r+e.substr(0,o+1),u.measureText(i).width>d){r=e.substring(o,e.length),g+=f;break}for(;0<r.length&&u.measureText(r).width>d;)for(o=0;o<r.length;o++)if(i=r.substr(0,o+1),u.measureText(i).width>d){r=r.substring(o,r.length),g+=f;break}}else n=u.measureText(t).width,_=_<n?n:_;g+=f}),n={w:_=d||_,h:g},p-=(n.h/c-1)/2*c,i.forEach(function(t){if(m){for(var e,i,n,o,s=t.split(" "),a=s.length,r="",h=0;h<a;h++)if(e=s[h]+(h===a-1?"":" "),(n=l.measureText(i=r+e).width)<m)r=i;else if(n==m)l.fillText(r,A,p),r="",p+=c;else{for(o=0;o<e.length;o++)if(i=r+e.substr(0,o+1),l.measureText(i).width>m){l.fillText(i.substring(0,i.length-1),A,p),r=e.substring(o,e.length),p+=c;break}for(;0<r.length&&l.measureText(r).width>m;)for(o=0;o<r.length;o++)if(i=r.substr(0,o+1),l.measureText(i).width>m){l.fillText(r.substr(0,o),A,p),r=r.substring(o,r.length),p+=c;break}}l.fillText(r,A,p)}else l.fillText(t,A,p);p+=c}))},draw:function(t,e,i,n){var o=e.draw;"function"==typeof(o="string"==typeof o?(e=o.match(bt))?(e="with(data) { "+e[1]+" }",x.Util.newFunction("g","data","view",e)):Ut[o]:o)&&o.call(t._vector,t,i,n)},vector:function(e,t,i,n){var o,s,a,r,h,l,c,u,d,_=e._vector,g=Pt(i,_,t,"name",n),f=Pt(i,_,t,"x",n,!0),A=Pt(i,_,t,"y",n,!1),p=Pt(i,_,t,"w",n),m=Pt(i,_,t,"h",n),v="string"==typeof g?(h=Y.images[g])&&h._image:g;if(v)if(Nt(v))null!=p&&null!=m?e.drawImage(v,f,A,Mt(p,e),Dt(m,e)):e.drawImage(v,f,A);else{for(c=(l=Pt(i,v,v,"v",n))&&l.length,u=v.w&&Pt(i,v,v,"w"),d=v.h&&Pt(i,v,v,"h"),m=null!=p&&null!=m?(p=Mt(p,e),Dt(m,e)):(p=u,d),e.save(),r=e._lineWidth,h=e._fill,g=e._alpha,Lt(i,v,v,e,n),Lt(i,_,t,e,n),e.translate(f,A),e.scale(p/u,m/d),v.origin&&e.translate((v.origin.x-.5)*u,(v.origin.y-.5)*d),v.clip&&(e.beginPath(),!0===v.clip?e.rect(-(v.origin?v.origin.x:.5)*u,-(v.origin?v.origin.y:.5)*d,u,d):v.clip.length?v.clip.forEach(function(t){e.drawShape(t)}):e.drawShape(v.clip),e.clip()),d=e._shapeData,e._vector=v,o=0;o<c;o++)s=l[o],e._shapeData=s,n&&(n._shapeDataIndex.length?n._shapeDataIndex.push(o):n._shapeDataIndex=[n._shapeDataIndex,o],s.animate&&Vt(s,_,i,n)),!1!==Pt(i,v,s,"visible",n)&&(a=Ct[s.shape])&&(e.save(),"vector"===s.shape||"g"===s.shape?a(e,s,i,n):Lt(i,v,s,e,n,function(){a(e,s,i,n)}),e.restore()),n&&n._shapeDataIndex.pop();e._vector=_,e._shapeData=d,e._lineWidth=r,e._fill=h,e._alpha=g,e.restore()}},g:function(e,t,i,n){var o,s,a,r,h,l=Pt(i,e._vector,t,"v",n);l&&l.length&&(e.save(),s=e._lineWidth,a=e._fill,r=e._alpha,h=e._shapeData,Lt(i,e._vector,t,e,n),l.forEach(function(t){!1!==Pt(i,e._vector,t,"visible",n)&&(o=Ct[t.shape])&&(e.save(),"vector"===(e._shapeData=t).shape||"g"===t.shape?o(e,t,i,n):Lt(i,e._vector,t,e,n,function(){o(e,t,i,n)}),e.restore())}),e._lineWidth=s,e._fill=a,e._alpha=r,e._shapeData=h,e.restore())}};Ct.image=Ct.vector;var Tt=Object.keys(Ct),It={M:function(t,e){return t.moveTo(e.x,e.y),t._path_start=e,t._rect&&Bt(t._rect,e.x,e.y),e},m:function(t,e,i){return i&&(e={x:i.x+e.x,y:i.y+e.y}),t.moveTo(e.x,e.y),t._path_start=e,t._rect&&Bt(t._rect,e.x,e.y),e},Z:function(t){return t.closePath(),t._path_start},z:function(t){return t.closePath(),t._path_start},L:function(t,e){return t.lineTo(e.x,e.y),t._rect&&Bt(t._rect,e.x,e.y),e},l:function(t,e,i){e={x:i.x+e.x,y:i.y+e.y};return t.lineTo(e.x,e.y),t._rect&&Bt(t._rect,e.x,e.y),e},H:function(t,e,i){i={x:e.x,y:i.y};return t.lineTo(i.x,i.y),t._rect&&Bt(t._rect,i.x,i.y),i},h:function(t,e,i){i={x:i.x+e.x,y:i.y};return t.lineTo(i.x,i.y),t._rect&&Bt(t._rect,i.x,i.y),i},V:function(t,e,i){e={x:i.x,y:e.y};return t.lineTo(e.x,e.y),t._rect&&Bt(t._rect,e.x,e.y),e},v:function(t,e,i){e={x:i.x,y:i.y+e.y};return t.lineTo(e.x,e.y),t._rect&&Bt(t._rect,e.x,e.y),e},Q:function(t,e){return t._preQ_x=e.x1,t._preQ_y=e.y1,t.quadraticCurveTo(e.x1,e.y1,e.x,e.y),t._rect&&(Bt(t._rect,e.x1,e.y1),Bt(t._rect,e.x,e.y)),e},q:function(t,e,i){var n={x:i.x+e.x,y:i.y+e.y},o=t._preQ_x=i.x+e.x1,e=t._preQ_y=i.y+e.y1;return t.quadraticCurveTo(o,e,n.x,n.y),t._rect&&(Bt(t._rect,o,e),Bt(t._rect,n.x,n.y)),n},T:function(t,e,i){var n=t._preQ_x=2*i.x-t._preQ_x,i=t._preQ_y=2*i.y-t._preQ_y;return t.quadraticCurveTo(n,i,e.x,e.y),t._rect&&(Bt(t._rect,n,i),Bt(t._rect,e.x,e.y)),e},t:function(t,e,i){var n={x:i.x+e.x,y:i.y+e.y},e=t._preQ_x=2*i.x-t._preQ_x,i=t._preQ_y=2*i.y-t._preQ_y;return t.quadraticCurveTo(e,i,n.x,n.y),t._rect&&(Bt(t._rect,e,i),Bt(t._rect,n.x,n.y)),n},C:function(t,e){return t._preC_x=e.x2,t._preC_y=e.y2,t.bezierCurveTo(e.x1,e.y1,e.x2,e.y2,e.x,e.y),t._rect&&(Bt(t._rect,e.x1,e.y1),Bt(t._rect,e.x2,e.y2),Bt(t._rect,e.x,e.y)),e},c:function(t,e,i){var n={x:i.x+e.x,y:i.y+e.y},o=i.x+e.x1,s=i.y+e.y1,a=t._preC_x=i.x+e.x2,e=t._preC_y=i.y+e.y2;return t.bezierCurveTo(o,s,a,e,n.x,n.y),t._rect&&(Bt(t._rect,o,s),Bt(t._rect,a,e),Bt(t._rect,n.x,n.y)),n},S:function(t,e,i){var n=2*i.x-t._preC_x,i=2*i.y-t._preC_y;return t._preC_x=e.x2,t._preC_y=e.y2,t.bezierCurveTo(n,i,e.x2,e.y2,e.x,e.y),t._rect&&(Bt(t._rect,n,i),Bt(t._rect,e.x2,e.y2),Bt(t._rect,e.x,e.y)),e},s:function(t,e,i){var n={x:i.x+e.x,y:i.y+e.y},o=2*i.x-t._preC_x,s=2*i.y-t._preC_y,a=t._preC_x=i.x+e.x2,e=t._preC_y=i.y+e.y2;return t.bezierCurveTo(o,s,a,e,n.x,n.y),t._rect&&(Bt(t._rect,o,s),Bt(t._rect,a,e),Bt(t._rect,n.x,n.y)),n}},Lt=function(t,e,i,n,o,s){var a,r,h,l,c,u,d,_,g,f,A,p,m,v,y,w,x,E,C,T,I=Pt(t,e,i,"line",o),L=Pt(t,e,i,"fill",o),S=Pt(t,e,i,"fillRule",o)||"nonzero",b=Pt(t,e,i,"gradient",o),R=Pt(t,e,i,"gradientColor",o),P=Pt(t,e,i,"pattern",o),M=Pt(t,e,i,"font",o),D=Pt(t,e,i,"textAlign",o)||"center",k=Pt(t,e,i,"textBaseline",o)||"middle",O=Pt(t,e,i,"translate",o),B=Pt(t,e,i,"rotate",o),N=Pt(t,e,i,"rotateOrigin",o),U=Pt(t,e,i,"scale",o),z=Pt(t,e,i,"transform",o),F=Pt(t,e,i,"alpha",o),V=n._lineWidth,G=n._fill,H=n._pattern,W=n._alpha,Z=n._gradientFunc,I=I?(a=I.color,r=I.width,h=I.cap,l=I.join,c=I.miterLimit,u=I.dash,I.dashOffset):(a=Pt(t,e,i,"lineColor",o),r=Pt(t,e,i,"lineWidth",o),h=Pt(t,e,i,"lineCap",o),l=Pt(t,e,i,"lineJoin",o),c=Pt(t,e,i,"miterLimit",o),u=Pt(t,e,i,"lineDash",o),Pt(t,e,i,"lineDashOffset",o));null!=a&&(n.strokeStyle=ce(a,n._color)),null!=r&&(n.lineWidth=n._lineWidth=o&&o.getSizeZoom&&!o.zoomManager.sizeChange?r/o.getSizeZoom():r),null!=h&&(n.lineCap=h),null!=l&&(n.lineJoin=l),null!=c&&(n.miterLimit=c),null!=u&&(n.lineDash=u,n.setLineDash(u)),null!=I&&(n.lineDashOffset=I),P?n._pattern=P:(L&&(n.fillStyle=n._fill=ce(L,n._color)),b&&("string"==typeof b?d=j[b]:(d=j[b.type],b.color&&(R=b.color),d||(A=n,(P=(I=b).transform&&wt(I.transform))&&P.length&&(p=X.identity(),P.forEach(function(t){var e=t[0];"matrix"===e?p.multiply(new X(t[1],t[2],t[3],t[4],t[5],t[6])):"translate"===e?p.translate(t[1]||0,t[2]||0):"scale"===e?p.scale(t[1]||1,t[2]||t[1]||1):"rotate"===e?p.rotate(t[1]||0,t[2]||0,t[3]||0):"skewX"===e?p.skew(t[1]||0,0):"skewY"===e&&p.skew(0,t[1]||0)})),"linear"===I.type?(y=I.x1||0,w=I.y1||0,x=I.x2||0,E=I.y2||0,p&&(y=(m=p.transform(y,w)).x,w=m.y,x=(m=p.transform(x,E)).x,E=m.y),v=A.createLinearGradient(y,w,x,E)):"radial"===I.type&&(P=I.fx||0,y=I.fy||0,w=I.cx||0,x=I.cy||0,E=I.r||0,null==I.fx&&(P=w),null==I.fy&&(y=x),p&&(P=(m=p.transform(P,y)).x,y=m.y,w=(m=p.transform(w,x)).x,x=m.y,E=Math.max(p._m11,p._m22)*E),v=A.createRadialGradient(P,y,0,w,x,E)),v&&I.stop&&I.stop.length&&I.stop.forEach(function(t){v.addColorStop(parseFloat(t.offset),ce(t.color,A._color))}),b=v)),n._gradientFunc=d)),null!=M&&(n.font=M),null!=D&&(n.textAlign=D),null!=k&&(n.textBaseline=k),St(t,e,i,n,o),null!=z?(z="string"==typeof z?wt(z):z).length&&z.forEach(function(t){var e=t[0];"matrix"===e?n.transform(t[1],t[2],t[3],t[4],t[5],t[6]):"translate"===e?n.translate(t[1]||0,t[2]||0):"scale"===e?n.scale(t[1]||1,t[2]||t[1]||1):"rotate"===e?2<t.length?(n.translate(t[2],t[3]),n.rotate(t[1]),n.translate(-t[2],-t[3])):n.rotate(t[1]):"skewX"===e?n.transform(1,0,Math.tan(t[1]*Math.PI/180),1,0,0):"skewY"===e&&n.transform(1,Math.tan(t[1]*Math.PI/180),0,1,0,0)}):(null!=O&&(O=Array.isArray(O)?(f=O[0],O[1]):"object"==typeof O?(f=O.x,O.y):(f=O,0),f=Mt(f,n),O=Dt(O,n),0===f&&0===O||n.translate(f,O)),null!=B&&B%360!=0&&(N&&(Array.isArray(N)?(C=N[0],T=N[1]):"object"==typeof N?(C=N.x,T=N.y):C=T=N,C=Mt(C,n),T=Dt(T,n),0===C&&0===T||n.translate(C,T)),n.rotate(B*Math.PI/180),N&&(0===C&&0===T||n.translate(-C,-T))),null!=U&&(Array.isArray(U)?(_=U[0],g=U[1]):"object"==typeof U?(_=U.x,g=U.y):_=g=U,1===_&&1===g||n.scale(_,g))),null!=F&&(n.globalAlpha=n._alpha=null!=W?W*F:F),s&&(n.beginPath(),s(),i=n._rect||i.rect,n._pattern?(0<n._lineWidth&&n.stroke(),n.clip(),function(t,e,i,n,o){var s,a,r,h,l,c,u,d,_=t._vector,g=_.origin,f=_.w&&Pt(n,_,_,"w")||n.getWidth(),A=_.h&&Pt(n,_,_,"h")||n.getHeight();if("string"==typeof e?(_=Y.images[e])&&(r=_.getWidth(),h=_.getHeight()):(r=e.w&&Pt(n,e,e,"w"),h=e.h&&Pt(n,e,e,"h")),r&&h&&i)for(l=i.w/r*t._sx,c=i.h/h*t._sy,s=i.x-f/2*(t._sx-1),a=i.y-A/2*(t._sy-1),g&&(s-=(g.x-.5)*f*(t._sx-1),a-=(g.y-.5)*A*(t._sy-1)),1===t._sx&&1===t._sy||(t.scale(1/t._sx,1/t._sy),s+=((g?g.x:.5)*f+i.x)*(t._sx-1),a+=((g?g.x:.5)*A+i.y)*(t._sy-1)),i={x:0,y:0,width:r,height:h},u=0;u<l;u++)for(d=0;d<c;d++)i.x=u*r+s,i.y=d*h+a,xt(t,e,null,i,n,o,!0)}(n,n._pattern,i,t,o)):((b=d&&i?d(n,ce(L||"#000000",n._color),ce(R||"#FFFFFF",n._color),i.x,i.y,i.w,i.h):b)&&(n.fillStyle=n._fill=b),n._fill&&n.fill(S),0<n._lineWidth&&n.stroke()),n._lineWidth=V,n._fill=G,n._pattern=H,n._alpha=W,n._gradientFunc=Z,n._rect=null)},St=function(t,e,i,n,o){var s,a,r,h=Pt(t,e,i,"shadow",o),o=h?(s=h.offsetX,a=h.offsetY,r=h.blur,h.color):(s=Pt(t,e,i,"shadowOffsetX",o),a=Pt(t,e,i,"shadowOffsetY",o),r=Pt(t,e,i,"shadowBlur",o),Pt(t,e,i,"shadowColor",o));null!=s&&(n.shadowOffsetX=s),null!=a&&(n.shadowOffsetY=a),null!=r&&(n.shadowBlur=r),null!=o&&(n.shadowColor=o)},bt=/<%([\s\S]+?)%>/,Rt=new RegExp([/<%=([\s\S]+?)%>/.source,bt.source].join("|")),Pt=function(t,e,i,n,o,s,a){var r,h=i[n],l=typeof h;if("string"==l&&(r=h.match(Rt))?(r="with(data) { "+(r[1]?"return "+r[1]:r[2])+" }",h=x.Util.newFunction("data","view",r).call(e,t,o)):"function"==l&&(h=h.call(e,t,o)),!0===s?(l=e.w&&Pt(t,e,e,"w")||t.getWidth(),(!0===i.rel||void 0===i.rel&&e.rel)&&h<=1&&-1<=h?h*=l:"string"==typeof h&&(h=parseInt(h)/100*l),h=h||0):!1===s&&(s=e.h&&Pt(t,e,e,"h")||t.getHeight(),(!0===i.rel||void 0===i.rel&&e.rel)&&h<=1&&-1<=h?h*=s:"string"==typeof h&&(h=parseInt(h)/100*s),h=h||0),!1!==a&&o&&t&&i.animate&&t._animates){var c,u=t._animates,d=o._shapeDataIndex;if(d.length)for(var _=0;_<d.length;_++)u=u[c=d[_]];else c=d;var g=u[c][n];if(g)if(Array.isArray(g))for(_=g.length-1;0<=_;_--){var f=g[_];if((f.stopped||0<f.time)&&f.started)return Qt(f,h)}else if(g.started)return Qt(g,h)}return h},Mt=function(t,e){if(!t)return 0;var i=e._vector.w&&Pt(e._data,e._vector,e._vector,"w")||e._data.getWidth();return(e._shapeData&&!0===e._shapeData.rel||(!e._shapeData||void 0===e._shapeData.rel)&&e._vector.rel)&&t<=1&&-1<=t?t*i:"string"==typeof t?parseInt(t)/100*i:t},Dt=function(t,e){if(!t)return 0;var i=e._vector.h&&Pt(e._data,e._vector,e._vector,"h")||e._data.getHeight();return(e._shapeData&&!0===e._shapeData.rel||(!e._shapeData||void 0===e._shapeData.rel)&&e._vector.rel)&&t<=1&&-1<=t?t*i:"string"==typeof t?parseInt(t)/100*i:t},kt=function(t,e,i,n){return t?(!0===i.rel||void 0===i.rel&&n.rel)&&t<=1&&-1<=t?t*e:"string"==typeof t?parseInt(t)/100*e:t:0},Ot=(window.CanvasRenderingContext2D||n.Context2d).prototype;Ot.drawShape=function(t){var e=this,i=e._vector,n=e._shapeData,o=e._data,s=e._view,a=Ct[t.shape];a&&(e.save(),"vector"===(e._shapeData=t).shape||"g"===t.shape?a(e,t,o,s):Lt(o,i,t,e,s,function(){a(e,t,o,s)}),e._shapeData=n,e.restore())},Ot.drawPath=function(t){var e,i,n,o,s,a,r,h,l,c,u,d,_=this;if(!((l=(t="string"==typeof t?gt(t):t)?t.length:0)<=1)){if((_._gradientFunc||_._pattern)&&(_._rect=c={x:0,y:0,w:0,h:0}),(e=t&&t[0]&&t[0].c)||(i=t&&t[0]&&null!=t[0].x,(n="z"===t[l-1]||"Z"===t[l-1])&&l--),e){for(o=0;o<l;o++)a=t[o],(r=It[a.c])&&(s=r(_,a,s));_._path_start=null,_._preC_x=null,_._preC_y=null,_._preQ_x=null,_._preQ_y=null}else if(i){for(h=t[0],u=Mt(h.x,_),d=Dt(h.y,_),_.moveTo(u,d),c&&Bt(c,u,d),o=1;o<l;o++)h=t[o],u=Mt(h.x,_),d=Dt(h.y,_),_.lineTo(u,d),c&&Bt(c,u,d);n&&_.closePath()}else{for(u=Mt(t[0],_),d=Dt(t[1],_),_.moveTo(u,d),c&&Bt(c,u,d),o=2;o<l;o+=2)u=Mt(t[o],_),d=Dt(t[o+1],_),_.lineTo(u,d),c&&Bt(c,u,d);n&&_.closePath()}return t}};var Bt=function(t,e,i){var n=Math.min(t.x,e),o=Math.max(t.x+t.w,e),e=Math.min(t.y,i),i=Math.max(t.y+t.h,i);t.x=n,t.y=e,t.w=o-n,t.h=i-e};Ot._fillPath=function(t,e){this.beginPath(),this.fillStyle=t,this.drawPath(e),this.fill()},Ot._fillRect=function(t,e,i,n,o){this.beginPath(),this.fillStyle=t,this.rect(e,i,n,o),this.fill()},Ot.ellipse||(Ot.ellipse=function(t,e,i,n){var o=.5522848*i,s=.5522848*n,a=t+i,r=e+n,i=t-i,n=e-n;this.moveTo(i,e),this.bezierCurveTo(i,e-s,t-o,n,t,n),this.bezierCurveTo(t+o,n,a,e-s,a,e),this.bezierCurveTo(a,e+s,t+o,r,t,r),this.bezierCurveTo(t-o,r,i,e+s,i,e)}),Ot.drawRoundRect=function(t,e,i,n,o){var s=this;if(o){if(Array.isArray(o))if(1===o.length)c=u=d=a=o[0];else if(2===o.length)c=u=o[0],d=a=o[1];else{if(4!==o.length)return void s.rect(t,e,i,n);c=o[0],u=o[1],d=o[2],a=o[3]}else c=u=d=a=o;var a,r=t+i,h=e+n,l=i<n?2*i:2*n,c=c<l?c:l,u=u<l?u:l,d=d<l?d:l,o=.292893218813453*(a=a<l?a:l),l=.585786437626905*a;s.moveTo(r,h-a),s.quadraticCurveTo(r,h-l,r-o,h-o),s.quadraticCurveTo(r-l,h,r-a,h),o=.292893218813453*d,l=.585786437626905*d,s.lineTo(t+d,h),s.quadraticCurveTo(t+l,h,t+o,h-o),s.quadraticCurveTo(t,h-l,t,h-d),o=.292893218813453*c,l=.585786437626905*c,s.lineTo(t,e+c),s.quadraticCurveTo(t,e+l,t+o,e+o),s.quadraticCurveTo(t+l,e,t+c,e),o=.292893218813453*u,l=.585786437626905*u,s.lineTo(r-u,e),s.quadraticCurveTo(r-l,e,r-o,e+o),s.quadraticCurveTo(r,e+l,r,e+u),s.lineTo(r,h-a)}else s.rect(t,e,i,n)};var Nt=function(t){return n?t instanceof n||t instanceof a:t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement},Ut={},zt=function(t,e){"function"==typeof e&&(Ut[t]=e)},Ft=function(t,e){"function"==typeof e&&Tt.indexOf(t)<0&&(Ct[t]=e)};function Vt(o,s,a,r){var i=o.animate,h=r._now,t=r._shapeDataIndex;if(l=(l=a._animates)||(a._animates={}),t.length)for(var e=0;e<t.length;e++)var n,l=l[n=t[e]]||(l[n]={});else n=t;var c=l[n];c||(c=l[n]={},i.forEach(function(n){var t,e=n.attr,i=c[e];n={attr:e,to:n.to,type:n.type||"number",delay:n.delay||0,dur:n.dur||1e3,interval:n.interval||0,finish:n.finish,repeat:n.repeat||1,reverse:null==n.reverse||n.reverse,onDone:n.onDone,easing:n.easing,trigger:null==n.to,start:h,time:0,total:0,count:0,started:!1,stopped:!1,current:null},Array.isArray(n.dur)&&(n.groupDur=n.dur.slice(0,n.dur.length-1),n.dur=n.dur[n.dur.length-1],n.groupDurTotal=n.groupDur.reduce(function(t,e,i){return n.groupDur[i]=t+e},0),n.groupIndex=0,n.groupTime=0,n.groupStart=h),null==n.finish&&(n.finish=n.delay+n.dur+n.interval),i?Array.isArray(i)?(i.push(n),i=i[i.length-2]):c[e]=[i,n]:(t=Pt(a,s,o,e,r),c[e]=n),i&&(t=i.to,"group_set"===i.type&&(t=t[t.length-1])),n.from=t,n.trigger||(n.started=!0,Xt(n),jt(n))})),i=c,Object.keys(i).forEach(function(t){var e=i[t];Array.isArray(e)?(t=e[e.length-1]).count+1===t.repeat?e.forEach(function(t){Gt(t,o,s,a,r,!0)}):t.count+1<t.repeat&&(t.total>=t.finish&&e.forEach(function(t){t.trigger||(t.started=!0),t.stopped=!1,t.time=0,t.start=h,t.total=0,"group_set"===t.type&&(t.groupIndex=0,t.groupTime=0,t.groupStart=h)}),e.forEach(function(t){Gt(t,o,s,a,r,!1)})):Gt(e,o,s,a,r,!0)})}function Gt(t,e,i,n,o,s){if(t.trigger){var a=Pt(n,i,e,t.attr,o,null,!1);if(!t.started){if(a===t.from)return;t.started=!0,t.start=o._now,t.to=a,Xt(t),jt(t)}t.started&&a!==t.to&&(t.start=o._now,t.from=t.current,t.to=a,t.time=0,t.total=0,t.count=0,Xt(t),jt(t))}t.started&&!t.stopped&&((a=(e=o._now)-t.start)>=t.delay&&(t.total=a,a-=t.delay,t.time=a>t.dur?t.dur:a,"group_set"===t.type&&(t.groupTime=e-t.groupStart,t.groupStart===t.start&&(t.groupTime-=t.delay),t.groupTime>=t.groupDur[t.groupIndex]&&t.groupIndex++,t.groupTime>=t.groupDurTotal&&(t.groupIndex=0,t.groupTime=t.groupTime-t.groupDurTotal,t.groupStart=e)),t.total>=t.finish&&(t.count++,t.type,t.count>=t.repeat?(t.time=t.dur,t.stopped=!0,t.trigger&&(t.from=t.to,t.to=null,t.start=null,t.time=0,t.total=0,t.count=0,t.started=!1,t.stopped=!1),t.onDone&&t.onDone.call(i,n,o)):s&&(t.time=0,t.start=e,t.total=0,t.reverse&&(e=t.from,t.from=t.to,t.to=e,jt(t))))),o&&!o._invalidate&&(o._invalidate=!0))}!function(){for(var n,t=["webkit","moz"],e=0;e<t.length&&!window.requestAnimationFrame;++e){var i=t[e];window.requestAnimationFrame=window[i+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i+"CancelAnimationFrame"]||window[i+"CancelRequestAnimationFrame"]}!/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)&&window.requestAnimationFrame&&window.cancelAnimationFrame||(n=0,window.requestAnimationFrame=function(t){var e=Date.now(),i=Math.max(n+16,e);return setTimeout(function(){t(n=i)},i-e)},window.cancelAnimationFrame=clearTimeout)}();var Ht=x.Animate=function(t){var e=this;e.type=null==t.type?"number":t.type,e.delay=null==t.delay?0:t.delay,e.dur=null==t.dur?1e3:t.dur,e.interval=null==t.interval?0:t.interval,e.finish=null==t.finish?e.delay+e.dur+e.interval:t.finish,null==t.finish?e.finish=e.delay+e.dur+e.interval:(e.finish=t.finish,e.interval=e.finish-e.delay-e.dur),e.repeat=null==t.repeat?1:t.repeat,e.reverse=null==t.reverse||t.reverse,e.easing=null==t.easing?"easeNone":t.easing,e.onUpdate=t.onUpdate,e.onDone=t.onDone,e.onStop=t.onStop,e.onPlay=t.onPlay,e.attr=t.attr,e.source=t.source,e.filter=t.filter,e.from=t.from,e.to=t.to,e.start=null,e.time=0,e.total=0,e.count=0,e.started=!1,e.stopped=!1,e.paused=!1,e.pausedTime=null,e.pausedTotal=0,e._speed=1,e._oldSpeed=null,e._speedTotal=0,e._speedTime=null,e._percent=0,e._percentSet=null,e._percentDiff=0,e.id=qt++};function Wt(t){var e;return Kt[t.id]||(Jt=!0,null==(Kt[t.id]=t).from&&t.attr&&t.source&&((e=t.attr.match(/^S[:@](.*)/i))?t.from=t.source.getStyle(e[1]):(e=t.attr.match(/^C[:@](.*)/i))?t.from=t.source.getClient(e[1]):t.from=x.Util.getValue(t.source,t.attr)),Xt(t),jt(t)),t.resume(),t}function Zt(t,e){return Kt[t.id]&&((e=null==e?!0:e)&&Yt(t,t.to),t.onStop&&t.onStop(),t.time=0,t.total=0,t.start=null,t.count=0,t.started=!1,t.stopped=!1,t.paused=!1,t.pausedTime=null,t.pausedTotal=0,t._oldSpeed=null,t._speedTotal=0,t._speedTime=null,t._percent=0,t._percentSet=null,t._percentDiff=0,delete Kt[t.id]),t}function Yt(t,e){var i;t.started||(t.started=!0,t.onPlay&&t.onPlay()),t.filter&&(e=t.filter(e)),t.attr&&t.source&&((i=t.attr.match(/^S[:@](.*)/i))?t.source.setStyle(i[1],e):(i=t.attr.match(/^C[:@](.*)/i))?t.source.setClient(i[1],e):x.Util.setValue(t.source,t.attr,e)),t.onUpdate&&t.onUpdate(e)}function Xt(t){var e=t.type,i=t.from,n=t.to;"number"===e?(t.from=i||0,t.to=n||0):"point"===e?(i?i.length&&(t.from={x:i[0],y:i[1]}):t.from="scale"===t.attr?{x:1,y:1}:{x:0,y:0},n?n.length&&(t.to={x:n[0],y:n[1]}):t.to="scale"===t.attr?{x:1,y:1}:{x:0,y:0}):"rect"===e?(i?i.length&&(t.from={x:i[0],y:i[1],w:i[2],h:i[3]}):t.from={x:0,y:0,w:0,h:0},n?n.length&&(t.to={x:n[0],y:n[1],w:n[2],h:n[3]}):t.to={x:0,y:0,w:0,h:0}):"color"===e&&(t.from=le(i),t.to=le(n)),t.current=t.from}function jt(t){var e=t.type,i=t.from,n=t.to;"number"===e?t.delta=n-i:"point"===e?t.delta={x:n.x-i.x,y:n.y-i.y}:"rect"===e?t.delta={x:n.x-i.x,y:n.y-i.y,w:n.w-i.w,h:n.h-i.h}:"color"===e&&(t.delta={r:n.r-i.r,g:n.g-i.g,b:n.b-i.b,a:n.a-i.a})}function Qt(t,e){var i=t.type,n=t.delta,o=t.from,s=t.time,a=t.dur,r=(r=$t[t.easing||"easeNone"])||$t.easeNone;return"number"===i?e=r(s,o,n,a):"point"===i?e={x:r(s,o.x,n.x,a),y:r(s,o.y,n.y,a)}:"rect"===i?e={x:r(s,o.x,n.x,a),y:r(s,o.y,n.y,a),w:r(s,o.w,n.w,a),h:r(s,o.h,n.h,a)}:"color"===i?e="rgba("+Math.floor(r(s,o.r,n.r,a))+","+Math.floor(r(s,o.g,n.g,a))+","+Math.floor(r(s,o.b,n.b,a))+","+Math.floor(r(s,o.a,n.a,a))+")":"set"===i?t.time&&(e=t.to):"group_set"===i&&(e=t.to[t.groupIndex]),t.current=e}Y.ext("twaver.Animate",Object,{play:function(){return Wt(this)},stop:function(t){return Zt(this,t)},pause:function(){this.stopped||(this.paused=!0)},resume:function(){this.paused&&(this.paused=!1,Jt=!0)},isPaused:function(){return this.paused},percent:function(t){return null==t?this._percentSet||this._percent:(this._percentSet=t<0?0:100<t?100:t,this.paused&&(Jt=!0),this.started||(this.play(),this.pause()),this)},speed:function(t){return null==t?this._speed:((t=t<0?1:t)!==this.speed&&(this.stopped||(this._oldSpeed=this._speed),this._speed=t),this)},clone:function(){return new Ht(this)},chain:function(t){var e,i=this;return((i.next=t).pre=i).onDone?(e=i.onDone,i.onDone=function(){e.call(i),t.play()}):i.onDone=function(){t.play()},i}});var Kt={},qt=1,Jt=!1;!function t(e){var i;x.animateLoopId=requestAnimationFrame(t),Jt&&(Jt=!1,i=e,Object.keys(Kt).forEach(function(t){var e=Kt[t];e&&(null==e.start&&(e._speedTime=e.start=i),null!=e._percentSet&&(e._percentDiff+=(e._percentSet-e._percent)*e.finish),e.paused&&(e.pausedTime||(e.pausedTime=i),null==e._percentSet)||(null==e._percentSet&&e.pausedTime&&(e.pausedTotal+=(i-e.pausedTime)*(e._oldSpeed||e._speed),e.pausedTime=null),e._oldSpeed&&!e.pausedTime&&(e._speedTotal=(i-e._speedTime)*e._oldSpeed-e.pausedTotal+e._percentDiff+e._speedTotal,e._percentDiff=0,e.pausedTotal=0,e._speedTime=i,e._oldSpeed=null),e.total=(i-e._speedTime)*e._speed-e.pausedTotal+e._percentDiff+e._speedTotal,null!=e._percentSet&&e.pausedTime&&(e.total-=(i-e.pausedTime)*(e._oldSpeed||e._speed)),e._percent=e.total>=e.finish?1:e.total/e.finish,e.total>e.delay&&(e.time=e.total-e.delay,t=!1,e.time>=e.dur&&(e.time=e.dur,e.total>=e.finish&&(t=!0)),e.stopped||Yt(e,Qt(e)),e.stopped=t,e.total>=e.finish&&(e.count++,e.count>=e.repeat?(Zt(e,!1),e.onDone&&e.onDone()):(e.time=0,e.total=0,e.start=null,e.stopped=!1,e.reverse&&(t=e.from,e.from=e.to,e.to=t,jt(e))))),e.paused||(Jt=Jt||!0),null!=e._percentSet&&(e._percentSet=null)))}))}(0);var $t={easeNone:function(t,e,i,n){return i*t/n+e},easeIn:function(t,e,i,n){return i*(t/=n)*t+e},easeOut:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},easeBoth:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInStrong:function(t,e,i,n){return i*(t/=n)*t*t*t+e},easeOutStrong:function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e},easeBothStrong:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},elasticIn:function(t,e,i,n,o,s){return 0===t?e:1==(t/=n)?e+i:(s=s||.3*n,i=!o||o<Math.abs(i)?(o=i,s/4):s/(2*Math.PI)*Math.asin(i/o),-(o*Math.pow(2,10*--t)*Math.sin((t*n-i)*(2*Math.PI)/s))+e)},elasticOut:function(t,e,i,n,o,s){var a;return 0===t?e:1==(t/=n)?e+i:(s=s||.3*n,a=!o||o<Math.abs(i)?(o=i,s/4):s/(2*Math.PI)*Math.asin(i/o),o*Math.pow(2,-10*t)*Math.sin((t*n-a)*(2*Math.PI)/s)+i+e)},elasticBoth:function(t,e,i,n,o,s){var a;return 0===t?e:2==(t/=n/2)?e+i:(s=s||n*(.3*1.5),a=!o||o<Math.abs(i)?(o=i,s/4):s/(2*Math.PI)*Math.asin(i/o),t<1?o*Math.pow(2,10*--t)*Math.sin((t*n-a)*(2*Math.PI)/s)*-.5+e:o*Math.pow(2,-10*--t)*Math.sin((t*n-a)*(2*Math.PI)/s)*.5+i+e)},backIn:function(t,e,i,n,o){return t===n&&(t-=.001),i*(t/=n)*t*(((o=void 0===o?1.70158:o)+1)*t-o)+e},backOut:function(t,e,i,n,o){return i*((t=t/n-1)*t*(((o=void 0===o?1.70158:o)+1)*t+o)+1)+e},backBoth:function(t,e,i,n,o){return void 0===o&&(o=5.70158),(t/=n/2)<1?i/2*(t*t*((1+(o*=1.525))*t-o))+e:i/2*((t-=2)*t*((1+(o*=1.525))*t+o)+2)+e},bounceIn:function(t,e,i,n){return i-$t.bounceOut(n-t,0,i,n)+e},bounceOut:function(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},bounceBoth:function(t,e,i,n){return t<n/2?.5*$t.bounceIn(2*t,0,i,n)+e:.5*$t.bounceOut(2*t-n,0,i,n)+.5*i+e}},te={draw:function(t,e){var i=null==e.getCurrentSubNetwork()?e.getElementBox():e.getCurrentSubNetwork(),n=i.getStyle("background.type");"image"==n?this.drawImage(t,i,e):"vector"==n?this.drawVector(t,i,e):"image.vector"==n?(this.drawImage(t,i,e),this.drawVector(t,i,e)):"vector.image"==n&&(this.drawVector(t,i,e),this.drawImage(t,i,e))},drawImage:function(t,e,i){var n=e.getStyle("background.image"),o=Y.getImageAsset(n),s=i.getGraphicsZoom?i.getGraphicsZoom():i.getZoom();if(null!=o){var a=e.getStyle("background.image.scope"),r=i.getScopeRect(a),h=i._dragToPan?0:-r.x/s,n=i._dragToPan?0:-r.y/s;"rootcanvas"!=a&&"viewport"!=a||(r.x=h,r.y=n),"rootcanvas"==a&&(r.width=Math.max(o.getWidth(),r.width/s),r.height=Math.max(o.getHeight(),r.height/s)),"none"==e.getStyle("background.image.stretch")&&(r.width=o.getWidth(),r.height=o.getHeight());s=e.getStyle("background.image.padding");if(s&&b.grow(r,s,s),"tile"==e.getStyle("background.image.stretch")){if(Nt(o.getImage()))for(var l=0;l<r.width;l+=o.getWidth())for(var c=0;c<r.height;c+=o.getHeight())t.drawImage(o.getImage(),l,c)}else"fill"!=e.getStyle("background.image.stretch")&&"none"!=e.getStyle("background.image.stretch")||xt(t,o.getImage(),null,r,e,i)}},drawVector:function(t,e,i){var n=e.getStyle("background.vector.scope"),o=i.getScopeRect(n),s=i.getGraphicsZoom?i.getGraphicsZoom():i.getZoom(),a=i._dragToPan?0:-o.x/s,r=i._dragToPan?0:-o.y/s;"rootcanvas"!=n&&"viewport"!=n||(o.x=a,o.y=r),"rootcanvas"==n&&(o.width=o.width/s,o.height=o.height/s);var h=e.getStyle("background.outline.width"),i=(e.getStyle("background.outline.color"),e.getStyle("background.vector.fill")),a=e.getStyle("background.vector.fill.color"),r=e.getStyle("background.vector.padding"),n=e.getStyle("background.vector.shape"),s=e.getStyle("background.vector.pattern");r&&b.grow(o,r,r);r=e.getStyle("background.vector.gradient");i&&(r?R.fill(t,a,r,e.getStyle("background.vector.gradient.color"),o):t.fillStyle=a,R.drawVector(t,n,s,o),t.fill()),0<h&&(t.lineWidth=h,t.strokeStyle=e.getStyle("background.outline.color"),R.drawVector(t,n,s,o),t.stroke())}},ee=x.UndoManager=function(t){this._list=[],this._cursor=-1,this._suspended=!1,this._dispatcher=new x.EventDispatcher,this._box=t,this._enabled=!1,this._limit=100};ee._IGNORE_PROPERTIES={alarmState:1,propagateSeverity:1,enablePropagation:1,children:1,fromAgent:1,toAgent:1,bundleLinks:1},Y.ext("twaver.UndoManager",Object,{setEnabled:function(t){var e=this,i=e._box;e._enabled!=t&&(t?(i.addDataBoxChangeListener(e._handleDataBoxChange,e,!0),i.addDataPropertyChangeListener(e._handleDataPropertyChange,e,!0)):(i.removeDataBoxChangeListener(e._handleDataBoxChange,e),i.removeDataPropertyChangeListener(e._handleDataPropertyChange,e))),e._enabled=t},isEnabled:function(){return this._enabled},undo:function(){var t,e,i=this._list;if(this.canUndo()){if(t=i[this._cursor--],this._suspended=!0,t.length)for(e=t.length-1;0<=e;e--)t[e].undo();else t.undo();this._suspended=!1,this._fire({kind:"undo",action:t})}},redo:function(){var t=this._list;this.canRedo()&&(t=t[++this._cursor],this._suspended=!0,t.length?t.forEach(function(t){t.redo()}):t.redo(),this._suspended=!1,this._fire({kind:"redo",action:t}))},canUndo:function(){return 0<=this._cursor},canRedo:function(){return this._cursor<this._list.length-1},_add:function(t){var e=this._batch,i=this._list;e?e.push(t):(this._cursor!==i.length-1&&i.splice(this._cursor+1,i.length),0!==this._limit&&i.length===this._limit&&i.splice(0,1),i.push(t),this._cursor=i.length-1,this._fire({kind:"add",action:t}))},_handleDataBoxChange:function(t){var e,i,n;this._suspended||(e=this._box,i=t.kind,n=t.data,"add"===i?this._add({undo:function(){this.parent=n.getParent(),this.host=n.getHost&&n.getHost(),n.getFromNode&&(this.fromNode=n.getFromNode(),this.toNode=n.getToNode()),e.remove(n)},redo:function(){this.parent&&n.setParent(this.parent),n.getHost&&this.host&&n.setHost(this.host),n.getFromNode&&(this.fromNode&&n.setFromNode(this.fromNode),this.toNode&&n.setToNode(this.toNode)),e.add(n)}}):"remove"===i&&this._add({undo:function(){e.add(n)},redo:function(){e.remove(n)}}))},_handleDataPropertyChange:function(t){var e,i,n,o,s;this._suspended||(i=(e=t.property).substr(0,2),n=t.source,o=t.oldValue,s=t.newValue,"C:"===i?(e=e.substr(2),this._add({undo:function(){n.setClient(e,o)},redo:function(){n.setClient(e,s)}})):"S:"===i?(e=e.substr(2),this._add({undo:function(){n.setStyle(e,o)},redo:function(){n.setStyle(e,s)}})):ee._IGNORE_PROPERTIES[e]||this._add({undo:function(){n[Y.setter(e)](o)},redo:function(){n[Y.setter(e)](s)}}))},size:function(){return this._list.length},getCursor:function(){return this._cursor},_fire:function(t){this._dispatcher.fire(t)},on:function(t,e,i){this._dispatcher.add(t,e,i)},off:function(t,e){this._dispatcher.remove(t,e)},isSuspended:function(){return this._suspended},setSuspended:function(t){this._suspended=t},getLimit:function(){return this._limit},setLimit:function(t){var e,i,n=this._list;return(t=t<0?0:t)!==this._limit&&(e=n.length-t,0<t&&0<e&&(i=this._cursor+1,this._cursor-=e,this._cursor<-1&&(this._cursor=-1),0<i&&n.splice(0,i),0<(e-=i)&&n.splice(n.length-e,e)),this._limit=t,this._fire({kind:"change"})),this},clear:function(){return this._list=[],this._cursor=-1,this._fire({kind:"clear"}),this},batch:function(t,e){return this.startBatch(),t.call(e),this.endBatch(),this},startBatch:function(){return this._batch||(this._batch=[]),this},endBatch:function(){var t;return this._batch&&(t=this._batch,this._batch=null,t.length&&this._add(t)),this}}),x.Pool=function(t,e){this.func="string"==typeof t?function(){return E.createElement(t)}:t,this.tagName=t,null!=e&&(this.redundancy=e)},Y.ext("twaver.Pool",Object,{redundancy:2,currentIndex:-1,get:function(){if(this.currentIndex++,this.currentIndex!==this.size())return this.list.get(this.currentIndex);var t=this.func();return t._pool=this,t.style.margin="0px",t.style.padding="0px",this.list||(this.list=new ie),this.list.add(t),t},release:function(t){this.list&&0<=this.list.remove(t)&&(delete t._selectData,delete t._expandData,delete t._checkData,delete t._editInfo,delete t.keepDefault,t.style.margin="0px",t.style.padding="0px",t.style.backgroundColor="",t.removeAttribute("title"),"img"===this.tagName&&t.removeAttribute&&(t.removeAttribute("width"),t.removeAttribute("height"),t.removeAttribute("src")),this.list.add(t),this.currentIndex--)},reset:function(){this.currentIndex=-1},clear:function(){if(this.list)for(;this.redundancy+this.currentIndex<this.list.size()-1;)delete this.list.removeAt(this.list.size()-1)._pool},size:function(){return this.list?this.list.size():0}});var ie=function(){if(this._as=[],1===arguments.length){var t=arguments[0];if((t=t instanceof ie?t._as:t)instanceof Array)for(var e=t.length,i=0;i<e;i++)this._as.push(t[i]);else!1===t?(this._duplicatable=!1,this._map={}):null!=t&&this._as.push(t)}else if(1<arguments.length)for(e=arguments.length,i=0;i<e;i++)this._as.push(arguments[i])};x.List=ie,Y.ext("twaver.List",Object,{_duplicatable:!0,size:function(){return this._as.length},isEmpty:function(){return 0===this._as.length},add:function(t,e){if(!this._duplicatable){if(this._map[t._id])return;this._map[t._id]=!0}return void 0===e?this._as.push(t):this._as.splice(e,0,t)},addAll:function(t){if((t=t instanceof ie?t._as:t)instanceof Array)for(var e=t.length,i=0;i<e;i++)this.add(t[i]);else this.add(t)},get:function(t){return this._as[t]},remove:function(t){if(!this._duplicatable&&!this._map[t&&t._id])return-1;t=this._as.indexOf(t);return 0<=t&&t<this._as.length&&this.removeAt(t),t},removeAt:function(t){t=this._as.splice(t,1)[0];return!this._duplicatable&&t&&delete this._map[t._id],t},set:function(t,e){var i=this._as[t];if(i===e)return e;if(!this._duplicatable){if(this._map[e._id])throw"duplicate item:"+e;delete this._map[i._id],this._map[e._id]=!0}return this._as[t]=e,i},clear:function(){return this._duplicatable||(this._map={}),this._as.splice(0,this._as.length)},contains:function(t){return this._duplicatable?0<=this.indexOf(t):!!this._map[t&&t._id]},indexOf:function(t){return this._as.indexOf(t)},forEach:function(t,e){for(var i=this._as.length,n=0;n<i;n++){var o=this._as[n];e?t.call(e,o):t(o)}},forEachReverse:function(t,e){for(var i=this._as.length-1;0<=i;i--){var n=this._as[i];e?t.call(e,n):t(n)}},toArray:function(t,e){if(t){for(var i=[],n=this._as.length,o=0;o<n;o++){var s=this._as[o];e?t.call(e,s)&&i.push(s):t(s)&&i.push(s)}return i}return this._as.concat()},toList:function(t,e){if(t){for(var i=new ie,n=this._as.length,o=0;o<n;o++){var s=this._as[o];e?t.call(e,s)&&i.add(s):t(s)&&i.add(s)}return i}return new ie(this)},sort:function(t){return t?this._as.sort(t):this._as.sort(),this},toString:function(){return this._as.toString()}});var ne={shapeMap:{},init:function(){ne.register("arrow.standard",ne.createStandardArrow()),ne.register("arrow.delta",ne.createDeltaArrow()),ne.register("arrow.diamond",ne.createDiamondArrow()),ne.register("arrow.short",ne.createShortArrow()),ne.register("arrow.slant",ne.createSlantArrow()),ne.register("arrow.doubledelta",ne.createDoubleDeltaArrow()),ne.register("arrow.tee",ne.createTeeArrow()),ne.register("arrow.box",ne.createBoxArrow()),ne.register("arrow.dot",ne.createDotArrow()),ne.register("arrow.tail",ne.createTailArrow())},createStandardArrow:function(){var t=new ie;return t.add({x:-1,y:-5/9}),t.add({x:-.75,y:0}),t.add({x:-1,y:5/9}),t.add({x:0,y:0}),t.add({x:-1,y:-5/9}),{points:t}},createDeltaArrow:function(){var t=new ie;return t.add({x:-1,y:-5/9}),t.add({x:-1,y:5/9}),t.add({x:0,y:0}),t.add({x:-1,y:-5/9}),{points:t}},createDoubleDeltaArrow:function(){var t=new ie;return t.add({x:-1,y:-5/9}),t.add({x:-1,y:5/9}),t.add({x:-.5,y:0}),t.add({x:-.5,y:-5/9}),t.add({x:0,y:0}),t.add({x:-.5,y:5/9}),t.add({x:-.5,y:0}),t.add({x:-1,y:-5/9}),{points:t}},createTeeArrow:function(){var t=new ie;return t.add({x:-1/9,y:-5/9}),t.add({x:-1/9,y:5/9}),t.add({x:0,y:5/9}),t.add({x:0,y:-5/9}),t.add({x:-1/9,y:-5/9}),{points:t}},createBoxArrow:function(){var t=new ie;return t.add({x:-10/9,y:-5/9}),t.add({x:-10/9,y:5/9}),t.add({x:0,y:5/9}),t.add({x:0,y:-5/9}),t.add({x:-10/9,y:-5/9}),{points:t}},createDotArrow:function(){var t={},e=new x.List;return e.add({x:-.5,y:0}),t.points=e,t.draw=function(t,e){var i;t&&e&&e.points&&!(e.points.size()<=0)&&(i=e.points._as[0],e=Math.min(e.width,e.height)/2,t.save(),t.beginPath(),t.arc(i.x,i.y,e,0,2*Math.PI,!1),t.closePath(),t.restore())},t},createTailArrow:function(){for(var t={},e=new x.List,i=-15;i<15;i++)e.add({x:-i/9,y:0});return t.points=e,t.draw=function(t,e){if(t&&e&&e.points&&!(e.points.size()<=0))for(var i=e.points._as,n=e.shadow,o=(e.shadowColor,e.shadowXOffset),s=e.shadowYOffset,a=e.shadowBlur,r=e.shadowColor,h=i.length-4,l=Math.min(e.width,e.height)/2,c=0;c<h;c++){var u=c/h,d=i[c],_=.4*l;t.save(),t.restore(),t.beginPath(),t.globalAlpha=u*u,n&&(t.shadowOffsetX=o,t.shadowOffsetY=s,t.shadowBlur=a,t.shadowColor=r),t.arc(d.x,d.y,_,0,2*Math.PI,!1),t.closePath(),t.fill()}},t},createDiamondArrow:function(){var t=new ie;return t.add({x:-7/12,y:5/9}),t.add({x:-14/12,y:0}),t.add({x:-7/12,y:-5/9}),t.add({x:0,y:0}),t.add({x:-7/12,y:5/9}),{points:t}},createShortArrow:function(){var t=new ie;return t.add({x:-8/12,y:6/9}),t.add({x:-5/12,y:0}),t.add({x:-8/12,y:-6/9}),t.add({x:0,y:0}),t.add({x:-8/12,y:6/9}),{points:t}},createSlantArrow:function(){var t=new ie;return t.add({x:-1,y:-5/9}),t.add({x:-6.5/12,y:0}),t.add({x:-.75,y:4/9}),t.add({x:0,y:0}),t.add({x:-1,y:-5/9}),{points:t}},register:function(t,e){ne.shapeMap[t]=e},getShape:function(t){if(t)return ne.shapeMap[t];throw"shape type can't be null"},getArrowRect:function(t,e,i,n,o,s,a,r,h){n=ne.getShape(n);if(n&&n.points&&!(n.points&&n.points.size()<=0)){0<a&&a<1?a*=(t.getLineLength?t:t._element).getLineLength():t.getLineLength&&(a+=ne.calculateArrowXOffsetAtEdge(e,t,i,h));for(var l,a=b.calculatePointInfoAlongLine(e,i,a,r),r=a.point,a=a.angle,c=n.points._as,u=c.length,d=new ie,_=new X(o,0,0,s,r.x,r.y),g=0;g<u;g++)d.add(_.transform(c[g]));for(_=b.createMatrix(a+Math.PI,r.x,r.y),g=0;g<u;g++)(l=(l=d.get(g))instanceof ie?l._as:l)instanceof Array?(l[0]=_.transform(l[0]),l[1]=_.transform(l[1])):d.set(g,_.transform(l));return b.getLineRect(d)}},drawArrow:function(t,e,i,n,o,s,a,r,h,l,c,u,d){h=h||0,l=l||0,c=c||0;var _=d._element.getStyle("arrow.from.shadow"),g=d._element.getStyle("arrow.from.shadow.color"),f=d._element.getStyle("arrow.from.shadow.xoffset"),A=d._element.getStyle("arrow.from.shadow.yoffset"),p=d._element.getStyle("arrow.from.shadow.blur"),d=0<=c&&u;(a||d)&&(!(s=ne.getShape(s))||!s.points||s.points&&s.points.size()<=0||(l=(h=b.calculatePointInfoAlongLine(n,o,h,l)).point,h=h.angle,a&&(t.fillStyle=r),t.beginPath(),d&&(t.lineWidth=c,t.strokeStyle=u),ne._drawArrow(t,s,h,l,e,i,u,g,_,f,A,p),_&&(t.shadowOffsetX=f,t.shadowOffsetY=A,t.shadowBlur=p,t.shadowColor=g),a&&t.fill(),d&&t.stroke()))},_drawArrow:function(t,e,i,n,o,s,a,r,h,l,c,u){if(e.draw){for(g=new x.List,_=0;_<e.points._as.length;_++)g.add(e.points.get(_));g.add({x:-1,y:-.5}),g.add({x:-1,y:.5}),g.add({x:0,y:.5}),g.add({x:0,y:-.5});p=(g=g._as).length,m=new ie;A=new X(o,0,0,s,n.x,n.y);for(_=0;_<p;_++)m.add(A.transform(g[_]));m=m._as,A=b.createMatrix(i+Math.PI,n.x,n.y);for(var d=new ie,_=0;_<p;_++)d.add(A.transform(m[_]));e.draw&&e.draw(t,{points:d,width:o,height:s,shadowColor:r,shadow:h,shadowXOffset:l,shadowYOffset:c,shadowBlur:u})}else{var g,_,f,A,p=(g=e.points._as).length,m=new ie;for(A=new X(o,0,0,s,n.x,n.y),_=0;_<p;_++)m.add(A.transform(g[_]));m=m._as,A=b.createMatrix(i+Math.PI,n.x,n.y);n=m[0],n=A.transform(n);for(t.moveTo(n.x,n.y),_=1;_<p;_++)(f=(f=m[_])instanceof ie?f._as:f)instanceof Array?(f[0]=A.transform(f[0]),f[1]=A.transform(f[1]),t.quadraticCurveTo(f[0].x,f[0].y,f[1].x,f[1].y)):(f=A.transform(f),t.lineTo(f.x,f.y))}},drawLinkArrow:function(t,e,i,n){var o;i.size()<2||(o=!!t._element.isBundleAgent&&t._element.isBundleAgent(),t._element.getStyle(o?"arrow.agent.from":"arrow.from")&&ne._drawFromArrow(t,e,i,n),t._element.getStyle(o?"arrow.agent.to":"arrow.to")&&ne._drawToArrow(t,e,i,n))},_drawFromArrow:function(t,e,i,n){var o,s,a,r,h=t._element,l=!!h.isBundleAgent&&h.isBundleAgent(),c=h.getStyle(l?"arrow.agent.from.fill":"arrow.from.fill"),u=h.getStyle(l?"arrow.agent.from.outline.width":"arrow.from.outline.width");h.getStyle(l?"arrow.agent.from.shadow.color":"arrow.from.shadow.color");(c||0<=u)&&(o=h.getStyle(l?"arrow.agent.from.width":"arrow.from.width"),s=h.getStyle(l?"arrow.agent.from.height":"arrow.from.height"),0<(a=h.getStyle(l?"arrow.agent.from.xoffset":"arrow.from.xoffset"))&&a<1?a*=(t.getLineLength?t:t._element).getLineLength():t.getLineLength&&(a+=ne.calculateArrowXOffsetAtEdge(i,t,!0,n)),r=h.getStyle(l?"arrow.agent.from.yoffset":"arrow.from.yoffset"),n=h.getStyle(l?"arrow.agent.from.shape":"arrow.from.shape"),ne.drawArrow(e,o,s,i,!0,n,c,h.getStyle(l?"arrow.agent.from.color":"arrow.from.color"),a,r,u,h.getStyle(l?"arrow.agent.from.outline.color":"arrow.from.outline.color"),t))},_drawToArrow:function(t,e,i,n){var o,s,a,r,h=t._element,l=!!h.isBundleAgent&&h.isBundleAgent(),c=h.getStyle(l?"arrow.agent.to.fill":"arrow.to.fill"),u=h.getStyle(l?"arrow.agent.to.outline.width":"arrow.to.outline.width");(c||0<=u)&&(o=h.getStyle(l?"arrow.agent.to.width":"arrow.to.width"),s=h.getStyle(l?"arrow.agent.to.height":"arrow.to.height"),0<(a=h.getStyle(l?"arrow.agent.to.xoffset":"arrow.to.xoffset"))&&a<1?a*=(t.getLineLength?t:t._element).getLineLength():t.getLineLength&&(a+=ne.calculateArrowXOffsetAtEdge(i,t,!1,n)),r=h.getStyle(l?"arrow.agent.to.yoffset":"arrow.to.yoffset"),n=h.getStyle(l?"arrow.agent.to.shape":"arrow.to.shape"),ne.drawArrow(e,o,s,i,!1,n,c,h.getStyle(l?"arrow.agent.to.color":"arrow.to.color"),a,r,u,h.getStyle(l?"arrow.agent.to.outline.color":"arrow.to.outline.color"),t))},calculateArrowXOffsetAtEdge:function(t,e,i,n){if(null==t||t.size()<2)return 0;var o=e._element;if(!(i?o.getStyle("arrow.from.at.edge"):o.getStyle("arrow.to.at.edge")))return 0;var s,o=i?e._network.getElementUI(o.getFromAgent()):e._network.getElementUI(o.getToAgent());if(!o)return 0;if(null==(s=n?o.getZoomBodyRect():o._bodyRect))return 0;for(var a=b._getPoint(t.get(i?0:t.size()-1)),r=0,h=e.getLineLength();ne._containsByInt(s,Math.floor(a.x),Math.floor(a.y),!1)&&r<h;)a=b.calculatePointInfoAlongLine(t,i,r++).point;return r},_containsByInt:function(t,e,i,n){return(n=void 0===n||n)?e>=Math.floor(t.x)&&e<=Math.floor(t.x+t.width)&&i>=Math.floor(t.y)&&i<=Math.floor(t.y+t.height):e>Math.floor(t.x)&&e<Math.floor(t.x+t.width)&&i>Math.floor(t.y)&&i<Math.floor(t.y+t.height)}};ne.init(),Y.arrow=ne,x.EventDispatcher=function(){this._f=0},Y.ext("twaver.EventDispatcher",null,{contains:function(t,e){if(this._ls)for(var i,n=0,o=this._ls.size();n<o;n++)if(t===(i=this._ls.get(n)).l&&e===i.s)return!0;return!1},add:function(t,e,i){i={l:t,s:e,a:i};this._ls||(this._ls=new ie),this._f?(this._addPendings||(this._addPendings=new ie),this._addPendings.add(i)):i.a?this._ls.add(i,0):this._ls.add(i)},remove:function(t,e){this._ls&&(this._f?(this._removePendings||(this._removePendings=new ie),this._removePendings.add({l:t,s:e})):this._remove(t,e))},_remove:function(t,e){for(var i,n=0,o=this._ls.size();n<o;n++)if((i=this._ls.get(n)).l===t&&i.s===e)return void this._ls.removeAt(n)},fire:function(t){if(this._ls){var e,i,n=this._ls.size();for(this._f++,e=0;e<n;e++)(i=this._ls.get(e)).s?i.l.call(i.s,t):i.l(t);if(this._f--,!this._f){if(this._removePendings){for(n=this._removePendings.size(),e=0;e<n;e++)i=this._removePendings.get(e),this._remove(i.l,i.s);delete this._removePendings}if(this._addPendings){for(n=this._addPendings.size(),e=0;e<n;e++)(i=this._addPendings.get(e)).a?this._ls.add(i,0):this._ls.add(i);delete this._addPendings}}}}}),x.ImageAsset=function(t,e,i,n,o){this._name=t,this._width=i,this._height=n,this._svg=o,this._edgeData,"string"==typeof e?this._src=e:"function"==typeof e?this._func=e:Nt(e)?this._image=e:"object"==typeof e&&(this._image=e,this._width=e.w||e.width,this._height=e.h||e.height,!1!==e.cache&&fe(e)&&(_e(t,e),this._cache=me(e)))},Y.ext("twaver.ImageAsset",Object,{getName:function(){return this._name},getSrc:function(){return this._src},isSvg:function(){return this._svg},getImage:function(t,e,i){if(!t||!this._image)return this._image;this._map||(this._map={});var n=this._svg&&3===arguments.length?t+","+e+","+i:t,o=this._map[n];return o||(o=ue(this._cache||this._image,le(t),this._svg&&e||this.getWidth(),this._svg&&i||this.getHeight()),this._map[n]=o)},getWidth:function(){return this._width},getHeight:function(){return this._height},getFunction:function(){return this._func},_createEdgeData:function(t,e,i){var n=300/e;i<e&&(n=300/i);var o=Math.floor(e*n),s=Math.floor(i*n);this.tempCanvas||(this.tempCanvas=E.createElement("canvas"),this.ctx=this.tempCanvas.getContext("2d")),this.tempCanvas.width=o,this.tempCanvas.height=s,this.ctx.clearRect(0,0,o,s),this.ctx.drawImage(t,0,0,o,s);for(var a=this.ctx.getImageData(0,0,o,s),r=!0,h=[],l=0,e=o,i=s;l<i;l++)for(var c=0;c<e;c++){var u=4*(l*e+c);(w=r!=(d=this._isTransparentPoint(a.data,u))||!d&&(0==c||c==e-1))&&h.push({x:c-(d?1:0),y:l}),r=d}for(r=!0,c=0,e=o,i=s;c<e;c++)for(l=0;l<i;l++){var d,u=4*(l*e+c);(w=r!=(d=this._isTransparentPoint(a.data,u))||!d&&(0==l||l==i-1))&&h.push({x:c,y:l-(d?1:0)}),r=d}for(var _=e/2,g=i/2,f=[],A=0;A<360;A++)f.push({x:_,y:g,dist:0});for(var A=0,p=h.length;A<p;A++){var m=h[A],v=this._getPointAngleDegree(m.x,m.y,_,g),y=this._getPointDist(m.x,m.y,_,g);f[v].dist<y&&(f[v]={x:m.x,y:m.y,dist:y})}for(var w,A=0,p=f.length;A<p;A++)(w=f[A]).x=w.x/n,w.y=w.y/n,delete w.dist;return f},_isTransparentPoint:function(t,e){return t[e]+t[e+1]+t[e+2]+t[e+3]==0},_getPointAngleDegree:function(t,e,i,n){t=(t=Math.atan2(n-e,i-t))/Math.PI*180;return t=parseInt(t)+180,t%=360},_getPointDist:function(t,e,i,n){t=i-t,e=n-e;return Math.sqrt(t*t+e*e)}});var oe={},se=m.createCanvas();se.width=1,se.height=1;function ae(t,e){t&&"string"==typeof t&&(t.match(Rt)||Y.images[t]||(de[t]||(de[t]=[])).push(e))}var re,he=se.getContext("2d"),le=function(t){var e,i=oe[t=t||"black"];return i||(he.clearRect(0,0,1,1),he.fillStyle=t,he.fillRect(0,0,1,1),e=he.getImageData(0,0,1,1).data,i=oe[t]={r:e[0],g:e[1],b:e[2],a:e[3]}),i},ce=function(t,e){if(!e)return t;if(e=le(e),t=le(t),ye.PIXEL_FILTER_FUNCTION){e=ye.PIXEL_FILTER_FUNCTION(t,e);return"rgba("+e.r+","+e.g+","+e.b+","+t.a+")"}return null},ue=function(e,t,i,n){var o=m.createCanvas(i,n),s=o.getContext("2d");s.drawImage(e,0,0,i,n);try{for(var a=s.getImageData(0,0,i,n),r=a.data,h=0,l=r.length;h<l;h+=4){var c={r:r[h+0],g:r[h+1],b:r[h+2]},u=ye.PIXEL_FILTER_FUNCTION(c,t);r[h+0]=u.r,r[h+1]=u.g,r[h+2]=u.b}s.putImageData(a,0,0)}catch(t){return e}return o},de={},_e=function(e,t){t.pattern&&ae(t.pattern,e),t.v&&t.v.forEach(function(t){t.pattern&&ae(t.pattern,e)})},ge=function(t){var e=de[t];e&&(e.forEach(function(t){t=Y.images[t];t._cache=me(t._image)}),delete de[t])},fe=function(t){return!(!t.w||!t.h)&&Ae(t)},Ae=function(n){return!Object.keys(n).some(function(t){if(/^on/.test(t))return!1;var e=n[t],i=pe(e);return i=!i&&"v"===t?e.some(function(e){if("draw"===e.shape)return!0;if("vector"===e.shape){var t=Y.images[e.name];if(t&&!t._cache)return!0}return!!Object.keys(e).some(function(t){return"state"===t||"animate"===t||pe(e[t])})||!("g"!==e.shape||!e.v||!e.v.length)&&!Ae(e)}):i})},pe=function(t){var e=typeof t;return"string"==e&&t.match(Rt)||"function"==e},me=function(t){var e=m.createCanvas(t.w,t.h),i=e.getContext("2d");return x.Util.makeHighRes(e),Et(i,t,null,{x:0,y:0,width:t.w,height:t.h}),e},ve=x.imageUtil={IMAGE_LOAD_COMPLETED:"IMAGE_LOAD_COMPLETED",_dispatcher:new x.EventDispatcher,addEventListener:function(t,e,i){ve._dispatcher.add(t,e,i)},removeEventListener:function(t,e){ve._dispatcher.remove(t,e)},images:{},registerImageByUrl:function(e,i,n){var o;i=i||ve.getImageType(e),n=n||ve.getImageName(e),ve.images[n]||(ve.images[n]=e,(o=new a).src=e,o.onload=function(){Y.registerImage(n,o,o.width,o.height,!0===i),o.onload=null,delete ve.images[n];var t={type:ve.IMAGE_LOAD_COMPLETED,url:e,svg:i,name:n};ve._dispatcher.fire(t)})},getImageName:function(t){if("string"!=typeof t)return null;var e=t.lastIndexOf("/"),i=t;return i=0<=(e=(i=0<=e?t.substring(e+1):i).lastIndexOf("."))?i.substring(0,e):i},getImageType:function(t){if("string"!=typeof t)return null;var e=t.lastIndexOf("/"),i=t;return i=0<=(e=(i=0<=e?t.substring(e+1):i).lastIndexOf("."))?i.substring(e+1):i}},ye={COLORS:["#6495ED","#FFFF00","#00FFFF","#FF0000","#7FFF00","#E0A580","#5FC0CB","#FA00F0","#A1BC50","#FFD700","#4169E1","#E5A5F5","#1E90FF","#696969","#FF6347","#00BFEF","#FFD700","#80E090","#5F9EA0","#A000FF","#7FAF00","#228BA2","#FF00FF","#7FFFD4","#800000","#0000CD","#20B2AA","#D2691E","#6495BD","#DC143C","#F0A8AF","#008B8B","#800080","#B8860B","#4B0082","#00FF00","#FFA500","#FF4500","#FFFF00","#9ACD32","#00008B","#FF1493","#ADFF2F","#4682B4","#00C0B1"],CALL_LATER_DELAY:17,SCROLL_BAR_WIDTH:17,SELECT_COLOR:"#C2CFF1",FOCUS_ON_CLICK:!0,VIEW_POSITION:"absolute",VIEW_FONT_SIZE:"12px",VIEW_FONT_FAMILY:"arial, tahoma, helvetica, sans-serif",TOOLTIP_BACKGROUND:"lightyellow",TOOLTIP_FONT_SIZE:"12px",TOOLTIP_COLOR:"black",TOOLTIP_PADDING:"4px 8px",TOOLTIP_BORDER:"1px solid gray",TOOLTIP_BORDER_RADIUS:"6px",TOOLTIP_XOFFSET:12,TOOLTIP_YOFFSET:12,TOOLTIP_BOX_SHADOW:"0px 0px 3px #AAA",TOOLTIP_ZINDEX:1e5,TOOLTIP_INITIAL_DELAY:750,TOOLTIP_RESHOW_DELAY:500,TOOLTIP_DISMISS_DELAY:4e3,ZOOM_MAX:5,ZOOM_MIN:.1,ZOOM_INCREMENT:1.3,ZOOM_ANIMATE:!0,COLUMN_INNER_TEXT:!0,COLUMN_WIDTH:80,COLUMN_HORIZONTAL_ALIGN:"",COLUMN_PROPERTY_TYPE:"accessor",COLUMN_VALUE_TYPE:"string",COLUMN_EDITABLE:!1,COLUMN_SORTABLE:!0,COLUMN_VISIBLE:!0,COLUMN_RESIZABLE:!0,COLUMN_MOVABLE:!0,COLUMN_RENDER_CELL:null,COLUMN_RENDER_HEADER:null,COLUMN_RENDER_EDITOR:null,PROPERTY_INNER_TEXT:!0,PROPERTY_HORIZONTAL_ALIGN:"",PROPERTY_PROPERTY_TYPE:"accessor",PROPERTY_VALUE_TYPE:"string",PROPERTY_EDITABLE:!1,PROPERTY_CATEGORY_NAME:null,PROPERTY_RENDER_NAME:null,PROPERTY_RENDER_VALUE:null,PROPERTY_RENDER_EDITOR:null,TAB_WIDTH:100,TAB_CLOSABLE:!1,TAB_RESIZABLE:!0,TAB_MOVABLE:!0,TAB_DISABLED:!1,TAB_VISIBLE:!0,ACCORDION_EXPAND_ICON:"expand_icon",ACCORDION_COLLAPSE_ICON:"collapse_icon",ACCORDION_TITLE_HEIGHT:20,ACCORDION_TITLE_BACKGROUND:"#EBEBEB",ACCORDION_BORDER_BOTTOM_COLOR:"lightgray",ACCORDION_ICON_POSITION:"left",TITLEPANE_TITLE_HEIGHT:20,TITLEPANE_TITLE_BACKGROUND:"#DDD",TITLEPANE_TITLE_HORIZONTAL_ALIGN:"left",BORDERPANE_HGAP:0,BORDERPANE_VGAP:0,CHARTPANE_TITLE_HEIGHT:20,CHARTPANE_TITLE_HORIZONTAL_ALIGN:"center",CHARTPANE_LEGEND_ORIENTATION:"bottom",CHARTPANE_LEGEND_WIDTH:80,LEGENDPANE_ICON_WIDTH:10,LEGENDPANE_ICON_HEIGHT:10,LEGENDPANE_ICON_RADIUS:0,LEGENDPANE_ROW_HEIGHT:20,LEGENDPANE_ORIENTATION:"horizontal",LEGENDPANE_HIDDEN_COLOR:"#BABBBC",LEGENDPANE_SELECT_BACKGROUND_COLOR:"#00007D",LEGENDPANE_SELECT_FOREGROUND_COLOR:"#FFFFFF",CHART_TOOLTIP_ENABLED:!0,CHART_SELECT_TOLERANCE:0,CHART_XGAP:6,CHART_YGAP:6,CHART_XZOOM_ENABLED:!0,CHART_YZOOM_ENABLED:!0,CHART_XTRANSLATE_ENABLED:!0,CHART_YTRANSLATE_ENABLED:!0,CHART_DOUBLE_CLICK_TO_RESET:!0,CHART_VALUE_VISIBLE:!0,CHART_VALUE_FONT:null,CHART_BACKGROUND_VISIBLE:!1,CHART_BACKGROUND_FILL:!0,CHART_BACKGROUND_FILL_COLOR:"rgba(50,50,50,0.11)",CHART_BACKGROUND_OUTLINE_WIDTH:1,CHART_BACKGROUND_OUTLINE_COLOR:"rgba(50,50,50,0.11)",CHART_BACKGROUND_GRADIENT:"linear.north",CHART_BACKGROUND_GRADIENT_COLOR:"#FFFFFF",PIECHART_TYPE:"oval",PIECHART_START_ANGLE:0,PIECHART_SELECT_OFFSET:5,PIECHART_SHADOW_OFFSET:1,PIECHART_SHADOW_COLOR:"#C2CFF1",PIECHART_LINE_RATE:.5,PIECHART_DONUT_RATE:.5,PIECHART_VALUE_POSITION:.5,BARCHART_TYPE:"default",BARCHART_UPPER_LIMIT:null,BARCHART_LOWER_LIMIT:0,BARCHART_XAXIS_LINE_COLOR:"#808080",BARCHART_XAXIS_LINE_WIDTH:1,BARCHART_XAXIS_TEXT_COLOR:"#000000",BARCHART_XAXIS_TEXT_FONT:null,BARCHART_YAXIS_LINE_COLOR:"#808080",BARCHART_YAXIS_LINE_WIDTH:1,BARCHART_YAXIS_TEXT_COLOR:"#000000",BARCHART_YAXIS_TEXT_FONT:null,BARCHART_XSCALE_TEXT_FONT:null,BARCHART_XSCALE_TEXT_COLOR:"#000000",BARCHART_XSCALE_TEXT_ORIENTATION:"horizontal",BARCHART_YSCALE_TEXT_VISIBLE:!0,BARCHART_YSCALE_TEXT_COLOR:"#000000",BARCHART_YSCALE_TEXT_FONT:null,BARCHART_YSCALE_LINE_COLOR:"#808080",BARCHART_YSCALE_LINE_WIDTH:.3,BARCHART_YSCALE_VALUE_GAP:0,BARCHART_YSCALE_PIXEL_GAP:20,BARCHART_YSCALE_MIN_TEXT_VISIBLE:!1,LINECHART_INTERRUPTABLE:!0,LINECHART_UPPER_LIMIT:null,LINECHART_LOWER_LIMIT:null,LINECHART_XAXIS_LINE_COLOR:"#808080",LINECHART_XAXIS_LINE_WIDTH:1,LINECHART_XAXIS_TEXT_COLOR:"#000000",LINECHART_XAXIS_TEXT_FONT:null,LINECHART_YAXIS_LINE_COLOR:"#808080",LINECHART_YAXIS_LINE_WIDTH:1,LINECHART_YAXIS_TEXT_COLOR:"#000000",LINECHART_YAXIS_TEXT_FONT:null,LINECHART_XSCALE_TEXT_FONT:null,LINECHART_XSCALE_TEXT_COLOR:"#000000",LINECHART_XSCALE_TEXT_ORIENTATION:"horizontal",LINECHART_XSCALE_LINE_COLOR:"#808080",LINECHART_XSCALE_LINE_WIDTH:.3,LINECHART_YSCALE_TEXT_VISIBLE:!0,LINECHART_YSCALE_TEXT_COLOR:"#000000",LINECHART_YSCALE_TEXT_FONT:null,LINECHART_YSCALE_LINE_COLOR:"#808080",LINECHART_YSCALE_LINE_WIDTH:.3,LINECHART_YSCALE_VALUE_GAP:0,LINECHART_YSCALE_PIXEL_GAP:20,LINECHART_YSCALE_MIN_TEXT_VISIBLE:!1,LINECHART_VALUESPANCOUNT:1,BUBBLECHART_UPPER_LIMIT:null,BUBBLECHART_LOWER_LIMIT:null,BUBBLECHART_XAXIS_UPPER_LIMIT:null,BUBBLECHART_XAXIS_LOWER_LIMIT:null,BUBBLECHART_XAXIS_LINE_COLOR:"#808080",BUBBLECHART_XAXIS_LINE_WIDTH:1,BUBBLECHART_XAXIS_TEXT_COLOR:"#000000",BUBBLECHART_XAXIS_TEXT_FONT:null,BUBBLECHART_YAXIS_LINE_COLOR:"#808080",BUBBLECHART_YAXIS_LINE_WIDTH:1,BUBBLECHART_YAXIS_TEXT_COLOR:"#000000",BUBBLECHART_YAXIS_TEXT_FONT:null,BUBBLECHART_XSCALE_TEXT_FONT:null,BUBBLECHART_XSCALE_TEXT_COLOR:"#000000",BUBBLECHART_XSCALE_TEXT_ORIENTATION:"horizontal",BUBBLECHART_XSCALE_LINE_COLOR:"#808080",BUBBLECHART_XSCALE_LINE_WIDTH:.3,BUBBLECHART_YSCALE_TEXT_VISIBLE:!0,BUBBLECHART_YSCALE_TEXT_COLOR:"#000000",BUBBLECHART_YSCALE_TEXT_FONT:null,BUBBLECHART_YSCALE_LINE_COLOR:"#808080",BUBBLECHART_YSCALE_LINE_WIDTH:.3,BUBBLECHART_YSCALE_VALUE_GAP:0,BUBBLECHART_YSCALE_PIXEL_GAP:20,BUBBLECHART_YSCALE_MIN_TEXT_VISIBLE:!1,BUBBLECHART_SELECT_SHADOW_COLOR:"#000000",BUBBLECHART_SELECT_SHADOW_OFFSET:3,RADARCHART_AXIS_TEXT_FONT:null,RADARCHART_AXIS_TEXT_COLOR:"#000000",RADARCHART_AXIS_TEXT_VISIBLE:!0,RADARCHART_SCALE_TEXT_FONT:null,RADARCHART_SCALE_TEXT_COLOR:"#000000",RADARCHART_SCALE_TEXT_VISIBLE:!0,RADARCHART_AXIS_VISIBLE:!0,RADARCHART_AXIS_LINE_COLOR:"#808080",RADARCHART_AXIS_LINE_WIDTH:3,RADARCHART_AXIS_START_ANGLE:0,RADARCHART_RING_VISIBLE:!0,RADARCHART_RING_TYPE:"line",RADARCHART_RING_LINE_COLOR:"#808080",RADARCHART_RING_LINE_WIDTH:1,RADARCHART_SCALE_COUNT:5,RADARCHART_SCALE_MAXVALUE:1,RADARCHART_SCALE_MINVALUE:0,RADARCHART_ANCHOR_VISIBLE:!0,RADARCHART_AREA_FILL:!0,RADARCHART_AREA_FILL_ALPHA:.2,RADARCHART_AREA_SELECT_FILL_ALPHA:.5,DIALCHART_UPPER_LIMIT:100,DIALCHART_LOWER_LIMIT:0,DIALCHART_START_ANGLE:0,DIALCHART_END_ANGLE:360,DIALCHART_INNER_RADIUS:.8,DIALCHART_COLOR_RANGE_FILL_COLOR:"#808080",DIALCHART_OUTLINE_WIDTH:0,DIALCHART_OUTLINE_COLOR:"#808080",DIALCHART_SCALE_INSIDE:!0,DIALCHART_MAJOR_SCALE_COUNT:11,DIALCHART_MAJOR_SCALE_LINE_WIDTH:2,DIALCHART_MAJOR_SCALE_LINE_LENGTH:8,DIALCHART_MAJOR_SCALE_LINE_COLOR:"#000000",DIALCHART_MINOR_SCALE_COUNT:4,DIALCHART_MINOR_SCALE_LINE_WIDTH:1,DIALCHART_MINOR_SCALE_LINE_LENGTH:4,DIALCHART_MINOR_SCALE_LINE_COLOR:"#000000",DIALCHART_SCALE_TEXT_VISIBLE:!0,DIALCHART_SCALE_UPPER_LIMIT_TEXT_VISIBLE:!0,DIALCHART_SCALE_LOWER_LIMIT_TEXT_VISIBLE:!0,DIALCHART_SCALE_TEXT_FONT:null,DIALCHART_SCALE_TEXT_COLOR:"#000000",DIALCHART_PIVOT_RADIUS:10,DIALCHART_PIVOT_FILL:!0,DIALCHART_PIVOT_FILL_COLOR:"#808080",DIALCHART_PIVOT_OUTLINE_WIDTH:0,DIALCHART_PIVOT_OUTLINE_COLOR:"#808080",DIALCHART_VALUE_POSITION:.5,DIALCHART_INNER_DARKER_RADIUS:10,DIALCHART_OUTER_BRIGHTER_RADIUS:10,DIALCHART_SELECT_SHADOW_COLOR:"#000000",DIALCHART_SELECT_SHADOW_OFFSET:3,TABPANE_TAB_GAP:1,TABPANE_TAB_RADIUS:0,TABPANE_TAB_HEIGHT:24,TABPANE_TAB_ORIENTATION:"top",TABPANE_RESIZE_TOLERANCE:3,TABPANE_TAB_BACKGROUND:"#EBEBEB",TABPANE_DISABLED_COLOR:"#BABBBC",TABPANE_SELECT_BACKGROUND:"white",TABPANE_MOVE_BACKGROUND:"rgba(184,211,240,0.7)",TABPANE_INSERT_BACKGROUND:"orange",TABPANE_HORIZONTAL_ALIGN:"center",TABPANE_CLOSE_ICON:"close_icon",TABPANE_SELECT_NEXT_ON_CLOSE:!0,TABPANE_SELECT_NEXT_ON_INVISIBLE:!0,LISTBASE_INNER_TEXT:!0,LIST_ROW_HEIGHT:19,LIST_INDENT:2,LIST_ROW_LINE_WIDTH:0,LIST_ROW_LINE_COLOR:"#DDD",LIST_MAKE_VISIBLE_ON_SELECTED:!0,LIST_KEYBOARD_REMOVE_ENABLED:!0,LIST_KEYBOARD_SELECT_ENABLED:!0,TREE_ROW_HEIGHT:19,TREE_INDENT:16,TREE_ROW_LINE_WIDTH:0,TREE_ROW_LINE_COLOR:"#DDD",TREE_MAKE_VISIBLE_ON_SELECTED:!0,TREE_KEYBOARD_REMOVE_ENABLED:!0,TREE_KEYBOARD_SELECT_ENABLED:!0,TREE_EXPAND_ICON:"expand_icon",TREE_COLLAPSE_ICON:"collapse_icon",TREE_LINE_TYPE:"none",TREE_LINE_THICKNESS:2,TREE_LINE_COLOR:"#000000",TREE_LINE_ALPHA:1,TREE_LINE_DASH:[4,2],TABLE_ROW_HEIGHT:19,TABLE_ROW_LINE_WIDTH:1,TABLE_ROW_LINE_COLOR:"#DDD",TABLE_COLUMN_LINE_WIDTH:1,TABLE_COLUMN_LINE_COLOR:"#DDD",TABLE_MAKE_VISIBLE_ON_SELECTED:!0,TABLE_KEYBOARD_REMOVE_ENABLED:!0,TABLE_KEYBOARD_SELECT_ENABLED:!0,TABLE_EDITABLE:!1,TABLEHEADER_HEIGHT:24,TABLEHEADER_RESIZE_TOLERANCE:3,TABLEHEADER_BACKGROUND:"#EBEBEB",TABLEHEADER_MOVE_BACKGROUND:"rgba(184,211,240,0.7)",TABLEHEADER_INSERT_BACKGROUND:"orange",TABLEHEADER_COLUMN_LINE_COLOR:"#DDD",TABLEHEADER_SORT_DESC_ICON:"sort_desc",TABLEHEADER_SORT_ASC_ICON:"sort_asc",TABLEHEADER_SORT_ICON_POSITION:"98% 50%",TREETABLE_ROW_HEIGHT:19,TREETABLE_INDENT:16,TREETABLE_ROW_LINE_WIDTH:1,TREETABLE_ROW_LINE_COLOR:"#DDD",TREETABLE_COLUMN_LINE_WIDTH:1,TREETABLE_COLUMN_LINE_COLOR:"#DDD",TREETABLE_MAKE_VISIBLE_ON_SELECTED:!0,TREETABLE_KEYBOARD_REMOVE_ENABLED:!0,TREETABLE_KEYBOARD_SELECT_ENABLED:!0,TREETABLE_EXPAND_ICON:"expand_icon",TREETABLE_COLLAPSE_ICON:"collapse_icon",TREETABLE_EDITABLE:!1,PROPERTYSHEET_AUTO_ADJUSTABLE:!0,PROPERTYSHEET_INDENT:16,PROPERTYSHEET_ROW_HEIGHT:19,PROPERTYSHEET_ROW_LINE_WIDTH:1,PROPERTYSHEET_COLUMN_LINE_WIDTH:1,PROPERTYSHEET_BORDER_COLOR:"#EBEBEB",PROPERTYSHEET_EXPAND_ICON:"expand_icon",PROPERTYSHEET_COLLAPSE_ICON:"collapse_icon",PROPERTYSHEET_PROPERTY_NAME_WIDTH:100,PROPERTYSHEET_PROPERTY_NAME_HORIZONTAL_ALIGN:"",PROPERTYSHEET_SUM_WIDTH:200,PROPERTYSHEET_RESIZE_TOLERANCE:3,PROPERTYSHEET_EDITABLE:!1,PROPERTYSHEET_CATEGORIZABLE:!0,PROPERTYSHEET_EXPAND_CATEGORY:!0,POPUPMENU_SUBNENU_ENABLE_ICON:"submenu_enable_icon",POPUPMENU_SUBNENU_DISABLE_ICON:"submenu_disable_icon",POPUPMENU_CHECKBOX_SELECTED_ICON:"checkbox_selected_icon",POPUPMENU_CHECKBOX_UNSELECTED_ICON:"checkbox_unselected_icon",POPUPMENU_RADIOBUTTON_SELECTED_ICON:"radiobutton_selected_icon",POPUPMENU_RADIOBUTTON_UNSELECTED_ICON:"radiobutton_unselected_icon",SPLITPANE_ORIENTATION:"horizontal",SPLITPANE_POSITION:.5,SPLITPANE_DIVIDER_WIDTH:6,SPLITPANE_DIVIDER_BACKGROUND:"#CCCCFF",SPLITPANE_DIVIDER_OPACITY:.5,SPLITPANE_MASK_BACKGROUND:"",SPLITPANE_UP_EXPAND_ICON:"up_expand_icon",SPLITPANE_DOWN_EXPAND_ICON:"down_expand_icon",SPLITPANE_LEFT_EXPAND_ICON:"left_expand_icon",SPLITPANE_RIGHT_EXPAND_ICON:"right_expand_icon",NODE_WIDTH:50,NODE_HEIGHT:50,IMAGE_NODE:"node_image",IMAGE_GROUP:"group_image",IMAGE_SUBNETWORK:"subnetwork_image",ICON_DATABOX:"databox_icon",ICON_DATA:"data_icon",ICON_NODE:"node_icon",ICON_LINK:"link_icon",ICON_GROUP:"group_icon",ICON_SUBNETWORK:"subnetwork_icon",ICON_GRID:"grid_icon",ICON_BUS:"bus_icon",ICON_SHAPENODE:"shapenode_icon",ICON_SHAPELINK:"shapelink_icon",ICON_LINKSUBNETWORK:"linksubnetwork_icon",ICON_SHAPESUBNETWORK:"shapesubnetwork_icon",LAYER_DEFAULT_ID:"default",LAYER_DEFAULT_NAME:"default",ATTACHMENT_POINTER_LENGTH:10,ATTACHMENT_POINTER_WIDTH:8,ATTACHMENT_CORNER_RADIUS:5,ATTACHMENT_CONTENT_WIDTH:30,ATTACHMENT_CONTENT_HEIGHT:20,ATTACHMENT_POSITION:"topright.topright",ATTACHMENT_XOFFSET:0,ATTACHMENT_YOFFSET:0,ATTACHMENT_PADDING:0,ATTACHMENT_PADDING_LEFT:0,ATTACHMENT_PADDING_RIGHT:0,ATTACHMENT_PADDING_TOP:0,ATTACHMENT_PADDING_BOTTOM:0,ATTACHMENT_DIRECTION:"right",ATTACHMENT_FILL:!1,ATTACHMENT_FILL_COLOR:"#000000",ATTACHMENT_GRADIENT:null,ATTACHMENT_GRADIENT_COLOR:"#FFFFFF",ATTACHMENT_OUTLINE_WIDTH:-1,ATTACHMENT_OUTLINE_COLOR:"#000000",ATTACHMENT_CAP:"butt",ATTACHMENT_JOIN:"miter",ATTACHMENT_SHADOWABLE:!0,NETWORK_TOOLTIP_ENABLED:!0,NETWORK_SELECT_MODE:"mix",NETWORK_MAKE_VISIBLE_ON_SELECTED:!0,NETWORK_NO_AGENT_LINK_VISIBLE:!1,NETWORK_REMOVE_ELEMENTUI_ON_INVISIBLE:!1,NETWORK_SUBNETWORK_ANIMATE:!0,NETWORK_SENDTOTOP_ON_SELECTED:!0,NETWORK_KEYBOARD_REMOVE_ENABLED:!0,NETWORK_KEYBOARD_SELECT_ENABLED:!0,NETWORK_RECT_SELECT_ENABLED:!0,NETWORK_DOUBLECLICK_TO_SUBNETWORK:!0,NETWORK_DOUBLECLICK_TO_UPSUBNETWORK:!0,NETWORK_DOUBLECLICK_TO_EMPTYSUBNETWORK:!0,NETWORK_DOUBLECLICK_TO_LINKBUNDLE:!0,NETWORK_DOUBLECLICK_TO_GROUPEXPAND:!0,NETWORK_SELECT_OUTLINE_COLOR:"#2877A8",NETWORK_SELECT_OUTLINE_WIDTH:1,NETWORK_SELECT_FILL_COLOR:"rgba(184,211,240,0.4)",NETWORK_LAZYMOVE_OUTLINE_COLOR:"#2877A8",NETWORK_LAZYMOVE_OUTLINE_WIDTH:1,NETWORK_LAZYMOVE_FILL_COLOR:"rgba(184,211,240,0.4)",NETWORK_LAZYMOVE_FILL:!0,NETWORK_LAZYMOVE_ANIMATE:!0,NETWORK_RESIZE_POINT_SIZE:3,NETWORK_RESIZE_POINT_FILL_COLOR:"#FFFFFF",NETWORK_RESIZE_POINT_OUTLINE_COLOR:"#000000",NETWORK_RESIZE_POINT_OUTLINE_WIDTH:1,NETWORK_RESIZE_LINE_COLOR:"#000000",NETWORK_RESIZE_LINE_WIDTH:1,NETWORK_RESIZE_ANIMATE:!0,NETWORK_EDIT_POINT_SIZE:3,NETWORK_EDIT_POINT_FILL_COLOR:"#FFFF00",NETWORK_EDIT_POINT_OUTLINE_COLOR:"#000000",NETWORK_EDIT_POINT_OUTLINE_WIDTH:1,NETWORK_EDIT_LINE_COLOR:"rgba(184,211,240,0.7)",NETWORK_EDIT_LINE_WIDTH:2,NETWORK_ROTATE_POINT_SIZE:5,NETWORK_ROTATE_POINT_FILL_COLOR:"#FFFF00",NETWORK_ROTATE_POINT_OFFSET:15,NETWORK_ROTATE_POINT_OUTLINE_WIDTH:1,NETWORK_ROTATE_POINT_OUTLINE_COLOR:"rgba(0,0,0,1)",NETWORK_ROTATE_SCALE_FILL_COLOR:"rgb(227,166,103)",NETWORK_ROTATE_SCALE_FONT_COLOR:"#FFFFFF",NETWORK_ROTATE_SCALE_WIDTH:30,NETWORK_ROTATE_SCALE_HEIGHT:20,NETWORK_LIMIT_ELEMENT_INPOSITIVE_LOCATION:!0,NETWORK_LINK_FLOW_STEPPING:3,NETWORK_LINK_FLOW_COLOR:"#FF0000",NETWORK_LINK_FLOW_INTERVAL:600,NETWORK_SELECTION_TOLERANCE:2,NETWORK_TRANSPARENT_SELECTION_ENABLE:!1,SHOW_ALARM_IN_ATTACHMENT_DIV:!0,SHOW_LABEL_IN_ATTACHMENT_DIV:!1,SHOW_LABEL2_IN_ATTACHMENT_DIV:!1,SHOW_ICON_IN_ATTACHMENT_DIV:!1,SHOW_EDIT_IN_ATTACHMENT_DIV:!1,OVERVIEW_FILL_COLOR:"rgba(184,211,240,0.4)",OVERVIEW_OUTLINE_COLOR:"#B8D3F0",OVERVIEW_OUTLINE_WIDTH:1,OVERVIEW_SELECT_COLOR:"#0000FF",OVERVIEW_SELECT_WIDTH:1,OVERVIEW_PADDING:1,OVERVIEW_ANIMATE:!0,OVERVIEW_MAX_PACKING_WIDTH:-1,OVERVIEW_MAX_PACKING_HEIGHT:-1,TOUCH_MOVE_THRESHOLD:5,TOUCH_RECT_SELECT_THRESHOLD:20,TOUCH_ZOOM_THRESHOLD:30,LINK_BUNDLE_AGENT_FUNCTION:null,IS_LINK_ADJUSTED_TO_BOTTOM:!1,GROUP_EXPAND_ALIGN:"center",ELEMENTUI_FUNCTION:function(t,e){var i=e.getElementUIClass();return i?new i(t,e):null},CANVASUI_FUNCTION:function(t,e){var i=e.getCanvasUIClass();return i?new i(t,e):null},VECTORUI_FUNCTION:function(t,e){var i=e.getVectorUIClass();return i?new i(t,e):null},KEEP_DEFAULT_FUNCTION:function(t){return!(!t.target.keepDefault&&!t.target.getAttribute("keepDefault"))||(!(!t.target.parentNode||!t.target.parentNode.keepDefault&&!t.target.parentNode.getAttribute("keepDefault"))||!!t.shiftKey)},SORT_FUNCTION:function(t,e){if(t===e)return 0;if(null==t&&null!=e)return 1;if(null!=t&&null==e)return-1;if(null==t&&null==e)return 0;var i,n=typeof t,o=typeof e;return"string"==n&&"string"==o&&(i=t.localeCompare(e)),0<(i=void 0===(i="number"==n&&"number"==o?t-e:i)?(""+t).localeCompare(""+e):i)?1:i<0?-1:0},CENTER_LOCATION:!1,PIXEL_FILTER_FUNCTION:function(t,e){if(!e)return t;t=.3*t.r+.59*t.g+.11*t.b;return{r:Math.floor(e.r*t/255),g:Math.floor(e.g*t/255),b:Math.floor(e.b*t/255)}}};!function(){var t=ye;if(window.OverrideTWaverDefaults)for(var e in OverrideTWaverDefaults)t[e]=OverrideTWaverDefaults[e];t.VIEW_FONT_SIZE&&t.VIEW_FONT_FAMILY?t.FONT=t.VIEW_FONT_SIZE+" "+t.VIEW_FONT_FAMILY:t.FONT=E.createElement("canvas").getContext("2d").font,t.CHART_VALUE_FONT||(t.CHART_VALUE_FONT="10px "+t.VIEW_FONT_FAMILY),t.BARCHART_XSCALE_TEXT_FONT||(t.BARCHART_XSCALE_TEXT_FONT="10px "+t.VIEW_FONT_FAMILY),t.BARCHART_YSCALE_TEXT_FONT||(t.BARCHART_YSCALE_TEXT_FONT="10px "+t.VIEW_FONT_FAMILY),t.BARCHART_XAXIS_TEXT_FONT||(t.BARCHART_XAXIS_TEXT_FONT="12px "+t.VIEW_FONT_FAMILY),t.BARCHART_YAXIS_TEXT_FONT||(t.BARCHART_YAXIS_TEXT_FONT="12px "+t.VIEW_FONT_FAMILY),t.LINECHART_XSCALE_TEXT_FONT||(t.LINECHART_XSCALE_TEXT_FONT="10px "+t.VIEW_FONT_FAMILY),t.LINECHART_YSCALE_TEXT_FONT||(t.LINECHART_YSCALE_TEXT_FONT="10px "+t.VIEW_FONT_FAMILY),t.LINECHART_XAXIS_TEXT_FONT||(t.LINECHART_XAXIS_TEXT_FONT="12px "+t.VIEW_FONT_FAMILY),t.LINECHART_YAXIS_TEXT_FONT||(t.LINECHART_YAXIS_TEXT_FONT="12px "+t.VIEW_FONT_FAMILY),t.BUBBLECHART_XAXIS_TEXT_FONT||(t.BUBBLECHART_XAXIS_TEXT_FONT="12px "+t.VIEW_FONT_FAMILY),t.BUBBLECHART_YAXIS_TEXT_FONT||(t.BUBBLECHART_YAXIS_TEXT_FONT="12px "+t.VIEW_FONT_FAMILY),t.BUBBLECHART_XSCALE_TEXT_FONT||(t.BUBBLECHART_XSCALE_TEXT_FONT="10px "+t.VIEW_FONT_FAMILY),t.BUBBLECHART_YSCALE_TEXT_FONT||(t.BUBBLECHART_YSCALE_TEXT_FONT="10px "+t.VIEW_FONT_FAMILY),t.RADARCHART_AXIS_TEXT_FONT||(t.RADARCHART_AXIS_TEXT_FONT="12px "+t.VIEW_FONT_FAMILY),t.RADARCHART_SCALE_TEXT_FONT||(t.RADARCHART_SCALE_TEXT_FONT="10px "+t.VIEW_FONT_FAMILY),t.DIALCHART_SCALE_TEXT_FONT||(t.DIALCHART_SCALE_TEXT_FONT="10px "+t.VIEW_FONT_FAMILY)}(),x.Defaults=ye,Y.ext("twaver.Defaults",Object,{}),x.Colors={orange:"#EC6C00",orange_light:"#EF8200",orange_dark:"#EA5404",gray_light:"#666666",gray_dark:"#242424",green_light:"#57AB9A",green_dark:"#238475",blue_light:"#61B6D8",blue_dark:"#0089C1"},x.SerializationSettings=function(){var t=x.SerializationSettings;this.isDataBoxSerializable=t.isDataBoxSerializable,this.isLayerBoxSerializable=t.isLayerBoxSerializable,this.isStyleSerializable=t.isStyleSerializable,this.isClientSerializable=t.isClientSerializable,this.isImageSerializable=t.isImageSerializable,this._pm=Y.clone(t._pm),this._sm=Y.clone(t._sm),this._cm=Y.clone(t._cm)},(re=x.SerializationSettings).isDataBoxSerializable=!0,re.isLayerBoxSerializable=!0,re.isStyleSerializable=!0,re.isClientSerializable=!0,re.isImageSerializable=!0,re._pm={},re._sm={},re._cm={},re.setPropertyType=function(t,e){re._pm[t]=e},re.getPropertyType=function(t){return re._pm[t]},re.setStyleType=function(t,e){re._sm[t]=e},re.getStyleType=function(t){return re._sm[t]},re.setClientType=function(t,e){re._cm[t]=e},re.getClientType=function(t){return re._cm[t]},Y.ext("twaver.SerializationSettings",Object,{setPropertyType:function(t,e){this._pm[t]=e},getPropertyType:function(t){return this._pm[t]},setStyleType:function(t,e){this._sm[t]=e},getStyleType:function(t){return this._sm[t]},setClientType:function(t,e){this._cm[t]=e},getClientType:function(t){return this._cm[t]}});var we,xe=x.Styles={_m:{},setStyle:function(t,e){null==e?delete xe._m[t]:xe._m[t]=e},getStyle:function(t){return xe._m[t]},getStyleProperties:function(){return Y.keys(x.Styles._m)}};(Ot=function(t,e){x.SerializationSettings.setPropertyType(t,e)})("name","cdata"),Ot("name2","cdata"),Ot("icon","string"),Ot("toolTip","cdata"),Ot("parent","data"),Ot("layerId","string"),Ot("alarmState","alarmstate"),Ot("image","string"),Ot("imageUrl","string"),Ot("location","point"),Ot("width","number"),Ot("height","number"),Ot("expanded","boolean"),Ot("host","data"),Ot("fromNode","data"),Ot("toNode","data"),Ot("points","list.point"),Ot("segments","list.string"),Ot("angle","number"),Ot("visible","boolean"),(Ot=function(t,e,i){null==i&&(i=null!=e?typeof e:"string"),x.Styles.setStyle(t,e),x.SerializationSettings.setStyleType(t,i)})("chart.color",null),Ot("chart.value",0),Ot("chart.values",null,"list.number"),Ot("chart.value.color","#000000"),Ot("chart.value.font",null),Ot("chart.line.width",2),Ot("chart.marker.size",6),Ot("chart.marker.shape","circle"),Ot("chart.bubble.shape","circle"),Ot("chart.names",null,"list.string"),Ot("chart.xaxis.values",null,"list.number"),Ot("chart.yaxis.values",null,"list.number"),Ot("dialchart.rear.extension",0),Ot("dialchart.base.width",5),Ot("dialchart.top.width",0),Ot("dialchart.radius",.8),Ot("inner.color",null),Ot("outer.shape","rectangle"),Ot("outer.color",null),Ot("outer.width",2),Ot("outer.padding",1),Ot("outer.padding.left",0),Ot("outer.padding.right",0),Ot("outer.padding.top",0),Ot("outer.padding.bottom",0),Ot("outer.cap","butt"),Ot("outer.join","miter"),Ot("outer.style","border"),Ot("shadow.color",null),Ot("shadow.xoffset",3),Ot("shadow.yoffset",3),Ot("shadow.blur",6),Ot("select.style","shadow"),Ot("select.color","rgba(0, 0, 0, 0.7)"),Ot("select.shape","rectangle"),Ot("select.width",2),Ot("select.padding",2),Ot("select.padding.left",0),Ot("select.padding.right",0),Ot("select.padding.top",0),Ot("select.padding.bottom",0),Ot("select.cap","butt"),Ot("select.join","miter"),Ot("whole.alpha",1),Ot("body.type","default"),Ot("network.label",null,"cdata"),Ot("image.padding",0),Ot("image.padding.left",0),Ot("image.padding.right",0),Ot("image.padding.top",0),Ot("image.padding.bottom",0),Ot("image.state",null),Ot("vector.shape","rectangle"),Ot("vector.fill",!0),Ot("vector.fill.color","#CCCCFF"),Ot("vector.outline.width",-1),Ot("vector.outline.pattern",null,"array.number"),Ot("vector.outline.color","#5B5B5B"),Ot("vector.gradient","none"),Ot("vector.gradient.color","#FFFFFF"),Ot("vector.padding",0),Ot("vector.padding.left",0),Ot("vector.padding.right",0),Ot("vector.padding.top",0),Ot("vector.padding.bottom",0),Ot("vector.cap","butt"),Ot("vector.join","miter"),Ot("vector.deep",0),Ot("group.shape","rectangle"),Ot("group.fill",!0),Ot("group.fill.color","#CCCCFF"),Ot("group.outline.width",-1),Ot("group.outline.color","#5B5B5B"),Ot("group.gradient","none"),Ot("group.gradient.color","#FFFFFF"),Ot("group.padding",5),Ot("group.padding.left",0),Ot("group.padding.right",0),Ot("group.padding.top",0),Ot("group.padding.bottom",0),Ot("group.cap","butt"),Ot("group.join","miter"),Ot("group.deep",1),Ot("group.shape.roundrect.radius",-1),Ot("group.expend.image",null),Ot("group.expend.image.vector",!1),Ot("label.alpha",1),Ot("label.color","#000000"),Ot("label.font",null),Ot("label.position","bottom.bottom"),Ot("label.direction","below"),Ot("label.corner.radius",0),Ot("label.pointer.length",0),Ot("label.pointer.width",8),Ot("label.xoffset",0),Ot("label.yoffset",2),Ot("label.padding",0),Ot("label.padding.left",0),Ot("label.padding.right",0),Ot("label.padding.top",0),Ot("label.padding.bottom",0),Ot("label.fill",!1),Ot("label.fill.color","#C0C0C0"),Ot("label.gradient","none"),Ot("label.gradient.color","#FFFFFF"),Ot("label.outline.width",-1),Ot("label.outline.color","#000000"),Ot("label.cap","butt"),Ot("label.join","miter"),Ot("label.shadowable",!0),Ot("label.align","center"),Ot("label.rotate.angle",0),Ot("label.maxlength",0),Ot("link.label.rotatable",!1),Ot("label.linespacing",15),Ot("label2.alpha",1),Ot("label2.color","#000000"),Ot("label2.font",null),Ot("label2.position","top.top"),Ot("label2.direction","below"),Ot("label2.corner.radius",0),Ot("label2.pointer.length",0),Ot("label2.pointer.width",8),Ot("label2.xoffset",0),Ot("label2.yoffset",-2),Ot("label2.padding",0),Ot("label2.padding.left",0),Ot("label2.padding.right",0),Ot("label2.padding.top",0),Ot("label2.padding.bottom",0),Ot("label2.fill",!1),Ot("label2.fill.color","#C0C0C0"),Ot("label2.gradient","none"),Ot("label2.gradient.color","#FFFFFF"),Ot("label2.outline.width",-1),Ot("label2.outline.color","#000000"),Ot("label2.cap","butt"),Ot("label2.join","miter"),Ot("label2.shadowable",!0),Ot("label2.align","center"),Ot("label2.rotate.angle",0),Ot("label2.maxlength",0),Ot("label2.linespacing",15),Ot("link.label2.rotatable",!1),Ot("icons.names",null,"array.string"),Ot("icons.colors",null,"array.string"),Ot("icons.position",null,"array.string"),Ot("icons.orientation",null,"array.string"),Ot("icons.xoffset",[0],"array.number"),Ot("icons.yoffset",[0],"array.number"),Ot("icons.xgap",[1],"array.number"),Ot("icons.ygap",[1],"array.number"),Ot("alarm.alpha",1),Ot("alarm.color","#000000"),Ot("alarm.font",null),Ot("alarm.position","hotspot"),Ot("alarm.direction","aboveright"),Ot("alarm.corner.radius",5),Ot("alarm.pointer.length",10),Ot("alarm.pointer.width",8),Ot("alarm.xoffset",0),Ot("alarm.yoffset",0),Ot("alarm.padding",0),Ot("alarm.padding.left",0),Ot("alarm.padding.right",0),Ot("alarm.padding.top",0),Ot("alarm.padding.bottom",0),Ot("alarm.gradient","none"),Ot("alarm.gradient.color","#FFFFFF"),Ot("alarm.outline.width",-1),Ot("alarm.outline.color","#000000"),Ot("alarm.cap","butt"),Ot("alarm.join","miter"),Ot("alarm.shadowable",!0),Ot("link.color","#658DC1"),Ot("link.width",3),Ot("link.cap","butt"),Ot("link.join","miter"),Ot("link.type","arc"),Ot("link.pattern",null,"array.number"),Ot("link.extend",20),Ot("link.control.point",null,"point"),Ot("link.bundle.id",0),Ot("link.bundle.enable",!0),Ot("link.bundle.expanded",!0),Ot("link.bundle.independent",!1),Ot("link.bundle.offset",20),Ot("link.bundle.gap",12),Ot("link.bundle.group.gap",0),Ot("link.looped.gap",6),Ot("link.looped.direction","northwest"),Ot("link.looped.type","arc"),Ot("link.from.position","center"),Ot("link.from.xoffset",0),Ot("link.from.yoffset",0),Ot("link.from.percent",null),Ot("link.from.at.edge",!0),Ot("link.to.position","center"),Ot("link.to.xoffset",0),Ot("link.to.yoffset",0),Ot("link.to.percent",null),Ot("link.to.at.edge",!0),Ot("link.split.by.percent",!0),Ot("link.split.percent",.5),Ot("link.split.value",20),Ot("link.corner","round"),Ot("link.xradius",8),Ot("link.yradius",8),Ot("link.flow",!1),Ot("link.flow.converse",!1),Ot("link.flow.offset",0),Ot("link.handler.alpha",1),Ot("link.handler.color","#000000"),Ot("link.handler.font",null),Ot("link.handler.position","topleft.topleft"),Ot("link.handler.direction","below"),Ot("link.handler.corner.radius",0),Ot("link.handler.pointer.length",0),Ot("link.handler.pointer.width",8),Ot("link.handler.xoffset",0),Ot("link.handler.yoffset",0),Ot("link.handler.padding",0),Ot("link.handler.padding.left",0),Ot("link.handler.padding.right",0),Ot("link.handler.padding.top",0),Ot("link.handler.padding.bottom",0),Ot("link.handler.fill",!1),Ot("link.handler.fill.color","#C0C0C0"),Ot("link.handler.gradient","none"),Ot("link.handler.gradient.color","#FFFFFF"),Ot("link.handler.outline.width",-1),Ot("link.handler.outline.color","#000000"),Ot("link.handler.cap","butt"),Ot("link.handler.join","miter"),Ot("link.handler.shadowable",!0),Ot("link.agent",!1),Ot("link.agent.color","#658DC1"),Ot("link.agent.width",3),Ot("link.agent.cap","butt"),Ot("link.agent.join","miter"),Ot("link.agent.type","arc"),Ot("link.agent.pattern",null,"array.number"),Ot("link.agent.extend",20),Ot("link.agent.control.point",null,"point"),Ot("link.agent.from.position","center"),Ot("link.agent.from.xoffset",0),Ot("link.agent.from.yoffset",0),Ot("link.agent.from.percent",null),Ot("link.agent.from.at.edge",!0),Ot("link.agent.to.position","center"),Ot("link.agent.to.xoffset",0),Ot("link.agent.to.yoffset",0),Ot("link.agent.to.percent",null),Ot("link.agent.to.at.edge",!0),Ot("link.agent.split.by.percent",!0),Ot("link.agent.split.percent",.5),Ot("link.agent.split.value",20),Ot("link.agent.corner","round"),Ot("link.agent.xradius",8),Ot("link.agent.yradius",8),Ot("link.agent.flow",!1),Ot("link.agent.flow.converse",!1),Ot("link.agent.flow.offset",0),Ot("follower.row.index",0),Ot("follower.column.index",0),Ot("follower.row.span",1),Ot("follower.column.span",1),Ot("follower.padding",0),Ot("follower.padding.left",0),Ot("follower.padding.right",0),Ot("follower.padding.top",0),Ot("follower.padding.bottom",0),Ot("follower.fill.cell",!0),Ot("follower.cell.position","center"),Ot("glow.blur",20),Ot("grid.row.count",1),Ot("grid.column.count",1),Ot("grid.row.percents",null,"array.number"),Ot("grid.column.percents",null,"array.number"),Ot("grid.border",1),Ot("grid.border.left",0),Ot("grid.border.right",0),Ot("grid.border.top",0),Ot("grid.border.bottom",0),Ot("grid.padding",1),Ot("grid.padding.left",0),Ot("grid.padding.right",0),Ot("grid.padding.top",0),Ot("grid.padding.bottom",0),Ot("grid.fill",!0),Ot("grid.fill.color","#C0C0C0"),Ot("grid.deep",1),Ot("grid.cell.deep",-1),Ot("shapelink.type","lineto"),Ot("shapenode.closed",!1),Ot("shapenode.pattern",null,"array.number"),Ot("bus.style","nearby"),Ot("arrow.from",!1),Ot("arrow.from.fill",!0),Ot("arrow.from.shape","arrow.standard"),Ot("arrow.from.color","#000000"),Ot("arrow.from.xoffset",0),Ot("arrow.from.yoffset",0),Ot("arrow.from.width",12),Ot("arrow.from.height",9),Ot("arrow.from.outline.color","#000000"),Ot("arrow.from.outline.width",-1),Ot("arrow.from.at.edge",!0),Ot("arrow.from.shadow",!1),Ot("arrow.from.shadow.color","#000000"),Ot("arrow.from.shadow.xoffset",0),Ot("arrow.from.shadow.yoffset",0),Ot("arrow.from.shadow.blur",16),Ot("arrow.to",!1),Ot("arrow.to.fill",!0),Ot("arrow.to.shape","arrow.standard"),Ot("arrow.to.color","#000000"),Ot("arrow.to.xoffset",0),Ot("arrow.to.yoffset",0),Ot("arrow.to.width",12),Ot("arrow.to.height",9),Ot("arrow.to.outline.color","#000000"),Ot("arrow.to.outline.width",-1),Ot("arrow.to.at.edge",!0),Ot("arrow.agent.from",!1),Ot("arrow.agent.from.fill",!0),Ot("arrow.agent.from.shape","arrow.standard"),Ot("arrow.agent.from.color","#000000"),Ot("arrow.agent.from.xoffset",0),Ot("arrow.agent.from.yoffset",0),Ot("arrow.agent.from.width",12),Ot("arrow.agent.from.height",9),Ot("arrow.agent.from.outline.color","#000000"),Ot("arrow.agent.from.outline.width",-1),Ot("arrow.agent.from.at.edge",!0),Ot("arrow.agent.from.shadow",!1),Ot("arrow.agent.from.shadow.color","#000000"),Ot("arrow.agent.from.shadow.xoffset",0),Ot("arrow.agent.from.shadow.yoffset",0),Ot("arrow.agent.from.shadow.blur",16),Ot("arrow.agent.to",!1),Ot("arrow.agent.to.fill",!0),Ot("arrow.agent.to.shape","arrow.standard"),Ot("arrow.agent.to.color","#000000"),Ot("arrow.agent.to.xoffset",0),Ot("arrow.agent.to.yoffset",0),Ot("arrow.agent.to.width",12),Ot("arrow.agent.to.height",9),Ot("arrow.agent.to.outline.color","#000000"),Ot("arrow.agent.to.outline.width",-1),Ot("arrow.agent.to.at.edge",!0),Ot("background.image",null),Ot("background.image.scope","viewport"),Ot("background.type","none"),Ot("background.outline.width",-1),Ot("background.outline.color",null),Ot("background.vector.padding",0),Ot("background.image.padding",0),Ot("background.image.stretch","fill"),Ot("background.vector.scope","viewport"),Ot("background.vector.fill",null),Ot("background.vector.fill.color",null),Ot("background.vector.gradient",!1),Ot("background.vector.gradient.color",null),Ot("background.vector.shape","rectangle"),Ot("background.outline.pattern",null,"array.number"),Ot("attachment.label.style","html"),Ot("attachment.label2.style","html"),Ot("attachment.alarm.style","html"),Ot("attachment.htmllabel.hyperlink",!1),Ot("attachment.htmllabel2.hyperlink",!1),Ot("attachment.zIndex",1e3),Ot("attachment.pointer.events","auto"),Y.ext("twaver.Styles",Object,{}),x.PropertyChangeDispatcher=function(){this._dispatcher=new x.EventDispatcher},Y.ext("twaver.PropertyChangeDispatcher",Object,{addPropertyChangeListener:function(t,e,i){this._dispatcher.add(t,e,i)},removePropertyChangeListener:function(t,e){this._dispatcher.remove(t,e)},firePropertyChange:function(t,e,i){if(e==i)return!1;i={property:t,oldValue:e,newValue:i,source:this};return this._dispatcher.fire(i),this.onPropertyChanged(i),!0},onPropertyChanged:function(t){}}),x.animate.Animate=function(){},Y.ext("twaver.animate.Animate",Object,{current:0,step:8,delay:4,finishFunction:null,shouldBeFinished:!1,getCurrentDelay:function(){return this.delay*this.current+1},action:function(t){}}),x.animate.AnimateProperty=function(t,e,i){this.objects=t,this.newValues=e,this.finishFunction=i,this.oldValues=new ie;for(var n=this.objects.size(),o=0;o<n;o++){var s=this.objects.get(o);this.oldValues.add(this.getPropertyValue(s))}},Y.ext("twaver.animate.AnimateProperty",x.animate.Animate,{action:function(t){for(var e=this.objects.size(),i=0;i<e;i++){var n=this.objects.get(i),o=this.oldValues.get(i),s=this.newValues.get(i);this.currentAction(n,o,s,t)}},getPropertyValue:function(t){},currentAction:function(t,e,i,n){}}),x.animate.AnimateBounds=function(t,e,i){this.node=t,this.newBounds=e,this.oldBounds=t.getRect(),this.finishFunction=i},Y.ext("twaver.animate.AnimateBounds",x.animate.Animate,{shouldBeFinished:!0,action:function(t){var e=this.oldBounds,i=this.newBounds;this.node.setLocation(e.x+(i.x-e.x)*t,e.y+(i.y-e.y)*t),this.node.setSize(e.width+(i.width-e.width)*t,e.height+(i.height-e.height)*t)}}),x.animate.AnimateCenterLocation=function(t,e,i){x.animate.AnimateCenterLocation.superClass.constructor.call(this,t,e,i)},Y.ext("twaver.animate.AnimateCenterLocation",x.animate.AnimateProperty,{getPropertyValue:function(t){return t.getCenterLocation()},currentAction:function(t,e,i,n){var o=e.x+(i.x-e.x)*n,n=e.y+(i.y-e.y)*n;t.setCenterLocation(o,n)}}),x.animate.AnimateLocation=function(t,e,i){x.animate.AnimateLocation.superClass.constructor.call(this,t,e,i)},Y.ext("twaver.animate.AnimateLocation",x.animate.AnimateProperty,{getPropertyValue:function(t){return t.getLocation()},currentAction:function(t,e,i,n){var o=e.x+(i.x-e.x)*n,n=e.y+(i.y-e.y)*n;t.setLocation(o,n)}}),x.animate.AnimateScrollPosition=function(t,e,i){this.view=t,this.oldHorizontalOffset=t.scrollLeft,this.oldVerticalOffset=t.scrollTop,this.newHorizontalOffset=e,this.newVerticalOffset=i},Y.ext("twaver.animate.AnimateScrollPosition",x.animate.Animate,{action:function(t){this.view.scrollLeft=this.oldHorizontalOffset+(this.newHorizontalOffset-this.oldHorizontalOffset)*t,this.view.scrollTop=this.oldVerticalOffset+(this.newVerticalOffset-this.oldVerticalOffset)*t}}),x.animate.AnimateZoom=function(t,e,i){this.view=t,this.oldZoom=t.getZoom(),this.newZoom=e,this.finishFunction=i},Y.ext("twaver.animate.AnimateZoom",x.animate.Animate,{shouldBeFinished:!0,action:function(t){this.view.setZoom(this.oldZoom+(this.newZoom-this.oldZoom)*t,!1)}}),x.animate.AnimateXZoom=function(t,e,i){this.view=t,this.oldXZoom=t.getXZoom(),this.newXZoom=e,this.finishFunction=i},Y.ext("twaver.animate.AnimateXZoom",x.animate.Animate,{shouldBeFinished:!0,action:function(t){this.view.setXZoom(this.oldXZoom+(this.newXZoom-this.oldXZoom)*t,!1)}}),x.animate.AnimateYZoom=function(t,e,i){this.view=t,this.oldYZoom=t.getYZoom(),this.newYZoom=e,this.finishFunction=i},Y.ext("twaver.animate.AnimateYZoom",x.animate.Animate,{shouldBeFinished:!0,action:function(t){this.view.setYZoom(this.oldYZoom+(this.newYZoom-this.oldYZoom)*t,!1)}}),x.animate.AnimateXYZoom=function(t,e,i,n){this.view=t,this.oldXZoom=t.getXZoom(),this.newXZoom=e,this.oldYZoom=t.getYZoom(),this.newYZoom=i,this.finishFunction=n},Y.ext("twaver.animate.AnimateXYZoom",x.animate.Animate,{shouldBeFinished:!0,action:function(t){this.view.setXZoom(this.oldXZoom+(this.newXZoom-this.oldXZoom)*t,!1),this.view.setYZoom(this.oldYZoom+(this.newYZoom-this.oldYZoom)*t,!1)}}),x.animate.AnimateSubNetwork=function(t,e,i){this.network=t,this.subNetwork=e,this.finishFunction=i},Y.ext("twaver.animate.AnimateSubNetwork",x.animate.Animate,{shouldBeFinished:!0,action:function(t){.5<t?(this.network.getView().style.opacity=2*t-1,this.network._setCurrentSubNetwork(this.subNetwork)):this.network.getView().style.opacity=1-2*t}}),x.animate.AnimateManager={timer:null,animate:null,start:function(t,e){var i=x.animate.AnimateManager;t.current<0&&(t.current=0),e?Y.callLater(i.startImpl,null,[t],e):i.startImpl(t)},startImpl:function(t){var e=x.animate.AnimateManager;e.animate&&e.endAnimate(),e.animate=t,e.timer=setTimeout(e.tick,t.getCurrentDelay())},tick:function(){var t=x.animate.AnimateManager,e=t.animate;e&&(e.current<0?e.current++:(e.current<e.step&&(e.current++,e.action(e.current/e.step),t.timer=setTimeout(t.tick,e.getCurrentDelay())),e.current>=e.step&&t.endAnimate()))},endAnimate:function(){var t,e=x.animate.AnimateManager;e.animate?(e.animate.shouldBeFinished&&e.animate.current<e.animate.step&&(e.animate.current=e.animate.step,e.animate.action(e.animate.current/e.animate.step)),t=e.animate.finishFunction,e.animate=null,e.timer&&(clearTimeout(e.timer),e.timer=null),t&&t()):e.timer&&(clearTimeout(e.timer),e.timer=null)}},x.DataBox=function(t){x.DataBox.superClass.constructor.apply(this,arguments),1===arguments.length&&(this._name=t),this._dataList=new ie,this._dataMap={},this._rootList=new ie,this._rootMap={},this._clientMap={},this._dataBoxChangeDispatcher=new x.EventDispatcher,this._dataPropertyChangeDispatcher=new x.EventDispatcher,this._hierarchyChangeDispatcher=new x.EventDispatcher,this._selectionModel=new x.SelectionModel(this)},Y.ext("twaver.DataBox",x.PropertyChangeDispatcher,{IClient:!0,__client:1,__new:1,_limit:-1,_name:"DataBox",_icon:ye.ICON_DATABOX,__accessor:["name","icon","toolTip"],getSelectionModel:function(){return this._selectionModel},size:function(){return this._dataList.size()},isEmpty:function(){return this._dataList.isEmpty()},getLimit:function(){return this._limit},setLimit:function(t){var e=this._limit;this._limit=t,this.firePropertyChange("limit",e,t),this._checkLimit()},_checkLimit:function(){0<=this._limit&&this.size()>this._limit&&this.removeFirst(this.size()-this._limit)},removeFirst:function(t){for(0===arguments.length&&(t=1);0<t&&0<this._dataList.size();){var e=this._dataList.get(0);this.remove(e),t--}},getSiblings:function(t){if(!this.contains(t))throw t+" dosen't belong to this dataBox";t=t.getParent();return t?t.getChildren():this._rootList},getRoots:function(){return this._rootList},getSiblingIndex:function(t){return(t.getParent()?t.getParent().getChildren():this._rootList).indexOf(t)},getDatas:function(){return this._dataList},getDataAt:function(t){return this._dataList.get(t)},toDatas:function(t,e){return this._dataList.toList(t,e)},forEach:function(t,e){this._dataList.forEach(t,e)},forEachReverse:function(t,e){this._dataList.forEachReverse(t,e)},forEachByDepthFirst:function(t,e,i){if(e)this._depthFirst(t,e,i);else for(var n=this._rootList.size(),o=0;o<n;o++){var s=this._rootList.get(o);if(!1===this._depthFirst(t,s,i))return}},_depthFirst:function(t,e,i){for(var n=e.getChildrenSize(),o=0;o<n;o++){var s=e.getChildAt(o);if(!1===this._depthFirst(t,s,i))return!1}if(i){if(!1===t.call(i,e))return!1}else if(!1===t(e))return!1},forEachByBreadthFirst:function(t,e,i){var n=new ie;for(e?n.add(e):this._rootList.forEach(n.add,n);0<n.size();)if((e=n.removeAt(0)).getChildren().forEach(n.add,n),i){if(!1===t.call(i,e))return}else if(!1===t(e))return},add:function(t,e){if(t){1===arguments.length&&(e=-1);var i=t.getId();if(this._dataMap.hasOwnProperty(i))throw"Data with ID '"+i+"' already exists";this._dataBoxChangeDispatcher.fire({kind:"preAdd",data:t}),this._dataMap[i]=t,this._dataList.add(t),t.getParent()||(this._rootMap[i]=t,0<=e?this._rootList.add(t,e):this._rootList.add(t)),t.addPropertyChangeListener(this.handleDataPropertyChange,this,!0),this._dataBoxChangeDispatcher.fire({kind:"add",data:t}),this._checkLimit()}},addByDescendant:function(t){this.add(t),0<t.getChildren().size()&&t.getChildren().forEach(function(t){this.addByDescendant(t)},this)},remove:function(t){this.removeById(t.getId())},removeSelection:function(){this._selectionModel.toSelection().forEach(function(t){this.remove(t)},this)},removeById:function(t){var e=this.getDataById(t);e&&(this._dataBoxChangeDispatcher.fire({kind:"preRemove",data:e}),e instanceof x.Link&&(e.setFromNode(null),e.setToNode(null)),e instanceof Re&&e.getLinks()&&e.getLinks().toList().forEach(function(t){this.remove(t)},this),e instanceof Re&&e.getFollowers()&&e.getFollowers().toList().forEach(function(t){t.setHost(null)}),e instanceof x.Follower&&e.getHost()&&e.setHost(null),e.toChildren().forEach(function(t){this.remove(t)},this),e.getParent()&&e.getParent().removeChild(e),this._dataList.remove(e),delete this._dataMap[t],this._rootMap[t]&&(delete this._rootMap[t],this._rootList.remove(e)),this._dataBoxChangeDispatcher.fire({kind:"remove",data:e}),e.removePropertyChangeListener(this.handleDataPropertyChange,this))},clear:function(){var t;0<this._dataList.size()&&(this._dataList.forEach(function(t){t.removePropertyChangeListener(this.handleDataPropertyChange,this)},this),t=this._dataList.toList(),this._dataList.clear(),this._dataMap={},this._rootList.clear(),this._rootMap={},this._dataBoxChangeDispatcher.fire({kind:"clear",datas:t}))},getDataById:function(t){return this._dataMap[t]},containsById:function(t){return this._dataMap.hasOwnProperty(t)},contains:function(t){return!!t&&this._dataMap[t._id]===t},moveTo:function(t,e){if(!this.contains(t))throw t+" dosen't belong to this dataBox";var i=this.getSiblings(t),n=i.indexOf(t);n===e||n<0||0<=e&&e<=i.size()&&(i.remove(t),e>i.size()&&e--,i.add(t,e),this._hierarchyChangeDispatcher.fire({data:t,oldIndex:n,newIndex:e}))},moveUp:function(t){var e=this.getSiblings(t);this.moveTo(t,e.indexOf(t)-1)},moveDown:function(t){var e=this.getSiblings(t);this.moveTo(t,e.indexOf(t)+1)},moveToTop:function(t){this.moveTo(t,0)},moveToBottom:function(t){var e=this.getSiblings(t);this.moveTo(t,e.size())},moveSelectionUp:function(t){t=t||this._selectionModel;var e=new ie;ht.findMoveUpDatas(t,e,this._rootList),e.forEach(this.moveUp,this)},moveSelectionDown:function(t){t=t||this._selectionModel;var e=new ie;ht.findMoveDownDatas(t,e,this._rootList),e.forEach(this.moveDown,this)},moveSelectionToTop:function(t){t=t||this._selectionModel;var e=new ie;ht.findMoveToTopDatas(t,e,this._rootList),e.forEach(this.moveToTop,this)},moveSelectionToBottom:function(t){t=t||this._selectionModel;var e=new ie;ht.findMoveToBottomDatas(t,e,this._rootList),e.forEach(this.moveToBottom,this)},handleDataPropertyChange:function(t){var e,i=t.source;"parent"===t.property&&(e=i.getId(),i.getParent()?this._rootMap[e]&&(delete this._rootMap[e],this._rootList.remove(i)):this._rootMap[e]||(this._rootMap[e]=i,this._rootList.add(i))),this.onDataPropertyChanged(i,t),this._dataPropertyChangeDispatcher.fire(t)},onDataPropertyChanged:function(t,e){},addDataBoxChangeListener:function(t,e,i){this._dataBoxChangeDispatcher.add(t,e,i)},removeDataBoxChangeListener:function(t,e){this._dataBoxChangeDispatcher.remove(t,e)},addDataPropertyChangeListener:function(t,e,i){this._dataPropertyChangeDispatcher.add(t,e,i)},removeDataPropertyChangeListener:function(t,e){this._dataPropertyChangeDispatcher.remove(t,e)},addHierarchyChangeListener:function(t,e,i){this._hierarchyChangeDispatcher.add(t,e,i)},removeHierarchyChangeListener:function(t,e){this._hierarchyChangeDispatcher.remove(t,e)},getRandomData:function(t){if(t){for(var e=new x.List,i=0;i<this._dataList.size()-1;i++){var n=this._dataList.get(i);n instanceof t&&e.add(n)}if(0==e.size())return null}return t?e.get(parseInt(x.Util.random()*e.size())):this._dataList.get(parseInt(x.Util.random()*this._dataList.size()))}}),x.ElementBox=function(t){x.ElementBox.superClass.constructor.apply(this,arguments),this._styleMap={},this._alarmBox=new x.AlarmBox(this),this._layerBox=new x.LayerBox(this),this._alarmStatePropagator=new x.AlarmStatePropagator(this),this._alarmStatePropagator.setEnable(!0),this._indexChangeDispatcher=new x.EventDispatcher,this._undoManager=new x.UndoManager(this)},x.ElementBox.IS_INTERESTED_ADJUSTELEMENTINDEX_PROPERTY={fromAgent:1,toAgent:1,expanded:1,parent:1,host:1},Y.ext("twaver.ElementBox",x.DataBox,{IStyle:!0,__style:1,_name:"ElementBox",add:function(t,e){if(t){if(!t.IElement)throw"Only IElement can be added into ElementBox";x.ElementBox.superClass.add.apply(this,arguments),this.adjustElementIndex(t)}},onDataPropertyChanged:function(t,e){x.ElementBox.IS_INTERESTED_ADJUSTELEMENTINDEX_PROPERTY[e.property]&&this.adjustElementIndex(t),x.ElementBox.superClass.onDataPropertyChanged.apply(this,arguments)},addIndexChangeListener:function(t,e,i){this._indexChangeDispatcher.add(t,e,i)},removeIndexChangeListener:function(t,e){this._indexChangeDispatcher.remove(t,e)},sendToTop:function(e){var t;this.contains(e)&&(e!==this.getDatas().get(this.size()-1)&&(t=this.getDatas().indexOf(e),this.getDatas().removeAt(t),this.getDatas().add(e),this._indexChangeDispatcher.fire({element:e,oldIndex:t,newIndex:this.size()-1})),e instanceof x.Link&&(e.getFromAgent()&&!e.getFromAgent().isAdjustedToBottom()&&this.sendToTop(e.getFromAgent()),e.getToAgent()&&!e.getToAgent().isAdjustedToBottom()&&this.sendToTop(e.getToAgent())),e instanceof Re&&e.getFollowers()&&e.getFollowers().forEach(function(t){t.isRelatedTo(e)||e instanceof x.Follower&&t.isLoopedHostOn(e)||this.sendToTop(t)},this),e.ISubNetwork||e instanceof Me&&!e.isExpanded()||e.getChildren().forEach(function(t){t instanceof x.Link||this.sendToTop(t)},this))},sendToBottom:function(t,e){var i,n;t!==e&&this.contains(t)&&(e&&!this.contains(e)||(i=this.getDatas().remove(t),n=0,e&&(n=this.getDatas().indexOf(e)),this.getDatas().add(t,n),i!=n&&(this._indexChangeDispatcher.fire({element:t,oldIndex:i,newIndex:n}),!t.getParent()||t.getParent().ISubNetwork||t.getParent()instanceof x.Link||this.sendToBottom(t.getParent(),t))))},fireIndexChange:function(t,e,i){this._indexChangeDispatcher.fire({element:t,oldIndex:e,newIndex:i})},adjustElementIndex:function(t){this.contains(t)&&(t.isAdjustedToBottom()?(this.sendToBottom(t),t.getChildren().forEach(this.adjustElementIndex,this)):this.sendToTop(t))},forEachByLayer:function(n,t,o){var s=this.size(),a=this.getDatas();if(t)for(var e=0;e<s;e++){var i=a.get(e);if(this._layerBox.getLayerByElement(i)===t)if(o){if(!1===n.call(o,i))return}else if(!1===n(i))return}else this._layerBox.forEachByDepthFirst(function(t){for(var e=0;e<s;e++){var i=a.get(e);if(this._layerBox.getLayerByElement(i)===t)if(o){if(!1===n.call(o,i))return}else if(!1===n(i))return}},null,this)},forEachByLayerReverse:function(t,e,i){var n=new ie;this.forEachByLayer(function(t){n.add(t,0)},e),n.forEach(t,i)},getLayerBox:function(){return this._layerBox},getAlarmBox:function(){return this._alarmBox},getAlarmStatePropagator:function(){return this._alarmStatePropagator},startBatch:function(t,e){var i,n;for(n in x._isInitializing=!0,x._bundleLinks={},x._links={},t.call(e),x._links)x._links[n]._checkAgentNodeImpl();for(n in x._bundleLinks)i=x._bundleLinks[n],st.resetBundleLinks(i[0],i[1]);x._bundleLinks=null,x._links=null,x._isInitializing=!1},getUndoManager:function(){return this._undoManager}}),x.SelectionModel=function(t){x.SelectionModel.superClass.constructor.apply(this,arguments),this._selectionMode="multipleSelection",this._selectionList=new ie,this._selectionChangeDispatcher=new x.EventDispatcher,this._selectionMap={},this._setDataBox(t)},Y.ext("twaver.SelectionModel",x.PropertyChangeDispatcher,{getSelectionMode:function(){return this._selectionMode},setSelectionMode:function(t){var e;this._selectionMode!==t&&("noneSelection"!==t&&"singleSelection"!==t&&"multipleSelection"!==t||(this.clearSelection(),e=this._selectionMode,this._selectionMode=t,this.firePropertyChange("selectionMode",e,this._selectionMode)))},getDataBox:function(){return this._dataBox},_setDataBox:function(t){if(!t)throw"dataBox can not be null";var e;this._dataBox!==t&&(this._dataBox&&(this.clearSelection(),this._dataBox.removeDataBoxChangeListener(this.handleDataBoxChange,this)),e=this._dataBox,this._dataBox=t,this._dataBox.addDataBoxChangeListener(this.handleDataBoxChange,this,!0),this.firePropertyChange("dataBox",e,this._dataBox))},dispose:function(){this.clearSelection(),this._dataBox.removeDataBoxChangeListener(this.handleDataBoxChange,this)},handleDataBoxChange:function(t){var e;"remove"===t.kind?(e=t.data,this.contains(e)&&(this._selectionList.remove(e),delete this._selectionMap[e.getId()],this.fireSelectionChange("remove",new ie(e)))):"clear"===t.kind&&this.clearSelection()},getFilterFunction:function(){return this._filterFunction},setFilterFunction:function(t){var e;this._filterFunction!==t&&(this.clearSelection(),e=this._filterFunction,this._filterFunction=t,this.firePropertyChange("filterFunction",e,this._filterFunction))},fireSelectionChange:function(t,e,i){i&&(this._selectionList.forEach(function(t){i.contains(t)?i.remove(t):i.add(t)}),e=i.toList()),this._selectionChangeDispatcher.fire({kind:t,datas:new ie(e)})},addSelectionChangeListener:function(t,e,i){this._selectionChangeDispatcher.add(t,e,i)},removeSelectionChangeListener:function(t,e){this._selectionChangeDispatcher.remove(t,e)},_filterList:function(t,e){for(var i=new ie(t),n=0;n<i.size();n++){var o=i.get(n);(this._filterFunction&&!this._filterFunction(o)||e&&this.contains(o)||!e&&!this.contains(o)||!this._dataBox.contains(o))&&(i.removeAt(n),n--)}return i},appendSelection:function(t){if("noneSelection"!==this._selectionMode){var e=this._filterList(t,!0);if(!e.isEmpty()){t=null;"singleSelection"===this._selectionMode&&(t=new ie(this._selectionList),this._selectionList.clear(),this._selectionMap={},e=new ie(e.get(e.size()-1)));for(var i=0;i<e.size();i++){var n=e.get(i);this._selectionList.add(n),this._selectionMap[n.getId()]=n}this.fireSelectionChange("append",e,t)}}},removeSelection:function(t){var e=this._filterList(t);if(0!==e.size()){for(var i=0;i<e.size();i++){var n=e.get(i);this._selectionList.remove(n),delete this._selectionMap[n.getId()]}this.fireSelectionChange("remove",e)}},toSelection:function(t,e){return this._selectionList.toList(t,e)},getSelection:function(){return this._selectionList},setSelection:function(t){if("noneSelection"!==this._selectionMode&&(0!==this._selectionList.size()||null!=t)){var e=new ie(this._selectionList);this._selectionList.clear(),this._selectionMap={};var i=this._filterList(t,!0);"singleSelection"===this._selectionMode&&1<i.size()&&(i=new ie(i.get(i.size()-1)));for(var n=0;n<i.size();n++){var o=i.get(n);this._selectionList.add(o),this._selectionMap[o.getId()]=o}this.fireSelectionChange("set",null,e)}},clearSelection:function(){var t;0<this._selectionList.size()&&(t=this._selectionList.toList(),this._selectionList.clear(),this._selectionMap={},this.fireSelectionChange("clear",t))},selectAll:function(){if("noneSelection"!==this._selectionMode){var t=this._dataBox.toDatas(),e=0,i=null;if(this._filterFunction)for(e=0;e<t.size();e++)i=t.get(e),this._filterFunction(i)||(t.removeAt(e),e--);var n=new ie(this._selectionList);for(this._selectionList.clear(),this._selectionMap={},"singleSelection"===this._selectionMode&&1<t.size()&&(t=new ie(t.get(t.size()-1))),e=0;e<t.size();e++)i=t.get(e),this._selectionList.add(i),this._selectionMap[i.getId()]=i;this.fireSelectionChange("all",null,n)}},size:function(){return this._selectionList.size()},contains:function(t){return!!t&&null!=this._selectionMap[t.getId()]},getLastData:function(){return 0<this._selectionList.size()?this._selectionList.get(this._selectionList.size()-1):null},getFirstData:function(){return 0<this._selectionList.size()?this._selectionList.get(0):null},isSelectable:function(t){return!!t&&("noneSelection"!==this._selectionMode&&!(this._filterFunction&&!this._filterFunction(t)))}}),x.QuickFinder=function(t,e,i,n,o){if(this._map={},!t)throw"dataBox can not be null";if(!e)throw"propertyName can not be null";this._dataBox=t,this._propertyName=e,this._propertyType=i||"accessor","accessor"===this._propertyType&&(this._getter=Y.getter(e)),this._valueFunction=n||this.getValue,this._filterFunction=o||this.isInterested,this._dataBox.forEach(this._addData,this),this._dataBox.addDataBoxChangeListener(this.handleDataBoxChange,this,!0),this._dataBox.addDataPropertyChangeListener(this.handleDataPropertyChange,this,!0)},Y.ext("twaver.QuickFinder",Object,{_NULL_:"twaver-null-key",getValueFunction:function(){return this._valueFunction},getFilterFunction:function(){return this._filterFunction},handleDataBoxChange:function(t){"add"===t.kind?this._addData(t.data):"remove"===t.kind?this._removeData(t.data):"clear"===t.kind&&(this._map={})},handleDataPropertyChange:function(t){var e;this._filterFunction.call(this,t.source)&&("accessor"===this._propertyType&&this._propertyName===t.property||"style"===this._propertyType&&t.source.IStyle&&"S:"+this._propertyName===t.property||"client"===this._propertyType&&"C:"+this._propertyName===t.property)&&((e=this._getMap(t.oldValue))&&e.remove(t.source),this._addData(t.source))},_getMap:function(t){return t=null==t?this._NULL_:t,this._map[t]},find:function(t){t=this._getMap(t);return t?t.toList():new ie},findFirst:function(t){t=this._getMap(t);return!t||t.isEmpty()?null:t.get(0)},_addData:function(t){var e,i;this._filterFunction.call(this,t)&&(e=this._valueFunction.call(this,t),(i=this._getMap(e))||(i=new ie,e=null==e?this._NULL_:e,this._map[e]=i),i.add(t))},_removeData:function(t){var e,i;this._filterFunction.call(this,t)&&(e=this._valueFunction.call(this,t),(i=this._getMap(e))&&(i.remove(t),i.isEmpty()&&(e=null==e?this._NULL_:e,delete this._map[e])))},dispose:function(){this._dataBox.removeDataBoxChangeListener(this.handleDataBoxChange,this),this._dataBox.removeDataPropertyChangeListener(this.handleDataPropertyChange,this),delete this._dataBox},getDataBox:function(){return this._dataBox},getPropertyType:function(){return this._propertyType},getPropertyName:function(){return this._propertyName},isInterested:function(t){return!("style"===this._propertyType&&!t.IStyle)&&!("accessor"===this._propertyType&&this._valueFunction===this.getValue&&!t[this._getter])},getValue:function(t){return"accessor"===this._propertyType?t[this._getter]():"style"===this._propertyType&&t.getStyle?t.getStyle(this._propertyName):"client"===this._propertyType&&t.getClient?t.getClient(this._propertyName):null}}),x.PropertyPropagator=function(t,e,i){if(!t)throw"dataBox can not be null";if(!e)throw"propertyName can not be null";this._dataBox=t,this._propertyName=e,this._propertyType=i||"accessor","accessor"===this._propertyType&&(this._getter=Y.getter(e),this._setter=Y.setter(e)),this._enable=!1,this._isPropagating=!1},Y.ext("twaver.PropertyPropagator",Object,{getDataBox:function(){return this._dataBox},getPropertyType:function(){return this._propertyType},getPropertyName:function(){return this._propertyName},isEnable:function(){return this._enable},setEnable:function(t){this._enable!==t&&(this._enable=t,this._enable?(this._dataBox.addDataBoxChangeListener(this.handleDataBoxChange,this),this._dataBox.addDataPropertyChangeListener(this.handleDataPropertyChange,this),this._dataBox.forEach(function(t){this.propagate(t)},this)):(this._dataBox.removeDataBoxChangeListener(this.handleDataBoxChange,this),this._dataBox.removeDataPropertyChangeListener(this.handleDataPropertyChange,this)))},handleDataBoxChange:function(t){t.data&&this.propagate(t.data)},handleDataPropertyChange:function(t){var e;this.isInterestedProperty(t)?this.propagate(t.source):"parent"===t.property&&((e=t.oldValue)&&this.propagate(e),this.propagate(t.source))},isInterestedProperty:function(t){return"accessor"===this._propertyType&&this._propertyName===t.property||(!("style"!==this._propertyType||!t.IElement||"S:"+this._propertyName!==t.property)||"client"===this._propertyType&&"C:"+this._propertyName===t.property)},propagate:function(t){t&&!this._isPropagating&&(this._isPropagating=!0,this.propagateToTop(t),this._isPropagating=!1)},propagateToTop:function(t){for(this.propagateToParent(null,t);t&&t.getParent();)this.propagateToParent(t,t.getParent()),t=t.getParent()},propagateToParent:function(t,e){}}),x.AlarmStatePropagator=function(t){x.AlarmStatePropagator.superClass.constructor.call(this,t,"alarmState")},Y.ext("twaver.AlarmStatePropagator",x.PropertyPropagator,{handleDataPropertyChange:function(t){"enablePropagation"===t.property?this.propagate(t.source):x.AlarmStatePropagator.superClass.handleDataPropertyChange.call(this,t)},propagateToParent:function(t,e){var i=null;e.getChildren().forEach(function(t){t=t.getAlarmState().getHighestOverallAlarmSeverity();0<x.AlarmSeverity.compare(t,i)&&(i=t)}),e.getAlarmState().setPropagateSeverity(i)}}),x.AlarmSeverity=function(t,e,i,n,o){this.value=t,this.name=e,this.nickName=i,this.color=n,this.displayName=o},Y.ext("twaver.AlarmSeverity",Object,{toString:function(){return this.displayName||this.name}}),(we=x.AlarmSeverity).severities=new ie,we._vm={},we._nm={},we._cp=function(t,e){if(t&&e){var i=t.value-e.value;return 0<i?1:i<0?-1:0}return t&&!e?1:!t&&e?-1:0},we.forEach=function(t,e){we.severities.forEach(t,e)},we.getSortFunction=function(){return we._cp},we.setSortFunction=function(t){we._cp=t,we.severities.sort(t)},we.add=function(t,e,i,n,o){o=new we(t,e,i,n,o);return we._vm[t]=o,we._nm[e]=o,we.severities.add(o),we.severities.sort(we._cp),o},we.remove=function(t){var e=we._nm[t];return e&&(delete we._nm[t],delete we._vm[e.value],we.severities.remove(e)),e},we.CRITICAL=we.add(500,"Critical","C","#FF0000"),we.MAJOR=we.add(400,"Major","M","#FFA000"),we.MINOR=we.add(300,"Minor","m","#FFFF00"),we.WARNING=we.add(200,"Warning","W","#00FFFF"),we.INDETERMINATE=we.add(100,"Indeterminate","N","#C800FF"),we.CLEARED=we.add(0,"Cleared","R","#00FF00"),we.isClearedAlarmSeverity=function(t){return!!t&&0===t.value},we.getByName=function(t){return we._nm[t]},we.getByValue=function(t){return we._vm[t]},we.clear=function(){we.severities.clear(),we._vm={},we._nm={}},we.compare=function(t,e){return we._cp(t,e)},x.AlarmState=function(t){this._e=t,this._nm={},this._am={},this._ps=null,this._haa=null,this._hna=null,this._hoa=null,this._hta=null,this._hls=!1,this._aac=0,this._nac=0},Y.ext("twaver.AlarmState",Object,{_ep:!0,_f:function(){this._c1(),this._c2(),this._c3(),this._c4(),this._c5(),this._c6(),this._c7(),this._e.firePropertyChange("alarmState",null,this)},getHighestAcknowledgedAlarmSeverity:function(){return this._haa},getHighestNewAlarmSeverity:function(){return this._hna},getHighestOverallAlarmSeverity:function(){return this._hoa},getHighestNativeAlarmSeverity:function(){return this._hta},hasLessSevereNewAlarms:function(){return this._hls},_c1:function(){var t,e=null;for(t in this._am)t=x.AlarmSeverity.getByName(t),x.AlarmSeverity.isClearedAlarmSeverity(t)||0!==this.getAcknowledgedAlarmCount(t)&&(e=e&&0<x.AlarmSeverity.compare(e,t)?e:t);this._haa=e},_c2:function(){var t,e=null;for(t in this._nm)t=x.AlarmSeverity.getByName(t),x.AlarmSeverity.isClearedAlarmSeverity(t)||0!==this.getNewAlarmCount(t)&&(e=e&&0<x.AlarmSeverity.compare(e,t)?e:t);this._hna=e},_c3:function(){if(this._hna){for(var t in this._nm)if(t=x.AlarmSeverity.getByName(t),!x.AlarmSeverity.isClearedAlarmSeverity(t)&&0!==this.getNewAlarmCount(t)&&0<x.AlarmSeverity.compare(this._hna,t))return void(this._hls=!0);this._hls=!1}else this._hls=!1},_c4:function(){var t=this._haa,e=this._hna,i=this._ps;this._hoa=t,0<x.AlarmSeverity.compare(e,this._hoa)&&(this._hoa=e),0<x.AlarmSeverity.compare(i,this._hoa)&&(this._hoa=i)},_c5:function(){var t=this._haa,e=this._hna;this._hta=t,0<x.AlarmSeverity.compare(e,this._hta)&&(this._hta=e)},increaseAcknowledgedAlarm:function(t,e){var i;0!==(e=null==e?1:e)&&(null==(i=this._am[t.name])&&(i=0),this._am[t.name]=i+=e,this._f())},increaseNewAlarm:function(t,e){var i;0!==(e=null==e?1:e)&&(null==(i=this._nm[t.name])&&(i=0),this._nm[t.name]=i+=e,this._f())},decreaseAcknowledgedAlarm:function(t,e){if(0!==(e=null==e?1:e)){var i=this._am[t.name];if(null==i&&(i=0),(i-=e)<0)throw"Alarm count can not be negative";this._am[t.name]=i,this._f()}},decreaseNewAlarm:function(t,e){if(0!==(e=null==e?1:e)){var i=this._nm[t.name];if(null==i&&(i=0),(i-=e)<0)throw"Alarm count can not be negative";this._nm[t.name]=i,this._f()}},acknowledgeAlarm:function(t){this.decreaseNewAlarm(t,1),this.increaseAcknowledgedAlarm(t,1)},acknowledgeAllAlarms:function(t){if(t){var e=this.getNewAlarmCount(t);this.decreaseNewAlarm(t,e),this.increaseAcknowledgedAlarm(t,e)}else for(var i in this._nm)this.acknowledgeAllAlarms(x.AlarmSeverity.getByName(i))},_c6:function(){for(var t in this._aac=0,this._am)t=x.AlarmSeverity.getByName(t),this._aac+=this.getAcknowledgedAlarmCount(t)},getAcknowledgedAlarmCount:function(t){if(t){t=this._am[t.name];return null==t?0:t}return this._aac},getAlarmCount:function(t){return this.getAcknowledgedAlarmCount(t)+this.getNewAlarmCount(t)},_c7:function(){for(var t in this._nac=0,this._nm)t=x.AlarmSeverity.getByName(t),this._nac+=this.getNewAlarmCount(t)},getNewAlarmCount:function(t){if(t){t=this._nm[t.name];return null==t?0:t}return this._nac},setNewAlarmCount:function(t,e){this._nm[t.name]=e,this._f()},removeAllNewAlarms:function(t){t?delete this._nm[t]:this._nm={},this._f()},setAcknowledgedAlarmCount:function(t,e){this._am[t.name]=e,this._f()},removeAllAcknowledgedAlarms:function(t){t?delete this._am[t.name]:this._am={},this._f()},isEmpty:function(){return null==this._hoa},clear:function(){this._am={},this._nm={},this._f()},getPropagateSeverity:function(){return this._ps},setPropagateSeverity:function(t){var e;this._ep||(t=null),this._ps!==t&&(e=this._ps,this._ps=t,this._f(),this._e.firePropertyChange("propagateSeverity",e,t))},isEnablePropagation:function(){return this._ep},setEnablePropagation:function(t){var e=this._ep;this._ep=t,this._e.firePropertyChange("enablePropagation",e,t)&&(t||this.setPropagateSeverity(null))}}),x.AlarmBox=function(t){if(!t)throw"elementBox can not be null.";x.AlarmBox.superClass.constructor.call(this),this._elementBox=t,this._alarmElementMapping=new x.AlarmElementMapping(this,t),this._elementBox.addDataBoxChangeListener(this.handleElementBoxChange,this,!0),this.addDataBoxChangeListener(this.handleAlarmBoxChange,this,!0),this.addDataPropertyChangeListener(this.handleAlarmPropertyChange,this,!0)},Y.ext("twaver.AlarmBox",x.DataBox,{__accessor:["removeAlarmWhenElementIsRemoved"],_name:"AlarmBox",_removeAlarmWhenAlarmIsCleared:!1,_removeAlarmWhenElementIsRemoved:!0,getElementBox:function(){return this._elementBox},isRemoveAlarmWhenAlarmIsCleared:function(){return this._removeAlarmWhenAlarmIsCleared},setRemoveAlarmWhenAlarmIsCleared:function(t){var e=this._removeAlarmWhenAlarmIsCleared;this._removeAlarmWhenAlarmIsCleared=t,this.firePropertyChange("removeAlarmWhenAlarmIsCleared",e,t),t&&this.toDatas(function(t){return t.isCleared()}).forEach(this.remove,this)},getAlarmElementMapping:function(){return this._alarmElementMapping},setAlarmElementMapping:function(t){if(!t)throw"alarmElementMapping can not be null";var e;this._alarmElementMapping!==t&&(e=this._alarmElementMapping,this.getDatas().forEach(this._decreaseAlarmState,this),this._alarmElementMapping=t,this.getDatas().forEach(this._increaseAlarmState,this),this.firePropertyChange("alarmElementMapping",e,t))},handleElementBoxChange:function(t){"add"===t.kind?this.handleElementAdded(t.data):"remove"===t.kind?(this.handleElementRemoved(t.data),this._removeAlarmWhenElementIsRemoved&&this.removeAlarmsByElement(t.data)):"clear"===t.kind&&(t.datas.forEach(this.handleElementRemoved,this),this._removeAlarmWhenElementIsRemoved&&this.clear())},handleAlarmBoxChange:function(t){"add"===t.kind?this._increaseAlarmState(t.data):"remove"===t.kind?this._decreaseAlarmState(t.data):"clear"===t.kind&&t.datas.forEach(this._decreaseAlarmState,this)},handleAlarmPropertyChange:function(t){var e=t.source;e.isCleared()||("alarmSeverity"===t.property?this.handleAlarmSeverityChange(e,t):"acked"===t.property&&this.handleAckedChange(e,t)),"cleared"===t.property&&(e.isCleared()?(this._decreaseAlarmState(e,!0),this._removeAlarmWhenAlarmIsCleared&&this.remove(e)):this._increaseAlarmState(e,!0))},handleAckedChange:function(t,e){if(t.getAlarmSeverity()){var i=this.getCorrespondingElements(t);if(i)for(var n=0;n<i.size();n++){var o=i.get(n);e.oldValue?o.getAlarmState().decreaseAcknowledgedAlarm(t.getAlarmSeverity()):o.getAlarmState().decreaseNewAlarm(t.getAlarmSeverity()),e.newValue?o.getAlarmState().increaseAcknowledgedAlarm(t.getAlarmSeverity()):o.getAlarmState().increaseNewAlarm(t.getAlarmSeverity())}}},handleAlarmSeverityChange:function(t,e){var i=e.oldValue,n=e.newValue,o=this.getCorrespondingElements(t);if(o)for(var s=0;s<o.size();s++){var a=o.get(s);i&&(t.isAcked()?a.getAlarmState().decreaseAcknowledgedAlarm(i):a.getAlarmState().decreaseNewAlarm(i)),n&&(t.isAcked()?a.getAlarmState().increaseAcknowledgedAlarm(n):a.getAlarmState().increaseNewAlarm(n))}},getCorrespondingAlarms:function(t){return this._alarmElementMapping.getCorrespondingAlarms(t)},getCorrespondingElements:function(t){return this._alarmElementMapping.getCorrespondingElements(t)},handleElementAdded:function(t){var e=this.getCorrespondingAlarms(t);if(e)for(var i=0;i<e.size();i++){var n,o=e.get(i);o.isCleared()||(n=o.getAlarmSeverity())&&(o.isAcked()?t.getAlarmState().increaseAcknowledgedAlarm(n):t.getAlarmState().increaseNewAlarm(n))}},_increaseAlarmState:function(t,e){if(!t.isCleared()||e){var i=t.getAlarmSeverity();if(i){var n=this.getCorrespondingElements(t);if(n)for(var o=0;o<n.size();o++){var s=n.get(o);t.isAcked()?s.getAlarmState().increaseAcknowledgedAlarm(i):s.getAlarmState().increaseNewAlarm(i)}}}},_decreaseAlarmState:function(t,e){if(!t.isCleared()||e){var i=t.getAlarmSeverity();if(i){var n=this.getCorrespondingElements(t);if(n)for(var o=0;o<n.size();o++){var s=n.get(o);t.isAcked()?s.getAlarmState().decreaseAcknowledgedAlarm(i):s.getAlarmState().decreaseNewAlarm(i)}}}},handleElementRemoved:function(e){var t=this.getCorrespondingAlarms(e);t&&t.forEach(function(t){!t.isCleared()&&t.getAlarmSeverity()&&(t.isAcked()?e.getAlarmState().decreaseAcknowledgedAlarm(t.getAlarmSeverity()):e.getAlarmState().decreaseNewAlarm(t.getAlarmSeverity()))})},removeAlarmsByElement:function(t){t=this.getCorrespondingAlarms(t);t&&t.forEach(this.remove,this)},add:function(t,e){if(!t.IAlarm)throw"Only IAlarm can be added into AlarmBox";this._removeAlarmWhenAlarmIsCleared&&t.isCleared()||x.AlarmBox.superClass.add.apply(this,arguments)}}),x.AlarmElementMapping=function(t,e){if(!e)throw"ElementBox can not be null";if(!t)throw"AlarmBox can not be null";this._elementBox=e,this._alarmBox=t,this._alarmsFinder=new x.QuickFinder(t,"elementId")},Y.ext("twaver.AlarmElementMapping",Object,{getCorrespondingAlarms:function(t){return this._alarmsFinder.find(t.getId())},getCorrespondingElements:function(t){t=this._elementBox.getDataById(t.getElementId());return new ie(t)},dispose:function(){this._alarmsFinder.dispose(),delete this._elementBox,delete this._alarmBox,delete this._alarmsFinder}}),x.AlarmStateStatistics=function(t){x.AlarmStateStatistics.superClass.constructor.apply(this,arguments),this.sumNew=0,this.sumAcked=0,this.sumTotal=0,this.severtiyMap={},this.elementMap={},this.setElementBox(t)},Y.ext("twaver.AlarmStateStatistics",x.PropertyChangeDispatcher,{getElementBox:function(){return this._elementBox},setElementBox:function(t){if(!t)throw"ElementBox can not be null";var e;this._elementBox!==t&&((e=this._elementBox)&&(e.removeDataPropertyChangeListener(this.handleElementPropertyChange,this),e.removeDataBoxChangeListener(this.handleElementBoxChange,this),this.severtiyMap={},this.elementMap={}),this._elementBox=t,this.reset(),t.addDataPropertyChangeListener(this.handleElementPropertyChange,this),t.addDataBoxChangeListener(this.handleElementBoxChange,this),this.firePropertyChange("elementBox",e,t))},dispose:function(){this._elementBox.removeDataPropertyChangeListener(this.handleElementPropertyChange,this),this._elementBox.removeDataBoxChangeListener(this.handleElementBoxChange,this),delete this._elementBox},handleElementPropertyChange:function(t){"alarmState"===t.property&&(this.increase(t.source),this.fireAlarmStateChange())},handleElementBoxChange:function(t){"add"===t.kind?(this.increase(t.data),this.fireAlarmStateChange()):"remove"===t.kind?(this.decrease(t.data),this.fireAlarmStateChange()):"clear"===t.kind&&(this.severtiyMap={},this.elementMap={},this.fireAlarmStateChange())},fireAlarmStateChange:function(){this.sumAcked=0,this.sumNew=0,this.sumTotal=0,x.AlarmSeverity.forEach(function(t){t=this.getSumInfo(t);this.sumAcked+=t.ackedCount,this.sumNew+=t.newCount,this.sumTotal+=t.totalCount},this),this.firePropertyChange("alarmState",!1,!0)},getNewAlarmCount:function(t){return t?this.getSumInfo(t).newCount:this.sumNew},getAcknowledgedAlarmCount:function(t){return t?this.getSumInfo(t).ackedCount:this.sumAcked},getTotalAlarmCount:function(t){return t?this.getSumInfo(t).totalCount:this.sumTotal},getSumInfo:function(t){var e=this.severtiyMap[t.name];return e||(this.severtiyMap[t.name]=e={newCount:0,ackedCount:0,totalCount:0}),e},decrease:function(t){var i=this.elementMap[t.getId()];i&&(delete this.elementMap[t.getId()],x.AlarmSeverity.forEach(function(t){var e=i[t.name],t=this.getSumInfo(t);t.newCount=t.newCount-e.newCount,t.ackedCount=t.ackedCount-e.ackedCount,t.totalCount=t.totalCount-e.totalCount},this))},increase:function(i){var n;this.decrease(i),this._filterFunction&&!this._filterFunction(i)||(n={},this.elementMap[i.getId()]=n,x.AlarmSeverity.forEach(function(t){var e={};e.newCount=i.getAlarmState().getNewAlarmCount(t),e.ackedCount=i.getAlarmState().getAcknowledgedAlarmCount(t),e.totalCount=i.getAlarmState().getAlarmCount(t),n[t.name]=e;t=this.getSumInfo(t);t.newCount=t.newCount+e.newCount,t.ackedCount=t.ackedCount+e.ackedCount,t.totalCount=t.totalCount+e.totalCount},this))},reset:function(){this.severtiyMap={},this.elementMap={},this._elementBox.forEach(this.increase,this),this.fireAlarmStateChange()},setFilterFunction:function(t){var e=this._filterFunction;this._filterFunction=t,this.reset(),this.firePropertyChange("filterFunction",e,t)},getFilterFunction:function(){return _filterFunction}}),x.LayerBox=function(t){x.LayerBox.superClass.constructor.call(this),this._elementBox=t,this._defaultLayer=new x.Layer(ye.LAYER_DEFAULT_ID,ye.LAYER_DEFAULT_NAME),this.add(this._defaultLayer)},Y.ext("twaver.LayerBox",x.DataBox,{_name:"LayerBox",getElementBox:function(){return this._elementBox},getDefaultLayer:function(){return this._defaultLayer},add:function(t,e){if(!t.ILayer)throw"Only ILayer can be added into LayerBox";x.LayerBox.superClass.add.apply(this,arguments)},removeById:function(t){if(t===this._defaultLayer.getId())throw"Cannot remove default layer";x.LayerBox.superClass.removeById.call(this,t)},getLayerByElement:function(t){if(!t)return null;if(t._layerId===ye.LAYER_DEFAULT_ID)return this._defaultLayer;t=this.getDataById(t.getLayerId());return t||this._defaultLayer},clear:function(){this.toDatas().forEach(function(t){t!=this._defaultLayer&&this.removeById(t.getId())},this)}}),x.BundleLinks=function(t,e){this._links=t,this._siblings=e;for(var i=xe._m["link.bundle.expanded"],n=0;n<t.size();n++){var o=t.get(n).getStyle("link.bundle.expanded");if(null!=o){i=o;break}}for(null==i&&(i=!0),ye.LINK_BUNDLE_AGENT_FUNCTION&&(null==(e=ye.LINK_BUNDLE_AGENT_FUNCTION(t))?e=t.get(0):e!=t.get(0)&&(t.remove(e),t.add(e,0))),n=0;n<t.size();n++)t.get(n).setStyle("link.bundle.expanded",i)},Y.ext("twaver.BundleLinks",Object,{getLinks:function(){return this._links},getSiblings:function(){return this._siblings},forEachSiblingLink:function(e,i){this._siblings.forEach(function(t){t.getLinks().forEach(e,i)})}});var Ee=function(t){return t.reduce(function(t,e){return 2*t+e},0)},Ce=function(t){for(var e=[],i=7;0<=i;i--)e.push(!!(t&1<<i));return e},Te=function(e,n){for(var t,i,o=0,s=[],a=1<<e,r=1+a,h=e+1,l=[];;)if(i=t,(t=function(t){for(var e=0,i=0;i<t;i++)n.charCodeAt(o>>3)&1<<(7&o)&&(e|=1<<i),o++;return e}(h))!==a){if(t===r)break;if(t<l.length)i!==a&&l.push(l[i].concat(l[t][0]));else{if(t!==l.length)throw new Error("Invalid LZW code.");l.push(l[i].concat(l[i][0]))}s.push.apply(s,l[t]),l.length===1<<h&&h<12&&h++}else!function(){l=[],h=e+1;for(var t=0;t<a;t++)l[t]=[t];l[a]=[],l[r]=null}();return s};Y.ext(function(t){this.data=t,this.len=this.data.length,this.pos=0},Object,{readByte:function(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return 255&this.data.charCodeAt(this.pos++)},readBytes:function(t){for(var e=[],i=0;i<t;i++)e.push(this.readByte());return e},read:function(t){for(var e="",i=0;i<t;i++)e+=String.fromCharCode(this.readByte());return e},readUnsigned:function(){var t=this.readBytes(2);return(t[1]<<8)+t[0]}});function Ie(t){var o,e=t,s=null,i=null,n=null,a=0,r=null,h=null,l=null;this.frames=[],this.size={};var c=this,u=E.createElement("canvas");function d(){}this.loaded=!1,this.doParse=function(){Se(e,g)};var _=function(){h&&c.frames.push({data:h.getImageData(0,0,o.width,o.height),delay:i})},g={hdr:(t=function(e){return function(t){e(t)}})(function(t){o=t,c.size.width=o.width,c.size.height=o.height}),gce:t(function(t){_(),r=n,h=n=i=s=null,s=t.transparencyGiven?t.transparencyIndex:null,i=t.delayTime,n=t.disposalMethod}),com:t(d),app:{NETSCAPE:t(d)},img:t(function(t){h=h||u.getContext("2d");var e=c.frames.length,i=t.lctFlag?t.lct:o.gct;0<e&&(3===r?h.putImageData(c.frames[a].data,0,0):a=e-1,2===r&&(l||h.clearRect(l.leftPos,l.topPos,l.width,l.height)));var n=h.getImageData(t.leftPos,t.topPos,t.width,t.height);t.pixels.forEach(function(t,e){t!==s&&(n.data[4*e+0]=i[t][0],n.data[4*e+1]=i[t][1],n.data[4*e+2]=i[t][2],n.data[4*e+3]=255)}),h.putImageData(n,t.leftPos,t.topPos),l=t}),eof:function(t){_(),c.loaded=!0}}}function Le(t,e,i){var n=E.createElement("canvas");return be(n,e.width,e.height),n.getContext("2d").clearRect(0,0,e.width,e.height),n.getContext("2d").putImageData(t[i].data,0,0),n}var Se=function(n,o){o=o||{};function s(t){for(var e=[],i=0;i<t;i++)e.push(n.readBytes(3));return e}function a(){for(var t,e="";t=n.readByte(),e+=n.read(t),0!==t;);return e}function e(t){function e(t){n.readByte(),t.identifier=n.read(8),t.authCode=n.read(3),"NETSCAPE"===t.identifier?function(t){n.readByte();t.unknown=n.readByte(),t.iterations=n.readUnsigned(),t.terminator=n.readByte(),o.app&&o.app.NETSCAPE&&o.app.NETSCAPE(t)}(t):((t=t).appData=a(),o.app&&o.app[t.identifier]&&o.app[t.identifier](t))}var i;switch(t.label=n.readByte(),t.label){case 249:t.extType="gce",function(t){n.readByte();var e=Ce(n.readByte());t.reserved=e.splice(0,3),t.disposalMethod=Ee(e.splice(0,3)),t.userInput=e.shift(),t.transparencyGiven=e.shift(),t.delayTime=n.readUnsigned(),t.transparencyIndex=n.readByte(),t.terminator=n.readByte(),o.gce&&o.gce(t)}(t);break;case 254:t.extType="com",(i=t).comment=a(),o.com&&o.com(i);break;case 1:t.extType="pte",function(t){n.readByte();t.ptHeader=n.readBytes(12),t.ptData=a(),o.pte&&o.pte(t)}(t);break;case 255:t.extType="app",e(t);break;default:t.extType="unknown",(i=t).data=a(),o.unknown&&o.unknown(i)}}function i(t){function e(i,n){for(var o=new Array(i.length),t=i.length/n,e=[0,4,2,1],s=[8,8,4,2],a=0,r=0;r<4;r++)for(var h=e[r];h<t;h+=s[r])!function(t,e){e=i.slice(e*n,(e+1)*n);o.splice.apply(o,[t*n,n].concat(e))}(h,a),a++;return o}t.leftPos=n.readUnsigned(),t.topPos=n.readUnsigned(),t.width=n.readUnsigned(),t.height=n.readUnsigned();var i=Ce(n.readByte());t.lctFlag=i.shift(),t.interlaced=i.shift(),t.sorted=i.shift(),t.reserved=i.splice(0,2),t.lctSize=Ee(i.splice(0,3)),t.lctFlag&&(t.lct=s(1<<t.lctSize+1)),t.lzwMinCodeSize=n.readByte(),i=a(),t.pixels=Te(t.lzwMinCodeSize,i),t.interlaced&&(t.pixels=e(t.pixels,t.width)),o.img&&o.img(t)}var r=function(){var t={};switch(t.sentinel=n.readByte(),String.fromCharCode(t.sentinel)){case"!":t.type="ext",e(t);break;case",":t.type="img",i(t);break;case";":t.type="eof",o.eof&&o.eof(t);break;default:throw new Error("Unknown block: 0x"+t.sentinel.toString(16))}"eof"!==t.type&&setTimeout(r,0)};!function(){var t={};if(t.sig=n.read(3),t.ver=n.read(3),"GIF"!==t.sig)throw new Error("Not a GIF file.");t.width=n.readUnsigned(),t.height=n.readUnsigned();var e=Ce(n.readByte());t.gctFlag=e.shift(),t.colorRes=Ee(e.splice(0,3)),t.sorted=e.shift(),t.gctSize=Ee(e.splice(0,3)),t.bgColor=n.readByte(),t.pixelAspectRatio=n.readByte(),t.gctFlag&&(t.gct=s(1<<t.gctSize+1)),o.hdr&&o.hdr(t)}(),setTimeout(r,0)},be=function(t,e,i){t.width=e,t.height=i,t.style.width=e+"px",t.style.height=i+"px"};x.Data=function(t){if(x.Data.superClass.constructor.apply(this,arguments),this._childList=new ie,this._childMap={},this._clientMap={},null==t)this._id=Y.id();else if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)this._id=t;else{for(var e in t)if("clients"===e)for(var i in t.clients)this._clientMap[i]=t.clients[i];else if("styles"===e)for(var n in t.styles)this._styleMap[n]=t.styles[n];else null!=t[e]&&("id"===e?this._id=t[e]:this[Y.setter(e)]&&this[Y.setter(e)](t[e]));null==this._id&&(this._id=Y.id())}},Y.ext("twaver.Data",x.PropertyChangeDispatcher,{IData:!0,IClient:!0,__client:1,__new:1,_parent:null,__accessor:["name","name2","icon","toolTip"],_icon:ye.ICON_DATA,_dragBoundsFunc:null,getId:function(){return this._id},getChildren:function(){return this._childList},getChildrenSize:function(){return this._childList.size()},toChildren:function(t,e){return this._childList.toList(t,e)},addChild:function(t,e){return void 0===e&&(e=this._childList.size()),!(!t||t===this)&&(!this._childMap[t.getId()]&&(!this.isDescendantOf(t)&&(t.getParent()&&t.getParent().removeChild(t),(e<0||e>this._childList.size())&&(e=this._childList.size()),this._childList.add(t,e),(this._childMap[t._id]=t).setParent(this),this.firePropertyChange("children",null,t),this.onChildAdded(t,e),!0)))},onChildAdded:function(t,e){},removeChild:function(t){if(!t)return!1;if(!this._childMap[t._id])return!1;var e=this._childList.remove(t);return delete this._childMap[t._id],this.firePropertyChange("children",t,null),t.setParent(null),this.onChildRemoved(t,e),!0},onChildRemoved:function(t,e){},getChildAt:function(t){return this._childList.get(t)},clearChildren:function(){if(0===this._childList.size())return!1;for(var t=this._childList.toArray(),e=t.length,i=0;i<e;i++)this.removeChild(t[i]);return this.onChildrenCleared(t),!0},onChildrenCleared:function(t){},getParent:function(){return this._parent},setParent:function(t){var e;this._isUpdatingParent||this._parent===t||this===t||t&&t.isDescendantOf(this)||(e=this._parent,this._parent=t,this._isUpdatingParent=!0,e&&e.removeChild(this),t&&t.addChild(this),delete this._isUpdatingParent,this.firePropertyChange("parent",e,t),this.onParentChanged(e,t))},onParentChanged:function(t,e){},hasChildren:function(){return 0<this._childList.size()},isRelatedTo:function(t){return!!t&&(this.isDescendantOf(t)||t.isDescendantOf(this))},isParentOf:function(t){return!!t&&null!=this._childMap[t._id]},isDescendantOf:function(t){if(!t)return!1;if(!t.hasChildren())return!1;for(var e=this._parent;e;){if(t===e)return!0;e=e.getParent()}return!1},getDragBoundsFunc:function(){return this._dragBoundsFunc},setDragBoundsFunc:function(t){this._dragBoundsFunc=t},toString:function(){return this.getName()?this.getName():this._id}}),x.Alarm=function(t,e,i,n,o){x.Alarm.superClass.constructor.call(this,t),this._elementId=e,this._alarmSeverity=i,this._acked=n||!1,this._cleared=o||!1},Y.ext("twaver.Alarm",x.Data,{IAlarm:!0,getElementId:function(){return this._elementId},__accessor:["acked","cleared","alarmSeverity"]}),x.Layer=function(t){x.Layer.superClass.constructor.call(this,t)},Y.ext("twaver.Layer",x.Data,{ILayer:!0,__accessor:["visible","movable","editable","rotatable"],_visible:!0,_movable:!0,_editable:!0,_rotatable:!0,_name:"Default"}),x.Element=function(t){this._styleMap=this._styleMap||{},this._alarmState=new x.AlarmState(this),x.Element.superClass.constructor.call(this,t)},Y.ext("twaver.Element",x.Data,{IElement:!0,IStyle:!0,__accessor:["layerId"],__bool:["visible","movable"],__style:1,_layerId:ye.LAYER_DEFAULT_ID,_visible:!0,_movable:!0,getAlarmState:function(){return this._alarmState},isAdjustedToBottom:function(){return!1},getElementUIClass:function(){return null},getCanvasUIClass:function(){return null},getVectorUIClass:function(){return null},s:function(e,t){if(void 0!==t)return this.setStyle(e,t),this;if("string"==typeof e)return this.getStyle(e);var i=this;Object.keys(e).forEach(function(t){i.setStyle(t,e[t])})},c:function(t,e){return void 0===e?this.getClient(t):(this.setClient(t,e),this)}}),x.Dummy=function(t){x.Dummy.superClass.constructor.call(this,t)},Y.ext("twaver.Dummy",x.Element,{IDummy:!0});var Re=function(t){this._location={x:0,y:0},Re.superClass.constructor.call(this,t)};(x.Node=Re).IS_INTERESTED_NODE_PROPERTY={location:1,width:1,height:1,expanded:1},Y.ext("twaver.Node",x.Element,{_icon:ye.ICON_NODE,_image:ye.IMAGE_NODE,_imageUrl:null,_angle:0,getLoopedLinks:function(){return this._loopedLinks},getLinks:function(){return this._links},getAgentLinks:function(){return this._agentLinks},getFollowers:function(){return this._followers},_addFollower:function(t){this._followers||(this._followers=new ie),this._followers.add(t)},_removeFollower:function(t){this._followers.remove(t),this._followers.isEmpty()&&delete this._followers},getFromLinks:function(){return this._fromLinks},getToLinks:function(){return this._toLinks},_addFromLink:function(t){this._links||(this._links=new ie(!1)),this._fromLinks||(this._fromLinks=new ie(!1)),this._links.add(t),this._toLinks&&this._toLinks.contains(t)&&(this._loopedLinks||(this._loopedLinks=new ie(!1)),this._loopedLinks.add(t)),this._fromLinks.add(t)},_addToLink:function(t){this._links||(this._links=new ie(!1)),this._toLinks||(this._toLinks=new ie(!1)),this._links.add(t),this._fromLinks&&this._fromLinks.contains(t)&&(this._loopedLinks||(this._loopedLinks=new ie(!1)),this._loopedLinks.add(t)),this._toLinks.add(t)},_removeFromLink:function(t){this._links&&this._links.remove(t),this._fromLinks&&this._fromLinks.remove(t),this._loopedLinks&&this._loopedLinks.remove(t)},_removeToLink:function(t){this._links&&this._links.remove(t),this._toLinks&&this._toLinks.remove(t),this._loopedLinks&&this._loopedLinks.remove(t)},hasAgentLinks:function(){return null!=this._agentLinks&&!this._agentLinks.isEmpty()},getFromAgentLinks:function(){return this._fromAgentLinks},getToAgentLinks:function(){return this._toAgentLinks},_addFromAgentLink:function(t){this._fromAgentLinks||(this._fromAgentLinks=new ie(!1)),this._agentLinks||(this._agentLinks=new ie(!1)),this._fromAgentLinks.add(t),this._agentLinks.add(t)},_addToAgentLink:function(t){this._toAgentLinks||(this._toAgentLinks=new ie(!1)),this._agentLinks||(this._agentLinks=new ie(!1)),this._toAgentLinks.add(t),this._agentLinks.add(t)},_removeFromAgentLink:function(t){this._fromAgentLinks&&this._fromAgentLinks.remove(t),this._agentLinks&&this._agentLinks.remove(t)},_removeToAgentLink:function(t){this._toAgentLinks&&this._toAgentLinks.remove(t),this._agentLinks&&this._agentLinks.remove(t)},getImage:function(){return this._image},setImage:function(t){var e=this._image,i=this.getWidth(),n=this.getHeight();this._image=t,this.firePropertyChange("image",e,t),this.firePropertyChange("width",i,this.getWidth()),this.firePropertyChange("height",n,this.getHeight())},getImageUrl:function(){return this._imageUrl},setImageUrl:function(t){var e;this._imageUrl!=t&&(e=this._imageUrl,this._imageUrl=t,ve.images[t]||x.imageUtil.registerImageByUrl(t,"svg"===x.imageUtil.getImageType(t),t),this.setImage(t),this.firePropertyChange("imageUrl",e,t))},getX:function(){return this._location.x},getY:function(){return this._location.y},setX:function(t){this.setLocation(t,this._location.y)},setY:function(t){this.setLocation(this._location.x,t)},getLocation:function(){return this._location},setLocation:function(t,e){var i,n=2===arguments.length?{x:t,y:e}:t;Y.num(n.x)&&Y.num(n.y)&&(n.x===this._location.x&&n.y===this._location.y||(this._dragBoundsFunc&&(n=this._dragBoundsFunc(n)),i=this._location,this._location=n,this.firePropertyChange("location",i,n)))},getCenterLocation:function(){return ye.CENTER_LOCATION?this._location:{x:this.getX()+this.getWidth()/2,y:this.getY()+this.getHeight()/2}},setCenterLocation:function(t,e){var i=2===arguments.length?{x:t,y:e}:Y.clone(t);Y.num(i.x)&&Y.num(i.y)&&(ye.CENTER_LOCATION||(i.x-=this.getWidth()/2,i.y-=this.getHeight()/2),this.setLocation(i))},translate:function(t,e){this.setLocation(this.getX()+t,this.getY()+e)},getWidth:function(){if(Y.num(this._width)&&0<=this._width)return this._width;if("object"!=typeof this._image){var t=Y.getImageAsset(this._image);if(t){var e=t.getWidth();return Y.num(e)&&0<=e?e:(t=t._image,Pt(this,t,t,"w"))}}else if(this._image)return this._image.w;return ye.NODE_WIDTH},setWidth:function(t){var e=this._width;this._width=t,this.firePropertyChange("width",e,t)},getHeight:function(){if(Y.num(this._height)&&0<=this._height)return this._height;if("object"!=typeof this._image){var t=Y.getImageAsset(this._image);if(t){var e=t.getHeight();return Y.num(e)&&0<=e?e:(t=t._image,Pt(this,t,t,"h"))}}else if(this._image)return this._image.h;return ye.NODE_HEIGHT},setHeight:function(t){var e=this._height;this._height=t,this.firePropertyChange("height",e,t)},setSize:function(){2===arguments.length?(this.setWidth(arguments[0]),this.setHeight(arguments[1])):(this.setWidth(arguments[0].width),this.setHeight(arguments[0].height))},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getRect:function(){var t=this.getOriginalRect();if(0===this._angle)return t;for(var e=b.createMatrix(this._angle*Math.PI/180,t.x+t.width/2,t.y+t.height/2),i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],n=0,o=i.length;n<o;n++)i[n]=e.transform(i[n]);return b.getRect(i)},getOriginalRect:function(){var t=this.getWidth(),e=this.getHeight();return ye.CENTER_LOCATION?{x:this._location.x-t/2,y:this._location.y-e/2,width:t,height:e}:{x:this.getX(),y:this.getY(),width:t,height:e}},getAngle:function(){return this._angle},setAngle:function(t){var e=this._angle;this._angle=t%360,this.firePropertyChange("angle",e,this._angle)},onParentChanged:function(t,e){Re.superClass.onParentChanged.call(this,t,e),this._checkLinkAgent()},_checkLinkAgent:function(){if(x._isInitializing){if(this._links)for(var t=this._links.size(),e=0;e<t;e++)this._links.get(e)._checkAgentNode()}else x.ElementBox.prototype.startBatch(function(){if(this._links)for(var t=this._links.size(),e=0;e<t;e++)this._links.get(e)._checkAgentNode()},this)},onPropertyChanged:function(t){if(Re.superClass.onPropertyChanged.call(this,t),this._followers)for(var e=this._followers.toList(),i=e.size(),n=0;n<i;n++)e.get(n).handleHostPropertyChange(t);this.getParent()instanceof Me&&Re.IS_INTERESTED_NODE_PROPERTY[t.property]&&this.getParent().updateLocationFromChildren()},getElementUIClass:function(){return x.network.NodeUI},getCanvasUIClass:function(){return x.canvas.NodeUI},getVectorUIClass:function(){return x.vector.NodeUI}});var Pe=function(t){Pe.superClass.constructor.call(this,t)};x.HTMLNode=Pe,Y.ext("twaver.HTMLNode",x.Node,{getElementUIClass:function(){return x.network.HTMLNodeUI},getCanvasUIClass:function(){return x.canvas.HTMLNodeUI},getVectorUIClass:function(){return x.vector.HTMLNodeUI}}),x.Link=function(t,e,i){x.Link.superClass.constructor.call(this,t instanceof Re?null:t),t instanceof Re&&(i=e,e=t),e&&this.setFromNode(e),i&&this.setToNode(i)},x.Link.IS_INTERESTED_BUNDLE_STYLE={"link.bundle.enable":1,"link.bundle.id":1,"link.bundle.independent":1},Y.ext("twaver.Link",x.Element,{_fromNode:null,_toNode:null,_fromAgent:null,_toAgent:null,_icon:ye.ICON_LINK,getFromNode:function(){return this._fromNode},getToNode:function(){return this._toNode},getFromAgent:function(){return this._fromAgent},getToAgent:function(){return this._toAgent},setFromNode:function(t){var e;this._fromNode!==t&&(e=this._fromNode,this._fromNode=t,e&&e._removeFromLink(this),this._fromNode&&this._fromNode._addFromLink(this),this._checkAgentNode(),this.firePropertyChange("fromNode",e,t))},setToNode:function(t){var e;this._toNode!==t&&(e=this._toNode,this._toNode=t,e&&e._removeToLink(this),this._toNode&&this._toNode._addToLink(this),this._checkAgentNode(),this.firePropertyChange("toNode",e,t))},isLooped:function(){return this._fromNode===this._toNode&&null!=this._fromNode&&null!=this._toNode},_checkAgentNode:function(){x._isInitializing?x._links[this._id]||(x._links[this._id]=this):this._checkAgentNodeImpl()},_checkAgentNodeImpl:function(){var t,e,i=st.figureFromAgent(this);this._fromAgent!=i&&(t=this._fromAgent,this._fromAgent&&this._fromAgent._removeFromAgentLink(this),this._fromAgent=i,this._fromAgent&&this._fromAgent._addFromAgentLink(this),this.firePropertyChange("fromAgent",t,this._fromAgent),x._isInitializing?(t&&this._toAgent&&(e=t._id+":"+this._toAgent._id,x._bundleLinks[e]||(x._bundleLinks[e]=[t,this._toAgent])),this._fromAgent&&this._toAgent&&(e=this._fromAgent._id+":"+this._toAgent._id,x._bundleLinks[e]||(x._bundleLinks[e]=[this._fromAgent,this._toAgent]))):(st.resetBundleLinks(t,this._toAgent),st.resetBundleLinks(this._fromAgent,this._toAgent)));i=st.figureToAgent(this);this._toAgent!=i&&(t=this._toAgent,this._toAgent&&this._toAgent._removeToAgentLink(this),this._toAgent=i,this._toAgent&&this._toAgent._addToAgentLink(this),this.firePropertyChange("toAgent",t,this._toAgent),x._isInitializing?(t&&this._fromAgent&&(e=t._id+":"+this._fromAgent._id,x._bundleLinks[e]||(x._bundleLinks[e]=[t,this._fromAgent])),this._toAgent&&this._fromAgent&&(e=this._toAgent._id+":"+this._fromAgent._id,x._bundleLinks[e]||(x._bundleLinks[e]=[this._toAgent,this._fromAgent]))):(st.resetBundleLinks(t,this._fromAgent),st.resetBundleLinks(this._toAgent,this._fromAgent)))},_setBundleLinks:function(t){this._bundleLinks=t,this.firePropertyChange("bundleLinks",!0,!1)},getBundleLinks:function(){return this._bundleLinks},getBundleCount:function(){return this._bundleLinks?this._bundleLinks.getLinks().size():1},getBundleIndex:function(){return this._bundleLinks?this._bundleLinks.getLinks().indexOf(this):0},reverseBundleExpanded:function(){if(this._bundleLinks&&0<this._bundleLinks.getLinks().size()){for(var t=this._bundleLinks.getLinks(),e=!this.getStyle("link.bundle.expanded"),i=0;i<t.size();i++)t.get(i).setStyle("link.bundle.expanded",e);var n=this._bundleLinks.getSiblings();for(i=0;i<n.size();i++){var o=n.get(i);if(o!=this._bundleLinks)for(var t=o.getLinks(),s=0;s<t.size();s++)t.get(s).firePropertyChange("bundleLinks",null,o)}return!0}return!1},isBundleAgent:function(){return null!=this._bundleLinks&&1<this._bundleLinks.getLinks().size()&&this===this._bundleLinks.getLinks().get(0)&&!this.getStyle("link.bundle.expanded")},onStyleChanged:function(t,e,i){x.Link.superClass.onStyleChanged.call(this,t,e,i),x.Link.IS_INTERESTED_BUNDLE_STYLE[t]&&st.resetBundleLinks(this._toAgent,this._fromAgent)},getElementUIClass:function(){return x.network.LinkUI},getCanvasUIClass:function(){return x.canvas.LinkUI},getVectorUIClass:function(){return x.vector.LinkUI},isAdjustedToBottom:function(){return ye.IS_LINK_ADJUSTED_TO_BOTTOM}}),x.HTMLLink=function(t,e,i){x.HTMLLink.superClass.constructor.call(this,t,e,i)},x.Util.ext("twaver.HTMLLink",x.Link,{getElementUIClass:function(){return x.network.HTMLLinkUI},getCanvasUIClass:function(){return x.canvas.HTMLLinkUI},getVectorUIClass:function(){return x.vector.HTMLLinkUI}}),x.Follower=function(t){this._isUpdatingFollower=!1,this._isUpdatingLocation=!1,x.Follower.superClass.constructor.call(this,t)},x.Follower.IS_INTERESTED_HOST_GRID_PROPERTY={location:1,width:1,height:1,"S:grid.row.count":1,"S:grid.column.count":1,"S:grid.row.percents":1,"S:grid.column.percents":1,"S:grid.border":1,"S:grid.border.left":1,"S:grid.border.right":1,"S:grid.border.top":1,"S:grid.border.bottom":1,"S:grid.padding":1,"S:grid.padding.left":1,"S:grid.padding.right":1,"S:grid.padding.top":1,"S:grid.padding.bottom":1},x.Follower.IS_INTERESTED_FOLLOWER_STYLE={"follower.row.index":1,"follower.column.index":1,"follower.row.span":1,"follower.column.span":1,"follower.padding":1,"follower.padding.left":1,"follower.padding.right":1,"follower.padding.top":1,"follower.padding.bottom":1},Y.ext("twaver.Follower",Re,{_host:null,getHost:function(){return this._host},setHost:function(t){var e;this!==t&&this._host!==t&&((e=this._host)&&e._removeFollower(this),this._host=t,this._host&&this._host._addFollower(this),this.firePropertyChange("host",e,t),this.onHostChanged(e,t))},onStyleChanged:function(t,e,i){x.Follower.superClass.onStyleChanged.call(this,t,e,i),x.Follower.IS_INTERESTED_FOLLOWER_STYLE[t]&&this.updateFollower(null)},setLocation:function(){this._isUpdatingLocation||(this._isUpdatingLocation=!0,x.Follower.superClass.setLocation.apply(this,arguments),this._isUpdatingLocation=!1)},onHostChanged:function(t,e){this.updateFollower(null)},handleHostPropertyChange:function(t){this.updateFollower(t)},updateFollower:function(t){this._isUpdatingFollower||Y.isDeserializing||(this._isUpdatingFollower=!0,this.updateFollowerImpl(t),this._isUpdatingFollower=!1)},updateFollowerImpl:function(t){var e,i,n,o,s,a,r=this.getHost();r instanceof x.Grid?t&&!x.Follower.IS_INTERESTED_HOST_GRID_PROPERTY[t.property]||(e=this.getStyle("follower.row.index"),i=this.getStyle("follower.column.index"),(a=r.getCellRect(e,i))&&(n=this.getStyle("follower.row.span"),o=this.getStyle("follower.column.span"),1==n&&1==o||(o=r.getCellRect(e+n-1,i+o-1))&&(a=b.unionRect(a,o)),b.addPadding(a,this,"follower.padding"),this.getStyle("follower.fill.cell")?(this.setLocation(a.x,a.y),this.setWidth(a.width),this.setHeight(a.height)):(s=this.getStyle("follower.cell.position"),a=h.get(s,a,this.getRect()),this.setLocation(a.x,a.y)))):null!=t&&"location"===t.property&&(s=t.oldValue,a=t.newValue,t=this.getLocation(),this.setLocation(t.x+(a.x-s.x),t.y+(a.y-s.y)))},isHostOn:function(t){if(!t)return!1;for(var e={},i=this._host;i&&i!=this&&!e[i.getId()];){if(i===t)return!0;i=(e[i.getId()]=i)instanceof x.Follower?i.getHost():null}return!1},isLoopedHostOn:function(t){return this.isHostOn(t)&&t.isHostOn(this)}});var Me=function(t){this._isUpdatingLocationFromChildren=!1,this._isAdjusting=!1,this._expanded=!1,Me.superClass.constructor.call(this,t)};x.Group=Me,Y.ext("twaver.Group",x.Follower,{_image:ye.IMAGE_GROUP,_icon:ye.ICON_GROUP,isAdjustedToBottom:function(){return this.isExpanded()&&st.hasAgentLinks(this)},onChildAdded:function(t,e){Me.superClass.onChildAdded.apply(this,arguments),this.updateLocationFromChildren()},onChildRemoved:function(t,e){Me.superClass.onChildRemoved.apply(this,arguments),this.updateLocationFromChildren()},updateLocationFromChildren:function(){if(!this._isAdjusting&&!Y.isDeserializing){for(var t,e,i=0,n=this.getChildrenSize();i<n;i++)(e=this.getChildAt(i))instanceof Re&&(t=b.unionRect(t,this.getChildRect(e)));t&&(this._isUpdatingLocationFromChildren=!0,"lefttop"===ye.GROUP_EXPAND_ALIGN?this.setLocation(t.x-this.getWidth()/2,t.y-this.getHeight()/2):this.setLocation(t.x+t.width/2-this.getWidth()/2,t.y+t.height/2-this.getHeight()/2),this._isUpdatingLocationFromChildren=!1)}},getChildRect:function(e){var i;return i=e instanceof Re?e instanceof Me?(e.isExpanded()&&e.getChildren().forEach(function(t){i=b.unionRect(i,e.getChildRect(t))}),i||e.getRect()):e.getRect():i},setLocation:function(){var t,e,i;this._isAdjusting||(i=2===arguments.length?{x:arguments[0],y:arguments[1]}:arguments[0],Y.isDeserializing||this._isUpdatingLocationFromChildren||(this._isAdjusting=!0,t=i.x-this.getX(),e=i.y-this.getY(),st.moveElements(this.getChildren(),t,e),this._isAdjusting=!1),Me.superClass.setLocation.call(this,i))},reverseExpanded:function(){this.setExpanded(!this.isExpanded())},isExpanded:function(){return this._expanded},setExpanded:function(t){var e;this._expanded!==t&&(e=this._expanded,this._expanded=t,this.firePropertyChange("expanded",e,this._expanded),this._checkLinkAgent())},_checkLinkAgent:function(){Me.superClass._checkLinkAgent.call(this);for(var t=this.getChildrenSize(),e=0;e<t;e++){var i=this.getChildAt(e);i instanceof Re&&i._checkLinkAgent()}},getElementUIClass:function(){return x.network.GroupUI},getCanvasUIClass:function(){return x.canvas.GroupUI},getVectorUIClass:function(){return x.vector.GroupUI}}),x.SubNetwork=function(t){x.SubNetwork.superClass.constructor.call(this,t)},Y.ext("twaver.SubNetwork",x.Follower,{ISubNetwork:!0,_image:ye.IMAGE_SUBNETWORK,_icon:ye.ICON_SUBNETWORK,_checkLinkAgent:function(){x.SubNetwork.superClass._checkLinkAgent.call(this);for(var t=this.getChildrenSize(),e=0;e<t;e++){var i=this.getChildAt(e);i instanceof Re&&i._checkLinkAgent()}}}),x.Grid=function(t){x.Grid.superClass.constructor.call(this,t)},Y.ext("twaver.Grid",x.Follower,{_icon:ye.ICON_GRID,_image:null,getCellObject:function(t,e){1===arguments.length&&(e=t.y,t=t.x);for(var i=this.getStyle("grid.row.count"),n=this.getStyle("grid.column.count"),o=0;o<i;o++)for(var s=0;s<n;s++){var a=this.getCellRect(o,s);if(b.containsPoint(a,t,e))return{rowIndex:o,columnIndex:s,rect:a}}return null},getCellRect:function(t,e){var i=this.getStyle("grid.row.count"),n=this.getStyle("grid.column.count");if(i<=0||n<=0)return null;if(t<0||i<=t)return null;if(e<0||n<=e)return null;var o=this.getRect();b.addPadding(o,this,"grid.border");var s=0,a=this.getStyle("grid.row.percents"),r=this.getStyle("grid.column.percents");if(a&&a.length===i){for(var h=0,s=0;s<t;s++)h+=o.height*a[s];o.y+=h,o.height=o.height*a[t]}else o.height=o.height/i,o.y+=o.height*t;if(r&&r.length===n){var l=0;for(s=0;s<e;s++)l+=o.width*r[s];o.x+=l,o.width=o.width*r[e]}else o.width=o.width/n,o.x+=o.width*e;return b.addPadding(o,this,"grid.padding"),o},getElementUIClass:function(){return x.network.GridUI},getCanvasUIClass:function(){return x.canvas.GridUI},getVectorUIClass:function(){return x.vector.GridUI}}),x.ShapeNode=function(t){this._isUpdatingShapeNode=!1,this._points=new ie,x.ShapeNode.superClass.constructor.call(this,t)},Y.ext("twaver.ShapeNode",x.Follower,{_icon:ye.ICON_SHAPENODE,__accessor:["segments"],getElementUIClass:function(){return x.network.ShapeNodeUI},getCanvasUIClass:function(){return x.canvas.ShapeNodeUI},getVectorUIClass:function(){return x.vector.ShapeNodeUI},getPoints:function(){return this._points},setPoints:function(t){t=t||new ie;var e=new ie(this._points);this._points=t,this.firePointsChange(e,this._points)},getSegments:function(){return this._segments},setSegments:function(t){t=t||new ie;var e=new ie(this._segments);this._segments=t,this._reCalculateLineLength(),this.firePropertyChange("segments",e,this._segments)},addPoint:function(t,e){var i=new ie(this._points);this._points.add(t,e),this.firePointsChange(i,this._points)},setPoint:function(t,e){var i=new ie(this._points);this._points.set(t,e),this.firePointsChange(i,this._points)},removePoint:function(t){var e=new ie(this._points);this._points.remove(t),this.firePointsChange(e,this._points)},removeAt:function(t){var e=new ie(this._points);this._points.removeAt(t),this.firePointsChange(e,this._points)},setWidth:function(t){if(t<1&&(t=1),!this._isUpdatingShapeNode&&!Y.isDeserializing){this._isUpdatingShapeNode=!0;for(var e=new ie(this._points),i=0;i<this._points.size();i++){var n=this._points.get(i);n.x=(n.x-this.getX())*t/this.getWidth()+this.getX()}this.firePointsChange(e,this._points),this._isUpdatingShapeNode=!1}x.ShapeNode.superClass.setWidth.apply(this,arguments)},setHeight:function(t){if(t<1&&(t=1),!this._isUpdatingShapeNode&&!Y.isDeserializing){this._isUpdatingShapeNode=!0;for(var e=new ie(this._points),i=0;i<this._points.size();i++){var n=this._points.get(i);n.y=(n.y-this.getY())*t/this.getHeight()+this.getY()}this.firePointsChange(e,this._points),this._isUpdatingShapeNode=!1}x.ShapeNode.superClass.setHeight.apply(this,arguments)},setLocation:function(){if(!this._isUpdatingShapeNode&&!Y.isDeserializing){var t=2===arguments.length?{x:arguments[0],y:arguments[1]}:arguments[0];if(!Y.num(t.x)||!Y.num(t.y))return;var e=t.x-this.getX(),i=t.y-this.getY();if(0==e&&0==i)return;this._isUpdatingShapeNode=!0;for(var t=new ie(this._points),n=0;n<this._points.size();n++){var o=this._points.get(n);o.x+=e,o.y+=i}this.firePointsChange(t,this._points),this._isUpdatingShapeNode=!1}x.ShapeNode.superClass.setLocation.apply(this,arguments)},firePointsChange:function(t,e){var i;this._isUpdatingShapeNode||Y.isDeserializing||((i=b.getRect(e))?(this._isUpdatingShapeNode=!0,ye.CENTER_LOCATION?this.setLocation(i.x+i.width/2,i.y+i.height/2):this.setLocation(i.x,i.y),this.setWidth(i.width),this.setHeight(i.height)):(this._isUpdatingShapeNode=!0,this.setWidth(0),this.setHeight(0)),this._isUpdatingShapeNode=!1),this._reCalculateLineLength(),this.firePropertyChange("points",t,e)},_reCalculateLineLength:function(){null!=this._points&&0<this._points.size()?this._lineLength=b.calculateLineLength(this._points,this._segments):this._lineLength=0},getLineLength:function(){return this._lineLength}}),x.Bus=function(t){this._styleMap={},this._styleMap["vector.fill"]=!1,this._styleMap["shapenode.closed"]=!1,x.Bus.superClass.constructor.call(this,t)},Y.ext("twaver.Bus",x.ShapeNode,{_icon:ye.ICON_BUS,firePointsChange:function(t,e){var i=e.size();if(!Y.isDeserializing&&2<=i)for(var n=e.get(0),o=1;o<i;o++){var s=e.get(o);Math.abs(s.x-n.x)>Math.abs(s.y-n.y)?s.y=n.y:s.x=n.x,n=s}x.Bus.superClass.firePointsChange.apply(this,arguments)}}),x.ShapeLink=function(t,e,i){this._points=new ie,this._styleMap={},this._styleMap["link.bundle.enable"]=!1,x.ShapeLink.superClass.constructor.call(this,t,e,i)},Y.ext("twaver.ShapeLink",x.Link,{_icon:ye.ICON_SHAPELINK,getElementUIClass:function(){return x.network.ShapeLinkUI},getCanvasUIClass:function(){return x.canvas.ShapeLinkUI},getVectorUIClass:function(){return x.vector.ShapeLinkUI},getPoints:function(){return this._points},setPoints:function(t){t=t||new ie;var e=new ie(this._points);this._points=t,this.firePointsChange(e,this._points)},addPoint:function(t,e){var i=new ie(this._points);this._points.add(t,e),this.firePointsChange(i,this._points)},setPoint:function(t,e){var i=new ie(this._points);this._points.set(t,e),this.firePointsChange(i,this._points)},removePoint:function(t){var e=new ie(this._points);this._points.remove(t),this.firePointsChange(e,this._points)},removeAt:function(t){var e=new ie(this._points);this._points.removeAt(t),this.firePointsChange(e,this._points)},firePointsChange:function(t,e){this.firePropertyChange("points",t,e)}}),x.ShapeSubNetwork=function(t){x.ShapeSubNetwork.superClass.constructor.call(this,t)},Y.ext("twaver.ShapeSubNetwork",x.ShapeNode,{ISubNetwork:!0,_icon:ye.ICON_SHAPESUBNETWORK,_checkLinkAgent:function(){x.ShapeSubNetwork.superClass._checkLinkAgent.call(this);for(var t=this.getChildrenSize(),e=0;e<t;e++){var i=this.getChildAt(e);i instanceof Re&&i._checkLinkAgent()}}}),x.LinkSubNetwork=function(){x.LinkSubNetwork.superClass.constructor.apply(this,arguments)},Y.ext("twaver.LinkSubNetwork",x.Link,{ISubNetwork:!0,_icon:ye.ICON_LINKSUBNETWORK}),x.ShapeLinkSubNetwork=function(){x.ShapeLinkSubNetwork.superClass.constructor.apply(this,arguments)},Y.ext("twaver.ShapeLinkSubNetwork",x.ShapeLink,{ISubNetwork:!0,_icon:ye.ICON_LINKSUBNETWORK}),x.RotatableNode=function(t){x.RotatableNode.superClass.constructor.call(this,t)},Y.ext("twaver.RotatableNode",x.Follower,{getWidth:function(){return 0==this._angle?this._getOrignalWidth():this._getRotateRect().width},setWidth:function(t){},getHeight:function(){return 0==this._angle?this._getOrignalHeight():this._getRotateRect().height},setHeight:function(t){},getElementUIClass:function(){return x.network.RotatableNodeUI},getCanvasUIClass:function(){return x.canvas.RotatableNodeUI},getVectorUIClass:function(){return x.vector.RotatableNodeUI},_getRotateRect:function(){for(var t=this._getOrignalWidth(),e=this._getOrignalHeight(),i=b.createMatrix(this._angle*Math.PI/180,t/2,e/2),n=[{x:0,y:0},{x:t,y:0},{x:t,y:e},{x:0,y:e}],o=0,s=n.length;o<s;o++)n[o]=i.transform(n[o]);return b.getRect(n)},_getOrignalWidth:function(){return x.RotatableNode.superClass.getWidth.call(this)},_getOrignalHeight:function(){return x.RotatableNode.superClass.getHeight.call(this)}}),x.controls.ControlBase=function(){x.controls.ControlBase.superClass.constructor.apply(this,arguments),this._pools=new ie},Y.ext("twaver.controls.ControlBase",x.PropertyChangeDispatcher,{_autoAdjustBounds:!1,addPool:function(t){this._pools.contains(t)||this._pools.add(t)},removePool:function(t){this._pools.remove(t)},adjustBounds:function(t){var e=this._view.style;e.position="absolute",e.left=t.x+"px",e.top=t.y+"px",e.width=t.width+"px",e.height=t.height+"px",!0===this._autoAdjustBounds&&(e.left="0px",e.top="0px",e.right="0px",e.bottom="0px"),this.invalidate&&this.invalidate()},setAutoAdjustBounds:function(t){!0===t?m.addEventListener("resize","_handleResize",window,this):m.removeEventListener("resize",window,this),this._autoAdjustBounds=t},isAutoAdjustBounds:function(){return this._autoAdjustBounds},_handleResize:function(t){this.adjustBounds({x:0,y:0,width:E.documentElement.clientWidth,height:E.documentElement.clientHeight})},getView:function(){return this._view},invalidate:function(t){this._invalidate||(this._invalidate=!0,Y.callLater(this.validate,this,null,t))},validate:function(){this._invalidate&&(this._invalidate=!1,0===this._view.offsetWidth&&0===this._view.offsetHeight&&null!==this._reinvalidateCount?(void 0===this._reinvalidateCount&&(this._reinvalidateCount=100),0<this._reinvalidateCount?this._reinvalidateCount--:this._reinvalidateCount=null,this.invalidate()):this.validateImpl())},validateImpl:function(){}}),x.controls.ViewBase=function(){x.controls.ViewBase.superClass.constructor.apply(this,arguments),this._interactionDispatcher=new x.EventDispatcher,this._viewDispatcher=new x.EventDispatcher},Y.ext("twaver.controls.ViewBase",x.controls.ControlBase,{__bool:["focusOnClick"],_focusOnClick:ye.FOCUS_ON_CLICK,getSelectionModel:function(){return this._selectionModel||this._box.getSelectionModel()},isShareSelectionModel:function(){return null==this._selectionModel},setShareSelectionModel:function(t){var e=null==this._selectionModel;e!==t&&(t?(this._box.getSelectionModel().addSelectionChangeListener(this.handleSelectionChange,this),this._selectionModel.removeSelectionChangeListener(this.handleSelectionChange,this),this._selectionModel.dispose(),this._selectionModel=null):(this._box.getSelectionModel().removeSelectionChangeListener(this.handleSelectionChange,this),this._selectionModel=new x.SelectionModel(this._box),this._selectionModel.addSelectionChangeListener(this.handleSelectionChange,this)),this.onShareSelectionModelChanged(),this.firePropertyChange("shareSelectionModel",e,t))},onShareSelectionModelChanged:function(){},removeSelection:function(){if(0===this.getSelectionModel().size())return null;var t=this.getSelectionModel().toSelection();return this._box._undoManager._enabled&&this._box._undoManager.startBatch(),t.forEach(function(t){this._box.remove(t)},this),this._box._undoManager._enabled&&this._box._undoManager.endBatch(),t},selectAll:function(){var e=new ie;return this._box.forEach(function(t){this.isVisible(t)&&e.add(t)},this),this.getSelectionModel().setSelection(e),e},isSelected:function(t){return this.getSelectionModel().contains(t)},isSelectable:function(t){return this.getSelectionModel().isSelectable(t)},getLabel:function(t){return t.getName()},getToolTip:function(t){return t.getToolTip()},getIcon:function(t){return t.getIcon()},getSelectColor:function(t){return ye.SELECT_COLOR},addViewListener:function(t,e,i){this._viewDispatcher.add(t,e,i)},removeViewListener:function(t,e){this._viewDispatcher.remove(t,e)},fireViewEvent:function(t){this._viewDispatcher.fire(t)},addInteractionListener:function(t,e,i){this._interactionDispatcher.add(t,e,i)},removeInteractionListener:function(t,e){this._interactionDispatcher.remove(t,e)},fireInteractionEvent:function(t){this._interactionDispatcher.fire(t)},invalidate:function(t){this._invalidate||(this._invalidate=!0,this.fireViewEvent({kind:"invalidate"}),Y.callLater(this.validate,this,null,t))},validate:function(){this._invalidate&&(this._invalidate=!1,o||0!==this._view.offsetWidth||0!==this._view.offsetHeight||null===this._reinvalidateCount?(this._isValidating=!0,this.fireViewEvent({kind:"validateStart"}),this.validateImpl(),this.fireViewEvent({kind:"validateEnd"}),delete this._isValidating):(void 0===this._reinvalidateCount&&(this._reinvalidateCount=100),0<this._reinvalidateCount?this._reinvalidateCount--:this._reinvalidateCount=null,this.invalidate()))}}),x.controls.View=function(){x.controls.View.superClass.constructor.apply(this,arguments)},Y.ext("twaver.controls.View",x.controls.ViewBase,{_zoom:1,_maxZoom:ye.ZOOM_MAX,_minZoom:ye.ZOOM_MIN,getRootDiv:function(){return this._rootDiv},isValidEvent:function(t){return m.isValidEvent(this._view,t)},getAlarmFillColor:function(t){if(t.IElement){t=t.getAlarmState().getHighestNewAlarmSeverity();if(t)return t.color}return null},getInnerColor:function(t){if(t.IElement){var e=t.getAlarmState().getHighestNativeAlarmSeverity();return e?e.color:t.getStyle("inner.color")}return null},getOuterColor:function(t){if(t.IElement){var e=t.getAlarmState().getPropagateSeverity();return e?e.color:t.getStyle("outer.color")}return null},zoomOverview:function(t){var e=Math.min(this._view.clientWidth/this._viewRect.width,this._view.clientHeight/this._viewRect.height);this.setZoom(e,t)},getLogicalPoint:function(t){return m.getLogicalPoint(this._view,t,this.getZoom(),this._rootDiv)},centerByLogicalPoint:function(t,e,i){i&&x.animate.AnimateManager.endAnimate();var n=this._view.scrollWidth-this._view.clientWidth,o=this._view.scrollHeight-this._view.clientHeight,t=(t-this._view.clientWidth/this._zoom/2)*this._zoom,e=(e-this._view.clientHeight/this._zoom/2)*this._zoom;n<(t=t<0?0:t)&&(t=n),o<(e=e<0?0:e)&&(e=o),i?x.animate.AnimateManager.start(new x.animate.AnimateScrollPosition(this._view,t,e)):(this._view.scrollLeft=t,this._view.scrollTop=e)},panByOffset:function(t,e){t*=this.getZoom(),e*=this.getZoom();var i=this._view.scrollLeft+t,n=this._view.scrollTop+e,t=this._view.scrollWidth-this._view.clientWidth,e=this._view.scrollHeight-this._view.clientHeight;e<(n=n<0?0:n)&&(n=e);t={x:((i=t<(i=i<0?0:i)?t:i)-this._view.scrollLeft)/this.getZoom(),y:(n-this._view.scrollTop)/this.getZoom()};return this._view.scrollLeft=i,this._view.scrollTop=n,t},getMaxZoom:function(){return this._maxZoom},setMaxZoom:function(t){var e;t<0||(e=this._maxZoom,this._maxZoom=t,this.firePropertyChange("maxZoom",e,t),this.getZoom()>t&&this.setZoom(t))},getMinZoom:function(){return this._minZoom},setMinZoom:function(t){var e;t<0||(e=this._minZoom,this._minZoom=t,this.firePropertyChange("minZoom",e,t),this.getZoom()<t&&this.setZoom(t,!1))},getZoom:function(){return this._zoom},onZoomChanged:function(t,e){},zoomIn:function(t){this.setZoom(this._zoom*ye.ZOOM_INCREMENT,t)},zoomOut:function(t){this.setZoom(this._zoom/ye.ZOOM_INCREMENT,t)},zoomReset:function(t){this.setZoom(1,t)},checkZoom:function(t){return t=(t=t<this._minZoom?this._minZoom:t)>this._maxZoom?this._maxZoom:t},setZoom:function(t,e){var i,n;!Y.num(t)||t<=0||(t=this.checkZoom(t))!==this._zoom&&((e=null==e?ye.ZOOM_ANIMATE:e)?x.animate.AnimateManager.start(new x.animate.AnimateZoom(this,t)):(i=(this._view.scrollLeft+this._view.clientWidth/2)/this._zoom,n=(this._view.scrollTop+this._view.clientHeight/2)/this._zoom,e=this._zoom,this._zoom=t,m.setZoom(this._rootDiv,t),this.firePropertyChange("zoom",e,t),this.onZoomChanged(e,t),this.centerByLogicalPoint(i,n,!1)))},setTouchZoom:function(t){this.setZoom(t,!1)}}),(se=function(t,e,i,n){var o=new a;o.src=n,x.Util.registerImage(t,o,e,i)})("subnetwork_image",64,46,"data:image/png;base64,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"),se("bus_icon",16,16,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAINJREFUeNqkU0EOgCAMo2Y/1P8Y/6NvnBADwTnGzHYiGetKW8DMKVJLChbVAwCNCrrzp5/Zg/4MaH0JMBOEh08o6OtxtgvXvkFuV/vFBeGEm0WZo8GgF+QlIkI2OrZq5WLAFjuy4DvVWXHl2VodyElMjkxAJNFm4EjmFGAqLKLf+RZgAKkFNRwzv7gHAAAAAElFTkSuQmCC"),se("data_icon",16,16,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAMZJREFUeNqkU8ENwjAM9KEwWwaAKVA3iMQDtRtUTAEDdLZWMkkhIUljU4n7RInP9p3dgoiYBAzDgHAyfykA1rtzbr2bmpDDk5uBvu+ROO98pvs4FqRL10nCogokBS3UBaXCZg9JQ7JQY5qmZoK1trCQCuQJnoS9CsQZHKsNcOyWvS1ehdGqz8xyZ0BXEHG+PTdvj+uJkFsASsusdN5sQSKHGWgWfDxY1GcQfEIYIn4p+HuN+SqXRtL8+ZAOinwm5V+P8ZcAAwC0T1T5kpEqewAAAABJRU5ErkJggg=="),se("databox_icon",16,16,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwMjI+N/BiIBUD0jMp8FpDm4cQ2DvYEiw8EL9/FqBqkBqUc3BGT7/0kbz/6HsXHhS/eewtWBXA7CYAMOX75PlCEgA9ANYYQaADbJVleRAShJ0Csw7+T5G2MaQCpgQReAuQAWqPhokAuYGCgEowZQwwBQuiYn/mGAEZaeYTkSlA6IBeCUCDMA2RBSsjZAgAEAOyp6/CYHWkwAAAAASUVORK5CYII="),se("grid_icon",16,16,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFdJREFUeNpi/P//PwMlgImBQsACIhgZGUl2BtDljCguAHkFhIMb1xBkU9ULjCATQV4A2UAsWFsfAvcCzEn/YQBoEEE2VD1Y76gXhpcXyM0LjJRmZ4AAAwCoyOJjz29PsAAAAABJRU5ErkJggg=="),se("group_icon",16,16,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAOFJREFUeNqUUwsOwjAILa67i2fwEMbEnUej55mJO4Rn8DBtglAh6YfOSdJkBfregwEgottiHiAlQuZjh68TQRJzI5L07nSbC//zOrUAmkxAJXBP2VgxRjpDK818z06gZIwrfSACF0iVVZrLiab7ownOl7PTV0QESsRgWqoHt80oD0fpy/BVhuZfsOpkC8LYxAkBw4YedOdDhuRny1UyZEPE334NvbZ6kBYeJGFPKFgp4HsUAqtI9u1AYipJgfQ+GjtQlPvPMkGlBHrLdFjeBeHruE+hYAxSo6C3jb4zyh8BBgBVL19PZ27iaAAAAABJRU5ErkJggg=="),se("group_image",32,29,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAdCAYAAADLnm6HAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABHNJREFUeNqsV1ts21QY/uy4zc1ZnZY2bdbSLMlKxUWkaBJMgJY9gARIax/2NokVofLARWjiBYRY2QMdCGlI440H1ok3btsQ0wAxNdvKpnYdyyYK7UZHVK1L2rRZLo3j2InDOaZD60psp+WXrDjO93/nO7/PfwkDAwu0Nh8jH30wZwc6/f43X9jVJ5gBn/zueJozgaNkUXLtMwLyLt4XDG4Vtj+/B8lMQRf7QLsb079PCpzJnaVnEsmIEeiZgD/Mu5yYT4uYiWd1sW1NTlCsWQGmzC00gOd5lFQVkqLoYiuViobVBNzf3BRaCfUaUyuV2AomXI1sNrmkRUeUZBRlBXJJRVFRdQUoZVXDclvbvUeImn6j3VmAqpjg5ra0xcL2nDwdwW1JQeP2HJLLki7frVQOo+OXwNnttv5fp65vKPSvvLhHmBgf77fV10XqWBaLZPGEgYC0KIFiOYfdBoY8OH72D8QS6ZoX3x1+CFarFZSnxS1gk9OBeUJ+00BAimAolnM6nQDDEDVAHVOpWQBD/Ow2GyhPoyDHWKjYkr+GVrv+GWBmE6BYIsChRYCz0Kt2AWR92GxWUJ7TFy7GWltb9l368ZteM77lcukE53A4tC91VAC7jggwVIANd3h+OHM+Qlj2ktvQv9U0EIAkSZibm7vbNUpcIxxPQsfQV2BhwDHrE2C320F5qPnaPCMkdVel9EdDQ8iLeex/5+27H4dYljnGnRo5B1EUMT1fwI2lUs0CHs9JOD9xGeNjY9i7u9dXkKTovZgvv/j8H+y2njX+3FxiHmKhgHiGhCir1CwgKxawsLgEynP06xO0aO2sxV+rhAopm9migrRUuwCJVDMS8nXXEE2ALMtIF2UskVJaqxWIgIqqrl8ATUGFkNDaLKu174RGjzYWykO9A17P+6pa2WEqhVnmDOfmnUgmk+gN2vBsZ33NAng1DxspIpTH1+H1Pdrz2OCHn34GpaQfFYe1Dm+9+nKY62jzpIcG3xU20gukXAZtzU0Rkoo+mo6/TMZxI6E/Dzz9sFdLXc7jad6pSIW+jQho2OSKjl2djOyiAwmdB8jrLMj6Ka3emQd+Gh2jeUvTp7/aTGBgwyv+cJNm5HLx2plQSmX9AkYuiuXqOUuorKoj1RZ/7fU34PcHMLj/PSwv5/4LMsgy7EtKuTz887kLyMoq7CERi/miroD5TB4Xr/wGrsPT8omqqlV3PjAwgIYGAd9/+xVmrledG46QjhiZjs0iSYtSehk3M6KugAUigGK5rqA/rAc89MEBOJy81qq7u4LVJyYL27eYSkV50hkXxCLmDCKQIhiK5do3e3VL59TUNdrZ0N3dddTgLMQ89zX5XKQtP+m14kGB1QVv4VVMrIwCRn9M6PkAGctN1fjnwk9ddjc2hcxgb6eWov/rWE7tVGS0ZyWjfEYRoxlkVoBAIhE2gYst5vKDpVJ51QR96PBhxONxfHzw4Oo+wFl2mBFAJ1W6+IgR0OGwD2/zda4Z32/99ScpTiU80fPIvT/1/y3AAMOmtJl1Hv9IAAAAAElFTkSuQmCC"),se("link_icon",16,16,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHVJREFUeNqkkwEOgCAIRaEr6nlqdR49I4XTzcqUn39jE5xP1C+LCPkjCl0Kq2NC5fYgRXlMSCw0K6Xozhqaol3ckj+QVwGFNIsI5HPCCunSLZDhGUcQ0033IOb3riE1CLJty/bTVubUBqDyc+Pm01oY8NQpwAAbUwhLBQIWcAAAAABJRU5ErkJggg=="),se("linksubnetwork_icon",16,16,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAU5JREFUeNqUUi1Tw0AQ3cukEY0AwdlDM8XRD41ARAAi/RHoCmQ7/QNofkTQFQh8W9kOOtgiQIBImTnuXbs3udAvduZms5t9b/fdrUiHGW2z0cOdLsdJ71GU46yfUrgL/PWx8HLxsUTOI3EE98mp9ZdXie0K8HgydYXtVtN6znHsTQAwdy2DOcY/TMFytkqogqskLIf6qQhYL7q/PI8cOIoiiuO69bvIRf3o5M/YANVqIZ03GjSbz2m5/KGiKDxgp90irbUINzEz2BSQEMKSwJiEwfgONmlFR4AAhg2yV0talWNfAbfJN4s7KHcCCcBPgy7WhobdM7q9uXbd3TPyhvEOwL4/30kpRVJKwrYySZ7nWABlzpsthM49R5lzYUhAruERr/P7CdZNPJJVakUiuOgAw9jSXOyUX8f4ZkCHGzQvAGIw4v9M4E0CMEh/BRgAwM37IYxGnbkAAAAASUVORK5CYII="),se("node_icon",16,16,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAGBJREFUeNpiZGBg+M9AJvj//z8jC5RBsmZGRkYwzQITCGlaS7TmNXXBcDYTA4Vg1IDBYAAjJB2Rl5DgKRGWqshyATm2o3uBgcwMBbacBZdmZJfh8CJIASMLodxGCAAEGACTAB0gDBYjygAAAABJRU5ErkJggg=="),se("node_image",30,32,"data:image/png;base64,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"),se("shapelink_icon",16,16,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAIJJREFUeNqkUwsOgCAIxeYN5Ty1Og+ekUarzRwQ5tsYDpTPExIzgwY86uWgtSTwIAF6KTvxg/sMliwwCy27mEVr2Xu7+TjaWm4JqxvKpW/iWowQprX2i8RXhS0xXv+WL0xiKIAVxKssa/0hEMuPiB4epNFxnh7lZG1jdCPdABGcAgwAc06H0rgwLSIAAAAASUVORK5CYII="),se("shapenode_icon",16,16,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAI9JREFUeNq0UtsNgDAILI0jdZN2Ho3O027SnRA+MNb0QTWS8EPuLncAIKL5UvY5CEdC7h7pjrEtEABgqwucRCBFk7aAfo9uZJtwmXhQCLDyLJlrkSxaMuGgu8QZ8hVhYD8LVgZx9fMO1H9QKXbm+EJvBYwsuSYyFaEmUvyBUkQWCYUDfg5NV8/49xW6dQowAIJydCoPajIHAAAAAElFTkSuQmCC"),se("shapesubnetwork_icon",16,16,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAATBJREFUeNpiDG5cw4ALbO/L+I/M9yyawYjMX1MXzMCCT/PXD69RxLgFREFiKIbADSjzlAfTjq6eYFtBmk+dPgNXaGZqAqZhYjA+igtAmmG2ImuG8UFyIFfAvIPTC+ia0Q2BeYehLpiRCeZfkO37d2/HqRmX4Yxc/CJwZ9+6fYeBEPjw4QOYNjczZfj//z8j3AuMjIjAvXnrNoomdTVVFDkonxEjEIEmgg1C1oAuhw5YQKEZGhHzH9kVbcuPoiiqirSGy5UUF8FtBwFwIK5esYQRaIMfyE/Y/A0yEGbopk2b/FACEeQ0mO1Ati+UvQndFciuAVkG5W5GMQDqV1+QAci2oxuAFC5+4MCBGQIzAEKBBbFimBxILc7MhOQiPzTxTcixwYhsOxLwRWJvxicHEGAAkPKxzyGuYWgAAAAASUVORK5CYII="),se("subnetwork_icon",16,16,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAOJJREFUeNqkUjsOwjAMzavSBQYY4FDM7SGYOUARHICZQ5SBiUPBAAMLIJk8aFASkoDgSVFlu/68Z6NatCqF3Woqrj2ZreHabVMpnUs+H/eerz8c0+cV0amuTK6XG69bDEWsa5hM0KafU/DZeJRCmBwWsXRUUwEU0Y5tRFLfgHRMARYDeoPRSyy383Zee0nsgO5rcROBzo19FUlOoYG0Bp/0IAW7y4LHQT5GB/UL4F6ie3mX0yFLoTQUTByQxE8lQ51wMRHx1Chd4FtkReQUj3VFktj97ZSDNYkK9h6L/03hLsAAjRx4oMVjqkMAAAAASUVORK5CYII="),(se=function(t,e,i,n){x.Util.registerImage(t,n,e,i)})("expand_icon",16,18,"data:image/gif;base64,R0lGODlhEAASAIcAADFKY0L/QpSlvZylvZytxqW11qm92r3GxrnK5MbGxsbW69jh8efv9+vz/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAMAAAEALAAAAAAQABIAAAhfAAMIHEiwoMGDCBMqXMjQ4AICEAcMECDgwEECDjJmbMAAwEWNDjgi8GgQ40YGCwyQLDjAAYCXL1UeFBAS5QIFBVYSFMBxwU0EOWcyUIDAQIGjOgcegMnUYsOnUKMiDAgAOw=="),se("collapse_icon",16,18,"data:image/gif;base64,R0lGODlhEAASAIcAADFKY0L/QpSlvZylvZytxqW11qm92r3GxrXI48bGxsbS59Te8efv9+vz/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAMAAAEALAAAAAAQABIAAAhhAAMIHEiwoMGDCBMqXMjQ4AICEAcMECDgwEECDjJmbMAAwEWNADgq8GgQY0YADBYYIFlwgAMAMGGuPCjAAUcACxQUYElQAMcFABQg2EmTgVADBZLyHHggplOLDaNKnYowIAA7"),se("close_icon",11,11,"data:image/gif;base64,R0lGODlhCwALAIcAAHd3d319fUD/QIODg4iIiI6Ojq6urri4uNnZ2eHh4eTk5Ofn5/Dw8PT09Pj4+Pn5+fz8/P39/f///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAMAAAIALAAAAAALAAsAAAhdAAUIOECw4AGBAyUoXCjh4AEJDBA4mIiAQcMDERAUKOBgI4IIBCE0IECSZAMIBB8wYDCg5coHBBkkCECTZgIGMQ0AAKBgpwGcBxgsMLCgKFGcA1cqXXlQoMGCAgMCADs="),se("sort_desc",9,5,"data:image/gif;base64,R0lGODlhCQAFAJECAImJiezs7P///wAAACH5BAEAAAIALAAAAAAJAAUAAAIMDI4QYrnC0INxUnYLADs="),se("sort_asc",9,5,"data:image/gif;base64,R0lGODlhCQAFAJECAImJiezs7P///wAAACH5BAEAAAIALAAAAAAJAAUAAAIMlAWnwIrcDJwi2HsLADs="),se("submenu_enable_icon",8,8,"data:image/png;base64,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"),se("submenu_disable_icon",8,8,"data:image/png;base64,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"),se("checkbox_selected_icon",16,16,"data:image/png;base64,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"),se("checkbox_unselected_icon",16,16,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAiUlEQVR42qXM3QYFIRiF4d3dJpIhI5FKJCOSSHe7f9gn4ztZo3Wwzt6HvTbHfhdCeD8Nvw27Ad57OI4xUsA5BwMpJQpYa2Eg50wBYwwMlFIocJ4nDFzXRQGtNQzUWilwHAcMtNYooJSCgd47BaSUMDDGoIAQAgbmnBTgnMPAWosCcP3fDdjZNvABvRhVEQglsV8AAAAASUVORK5CYII="),se("radiobutton_selected_icon",16,16,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAXFJREFUeNrUUz9rwkAUv0syBVxMm01L2lIdilOg4BcQ7eKcIV/AqZAxo1/B2a/QoSSTH6AQCoFMJUSig5C0EiPEv8G+Z604eJNTHxz37vf73Y977+7obrcjlwRHLoyLDYTThWmav6AgKDA9wrg6UF8wvO12O8RFt9s9bwACwvP8U6lUajWbzbYsy/eIR1Hk27b9GgSBlef5O7OEzWZzC5ufNU17gc01gEQcmCOGHGqYJaxWq1qj0WhzHFfwfZ84jrPHVVUliqIUkPM87wOg4KzBcrm8liTpbr1ek8FgQNI03eOz2Yzouk6QQw3zBFmWUewDxnQ6JUmSHHsDRz9qmD0A8ns8HgcortfrRxxzxJBDDfMEi8XC7ff7b4Zh3FSr1UKlUtnjlFI0mCOHGqZBHMd+GIbWZDIROp1OCxqH74HA9Q17vZ7luq4liqJ/uoee/oVyufxX/wPctwqpfKAieB9OsVj8xMVoNDpv8D8/048AAwDskrF8QGeJUgAAAABJRU5ErkJggg=="),se("radiobutton_unselected_icon",16,16,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAATVJREFUeNrUU71qhEAQ9q8S0mhip3C5kCpcFcgjiJfmal/BKr2lr2DtK1wR9BkCaYRUQTzUQtDE5sB/MTOJAQs3jVUGhp2Z75vPnV2XHseRWmMMtdJWC3DzxDTNnyLHbWC5A7+coA/wt77vT5hYlrUsAASKZdkHWZb3mqYdJEm6wXqWZYHneccwDN1hGF6II3Rddw3Nj7quP0HzDko8OsZYQww5RIGmaXaqqh4YhrnA3cwda4ghh3gGdV1fiaK4bdt28cAQQw5RoCxLGr/2lyGHOAKAn0mShDAnteSIIYcoUFWV7zjOM5DPuJPfxik+I4Yc4gh5ngdRFLlpmnKGYew3YFiH6zvZtu36vu/yPB/Me+j5W1AU5XstiuIW7vseQmmCMvg/XgVBeMckjuNlgf/5mL4EGAAhHbltcqEYDQAAAABJRU5ErkJggg=="),se("right_expand_icon",6,11,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAALCAYAAABcUvyWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0ZBRTFFQjJGQjA1MTFFNUE5M0NCMDAwMTJBRUZCNjkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0ZBRTFFQjNGQjA1MTFFNUE5M0NCMDAwMTJBRUZCNjkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCMzYzQTE5MUZBRkYxMUU1QTkzQ0IwMDAxMkFFRkI2OSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCMzYzQTE5MkZBRkYxMUU1QTkzQ0IwMDAxMkFFRkI2OSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqPQWR4AAABJSURBVHjaYvT08vrPwMAgCsQM27ZufcMABUxQ+jWI8PL2FkGXwJBElkCRRJeAS2KTAEvikhDFJiGKzSi4f5iwCSLrwPA5QIABAAmgFhOOHdKvAAAAAElFTkSuQmCC"),se("left_expand_icon",6,11,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAALCAYAAABcUvyWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0ZBRTFFQjZGQjA1MTFFNUE5M0NCMDAwMTJBRUZCNjkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0ZBRTFFQjdGQjA1MTFFNUE5M0NCMDAwMTJBRUZCNjkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3RkFFMUVCNEZCMDUxMUU1QTkzQ0IwMDAxMkFFRkI2OSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3RkFFMUVCNUZCMDUxMUU1QTkzQ0IwMDAxMkFFRkI2OSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PmpWGHAAAABISURBVHjaYvz//z8DDHh5e4tAma+ZsAmCCCZsgiDAfOr0aQxBuA50QZgEhiBMQhSXBAM2SaZtW7e+wSYJ1oFNEu5BdEmAAAMAvV8Xc/cw3YgAAAAASUVORK5CYII="),se("up_expand_icon",11,6,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAGCAYAAAAVMmT4AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QjM2M0ExOEZGQUZGMTFFNUE5M0NCMDAwMTJBRUZCNjkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QjM2M0ExOTBGQUZGMTFFNUE5M0NCMDAwMTJBRUZCNjkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCMzYzQTE4REZBRkYxMUU1QTkzQ0IwMDAxMkFFRkI2OSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCMzYzQTE4RUZBRkYxMUU1QTkzQ0IwMDAxMkFFRkI2OSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnCNygcAAABGSURBVHjaYvz//z8DDHh5e4tAma+BWBTE2LZ16xuYPBMOhXAaSRyiGItCBmwaGD29vHApRAaiyM7ApxAuz0SEQrgGgAADALOxFSETkKKwAAAAAElFTkSuQmCC"),se("down_expand_icon",11,6,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAGCAYAAAAVMmT4AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA0xpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QjM2M0ExOENGQUZGMTFFNUE5M0NCMDAwMTJBRUZCNjkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QjM2M0ExOEJGQUZGMTFFNUE5M0NCMDAwMTJBRUZCNjkiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjQ5ZTRmZmE2LTQzNmYtMTE3OS04NThhLTk1ZGZjOWRiNmNiOCIgc3RSZWY6ZG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjQ5ZTRmZmE2LTQzNmYtMTE3OS04NThhLTk1ZGZjOWRiNmNiOCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtPgXX8AAAA7SURBVHjaYvH08vrPQCRgAmJRItWKMsEYhBSCTd62desbAhrA4iB1TDAGDg2iyPIwZ2DTIIomzgAQYAAmahUFv1Iq6AAAAABJRU5ErkJggg=="),l.__tree=function(t,e){t._rootVisible=!0,t._initTree=function(t){this._rootData=null,this._expandMap={},this._levelMap={}},t.validateModel=function(){this._rowDatas.clear(),this._levelMap={},this._dataRowMap={},this._currentLevel=0,this._rootData?this._rootVisible?this.isVisible(this._rootData)&&this._buildData(this._rootData):this._buildChildren(this._rootData):this._buildChildren(),delete this._currentLevel},t._buildData=function(t){this._dataRowMap[t.getId()]=this._rowDatas.size(),this._rowDatas.add(t),this._levelMap[t.getId()]=this._currentLevel,this.isExpanded(t)&&(this._currentLevel++,this._buildChildren(t),this._currentLevel--)},t._buildChildren=function(t){var e=t?t.getChildren():this._box.getRoots(),i=this.getCurrentSortFunction();i&&this.isChildrenSortable(t)?e.toList(this.isVisible,this).sort(i).forEach(function(t){this._buildData(t)},this):e.forEach(function(t){this.isVisible(t)&&this._buildData(t)},this)},t.getLevel=function(t){return this._levelMap[t.getId()]},t.getToggleImage=function(t){return 0<t.getChildrenSize()?this.isExpanded(t)?this._expandIcon:this._collapseIcon:null},t.isCheckable=function(t){return this.isCheckMode()},t.isCheckMode=function(){return 1===l.__tree._checkMap[this._checkMode]},t.isChildrenSortable=function(t){return!0},t.handleDataBoxChange=function(t){"remove"===t.kind?delete this._expandMap[t.data.getId()]:"clear"===t.kind&&(this._expandMap={}),this.invalidateModel()},t.isExpanded=function(t){return 1===this._expandMap[t.getId()]},t.expand=function(t){if(!this.isExpanded(t)){for(var e=t.getParent();null!=e&&e!==this._rootData;)this._expandMap[e.getId()]=1,e=e.getParent();this._expandMap[t.getId()]=1,this.invalidateModel()}},t.collapse=function(t){this.isExpanded(t)&&(delete this._expandMap[t.getId()],this.invalidateModel())},t.expandAll=function(){this._box.forEach(function(t){this._expandMap[t.getId()]=1},this),this.invalidateModel()},t.collapseAll=function(){this._expandMap={},this.invalidateModel()},t._handleClick=function(t){var e,i;this.isFocusOnClick()&&x.Util.setFocus(this._view),this._isValidating||(t.target._expandData&&!t.target.ableExpand?(e=t.target._expandData,this.isExpanded(e)?(this.collapse(e),this.fireInteractionEvent({kind:"collapse",data:e})):(this.expand(e),this.fireInteractionEvent({kind:"expand",data:e}))):t.target._selectData||t.target.parentNode._selectData?(this._handlePressSelection(t.target._selectData||t.target.parentNode._selectData,t),this.isCheckMode()&&0<=this.getRowIndexAt(t)&&this.__handleClick(t)):this._treeColumn?(e=this.getDataAt(t))&&(this.isCheckMode()?t.target._checkData||this.__handleClick(t):this._handlePressSelection(e,t)):this.isCheckMode()&&!t.target._checkData&&this.__handleClick(t),this._currentEditor&&!this._isCommitting&&(this._isCommitting=!0,this.commitEditValue(this._currentEditor._editInfo,this._currentEditor)),this.updateCurrentEditor&&(i=this,setTimeout(function(){i.updateCurrentEditor(t)},0)))},t.__handleClick=function(t){var e,i=this.getDataAt(t);i&&(e=this.getRowIndexByData(i),this._focusedRow!==e&&(t=this._rowDatas.get(this._focusedRow),this._focusedRow=e,t&&this.invalidateData(t),this.invalidateData(i)))},t._handleDoubleClick=function(t){this.isFocusOnClick()&&x.Util.setFocus(this._view),this._isValidating||t.target.ableExpand&&t.target._expandData&&(t=t.target._expandData,this.isExpanded(t)?(this.collapse(t),this.fireInteractionEvent({kind:"collapse",data:t})):(this.expand(t),this.fireInteractionEvent({kind:"expand",data:t})))},t.handleChange=function(t){if(!(this._isCommitting||this._isCanceling||this._isValidating)){var e=t.target._checkData;if(e){var i,n=this.isSelected(e),o=this.getSelectionModel();if("default"===this._checkMode)n?o.removeSelection(e):o.appendSelection(e);else if("children"===this._checkMode)(i=new ie(e)).addAll(e.getChildren());else if("descendant"===this._checkMode)i=new ie,Y.fillDescendant(e,i);else if("descendantAncestor"===this._checkMode&&(i=new ie,Y.fillDescendant(e,i),!n))for(var s=e.getParent();s;)i.add(s),s=s.getParent();n?o.removeSelection(i):o.appendSelection(i)}t.target._editInfo&&this.commitEditValue&&(this._isCommitting=!0,this.commitEditValue(t.target._editInfo,t.target))}},t.onLabelRendered=function(t,e,i,n,o,s){},t.onToggleImageRendered=function(t){},t._renderTree=function(t,e,i,n){var o=this._levelMap[e.getId()],s=this.getToggleImage(e),a=this.getLineType(),r=this._indent,h=this.__spanPool.get();h.style.display="inline-block",h.style.position="relative",h.style.verticalAlign="top",h.style.margin="0px 1px 0px 1px",h.style.width=(o+1)*r+"px",t.appendChild(h);var l,c,u=e,d=u.getParent(),_=0;if("dotted"===a||"solid"===a)for(null==d&&(f=this.getIcon(e),this._addLine(h,e,f,!0));null!==d;){var g=d.getChildren(),g=u===g.get(g.size()-1),f=this.getIcon(u);u.setClient("isLast",g),0==_&&this._addLine(h,e,f,g),_++,d=(u=d).getParent()}s&&((l=this.__imagePool.get()).setAttribute("src",Y.getImageSrc(s)),l.style.verticalAlign="middle",l._expandData=e,l.style.position="absolute",l.style.right="0px",c=this,l.onload=function(){l.style.top=c.getRowHeight()/2-l.height/2+"px"},h.appendChild(l),this.onToggleImageRendered(l));r=this.isCheckable(e),a="disabled"===this.getUncheckableStyle();(r||a)&&(this._addCheckBox(t,e,n).disabled=!r),(f=this.getIcon(e))&&(A=this.isCheckMode()||this._treeColumn?null:e,this._addIcon(t,e,f,A));var A=this.getLabel(e);A&&((h=this.__textPool.get()).style.whiteSpace="nowrap",h.style.verticalAlign="middle",h.style.padding="1px 2px 1px 2px",Y.setText(h,A,this._treeColumn?this._treeColumn.isInnerText():this._innerText),s&&(h._expandData=e,h.ableExpand=!0),this.isCheckMode()||this._treeColumn?this._focusedRow===i&&(h.style.backgroundColor=this.getSelectColor(e)):(h._selectData=e,h.style.backgroundColor=n?this.getSelectColor(e):""),this.onLabelRendered(h,e,A,i,o,n),t.appendChild(h),t.title=this.getToolTip(e))}},l.__tree._checkMap={default:1,children:1,descendant:1,descendantAncestor:1},x.Column=function(t){x.Column.superClass.constructor.call(this,t)},Y.ext("twaver.Column",x.Data,{IColumn:!0,__property:1,__accessor:["width","horizontalAlign","valueType","propertyType","propertyName","editable","visible","sortable","resizable","movable","sortDirection","sortFunction","enumInfo"],__bool:["innerText"],_innerText:ye.COLUMN_INNER_TEXT,_width:ye.COLUMN_WIDTH,_horizontalAlign:ye.COLUMN_HORIZONTAL_ALIGN,_propertyName:null,_propertyType:ye.COLUMN_PROPERTY_TYPE,_valueType:ye.COLUMN_VALUE_TYPE,_editable:ye.COLUMN_EDITABLE,_sortable:ye.COLUMN_SORTABLE,_visible:ye.COLUMN_VISIBLE,_resizable:ye.COLUMN_RESIZABLE,_movable:ye.COLUMN_MOVABLE,_sortDirection:"asc",_sortFunction:ye.SORT_FUNCTION,_enumInfo:null,renderCell:ye.COLUMN_RENDER_CELL,renderHeader:ye.COLUMN_RENDER_HEADER,renderEditor:ye.COLUMN_RENDER_EDITOR,setParent:function(t){throw"parent not supported"},getEnumInfo:function(){return"object"==typeof this._enumInfo?this._enumInfo:"function"==typeof this._enumInfo?1===arguments.length?this._enumInfo(arguments[0]):this._enumInfo():void 0}}),x.ColumnBox=function(t){x.ColumnBox.superClass.constructor.apply(this,arguments)},Y.ext("twaver.ColumnBox",x.DataBox,{_name:"ColumnBox",add:function(t,e){if(!t.IColumn)throw"Only IColumn can be added into ColumnBox";x.ColumnBox.superClass.add.apply(this,arguments)}}),x.Property=function(t){x.Property.superClass.constructor.call(this,t)},Y.ext("twaver.Property",x.Data,{IProperty:!0,__property:1,__accessor:["horizontalAlign","valueType","editable","propertyType","propertyName","categoryName","enumInfo"],__bool:["innerText"],_innerText:ye.PROPERTY_INNER_TEXT,_horizontalAlign:ye.PROPERTY_HORIZONTAL_ALIGN,_propertyName:null,_propertyType:ye.PROPERTY_PROPERTY_TYPE,_valueType:ye.PROPERTY_VALUE_TYPE,_editable:ye.PROPERTY_EDITABLE,_categoryName:ye.PROPERTY_CATEGORY_NAME,_enumInfo:null,renderName:ye.PROPERTY_RENDER_NAME,renderValue:ye.PROPERTY_RENDER_VALUE,isVisible:null,renderEditor:ye.PROPERTY_RENDER_EDITOR,setParent:function(t){throw"parent not supported"},setPropertyName:function(t){var e=this._propertyName;this._propertyName=t,this.firePropertyChange("propertyName",e,t)},setPropertyType:function(t){var e=this._propertyType;this._propertyType=t,this.firePropertyChange("propertyType",e,t)},getEnumInfo:function(){return"object"==typeof this._enumInfo?this._enumInfo:"function"==typeof this._enumInfo?1===arguments.length?this._enumInfo(arguments[0]):this._enumInfo():void 0}}),x.PropertyBox=function(t){x.PropertyBox.superClass.constructor.apply(this,arguments)},Y.ext("twaver.PropertyBox",x.DataBox,{_name:"PropertyBox",add:function(t,e){if(!t.IProperty)throw"Only IProperty can be added into PropertyBox";x.PropertyBox.superClass.add.apply(this,arguments)}}),x.Tab=function(t){x.Tab.superClass.constructor.call(this,t)},Y.ext("twaver.Tab",x.Data,{ITab:!0,__accessor:["view","width","closable","resizable","movable","disabled","visible"],_icon:null,_width:ye.TAB_WIDTH,_closable:ye.TAB_CLOSABLE,_resizable:ye.TAB_RESIZABLE,_movable:ye.TAB_MOVABLE,_disabled:ye.TAB_DISABLED,_visible:ye.TAB_VISIBLE,setParent:function(t){throw"parent not supported"}}),x.TabBox=function(t){x.TabBox.superClass.constructor.apply(this,arguments),this.getSelectionModel().setSelectionMode("singleSelection")},Y.ext("twaver.TabBox",x.DataBox,{_name:"TabBox",add:function(t,e){if(!t.ITab)throw"Only ITab can be added into TabBox";x.TabBox.superClass.add.apply(this,arguments)}}),x.controls.ListBase=function(t){x.controls.ListBase.superClass.constructor.apply(this,arguments),this._invalidate=!1,this._invalidateModel=!1,this._invalidateDisplay=!1,this._invalidateDatas=null,this._rowDatas=new ie,this._startRowIndex=0,this._endRowIndex=0,this._renderMap={},this._dataRowMap={},this.__divPool=new x.Pool("div",20),this.__imagePool=new x.Pool("img",20),this.__canvasPool=new x.Pool("canvas",20),this.__spanPool=new x.Pool("span",20),this.__textPool=new x.Pool("span",20),this.__checkBoxPool=new x.Pool("input",20),this.__linePool=new x.Pool("canvas",20),this._pools.add(this.__divPool),this._pools.add(this.__linePool),this._pools.add(this.__imagePool),this._pools.add(this.__canvasPool),this._pools.add(this.__spanPool),this._pools.add(this.__textPool),this._pools.add(this.__checkBoxPool),this._view=m.createView("auto",!0),this._rootDiv=m.createDiv(),this._dataDiv=m.createDiv(),this._dataDiv.style.width="1px",this._view.appendChild(this._rootDiv),this._rootDiv.appendChild(this._dataDiv),this.setDataBox(t||new x.DataBox);var e=this;e.handleChange&&e._view.addEventListener("change",function(t){e.handleChange(t)},!1),g.isTouchable?g.isMSTouchable?new x.controls.ListBaseMSTouchInteraction(this):(new x.controls.ListBaseTouchInteraction(this),new x.controls.ListBaseInteraction(this)):new x.controls.ListBaseInteraction(this)},Y.ext("twaver.controls.ListBase",x.controls.View,{__bool:["innerText"],_innerText:ye.LISTBASE_INNER_TEXT,getDataDiv:function(){return this._dataDiv},getStartRowIndex:function(){return this._startRowIndex},getEndRowIndex:function(){return this._endRowIndex},getRowDatas:function(){return this._rowDatas},getRowIndexByData:function(t){return this._dataRowMap[t.getId()]},getRowIndexById:function(t){return this._dataRowMap[t]},getRowSize:function(){return this._rowDatas.size()},getDataBox:function(){return this._box},setDataBox:function(t){if(!t)throw"DataBox can not be null";var e;this._box!==t&&((e=this._box)&&(e.removeDataBoxChangeListener(this.handleDataBoxChange,this),e.removeDataPropertyChangeListener(this.handlePropertyChange,this),e.removeHierarchyChangeListener(this.handleHierarchyChange,this),this._selectionModel||e.getSelectionModel().removeSelectionChangeListener(this.handleSelectionChange,this)),this._box=t,this._box.addDataBoxChangeListener(this.handleDataBoxChange,this),this._box.addDataPropertyChangeListener(this.handlePropertyChange,this),this._box.addHierarchyChangeListener(this.handleHierarchyChange,this),this._selectionModel?this._selectionModel._setDataBox(t):this._box.getSelectionModel().addSelectionChangeListener(this.handleSelectionChange,this),this.invalidateModel(),this.firePropertyChange("dataBox",e,this._box))},onPropertyChanged:function(t){"zoom"===t.property?this.invalidate():this.invalidateModel()},invalidateModel:function(){this._invalidateModel||(this._invalidateModel=!0,this._invalidateDisplay=!0,this._invalidateDatas=null,this.invalidate())},invalidateDisplay:function(){this._invalidateDisplay||(this._invalidateDisplay=!0,this._invalidateDatas=null,this.invalidate())},invalidateData:function(t){this._invalidateDisplay||(this._invalidateDatas||(this._invalidateDatas={}),this._invalidateDatas[t.getId()]=t,this.invalidate())},validateImpl:function(){var t=this._view.scrollLeft,e=this._view.scrollTop;if(this._invalidateModel&&(this._invalidateModel=!1,this.validateModel()),this._invalidateDisplay&&(this._invalidateDisplay=!1,this._renderMap={},m.release(this._dataDiv),this._dataDiv.style.height=this.getRowSize()*this._rowHeight+"px"),this._invalidateDatas){for(u in this._invalidateDatas){var i=this._renderMap[u];i&&(m.release(i),this._dataDiv.removeChild(i),delete this._renderMap[u])}this._invalidateDatas=null}var n=this._view.scrollTop/this._zoom,o=this._view.clientHeight/this._zoom;this._startRowIndex=Math.floor(n/this._rowHeight)-2,this._endRowIndex=Math.ceil((n+o)/this._rowHeight)+2,this._startRowIndex<0&&(this._startRowIndex=0),this._endRowIndex>this._rowDatas.size()&&(this._endRowIndex=this._rowDatas.size());for(var s=this._rowHeight-this._rowLineWidth-2+"px",a=this._rowLineWidth+"px",r=this._startRowIndex;r<this._endRowIndex;r++){var h,l,c=this._rowDatas.get(r),u=c.getId();(h=this._renderMap[u])||((l=(h=this.__divPool.get()).style).position="absolute",l.whiteSpace="nowrap",l.lineHeight=s,l.top=r*this._rowHeight+"px",l.borderStyle="solid",l.borderWidth="0px",l.borderBottomWidth=a,l.borderBottomColor=this._rowLineColor,l.opacity=c.getStyle?c.getStyle("whole.alpha"):1,this._dataDiv.appendChild(h),this._renderMap[u]=h,l=this.isSelected(c),this.renderData(h,c,r,l),this.onDataRendered(h,c,r,l))}this._dataDiv.style.width=this.calculateSumWidth()+"px","0px"===this._dataDiv.style.height&&(this._dataDiv.style.height="1px"),Y.keys(this._renderMap).forEach(function(t){var e=this.getRowIndexById(t);(e<this._startRowIndex||e>=this._endRowIndex)&&(e=this._renderMap[t],m.release(e),this._dataDiv.removeChild(e),delete this._renderMap[t])},this),this._pools.forEach(function(t){t.clear()}),this._view.scrollLeft!==t&&(this._view.scrollLeft=t),this._view.scrollTop!==e&&(this._view.scrollTop=e),this.adjustRowSize(),this.onValidated()},adjustRowSize:function(){var t,e,i=this._rowHeight-this._rowLineWidth+"px",n=Math.floor((this._view.scrollLeft+this._view.clientWidth)/this._zoom)+"px";for(t in this._renderMap)(e=this._renderMap[t]).style.height=i,e.style.width=n},onValidated:function(){},onDataRendered:function(t,e,i,n){},calculateSumWidth:function(){return 0},_addCheckBox:function(t,e,i){var n=this.__checkBoxPool.get();return n.keepDefault=!0,n.type="checkbox",n.style.margin="0px 2px",n.style.verticalAlign="middle",n._checkData=e,n.checked=i,n.disabled=!1,t.appendChild(n),n},_addIcon:function(t,e,i,n){var o,s,a,r=Y.getImageAsset(i),h=this.getInnerColor(e),l=this.getOuterColor(e),c=this.getAlarmFillColor(e);r&&r.getImage()?(o=r.getWidth(),s=r.getHeight(),(a=this.__canvasPool.get()).style.verticalAlign="middle",a.setAttribute("width",o),a.setAttribute("height",s),(r=a.getContext("2d")).clearRect(0,0,o,s),xt(r,i,h,{x:0,y:0,width:o,height:s},e,this),l&&(r.lineWidth=2,r.strokeStyle=l,r.beginPath(),r.rect(0,0,o,s),r.closePath(),r.stroke()),c&&(r.fillStyle=R.createRadialGradient(r,c,"white",1,s-9,8,8,.75,.25),r.beginPath(),r.arc(5,s-5,4,0,2*Math.PI,!0),r.closePath(),r.fill())):((a=this.__imagePool.get()).style.verticalAlign="middle",a.setAttribute("src",Y.getImageSrc(i))),a.style.margin="0px 1px 0px 1px",a._selectData=n,t.appendChild(a)},_addLine:function(t,e,i,n){var o,s,a=this.__linePool.get(),r=Y.getImageAsset(i),h=this.getToggleImage(e),l=this._levelMap[e.getId()],c=this._indent,u=c,d=c;this.isCheckable(e),this.getUncheckableStyle();r&&(u=r.getWidth(),d=r.getHeight()),o=(l+2-1)*c+u,s=this.getRowHeight(),t.style.width=(l+2-1)*c+u+"px",t.style.height=s+d+"px";var _=this.getLineType(),i=this.getLineColor(),r=this.getLineAlpha(),c=this.getLineThickness(),u=this.getLineDash();Y.getImageSrc(h);a.style.verticalAlign="top",a.style.margin="0px 0px 0px 0px",a.style.zIndex=-1,a.setAttribute("width",o),a.setAttribute("height",s);var g=a.getContext("2d");g.lineWidth=c,g.strokeStyle=i,g.globalAlpha=r,"dotted"===_&&g.setLineDash(u);var f=2*(l+2);if(n){var A=(m=e).getParent();g.clearRect(0,0,o,s);null===A&&0!==e.getChildrenSize()&&this.isExpanded(e)&&(g.moveTo((l+2+1)*o/f,s/2+d/2),g.lineTo((l+2+1)*o/f,s),g.stroke());for(var p=2*l-1;1<=p;p-=2){if(m.getClient("isLast")){if(A=(m=A).getParent(),(p+1)/2!=l)continue}else A=(m=A).getParent();p==2*l-1?(g.moveTo((p+2)*o/f,0),g.lineTo((p+2)*o/f,s/2),g.stroke(),g.moveTo((p+2)*o/f,s/2),g.lineTo((p+2+1)*o/f,s/2),g.stroke(),0!==e.getChildrenSize()&&this.isExpanded(e)&&(g.moveTo((p+2+2)*o/f,s/2+d/2),g.lineTo((p+2+2)*o/f,s),g.stroke())):(g.moveTo((p+2)*o/f,0),g.lineTo((p+2)*o/f,s),g.stroke())}}else{var m,A=(m=e).getParent();g.clearRect(0,0,o,s);for(p=2*l-1;1<=p;p-=2){if(m.getClient("isLast")){if(A=(m=A).getParent(),(p+1)/2!=l)continue}else A=(m=A).getParent();g.moveTo((p+2)*o/f,0),g.lineTo((p+2)*o/f,s),g.stroke(),p==2*l-1&&(g.moveTo((p+2)*o/f,s/2),g.lineTo((p+2+1)*o/f,s/2),g.stroke(),0!==e.getChildrenSize()&&this.isExpanded(e)&&(g.moveTo((p+2+2)*o/f,s/2+d/2),g.lineTo((p+2+2)*o/f,s),g.stroke()))}}return t.appendChild(a),a},isVisible:function(t){return!!this._box.contains(t)&&(!this._visibleFunction||this._visibleFunction(t))},handleDataBoxChange:function(t){this.invalidateModel()},handlePropertyChange:function(t){"parent"===t.property?this.invalidateModel():this.invalidateData(t.source)},handleHierarchyChange:function(t){this.invalidateModel()},handleSelectionChange:function(t){t.datas.forEach(function(t){this.invalidateData(t)},this),this.onSelectionChanged(t)},getRowIndexAt:function(t){t=this.getLogicalPoint(t);if(!t)return-1;t=parseInt(t.y/this._rowHeight);return 0<=t&&t<this._rowDatas.size()?t:-1},getDataAt:function(t){t=this.getRowIndexAt(t);return 0<=t?this._rowDatas.get(t):null},getCurrentSortFunction:function(){return this._sortFunction},validateModel:function(){this._rowDatas.clear(),this._dataRowMap={},this._buildChildren(this._box.getRoots()),this._rowDatas=this._rowDatas.toList(this.isVisible,this);var t=this.getCurrentSortFunction();t&&this._rowDatas.sort(t);for(var e=this._rowDatas.size(),i=0;i<e;i++)this._dataRowMap[this._rowDatas.get(i).getId()]=i},_buildChildren:function(t){t.forEach(function(t){this._rowDatas.add(t),this._buildChildren(t.getChildren())},this)},_handlePressSelection:function(t,e){var i=this.getSelectionModel();if(Y.isCtrlDown(e))i.contains(t)?i.removeSelection(t):i.appendSelection(t);else if(e.shiftKey&&i.getLastData()){var n=i.getLastData(),o=this.getRowIndexByData(n),s=this.getRowIndexByData(t),a=new ie;for(a.add(this.getRowDatas().get(o));o!==s;)o+=o<s?1:-1,a.add(this.getRowDatas().get(o));i.setSelection(a)}else 1===i.size()&&i.contains(t)||i.setSelection(t);this.fireInteractionEvent({kind:2===e.detail?"doubleClick":"click",data:t})},_handleDoubleClick:function(t){var e=this.getDataAt(t);this.fireInteractionEvent({kind:2===t.detail?"doubleClick":"click",data:e})},_handleClick:function(t){this.isFocusOnClick()&&x.Util.setFocus(this._view);var e,i,n,o=this.getDataAt(t);o&&(this.isCheckMode()&&!t.target._checkData&&(e=this.getRowIndexByData(o),this._focusedRow!==e&&(i=this._rowDatas.get(this._focusedRow),this._focusedRow=e,i&&this.invalidateData(i),this.invalidateData(o))),this.isCheckMode()||this._handlePressSelection(o,t)),this._currentEditor&&this.commitEditValue(this._currentEditor._editInfo,this._currentEditor),this.updateCurrentEditor&&(n=this,setTimeout(function(){n.updateCurrentEditor(t)},0))},handleChange:function(t){var e,i,n;this._isCanceling||this._isValidating||((e=t.target._checkData)&&(i=this.isSelected(e),n=this.getSelectionModel(),i?n.removeSelection(e):n.appendSelection(e)),t.target._editInfo&&this.commitEditValue&&this.commitEditValue(t.target._editInfo,t.target))},scrollToData:function(t){var e,i;t&&((i=this.getRowIndexById(t.getId()))<0||(t=(e=i*this._rowHeight*this._zoom)+this._rowHeight*this._zoom,i=this._view.scrollTop,this._view.scrollTop>e&&(i=e),this._view.scrollTop+this._view.clientHeight<t&&(i=t-this._view.clientHeight),this._view.scrollTop!=i&&(this._view.scrollTop=i,this.invalidate())))},makeVisible:function(t){this.isVisible(t)&&(this.expand&&this.expand(t),Y.callLater(this.scrollToData,this,[t],2*ye.CALL_LATER_DELAY))},onSelectionChanged:function(t){this._makeVisibleOnSelected&&("append"!==t.kind&&"set"!==t.kind&&"all"!==t.kind||(this.expand&&this.getSelectionModel().getSelection().forEach(function(t){t.getParent()&&this.expand(t.getParent())},this),Y.callLater(this.scrollToData,this,[this.getSelectionModel().getLastData()],2*ye.CALL_LATER_DELAY)))},onShareSelectionModelChanged:function(){this.invalidateModel()}}),x.controls.TableBase=function(t){this._columnBox=new x.ColumnBox,this._columnBox.addDataBoxChangeListener(this.handleColumnBoxChange,this),this._columnBox.addDataPropertyChangeListener(this.handleColumnPropertyChange,this),this._columnBox.addHierarchyChangeListener(this.handleColumnHierarchyChange,this),x.controls.TableBase.superClass.constructor.apply(this,arguments),this._cellPool=new x.Pool("div",20),this._stringPool=new x.Pool("span",20),this._booleanPool=new x.Pool("input",20),this._colorPool=new x.Pool("div",20),this._pools.add(this._cellPool),this._pools.add(this._stringPool),this._pools.add(this._booleanPool),this._pools.add(this._colorPool)},Y.ext("twaver.controls.TableBase",x.controls.ListBase,{getColumnBox:function(){return this._columnBox},handleColumnBoxChange:function(t){this.invalidateDisplay()},handleColumnPropertyChange:function(t){t.source!==this._sortColumn||"sortDirection"!==t.property&&"sortFunction"!==t.property&&"sortable"!==t.property?this.invalidateDisplay():this.invalidateModel()},handleColumnHierarchyChange:function(t){this.invalidateDisplay()},renderData:function(t,e,i,n){for(var o=this._columnBox.getRoots(),s=o.size(),a=0,r=this._rowHeight-this._rowLineWidth+"px",h=0;h<s;h++){var l=o.get(h),c=l.getWidth();c<0&&(c=0);var u,d,_=Math.min(this._columnLineWidth,c);l.isVisible()&&((d=(u=this._cellPool.get()).style).position="absolute",d.whiteSpace="nowrap",d.verticalAlign="middle",d.textAlign=l.getHorizontalAlign(),d.overflow="hidden",d.textOverflow="ellipsis",d.left=a+"px",d.width=c-_+"px",d.height=r,d.borderStyle="solid",d.borderWidth="0px",d.borderRightWidth=_+"px",d.borderRightColor=this._columnLineColor,0===h?(d.borderLeftWidth=_+"px",d.borderLeftColor=this._columnLineColor):d.borderLeftWidth="0px",t.appendChild(u),l={data:e,value:this.getValue(e,l),div:u,view:this,column:l,rowIndex:i,selected:n},this.renderCell(l),this.onCellRendered(l),a+=c)}(d=t.style).width=a+"px",d.height=r,d.backgroundColor=this.isCheckMode()&&this._focusedRow===i||!this.isCheckMode()&&n?this.getSelectColor(e):""},adjustRowSize:function(){},onCellRendered:function(t){},calculateSumWidth:function(){for(var t=this._columnBox.getRoots(),e=t.size(),i=0,n=0;n<e;n++){var o=t.get(n).getWidth();i+=o=o<0?0:o}return i},getCurrentSortFunction:function(){var o=this._sortColumn;if(o){var s=o.getSortFunction();if(s){var a=this,r="asc"===o.getSortDirection()?1:-1;return function(t,e){var i=a.getValue(t,o),n=a.getValue(e,o);return s.call(a,i,n,t,e)*r}}}return this._sortFunction},renderCell:function(t){var e,i,n=t.column;n.renderCell?n.renderCell(t):(e=t.value,(i=n.getEnumInfo(t.rowIndex))&&!Array.isArray(i)&&(e=i.map[e]),t.view.isCellEditable(t.data,n)&&(t.enumInfo=i,t.div._editInfo=t),ct.render(n.getValueType(),e,t.div,t.view,n.isInnerText()))},getValue:function(t,e){return e.getValue(t,this)},setValue:function(t,e,i){e.setValue(t,i,this)},getColumnAt:function(t){var e=this.getLogicalPoint(t);if(!e)return null;for(var i=this._columnBox.getRoots(),n=0,o=i.size(),s=0;n<o;n++){var a=i.get(n),r=a.getWidth();if(r<0&&(r=0),e.x>s&&e.x<s+r)return a;s+=r}return null},isCellEditable:function(t,e){return this.isEditable()&&e.isEditable()},commitEditValue:function(t,e){if(!this._isCanceling){var i="checkbox"===e.type?e.checked:e.value,n=t.column,e=n.getValueType();if("int"===e&&"string"==typeof i)i=parseInt(i);else if("number"===e&&"string"==typeof i)i=parseFloat(i);else if("list.points"===e){for(var o=i.replace(/\]/g,"").replace(/\[/g,"").split(","),s=new x.List,a=0;a<o.length;a+=2)a+1>=o.length||s.add({x:parseInt(o[a]),y:parseInt(o[a+1])});i=s}this.setValue(t.data,n,i),this._currentEditor&&(n=this._currentEditor.parentNode,i=this._currentEditor,delete this._currentEditor,n&&n.removeChild(i),x.Util.setFocus(this._view)),delete this._isCommitting}},cancelEditing:function(){var t,e;this._currentEditor&&(this._isCanceling=!0,t=this._currentEditor.parentNode,e=this._currentEditor,delete this._currentEditor,t&&t.removeChild(e),x.Util.setFocus(this._view),delete this._isCanceling)},renderEditor:function(t){},onEditorRendered:function(t){},getEditorValue:function(t){var i,e=t.column.getValueType(),t=t.value,n="";return"list.points"===e?(i=t._as||t).forEach(function(t,e){n+=e==i.length-1?"["+t.x+","+t.y+"]":"["+t.x+","+t.y+"],"}):n=t,n},updateCurrentEditor:function(t){var e,n,i=t.target;if(i!==this._currentEditor&&i.parentNode!==this._currentEditor){for(;i&&i!==this._view&&!(e=i._editInfo);)i=i.parentNode;e&&i===e.div&&((t=this.renderEditor&&this.renderEditor(e))?(this._currentEditor=t.view,null!=e.value&&(this._currentEditor.value=this.getEditorValue(e))):e.enumInfo?this._currentEditor=m.createSelect(e.enumInfo,e.value):(this._currentEditor=E.createElement("input"),null!=e.value&&(this._currentEditor.value=this.getEditorValue(e))),e.column&&e.column.renderEditor&&(t="function"==typeof e.column.renderEditor?e.column.renderEditor(this,e):e.column.renderEditor)&&(this._currentEditor=t),this._currentEditor&&(t&&t.onKeyDown?(n=t.onKeyDown)&&Array.isArray(n)&&this._currentEditor.addEventListener("keydown",function(t){for(var e=0;e<n.length;e++)if(n[e].combKey){var i=null;switch(n[e].combKey){case"ctrlKey":i=t.ctrlKey;break;case"shiftKey":i=t.shiftKey;break;case"altKey":i=t.altKey}t.keyCode===n[e].keyCode&&i&&n[e].handlerEvent&&n[e].handlerEvent(t)}else t.keyCode===n[e].keyCode&&n[e].handlerEvent&&n[e].handlerEvent(t)}):this._currentEditor.addEventListener("keydown",function(t){var e=t.target._editInfo.view;13===t.keyCode&&t.shiftKey||(13===t.keyCode?e.commitEditValue(t.target._editInfo,t.target):27===t.keyCode&&e.cancelEditing())},!1),this._currentEditor.addEventListener("blur",function(t){var e=t.target._editInfo.view;e._isCanceling||e.commitEditValue(t.target._editInfo,t.target)},!1),this._currentEditor.keepDefault=!0,this._currentEditor._editInfo=e,this._currentEditor.parentNode||((t=this._currentEditor.style).position="absolute",t.margin="0px",t.border="0px",t.padding="0px",t.left=e.div.style.left,t.top=e.div.parentNode.style.top,t.width=e.div.style.width,t.height=e.div.style.height,this._rootDiv.appendChild(this._currentEditor)),x.Util.setFocus(this._currentEditor)))}},onColumnSorted:function(t){},getCurrentEditor:function(){return this._currentEditor}}),x.controls.List=function(t){x.controls.List.superClass.constructor.apply(this,arguments)},Y.ext("twaver.controls.List",x.controls.ListBase,{__accessor:["rowHeight","indent","rowLineWidth","rowLineColor","sortFunction","visibleFunction"],__bool:["makeVisibleOnSelected","keyboardRemoveEnabled","keyboardSelectEnabled"],_checkMode:!1,_rowHeight:ye.LIST_ROW_HEIGHT,_indent:ye.LIST_INDENT,_rowLineWidth:ye.LIST_ROW_LINE_WIDTH,_rowLineColor:ye.LIST_ROW_LINE_COLOR,_makeVisibleOnSelected:ye.LIST_MAKE_VISIBLE_ON_SELECTED,_keyboardRemoveEnabled:ye.LIST_KEYBOARD_REMOVE_ENABLED,_keyboardSelectEnabled:ye.LIST_KEYBOARD_SELECT_ENABLED,isCheckMode:function(){return this._checkMode},setCheckMode:function(t){delete this._focusedRow;var e=this._checkMode;this._checkMode=t,this.firePropertyChange("checkMode",e,t)},isCheckable:function(t){return!0===this._checkMode},renderData:function(t,e,i,n){0<this._indent&&((s=this.__spanPool.get()).style.width=this._indent+"px",s.style.display="inline-block",t.appendChild(s)),this.isCheckable(e)&&this._addCheckBox(t,e,n);var o=this.getIcon(e);o&&this._addIcon(t,e,o);var s,a=this.getLabel(e);a&&((o=(s=this.__textPool.get()).style).whiteSpace="nowrap",o.verticalAlign="middle",o.padding="1px 2px 1px 2px",o.display="inline-block",Y.setText(s,a,this._innerText),this.onLabelRendered(s,e,a,i,n),t.appendChild(s)),this.isCheckMode()?t.style.backgroundColor=this._focusedRow===i?this.getSelectColor(e):"":t.style.backgroundColor=n?this.getSelectColor(e):""},onLabelRendered:function(t,e,i,n,o){}}),x.controls.ListBaseInteraction=function(t){this.listBase=t,this.view=t._view,this.clickTimer=0,this.doubleClickInterval=300;var e=this;this.view.addEventListener("scroll",function(t){e.handleScroll(t)},!1),this.view.addEventListener("mouseup",function(t){e.handleMouseUp(t)},!1),this.view.addEventListener("keydown",function(t){e.handleKeyDown(t)},!1)},Y.ext("twaver.controls.ListBaseInteraction",Object,{handleMouseUp:function(t){var e=this.listBase,i=this;t.target!==e._currentEditor&&t.target.parentNode!==e._currentEditor&&(i.clickTimer?(clearTimeout(i.clickTimer),i.clickTimer=0,e._handleDoubleClick(t)):(e._handleClick(t),i.clickTimer=setTimeout(function(){clearTimeout(i.clickTimer),i.clickTimer=0},300)))},handleKeyDown:function(t){var e,i,n,o=this.listBase;o._currentEditor||(Y.isCtrlDown(t)&&65==t.keyCode?(o.isKeyboardSelectEnabled()&&0<o.selectAll().size()&&o.fireInteractionEvent({kind:"selectAll"}),m.preventDefault(t)):46==t.keyCode?(o.isKeyboardRemoveEnabled()&&o.removeSelection()&&o.fireInteractionEvent({kind:"removeElement"}),m.preventDefault(t)):o.isCheckMode()||38!==t.keyCode&&40!==t.keyCode&&37!==t.keyCode&&39!==t.keyCode?Y.showVersion(t):(e=o.getSelectionModel().getLastData())?38===t.keyCode||40===t.keyCode?(i=o.getRowDatas(),0<=(n=o.getRowIndexByData(e))&&(38===t.keyCode?0!==n&&(e=i.get(n-1),o.getSelectionModel().setSelection(e)):n!==i.size()-1&&(e=i.get(n+1),o.getSelectionModel().setSelection(e)))):!o.expand||37!==t.keyCode&&39!==t.keyCode||e.hasChildren()&&(37===t.keyCode?o.collapse(e):o.expand(e)):0<o.getRowDatas().size()&&(e=o.getRowDatas().get(0),o.getSelectionModel().setSelection(e)))},handleScroll:function(t){this.listBase.invalidate()}}),x.controls.ListBaseTouchInteraction=function(t){this.listBase=t,this.view=t._view,m.addEventListener("touchstart","handleTouchstart",this.view,this)},Y.ext("twaver.controls.ListBaseTouchInteraction",Object,{handleTouchstart:function(t){m.preventDefault(t),this.startPoint=this.lastPoint=this.listBase.getLogicalPoint(t),m.addEventListener("touchmove","handleTouchmove",this.view,this),m.addEventListener("touchend","handleTouchend",this.view,this),lt.isMultiTouch(t)&&(this.distance=lt.getDistance(t),this.zoom=this.listBase._zoom)},handleTouchmove:function(t){m.preventDefault(t);var e,i,n=this.listBase.getLogicalPoint(t);b.getDistance(this.startPoint,n)<20||(this.moved||(this.moved=!0),lt.isSingleTouch(t)?this.lastPoint&&(e=this.lastPoint.x-n.x,i=this.lastPoint.y-n.y,n=this.listBase.panByOffset(e,i),this.listBase.invalidate(),this.lastPoint.x-=e-n.x,this.lastPoint.y-=i-n.y):this.distance&&(t=lt.getDistance(t)/this.distance,this.listBase.setZoom(this.zoom*t,!1)))},handleTouchend:function(t){m.preventDefault(t),this.moved||t.target===this.listBase._currentEditor||t.target.parentNode===this.listBase._currentEditor||this.listBase._handleClick(t),delete this.startPoint,delete this.lastPoint,delete this.moved,delete this.distance,delete this.zoom,m.removeEventListener("touchmove",this.view,this),m.removeEventListener("touchend",this.view,this)}}),x.controls.ListBaseMSTouchInteraction=function(t){x.controls.ListBaseMSTouchInteraction.superClass.constructor.apply(this,arguments),this._pointerMap={},this._pointerIdArray=[],m.addEventListener("MSPointerDown","handleTouchstart",this.view,this),m.addEventListener("MSPointerMove","handleTouchmove",this.view,this),m.addEventListener("MSPointerUp","handleTouchend",this.view,this),m.addEventListener("MSPointerCancel","handleTouchend",this.view,this),this.superHandleMouseDown=x.controls.ListBaseMSTouchInteraction.superClass.handleMouseDown},Y.ext("twaver.controls.ListBaseMSTouchInteraction",x.controls.ListBaseInteraction,{handleMouseDown:function(t){},handleTouchstart:function(t){t.isPrimary&&0<this._pointerIdArray.length&&(this._pointerMap={},this._pointerIdArray=[]),this._pointerMap[t.pointerId]||null==this.listBase.getLogicalPoint(t)||(this._pointerIdArray.push(t.pointerId),this._pointerMap[t.pointerId]=t),1==this._pointerIdArray.length&&t.pointerType==t.MSPOINTER_TYPE_MOUSE&&this.superHandleMouseDown(t),1==this._pointerIdArray.length?(this._startTouchPoint=this.listBase.getLogicalPoint(t),this._startTouchTime=new Date):2==this._pointerIdArray.length&&(this._distance=this._getDistance(),this._zoom=this.listBase.getZoom())},handleTouchmove:function(t){var e,i;null==this._startTouchPoint||0==this._pointerIdArray.length||!this._pointerMap[t.pointerId]||b.getDistance({x:this._pointerMap[t.pointerId].pageX,y:this._pointerMap[t.pointerId].pageY},{x:t.pageX,y:t.pageY})<=10||(this._pointerMap[t.pointerId]=t,2==this._pointerIdArray.length?(e=this._getDistance()/this._distance,this.listBase.setZoom(this._zoom*e,!1)):1==this._pointerIdArray.length&&t.pointerType!=t.MSPOINTER_TYPE_MOUSE&&(!this._startTouchPoint||null!=(i=this.listBase.getLogicalPoint(t))&&(e=this._startTouchPoint.x-i.x,t=this._startTouchPoint.y-i.y,i=this.listBase.panByOffset(e,t),this.listBase.invalidate(),this._startTouchPoint.x-=e-i.x,this._startTouchPoint.y-=t-i.y)))},handleTouchend:function(t){var e;!this._startTouchPoint||1!=this._pointerIdArray.length||t.pointerType==t.MSPOINTER_TYPE_MOUSE||(e=this.listBase.getLogicalPoint(t))&&(new Date).getTime()-this._startTouchTime.getTime()<=500&&b.getDistance(this._startTouchPoint,e)<=20&&this.superHandleMouseDown(t),this._pointerMap={},this._pointerIdArray=[]},_getDistance:function(){return b.getDistance({x:this._pointerMap[this._pointerIdArray[0]].pageX,y:this._pointerMap[this._pointerIdArray[0]].pageY},{x:this._pointerMap[this._pointerIdArray[1]].pageX,y:this._pointerMap[this._pointerIdArray[1]].pageY})}}),x.controls.Tree=function(t){this._interactionDispatcher=new x.EventDispatcher,this._initTree(t),x.controls.Tree.superClass.constructor.apply(this,arguments)},Y.ext("twaver.controls.Tree",x.controls.ListBase,{__tree:1,__accessor:["rootData","sortFunction","visibleFunction","indent","rowHeight","rowLineWidth","rowLineColor","expandIcon","collapseIcon","uncheckableStyle","lineType","lineColor","lineThickness","lineAlpha","lineDash"],__bool:["rootVisible","makeVisibleOnSelected","keyboardRemoveEnabled","keyboardSelectEnabled"],_checkMode:!1,_indent:ye.TREE_INDENT,_rowHeight:ye.TREE_ROW_HEIGHT,_rowLineWidth:ye.TREE_ROW_LINE_WIDTH,_rowLineColor:ye.TREE_ROW_LINE_COLOR,_makeVisibleOnSelected:ye.TREE_MAKE_VISIBLE_ON_SELECTED,_keyboardRemoveEnabled:ye.TREE_KEYBOARD_REMOVE_ENABLED,_keyboardSelectEnabled:ye.TREE_KEYBOARD_SELECT_ENABLED,_expandIcon:ye.TREE_EXPAND_ICON,_collapseIcon:ye.TREE_COLLAPSE_ICON,_uncheckableStyle:"none",_lineType:ye.TREE_LINE_TYPE,_lineColor:ye.TREE_LINE_COLOR,_lineThickness:ye.TREE_LINE_THICKNESS,_lineAlpha:ye.TREE_LINE_ALPHA,_lineDash:ye.TREE_LINE_DASH,getCheckMode:function(){return this._checkMode},setCheckMode:function(t){delete this._focusedRow;var e=this._checkMode;this._checkMode=t,this.firePropertyChange("checkMode",e,t)},renderData:function(t,e,i,n){this._renderTree(t,e,i,n)},getToolTip:function(t){return t.getToolTip()||t.getName()}}),x.controls.Table=function(t){this._checkColumn=new x.Column,this._checkColumn.setName("check"),this._checkColumn.setEditable(!0),this._checkColumn.setWidth(40),this._checkColumn.setHorizontalAlign("center"),this._checkColumn.renderCell=this.renderCheckCell;var i=this;this._checkColumn.getValue=function(t,e){return i.isSelected(t)},x.controls.Table.superClass.constructor.apply(this,arguments)},Y.ext("twaver.controls.Table",x.controls.TableBase,{__accessor:["rowHeight","rowLineWidth","rowLineColor","columnLineWidth","columnLineColor","sortFunction","visibleFunction","sortColumn"],__bool:["editable","makeVisibleOnSelected","keyboardRemoveEnabled","keyboardSelectEnabled"],_editable:ye.TABLE_EDITABLE,_rowHeight:ye.TABLE_ROW_HEIGHT,_rowLineWidth:ye.TABLE_ROW_LINE_WIDTH,_rowLineColor:ye.TABLE_ROW_LINE_COLOR,_columnLineWidth:ye.TABLE_COLUMN_LINE_WIDTH,_columnLineColor:ye.TABLE_COLUMN_LINE_COLOR,_makeVisibleOnSelected:ye.TABLE_MAKE_VISIBLE_ON_SELECTED,_keyboardRemoveEnabled:ye.TABLE_KEYBOARD_REMOVE_ENABLED,_keyboardSelectEnabled:ye.TABLE_KEYBOARD_SELECT_ENABLED,getCheckColumn:function(){return this._checkColumn},isCheckMode:function(){return this._columnBox.contains(this._checkColumn)},setCheckMode:function(t){t!==this.isCheckMode()&&(delete this._focusedRow,t?this._columnBox.add(this._checkColumn,0):this._columnBox.remove(this._checkColumn),this.firePropertyChange("checkMode",!t,t))},renderCheckCell:function(t){var e=t.view._booleanPool.get();e.disabled=!1,e.type="checkbox",e.style.margin="0px 2px",e.style.verticalAlign="middle",e.checked=t.selected;var i=t.div;i.appendChild(e),""===i.style.textAlign&&(i.style.textAlign="center"),e._checkData=t.data}}),x.controls.TableHeader=function(t){x.controls.TableHeader.superClass.constructor.apply(this,arguments),this._invalidateScroll=!1,this._invalidateDisplay=!1,this._divPool=new x.Pool("div"),this._imagePool=new x.Pool("img"),this._textPool=new x.Pool("span"),this._resizePool=new x.Pool("div"),this._pools.add(this._divPool),this._pools.add(this._imagePool),this._pools.add(this._textPool),this._pools.add(this._resizePool),this._table=t,this._tableView=t.getView(),this._columnBox=t.getColumnBox(),this._columnBox.addDataBoxChangeListener(this.handleColumnBoxChange,this),this._columnBox.addDataPropertyChangeListener(this.handleColumnPropertyChange,this),this._columnBox.addHierarchyChangeListener(this.handleColumnHierarchyChange,this);var e=this;t.getView().addEventListener("scroll",function(t){e.invalidateScroll()},!1),t.addPropertyChangeListener(function(t){e.invalidateDisplay()},this),this._view=m.createView("hidden"),this._view.tabIndex=-1,this._view.style.background=ye.TABLEHEADER_BACKGROUND,this._rootDiv=m.createDiv(),this._view.appendChild(this._rootDiv),this.invalidateDisplay(),g.isTouchable&&new x.controls.TableHeaderTouchInteraction(this),new x.controls.TableHeaderInteraction(this)},Y.ext("twaver.controls.TableHeader",x.controls.ControlBase,{__accessor:["height","moveBackground","insertBackground","columnLineColor","resizeTolerance","sortDescIcon","sortAscIcon","sortIconPosition"],_height:ye.TABLEHEADER_HEIGHT,_moveBackground:ye.TABLEHEADER_MOVE_BACKGROUND,_insertBackground:ye.TABLEHEADER_INSERT_BACKGROUND,_columnLineColor:ye.TABLEHEADER_COLUMN_LINE_COLOR,_resizeTolerance:ye.TABLEHEADER_RESIZE_TOLERANCE,_sortDescIcon:ye.TABLEHEADER_SORT_DESC_ICON,_sortAscIcon:ye.TABLEHEADER_SORT_ASC_ICON,_sortIconPosition:ye.TABLEHEADER_SORT_ICON_POSITION,getRootDiv:function(){return this._rootDiv},handleColumnBoxChange:function(t){this.invalidateDisplay()},handleColumnPropertyChange:function(t){this.invalidateDisplay()},handleColumnHierarchyChange:function(t){this.invalidateDisplay()},onPropertyChanged:function(t){this.invalidateDisplay()},invalidateScroll:function(){this._invalidateScroll||(this._invalidateScroll=!0,this.invalidate())},invalidateDisplay:function(){this._invalidateDisplay||(this._invalidateDisplay=!0,this._invalidateScroll=!0,this.invalidate())},validate:function(){this._invalidate&&(this._invalidate=!1,this._invalidateDisplay&&(this._invalidateDisplay=!1,this.validateDisplay()),this._invalidateScroll&&(this._invalidateScroll=!1,this._rootDiv.style.left=-this._tableView.scrollLeft+"px"))},validateDisplay:function(){m.release(this._rootDiv);for(var t=this._table.getZoom(),e=this.getHeight()+"px",i=this.getHeight()-2+"px",n=this._table.getColumnBox().getRoots(),o=n.size(),s=0,a=this._table._columnLineWidth*t,r=0;r<o;r++){var h,l,c,u,d=n.get(r);d.isVisible()&&((h=d.getWidth()*t)<0&&(h=0),l=Math.min(a,h),(c=this._divPool.get())._column=d,(u=c.style).position="absolute",u.whiteSpace="nowrap",u.lineHeight=i,u.overflow="hidden",u.textOverflow="ellipsis",u.backgroundPosition=this._sortIconPosition||"",u.backgroundRepeat="no-repeat",u.backgroundImage="",u.textAlign=d.getHorizontalAlign(),u.borderStyle="solid",u.borderWidth="0px",u.borderRightWidth=l+"px",u.borderRightColor=this._columnLineColor,0===r?(u.borderLeftWidth=l+"px",u.borderLeftColor=this._columnLineColor):u.borderLeftWidth="0px",u.left=s+"px",u.width=h-l+"px",u.height=e,c._x=s,c._width=h-l,this._rootDiv.insertBefore(c,this._rootDiv.firstChild),this.renderColumn(c,d),this.onColumnRendered(c,d),s+=h,d.isResizable()&&((c=this._resizePool.get())._resizeColumn=d,(u=c.style).position="absolute",u.backgroundColor="white",u.opacity=0,u.left=s-l-this._resizeTolerance+"px",u.width=l+2*this._resizeTolerance+"px",u.height=e,this._rootDiv.appendChild(c)))}this._pools.forEach(function(t){t.clear()}),this._rootDiv.style.width=s+"px",this._rootDiv.style.height=e},renderColumn:function(t,e){var i,n;e.renderHeader?e.renderHeader(t):((i=this._textPool.get()).style.whiteSpace="nowrap",i.style.verticalAlign="middle",i.style.padding="1px 2px 1px 2px",i.innerHTML=e.getName()?e.getName():e.getPropertyName(),i.setAttribute("title",i.innerHTML),t.appendChild(i),g.isOpera&&((n=t.cloneNode(!1)).style.left="0px",n.style.top="0px",n.style.opacity=0,t.appendChild(n))),this._table.getSortColumn()===e&&e.isSortable()&&(n="asc"===e.getSortDirection()?this._sortAscIcon:this._sortDescIcon,e=Y.getImageSrc(n),this._sortIconPosition&&""!==this._sortIconPosition?t.style.backgroundImage="url("+e+")":((n=this._imagePool.get()).setAttribute("src",e),n.style.verticalAlign="middle",t.appendChild(n)))},onColumnRendered:function(t,e){}}),x.controls.TableHeaderInteraction=function(t){this.header=t,this.table=t._table,this.view=t._view;var e=this;this.view.addEventListener("mousedown",function(t){e.handleMouseDown(t)},!1),this.view.addEventListener("mousemove",function(t){e.handleMouseMove(t)},!1)},Y.ext("twaver.controls.TableHeaderInteraction",Object,{handleMouseDown:function(t){0===t.button&&(this.movableDiv?this.handleMouseUp(t):(this.resizeColumn=t.target._resizeColumn,this.resizeColumn||(this.movableDiv=this.getMovableDivAt(t)),this.changeCursor(t),this._startClient=m.getClientPoint(t),this.lastX=this.getX(t),this._startLogicalX=this.lastX,m.handle_mousedown(this,t)))},changeCursor:function(t){var e="";t.target._resizeColumn?e="ew-resize":(t=this.getColumnAt(t))&&(t.isMovable()||t.isSortable())&&(e="pointer"),this.view.style.cursor=e},handleMouseMove:function(t){if(null!=this.lastX){if(m.target===this){var e=this._startLogicalX+t.clientX-this._startClient.x;if(this.resizeColumn){if(null!=this.stopX){if(e<this.stopX)return;delete this.stopX}var i=this.resizeColumn.getWidth()+(e-this.lastX)/this.table.getZoom();i<10&&(i=10,this.stopX=e),this.resizeColumn.setWidth(i),this.lastX=e}else if(this.movableDiv){i=e-this.lastX;if(!this.cloneDiv){if(Math.abs(i)<3)return;this.cloneDiv=this.movableDiv.cloneNode(!0),this.cloneDiv._x=this.movableDiv._x,this.cloneDiv.style.background=this.header.getMoveBackground(),this.insertDiv=m.createDiv(),this.insertDiv.style.width="1px",this.insertDiv.style.height=this.cloneDiv.style.height,this.insertDiv.style.background=this.header.getInsertBackground(),this.movableDiv.parentNode.appendChild(this.cloneDiv),this.movableDiv.parentNode.appendChild(this.insertDiv)}i=this.cloneDiv._x+i;this.cloneDiv.style.left=i+"px",this.cloneDiv._x=i,this.lastX=e,this.columnInfo=this.getColumnInfoAt(t),this.columnInfo&&(this.insertDiv.style.left=this.columnInfo.position)}}}else this.changeCursor(t)},handleMouseUp:function(t){var e,i;0===t.button&&(this.resizeColumn||(this.movableDiv&&this.columnInfo?(e=this.movableDiv._column,i=this.columnInfo.index,this.table.getColumnBox().moveTo(e,i)):(e=this.getColumnAt(t))&&e.isSortable()&&(t=e.getSortDirection(),this.table.getSortColumn()===e?("desc"===t&&this.table.setSortColumn(null),e.setSortDirection("asc"===t?"desc":"asc")):this.table.setSortColumn(e),this.table.onColumnSorted(this.table.getSortColumn()))),this.clear())},clear:function(){this.view.style.cursor="",this.cloneDiv&&this.movableDiv&&this.movableDiv.parentNode.removeChild(this.cloneDiv),this.insertDiv&&this.movableDiv&&this.movableDiv.parentNode.removeChild(this.insertDiv),delete this.movableDiv,delete this.columnInfo,delete this.insertDiv,delete this.cloneDiv,delete this.resizeColumn,delete this.stopX,delete this.lastX,delete this._startClient,delete this._startLogicalX},getColumnAt:function(t){var e;for(t=t.target;t&&t!==this.view&&!(e=t._column);)t=t.parentNode;return e},getMovableDivAt:function(t){var e;for(t=t.target;t&&t!==this.view&&!(e=t._column);)t=t.parentNode;return e&&e.isMovable()?t:null},getX:function(t){t=m.getLogicalPoint(this.view,t);return t?t.x:null},getColumnInfoAt:function(t){for(var e=this._startLogicalX+t.clientX-this._startClient.x+this.table.getView().scrollLeft,i=this.table.getColumnBox().getRoots(),n=i.size(),o=this.table.getZoom(),s=0,a=!1,r=0;r<n;r++){var h=i.get(r);if(h===this.movableDiv._column&&(a=!0),h.isVisible()){var l=h.getWidth()*o;if(!(l<=0)){if(s<=e&&e<=s+l){var c=e<s+l/2;!a||h===this.movableDiv._column&&c||r--;var u=c?s:s+l;return{index:c?Math.max(0,r):Math.min(r+1,n),column:h,position:(u=Math.max(0,u-1))+"px"}}s+=l}}}return this.columnInfo}}),x.controls.TableHeaderTouchInteraction=function(t){this.header=t,this.table=t._table,this.view=t._view,m.addEventListener("touchstart","handleTouchstart",this.view,this)},Y.ext("twaver.controls.TableHeaderTouchInteraction",Object,{handleTouchstart:function(t){m.preventDefault(t),this.movableDiv?this.handleTouchend(t):(this.resizeColumn=t.target._resizeColumn,this.resizeColumn||(this.movableDiv=this.getMovableDivAt(t)),this.lastX=this.getX(t),m.addEventListener("touchmove","handleTouchmove",this.view,this),m.addEventListener("touchend","handleTouchend",this.view,this))},handleTouchmove:function(t){if(m.preventDefault(t),null!=this.lastX)if(this.resizeColumn){if(i=this.getX(t),null!=this.stopX){if(i<this.stopX)return;delete this.stopX}var e=this.resizeColumn.getWidth()+(i-this.lastX)/this.table.getZoom();e<0&&(e=0,this.stopX=i),this.resizeColumn.setWidth(e),this.lastX=i}else if(this.movableDiv){var i,e=(i=this.getX(t))-this.lastX;if(!this.cloneDiv){if(Math.abs(e)<3)return;this.cloneDiv=this.movableDiv.cloneNode(!0),this.cloneDiv._x=this.movableDiv._x,this.cloneDiv.style.background=this.header.getMoveBackground(),this.insertDiv=m.createDiv(),this.insertDiv.style.width="1px",this.insertDiv.style.height=this.cloneDiv.style.height,this.insertDiv.style.background=this.header.getInsertBackground(),this.movableDiv.parentNode.appendChild(this.cloneDiv),this.movableDiv.parentNode.appendChild(this.insertDiv)}e=this.cloneDiv._x+e;this.cloneDiv.style.left=e+"px",this.cloneDiv._x=e,this.lastX=i,this.columnInfo=this.getColumnInfoAt(t),this.columnInfo&&(this.insertDiv.style.left=this.columnInfo.position)}},handleTouchend:function(t){var e,i;m.preventDefault(t),this.resizeColumn||(this.movableDiv&&this.columnInfo?(e=this.movableDiv._column,i=this.columnInfo.index,this.table.getColumnBox().moveTo(e,i)):(e=this.getColumnAt(t))&&e.isSortable()&&(t=e.getSortDirection(),this.table.getSortColumn()===e?("desc"===t&&this.table.setSortColumn(null),e.setSortDirection("asc"===t?"desc":"asc")):this.table.setSortColumn(e))),this.clear(),m.removeEventListener("touchmove",this.view,this),m.removeEventListener("touchend",this.view,this)},clear:function(){this.cloneDiv&&this.movableDiv&&this.movableDiv.parentNode.removeChild(this.cloneDiv),this.insertDiv&&this.movableDiv&&this.movableDiv.parentNode.removeChild(this.insertDiv),delete this.movableDiv,delete this.columnInfo,delete this.insertDiv,delete this.cloneDiv,delete this.resizeColumn,delete this.stopX,delete this.lastX},getColumnAt:function(t){var e;for(t=t.target;t&&t!==this.view&&!(e=t._column);)t=t.parentNode;return e},getMovableDivAt:function(t){var e;for(t=t.target;t&&t!==this.view&&!(e=t._column);)t=t.parentNode;return e&&e.isMovable()?t:null},getX:function(t){t=m.getLogicalPoint(this.view,t);return t?t.x:null},getColumnInfoAt:function(t){for(var e=this.getX(t)+this.table.getView().scrollLeft,i=this.table.getColumnBox().getRoots(),n=i.size(),o=this.table.getZoom(),s=0,a=!1,r=0;r<n;r++){var h=i.get(r);if(h===this.movableDiv._column&&(a=!0),h.isVisible()){var l=h.getWidth()*o;if(!(l<=0)){if(s<=e&&e<=s+l){var c=e<s+l/2;!a||h===this.movableDiv._column&&c||r--;var u=c?s:s+l;return{index:c?Math.max(0,r):Math.min(r+1,n),column:h,position:(u=Math.max(0,u-1))+"px"}}s+=l}}}return this.columnInfo}}),x.controls.TablePane=function(t,e){x.controls.TablePane.superClass.constructor.apply(this,arguments),this.invalidate(),this._table=t,this._tableHeader=e||new x.controls.TableHeader(t),this._view=m.createView("hidden",!0),this._view.tabIndex=-1,this._view.appendChild(this._tableHeader.getView()),this._view.appendChild(this._table.getView());var i=this;this._tableHeader.addPropertyChangeListener(function(t){"height"===t.property&&i.invalidate()})},Y.ext("twaver.controls.TablePane",x.controls.ControlBase,{onPropertyChanged:function(t){this.invalidate()},getTable:function(){return this._table},getTableHeader:function(){return this._tableHeader},validateImpl:function(){var t=this._view.offsetWidth,e=this._view.offsetHeight,i=this._tableHeader.getHeight();this._tableHeader.adjustBounds({x:0,y:0,width:t,height:i}),this._table.adjustBounds({x:0,y:i,width:t,height:Math.max(0,e-i)})}}),x.controls.TreeTable=function(t){this._treeColumn=new x.Column,this._treeColumn.setName("tree"),this._treeColumn.setWidth(120),this._treeColumn.renderCell=this.renderTreeCell,this._treeColumn.getValue=this.getTreeValue,this._treeColumn.setValue=this.setTreeValue,this._initTree(t),x.controls.TreeTable.superClass.constructor.apply(this,arguments),this._columnBox.add(this._treeColumn)},Y.ext("twaver.controls.TreeTable",x.controls.TableBase,{__tree:1,__accessor:["sortFunction","visibleFunction","checkMode","rootData","sortColumn","indent","rowHeight","rowLineWidth","rowLineColor","columnLineWidth","columnLineColor","expandIcon","collapseIcon","uncheckableStyle","lineType","lineColor","lineThickness","lineAlpha","lineDash"],__bool:["editable","rootVisible","makeVisibleOnSelected","keyboardRemoveEnabled","keyboardSelectEnabled"],_editable:ye.TREETABLE_EDITABLE,_indent:ye.TREETABLE_INDENT,_rowHeight:ye.TREETABLE_ROW_HEIGHT,_rowLineWidth:ye.TREETABLE_ROW_LINE_WIDTH,_rowLineColor:ye.TREETABLE_ROW_LINE_COLOR,_columnLineWidth:ye.TREETABLE_COLUMN_LINE_WIDTH,_columnLineColor:ye.TREETABLE_COLUMN_LINE_COLOR,_makeVisibleOnSelected:ye.TREETABLE_MAKE_VISIBLE_ON_SELECTED,_keyboardRemoveEnabled:ye.TREETABLE_KEYBOARD_REMOVE_ENABLED,_keyboardSelectEnabled:ye.TREETABLE_KEYBOARD_SELECT_ENABLED,_expandIcon:ye.TREETABLE_EXPAND_ICON,_collapseIcon:ye.TREETABLE_COLLAPSE_ICON,_lineType:ye.TREE_LINE_TYPE,_lineColor:ye.TREE_LINE_COLOR,_lineThickness:ye.TREE_LINE_THICKNESS,_lineAlpha:ye.TREE_LINE_ALPHA,_lineDash:ye.TREE_LINE_DASH,getTreeColumn:function(){return this._treeColumn},renderTreeCell:function(t){t.view._renderTree(t.div,t.data,t.rowIndex,t.selected)},getTreeValue:function(t,e){return e.getLabel(t)},setTreeValue:function(t,e,i){t.setName(e)}}),x.controls.PropertySheet=function(t){x.controls.PropertySheet.superClass.constructor.apply(this,arguments),this._currentRowIndex=-1,this._currentEditor=null,this._currentData=null,this._invalidate=!1,this._resizeDiv=m.createDiv(),this._resizeDiv.style.backgroundColor="white",this._resizeDiv.style.opacity=0,this._resizeDiv.style.top="0px",this._categoryList=new ie,this._categoryMap={},this._rowList=new ie,this._propertyBox=new x.PropertyBox,this._propertyBox.addDataBoxChangeListener(this.invalidatePropertyBox,this),this._propertyBox.addDataPropertyChangeListener(this.invalidatePropertyBox,this),this._propertyBox.addHierarchyChangeListener(this.invalidatePropertyBox,this),this.__divPool=new x.Pool("div",2),this.__cellPool=new x.Pool("div",2),this.__imagePool=new x.Pool("img",2),this.__textPool=new x.Pool("span",2),this._stringPool=new x.Pool("span",2),this._booleanPool=new x.Pool("input",2),this._colorPool=new x.Pool("div",2),this._pools.add(this.__divPool),this._pools.add(this.__cellPool),this._pools.add(this.__imagePool),this._pools.add(this.__textPool),this._pools.add(this._stringPool),this._pools.add(this._booleanPool),this._pools.add(this._colorPool),this._view=m.createView("auto"),this._rootDiv=m.createDiv(),this._dataDiv=m.createDiv(),this._view.appendChild(this._rootDiv),this._rootDiv.appendChild(this._dataDiv),this.setDataBox(t||new x.DataBox);var e=this;this._view.addEventListener("change",function(t){e.handleChange(t)},!1),g.isTouchable?g.isMSTouchable?new x.controls.PropertySheetMSTouchInteraction(this):(new x.controls.PropertySheetTouchInteraction(this),new x.controls.PropertySheetInteraction(this)):new x.controls.PropertySheetInteraction(this)},Y.ext("twaver.controls.PropertySheet",x.controls.View,{__accessor:["indent","rowHeight","sumWidth","propertyNameWidth","propertyNameHorizontalAlign","autoAdjustable","rowLineWidth","columnLineWidth","borderColor","categorizable","resizeTolerance","editable","selectColor","expandIcon","collapseIcon","sortFunction","visibleFunction"],_autoAdjustable:ye.PROPERTYSHEET_AUTO_ADJUSTABLE,_selectColor:ye.SELECT_COLOR,_categorizable:ye.PROPERTYSHEET_CATEGORIZABLE,_editable:ye.PROPERTYSHEET_EDITABLE,_propertyNameWidth:ye.PROPERTYSHEET_PROPERTY_NAME_WIDTH,_propertyNameHorizontalAlign:ye.PROPERTYSHEET_PROPERTY_NAME_HORIZONTAL_ALIGN,_sumWidth:ye.PROPERTYSHEET_SUM_WIDTH,_indent:ye.PROPERTYSHEET_INDENT,_rowHeight:ye.PROPERTYSHEET_ROW_HEIGHT,_rowLineWidth:ye.PROPERTYSHEET_ROW_LINE_WIDTH,_columnLineWidth:ye.PROPERTYSHEET_COLUMN_LINE_WIDTH,_borderColor:ye.PROPERTYSHEET_BORDER_COLOR,_expandIcon:ye.PROPERTYSHEET_EXPAND_ICON,_collapseIcon:ye.PROPERTYSHEET_COLLAPSE_ICON,_resizeTolerance:ye.PROPERTYSHEET_RESIZE_TOLERANCE,getPropertyBox:function(){return this._propertyBox},getCurrentData:function(){return this._currentData},getDataDiv:function(){return this._dataDiv},getDataBox:function(){return this._box},setDataBox:function(t){if(!t)throw"DataBox can not be null";var e;this._box!==t&&((e=this._box)&&(e.removeDataPropertyChangeListener(this.handlePropertyChange,this),this._selectionModel||e.getSelectionModel().removeSelectionChangeListener(this.handleSelectionChange,this)),this._box=t,this._box.addDataPropertyChangeListener(this.handlePropertyChange,this),this._selectionModel?this._selectionModel._setDataBox(t):this._box.getSelectionModel().addSelectionChangeListener(this.handleSelectionChange,this),this.invalidate(),this.firePropertyChange("dataBox",e,this._box))},invalidatePropertyBox:function(){this._isValidating||this.invalidate()},onPropertyChanged:function(t){"zoom"!==t.property&&this.invalidate()},isVisible:function(t){return!(t.isVisible&&!t.isVisible(this._currentData,this))&&(!this._visibleFunction||this._visibleFunction(t))},handlePropertyChange:function(t){this._currentData===t.source&&this.invalidate()},handleSelectionChange:function(t){this._currentData!==this.getSelectionModel().getLastData()&&(this._currentRowIndex=-1,this.invalidate())},isExpanded:function(t){if(!t)return!0;t=this._categoryMap[t];return t?t.isExpanded:ye.PROPERTYSHEET_EXPAND_CATEGORY},expand:function(t){!t||(t=this._categoryMap[t])&&!t.isExpanded&&(t.isExpanded=!0,this.invalidate())},expandAll:function(){for(var t in this._categoryMap){t=this._categoryMap[t];t&&(t.isExpanded=!0)}this.invalidate()},collapse:function(t){!t||(t=this._categoryMap[t])&&t.isExpanded&&(t.isExpanded=!1,this.invalidate())},collapseAll:function(){for(var t in this._categoryMap){t=this._categoryMap[t];t&&(t.isExpanded=!1)}this.invalidate()},getCategoryName:function(t){if(!this.isCategorizable())return"null";t=t.getCategoryName();return t||"null"},validateModel:function(){this._rowList.clear(),this._categoryList.clear();for(var t,e,i,n={},o=new ie,s=this._currentData?this._propertyBox.getRoots():new ie,a=s.size(),r=0;r<a;r++)i=s.get(r),this.isVisible(i)&&(o.add(i),n[e=this.getCategoryName(i)]||(this._categoryList.add(e),n[e]={isExpanded:this.isExpanded(e),properties:new ie}));for(this._sortFunction&&o.sort(this._sortFunction),this._categoryMap=n,a=o.size(),r=0;r<this._categoryList.size();r++){"null"!==(e=this._categoryList.get(r))&&this._rowList.add(e);var h=n[e];if(h.isExpanded)for(t=0;t<a;t++)i=o.get(t),this.getCategoryName(i)===e&&(h.properties.add(i),this._rowList.add({view:this,data:this._currentData,property:i,value:this._currentData?this.getValue(this._currentData,i):null}))}},adjustWidth:function(){var t=this._view.offsetWidth,e=this._view.offsetHeight;t<=this._indent||e<=0||(t-=this._indent,this._rowList.size()*this._rowHeight>e&&(t-=ye.SCROLL_BAR_WIDTH)<=0||(0===this._sumWidth||this._propertyNameWidth>this._sumWidth?this._propertyNameWidth=t/2:this._propertyNameWidth=t*(this._propertyNameWidth/this._sumWidth),this._sumWidth=t,this._view.style.overflowX="hidden",this._view.style.overflowY="auto"))},validateDisplay:function(){var t=this._rowList.size(),e=this._borderColor,i=this._indent,n=this._rowHeight,o=this._propertyNameWidth,s=Math.max(0,this._sumWidth-o),a=this._rowLineWidth,r=this._columnLineWidth,h=n-a+"px",l=n-a-2+"px",c=i+"px",u=o-r+"px",d=s-r+"px",_=o+s+"px",g=a+"px",f=r+"px",A=o+"px",p=this._dataDiv;(x=p.style).height=t*n+"px",x.width=i+o+s+"px";var m=this.__divPool.get();(x=m.style).position="absolute",x.left="0px",x.top="0px",x.width=c,x.height=p.style.height,x.borderWidth="0px",x.backgroundColor=e,p.appendChild(m);for(var v=0;v<t;v++){var y,w,x,E=this._rowList.get(v),C=v*n+"px",T=this.__divPool.get();(x=(E.rowDiv=T).style).position="absolute",x.whiteSpace="nowrap",x.overflow="hidden",x.textOverflow="ellipsis",x.left=c,x.top=C,x.width=_,x.height=h,x.lineHeight=l,x.borderStyle="solid",x.borderWidth="0px",x.borderBottomWidth=g,x.borderBottomColor=e,p.appendChild(T),"string"==typeof E?(x.backgroundColor=e,(x=(m=this.__divPool.get()).style).position="absolute",x.left="0px",x.top=C,x.width=c,x.height=h,x.lineHeight=l,x.borderWidth="0px",p.appendChild(m),w=this.__imagePool.get(),y=this.isExpanded(E)?this._expandIcon:this._collapseIcon,w.setAttribute("src",Y.getImageSrc(y)),(x=w.style).verticalAlign="middle",w._expandData=E,m.appendChild(w),this.renderCategory(T,E),this.onCategoryRendered(T,E)):(y=E.property,w=this.__cellPool.get(),x=(E.nameRender=w).style,this._currentRowIndex===v&&(x.backgroundColor=this.getSelectColor()),x.position="absolute",x.verticalAlign="middle",x.textAlign=this._propertyNameHorizontalAlign,x.overflow="hidden",x.textOverflow="ellipsis",x.whiteSpace="nowrap",x.left="0px",x.top="0px",x.width=u,x.height=h,x.borderStyle="solid",x.borderWidth="0px",x.borderRightWidth=f,x.borderRightColor=e,T.appendChild(w),this.renderName(E),this.onNameRendered(E),w=this.__cellPool.get(),(x=(E.valueRender=w).style).position="absolute",x.verticalAlign="middle",x.textAlign=y.getHorizontalAlign(),x.whiteSpace="nowrap",x.overflow="hidden",x.textOverflow="ellipsis",x.left=A,x.top="0px",x.width=d,x.height=h,x.borderStyle="solid",x.borderWidth="0px",x.borderRightWidth=f,x.borderRightColor=e,T.appendChild(w),this.renderValue(E),this.onValueRendered(E))}(x=this._resizeDiv.style).left=i+o-r-this._resizeTolerance+"px",x.width=r+2*this._resizeTolerance+"px",x.height=p.style.height,p.appendChild(this._resizeDiv)},renderCategory:function(t,e){var i=this.__textPool.get(),n=i.style;n.fontWeight="bold",n.whiteSpace="nowrap",n.overflow="hidden",n.textOverflow="ellipsis",n.verticalAlign="middle",n.padding="1px 2px 1px 2px",i.innerHTML=e,i.setAttribute("title",e),t.appendChild(i)},onCategoryRendered:function(t,e){},renderName:function(t){var e,i;t.property.renderName?t.property.renderName(t):((i=(e=this.__textPool.get()).style).fontWeight="",i.whiteSpace="nowrap",i.verticalAlign="middle",i.padding="1px 2px 1px 2px",i=(i=t.property.getName())||t.property.getPropertyName(),e.innerHTML=i,e.setAttribute("title",i),t.nameRender.appendChild(e))},onNameRendered:function(t){},renderValue:function(t){var e,i,n=t.property;n.renderValue?n.renderValue(t):(e=t.value,(i=n.getEnumInfo(this._currentData))&&!Array.isArray(i)&&(e=i.map[e]),t.view.isCellEditable(t.data,n)&&(t.enumInfo=i,t.valueRender._editInfo=t),t.valueRender.innerHTML="",ct.render(n.getValueType(),e,t.valueRender,t.view,n.isInnerText()))},onValueRendered:function(t){},renderEditor:function(t){},onEditorRendered:function(t){},updateCurrentData:function(){this._currentData=this.getSelectionModel().getLastData()},validateImpl:function(){var t=this._view.scrollLeft,e=this._view.scrollTop;m.release(this._dataDiv),this.updateCurrentData(),this.validateModel(),this.isAutoAdjustable()&&this.adjustWidth(),this.validateDisplay(),this._pools.forEach(function(t){t.clear()}),this._view.scrollLeft!==t&&(this._view.scrollLeft=t),this._view.scrollTop!==e&&(this._view.scrollTop=e)},getValue:function(t,e){return t?e.getValue(t,this):null},setValue:function(t,e,i){t&&e.setValue(t,i,this)},isCellEditable:function(t,e){return!!t&&(this.isEditable()&&e.isEditable())},getRowIndexAt:function(t){t=this.getLogicalPoint(t);if(!t)return-1;t=parseInt(t.y/this._rowHeight);return 0<=t&&t<this._rowList.size()?t:-1},handleChange:function(t){this._isCommitting||this._isCanceling||this._isValidating||t.target._editInfo&&this.commitEditValue&&this.commitEditValue(t.target._editInfo,t.target)},commitEditValue:function(t,e){o="checkbox"===e.type?e.checked:e.value;var i=t.property,n=i.getValueType();if("int"===n&&"string"==typeof o)o=parseInt(o);else if("number"===n&&"string"==typeof o)o=parseFloat(o);else if("array.string"===n)o=o.split(",");else if("array.number"===n)for(var o,s=0,a=(o=o.split(",")).length;s<a;s++)o[s]=parseFloat(o[s]);else if("list.points"===n){for(var r=o.replace(/\]/g,"").replace(/\[/g,"").split(","),h=new x.List,s=0;s<r.length;s+=2)s+1>=r.length||h.add({x:parseInt(r[s]),y:parseInt(r[s+1])});o=h}e._rowInfo&&(e._rowInfo.value=o,this.renderValue(e._rowInfo)),this.setValue(t.data,i,o),x.Util.setFocus(this._view),this._currentEditor&&((i=this._currentEditor.parentNode)&&i.removeChild(this._currentEditor),delete this._currentEditor),delete this._isCommitting},cancelEditing:function(){var t;this._currentEditor&&((t=this._currentEditor.parentNode)&&t.removeChild(this._currentEditor),delete this._currentEditor,delete this._isCanceling)},getEditorValue:function(t){var i,e=t.valueRender._editInfo.property.getValueType(),t=t.valueRender._editInfo.value,n="";return"list.points"===e?(i=t._as||t).forEach(function(t,e){n+=e==i.length-1?"["+t.x+","+t.y+"]":"["+t.x+","+t.y+"],"}):n=t,n},updateCurrentRowIndex:function(t){var n,e,i=this._rowList.size(),o=this._currentRowIndex;(t=t<0||i<=t?-1:t)!==o&&(0<=o&&o<i&&(e=this._rowList.get(o)).nameRender&&(e.nameRender.style.backgroundColor=""),this._currentRowIndex=t),0<=t&&(e=this._rowList.get(t)).nameRender&&(e.nameRender.style.backgroundColor=this.getSelectColor(),this._currentEditor||e.valueRender&&e.valueRender._editInfo&&(o=e.valueRender._editInfo,(t=this.renderEditor&&this.renderEditor(e))?(this._currentEditor=t.view,null!=o.value&&(this._currentEditor.value=this.getEditorValue(e))):o.enumInfo?this._currentEditor=m.createSelect(o.enumInfo,o.value):(this._currentEditor=E.createElement("input"),null!=o.value&&(this._currentEditor.value=this.getEditorValue(e))),e.property&&e.property.renderEditor&&(t="function"==typeof e.property.renderEditor?e.property.renderEditor(this,e):e.property.renderEditor)&&(this._currentEditor=t),this._currentEditor&&(t&&t.onKeyDown?(n=t.onKeyDown)&&Array.isArray(n)&&this._currentEditor.addEventListener("keydown",function(t){for(var e=0;e<n.length;e++)if(n[e].combKey){var i=null;switch(n[e].combKey){case"ctrlKey":i=t.ctrlKey;break;case"shiftKey":i=t.shiftKey;break;case"altKey":i=t.altKey}t.keyCode===n[e].keyCode&&i&&n[e].handlerEvent&&n[e].handlerEvent(t)}else t.keyCode===n[e].keyCode&&n[e].handlerEvent&&n[e].handlerEvent(t)}):this._currentEditor.addEventListener("keydown",function(t){var e=t.target._editInfo.view;13===t.keyCode&&t.shiftKey||(13===t.keyCode?e._isCommitting||(e._isCommitting=!0,e.commitEditValue(t.target._editInfo,t.target)):27===t.keyCode&&(e._isCanceling=!0,e.cancelEditing()))},!1),this._currentEditor.addEventListener("blur",function(t){var e=t.target._editInfo.view;e._isCommitting||e._isCanceling||(e._isCommitting=!0,e.commitEditValue(t.target._editInfo,t.target))},!1),this._currentEditor.keepDefault=!0,this._currentEditor._rowInfo=e,this._currentEditor._editInfo=o,this._currentEditor.parentNode||((o=this._currentEditor.style).position="absolute",o.margin="0px",o.border="0px",o.padding="0px",o.left=this._indent+this._propertyNameWidth+"px",o.top=e.rowDiv.style.top,o.width=e.valueRender.style.width,o.height=e.valueRender.style.height,this._rootDiv.appendChild(this._currentEditor)),x.Util.setFocus(this._currentEditor),this.onEditorRendered&&this.onEditorRendered(e))))}}),x.controls.PropertySheetInteraction=function(t){this.sheet=t,this.view=t._view,this.resizeDiv=t._resizeDiv;var e=this;this.view.addEventListener("mousedown",function(t){0===t.button&&e.handleMouseDown(t)},!1),this.view.addEventListener("mousemove",function(t){e.handleMouseMove(t)},!1)},Y.ext("twaver.controls.PropertySheetInteraction",Object,{minGap:10,handleMouseDown:function(t){var e;t.target!==this.sheet._currentEditor&&t.target.parentNode!==this.sheet._currentEditor&&(this.sheet.isFocusOnClick()&&x.Util.setFocus(this.view),this.sheet._isValidating||(t.target._expandData?(e=t.target._expandData,this.sheet.isExpanded(e)?this.sheet.collapse(e):this.sheet.expand(e)):t.target===this.resizeDiv?(this.lastX=this.getX(t),m.handle_mousedown(this,t)):(this.sheet._currentEditor&&!this.sheet._isCommitting&&(this.sheet._isCommitting=!0,this.sheet.commitEditValue(this.sheet._currentEditor._editInfo,this.sheet._currentEditor)),t=this.sheet.getRowIndexAt(t),this.sheet.updateCurrentRowIndex(t))))},handleMouseMove:function(t){if(null!=this.lastX||m.target){if(m.target===this&&null!=this.lastX){var e=this.getX(t);if(null!=this.stopLeft){if(e<this.stopLeft)return;delete this.stopLeft}if(null!=this.stopRight){if(e>this.stopRight)return;delete this.stopRight}var i=this.sheet.getPropertyNameWidth()+(e-this.lastX);i<this.minGap?(i=this.minGap,this.stopLeft=e):i>this.sheet.getSumWidth()-this.minGap&&(i=this.sheet.getSumWidth()-this.minGap,this.stopRight=e),this.sheet.setPropertyNameWidth(i),this.lastX=e}}else this.changeCursor(t)},handleMouseUp:function(t){0===t.button&&(this.view.style.cursor="default",delete this.stopLeft,delete this.stopRight,delete this.lastX)},changeCursor:function(t){this.view.style.cursor=t.target===this.resizeDiv?"ew-resize":"default"},getX:function(t){return t.clientX/this.sheet.getZoom()}}),x.controls.PropertySheetTouchInteraction=function(t){this.sheet=t,this.view=t._view,this.resizeDiv=t._resizeDiv,m.addEventListener("touchstart","handleTouchstart",this.view,this)},Y.ext("twaver.controls.PropertySheetTouchInteraction",Object,{minGap:10,handleTouchstart:function(t){m.preventDefault(t),t.target!==this.sheet._currentEditor&&t.target.parentNode!==this.sheet._currentEditor&&(this.sheet.isFocusOnClick()&&x.Util.setFocus(this.view),this.sheet._isValidating||(t.target===this.resizeDiv&&(this.lastX=this.getX(t)),this.lastPoint=this.sheet.getLogicalPoint(t),lt.isMultiTouch(t)&&(this.distance=lt.getDistance(t),this.zoom=this.sheet.getZoom()),m.addEventListener("touchmove","handleTouchmove",this.view,this),m.addEventListener("touchend","handleTouchend",this.view,this)))},handleTouchmove:function(t){if(m.preventDefault(t),this.moved||(this.moved=!0),null!=this.lastX){var e=this.getX(t);if(null!=this.stopLeft){if(e<this.stopLeft)return;delete this.stopLeft}if(null!=this.stopRight){if(e>this.stopRight)return;delete this.stopRight}var i=this.sheet.getPropertyNameWidth()+(e-this.lastX);i<this.minGap?(i=this.minGap,this.stopLeft=e):i>this.sheet.getSumWidth()-this.minGap&&(i=this.sheet.getSumWidth()-this.minGap,this.stopRight=e),this.sheet.setPropertyNameWidth(i),this.lastX=e}else{var n;lt.isSingleTouch(t)?this.lastPoint&&(n=this.sheet.getLogicalPoint(t),i=this.lastPoint.x-n.x,e=this.lastPoint.y-n.y,n=this.sheet.panByOffset(i,e),this.lastPoint.x-=i-n.x,this.lastPoint.y-=e-n.y):this.distance&&(t=lt.getDistance(t)/this.distance,this.sheet.setZoom(this.zoom*t,!1))}},handleTouchend:function(t){var e;m.preventDefault(t),this.moved||(t.target._expandData?(e=t.target._expandData,this.sheet.isExpanded(e)?this.sheet.collapse(e):this.sheet.expand(e)):t.target===this.resizeDiv||(t=this.sheet.getRowIndexAt(t),this.sheet.updateCurrentRowIndex(t))),delete this.stopLeft,delete this.stopRight,delete this.lastX,delete this.lastPoint,delete this.distance,delete this.zoom,delete this.moved,m.removeEventListener("touchmove",this.view,this),m.removeEventListener("touchend",this.view,this)},getX:function(t){return t.changedTouches[0].clientX}}),x.controls.PropertySheetMSTouchInteraction=function(t){this.sheet=t,this.view=t._view,this.resizeDiv=t._resizeDiv,this._pointerMap={},this._pointerIdArray=[],m.addEventListener("MSPointerDown","handleTouchstart",this.view,this),m.addEventListener("MSPointerMove","handleTouchmove",this.view,this),m.addEventListener("MSPointerUp","handleTouchend",this.view,this),m.addEventListener("MSPointerCancel","handleTouchend",this.view,this),this.superHandleMouseDown=x.controls.PropertySheetMSTouchInteraction.superClass.handleMouseDown},Y.ext("twaver.controls.PropertySheetMSTouchInteraction",x.controls.PropertySheetInteraction,{handleMouseDown:function(t){},handleTouchstart:function(t){t.isPrimary&&0<this._pointerIdArray.length&&(this._pointerMap={},this._pointerIdArray=[]),this._pointerMap[t.pointerId]||null==this.sheet.getLogicalPoint(t)||(this._pointerIdArray.push(t.pointerId),this._pointerMap[t.pointerId]=t),1==this._pointerIdArray.length&&t.pointerType==t.MSPOINTER_TYPE_MOUSE&&this.superHandleMouseDown(t),1==this._pointerIdArray.length?(this._startTouchPoint=this.sheet.getLogicalPoint(t),this._startTouchTime=new Date):2==this._pointerIdArray.length&&(this._distance=this._getDistance(),this._zoom=this.sheet.getZoom())},handleTouchmove:function(t){var e,i;0==this._pointerIdArray.length||!this._pointerMap[t.pointerId]||b.getDistance({x:this._pointerMap[t.pointerId].pageX,y:this._pointerMap[t.pointerId].pageY},{x:t.pageX,y:t.pageY})<=10||(this._pointerMap[t.pointerId]=t,2==this._pointerIdArray.length?(e=this._getDistance()/this._distance,this.sheet.setZoom(this._zoom*e,!1)):1==this._pointerIdArray.length&&t.pointerType!=t.MSPOINTER_TYPE_MOUSE&&(!this._startTouchPoint||null!=(i=this.sheet.getLogicalPoint(t))&&(e=this._startTouchPoint.x-i.x,t=this._startTouchPoint.y-i.y,i=this.sheet.panByOffset(e,t),this._startTouchPoint.x-=e-i.x,this._startTouchPoint.y-=t-i.y)))},handleTouchend:function(t){var e;1==this._pointerIdArray.length&&t.pointerType!=t.MSPOINTER_TYPE_MOUSE&&(e=this.sheet.getLogicalPoint(t),(new Date).getTime()-this._startTouchTime.getTime()<=500&&b.getDistance(this._startTouchPoint,e)<=20&&this.superHandleMouseDown(t)),this._pointerMap={},this._pointerIdArray=[]},_getDistance:function(){return b.getDistance({x:this._pointerMap[this._pointerIdArray[0]].pageX,y:this._pointerMap[this._pointerIdArray[0]].pageY},{x:this._pointerMap[this._pointerIdArray[1]].pageX,y:this._pointerMap[this._pointerIdArray[1]].pageY})}}),x.controls.SplitPane=function(t,e,i,n){x.controls.SplitPane.superClass.constructor.apply(this,arguments),this._view=m.createView("hidden",!0),this._view.tabIndex=-1,this._dividerDiv=m.createDiv(),this._dividerDiv.tabIndex=-1,this._isPercentPosition=!0,this._view.appendChild(this._dividerDiv),t&&this.setFirstView(t),e&&this.setNextView(e),i&&this.setOrientation(i),1<n&&(this._isPercentPosition=!1),null!=n&&this.setPosition(n,this._isPercentPosition),this.setDividerDraggable(!0),this.setExpandable(!1),this.invalidate(),g.isTouchable&&new x.controls.SplitPaneTouchInteraction(this),new x.controls.SplitPaneInteraction(this)},Y.ext("twaver.controls.SplitPane",x.controls.ControlBase,{__accessor:["orientation","dividerWidth","dividerBackground","dividerOpacity","maskBackground","upExpandIcon","downExpandIcon","leftExpandIcon","rightExpandIcon"],__bool:["dividerDraggable","expandable"],_position:ye.SPLITPANE_POSITION,_orientation:ye.SPLITPANE_ORIENTATION,_dividerWidth:ye.SPLITPANE_DIVIDER_WIDTH,_dividerBackground:ye.SPLITPANE_DIVIDER_BACKGROUND,_dividerOpacity:ye.SPLITPANE_DIVIDER_OPACITY,_maskBackground:ye.SPLITPANE_MASK_BACKGROUND,_upExpandIcon:ye.SPLITPANE_UP_EXPAND_ICON,_downExpandIcon:ye.SPLITPANE_DOWN_EXPAND_ICON,_leftExpandIcon:ye.SPLITPANE_LEFT_EXPAND_ICON,_rightExpandIcon:ye.SPLITPANE_RIGHT_EXPAND_ICON,onPropertyChanged:function(t){this.invalidate()},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(t,e){(t=e&&t<0?0:t)!==this._position&&(e=this._position,this._position=t,this.firePropertyChange("position",e,t),null==this.lastDividerLocation&&(this.lastDividerLocation=t))},setFirstView:function(t){var e;this._firstView!==t&&((e=this._firstView)&&(e.getView?this._view.removeChild(e.getView()):this._view.removeChild(e)),(this._firstView=t)&&(t.getView?this._view.insertBefore(t.getView(),this._dividerDiv):this._view.insertBefore(t,this._dividerDiv)),this.firePropertyChange("firstView",e,t))},getFirstView:function(){return this._firstView},setNextView:function(t){var e;this._nextView!==t&&((e=this._nextView)&&(e.getView?this._view.removeChild(e.getView()):this._view.removeChild(e)),(this._nextView=t)&&(t.getView?this._view.insertBefore(t.getView(),this._dividerDiv):this._view.insertBefore(t,this._dividerDiv)),this.firePropertyChange("nextView",e,t))},getNextView:function(){return this._nextView},validateImpl:function(){var t,e,i,n=this._position,o=this._view.offsetWidth,s=this._view.offsetHeight,a=this._dividerWidth;8<=a||0===a?this._coverDiv&&(this._dividerDiv.removeChild(this._coverDiv),delete this._coverDiv):this._coverDiv||(this._coverDiv=m.createDiv(),this._coverDiv.tabIndex=-1,this._dividerDiv.appendChild(this._coverDiv)),"horizontal"===this._orientation?(i=o-(a=o<a?o:a)-(e=this._isPercentPosition?(o-a)*n:n)+1,Y.setViewBounds(this._firstView,{x:0,y:0,width:e,height:s}),Y.setViewBounds(this._nextView,{x:e+a,y:0,width:i,height:s}),Y.setViewBounds(this._dividerDiv,{x:e,y:0,width:a,height:s}),this._dividerDiv.position=e,this._coverDiv&&Y.setViewBounds(this._coverDiv,{x:a/2-4,y:0,width:8,height:s}),this._expandable&&(this._expandCvs1||((t=Y.html.createDiv()).tabIndex=-1,Y.setViewBounds(t,{x:0,y:0,width:a,height:11}),this._expandCvs1=Y.html.createImg(Y.getImageSrc(this._leftExpandIcon)),this._expandCvs1.style.left=a/2-3+"px",t.appendChild(this._expandCvs1),this._dividerDiv.appendChild(t)),this._expandCvs2||((t=Y.html.createDiv()).tabIndex=-1,Y.setViewBounds(t,{x:0,y:15,width:a,height:11}),this._expandCvs2=Y.html.createImg(Y.getImageSrc(this._rightExpandIcon)),this._expandCvs2.style.left=a/2-3+"px",t.appendChild(this._expandCvs2),this._dividerDiv.appendChild(t)))):(n=s-(a=s<a?s:a)-(s=this._isPercentPosition?(s-a)*n:n),Y.setViewBounds(this._firstView,{x:0,y:0,width:o,height:s}),Y.setViewBounds(this._nextView,{x:0,y:s+a,width:o,height:n}),Y.setViewBounds(this._dividerDiv,{x:0,y:s,width:o,height:a}),this._dividerDiv.position=s,this._coverDiv&&Y.setViewBounds(this._coverDiv,{x:0,y:a/2-4,width:o,height:8}),this._expandable&&(this._expandCvs1||((t=Y.html.createDiv()).tabIndex=-1,Y.setViewBounds(t,{x:0,y:0,width:11,height:a}),this._expandCvs1=Y.html.createImg(Y.getImageSrc(this._upExpandIcon)),this._expandCvs1.style.top=a/2-3+"px",t.appendChild(this._expandCvs1),this._dividerDiv.appendChild(t)),this._expandCvs2||((t=Y.html.createDiv()).tabIndex=-1,Y.setViewBounds(t,{x:15,y:0,width:11,height:a}),this._expandCvs2=Y.html.createImg(Y.getImageSrc(this._downExpandIcon)),this._expandCvs2.style.top=a/2-3+"px",t.appendChild(this._expandCvs2),this._dividerDiv.appendChild(t)))),this._dividerDiv.style.background=this._dividerBackground}}),x.controls.SplitPaneInteraction=function(t){this.splitPane=t,this.view=t._view,this.dividerDiv=t._dividerDiv,this.isPercentPosition=t._isPercentPosition;var e=this;this.view.addEventListener("mousedown",function(t){0===t.button&&e.handleMouseDown(t)},!1),this.view.addEventListener("mousemove",function(t){e.handleMouseMove(t)},!1)},Y.ext("twaver.controls.SplitPaneInteraction",Object,{handleMouseDown:function(t){if(this.splitPane.isExpandable()){var e,i,n=this.splitPane._dividerWidth;if(t.target===this.splitPane._expandCvs1)return"horizontal"===this.splitPane._orientation?(e=this.view.clientWidth)<n&&(n=e):(i=this.view.clientHeight)<n&&(n=i),void(this.splitPane.lastDividerLocation===this.splitPane.getPosition()?this.splitPane.setPosition(0):this.splitPane.lastDividerLocation<this.splitPane.getPosition()&&(this.splitPane.setPosition(this.splitPane.lastDividerLocation),this.splitPane.lastDividerLocation=this.splitPane.getPosition()));if(t.target===this.splitPane._expandCvs2)return"horizontal"===this.splitPane._orientation?(e=this.view.clientWidth)<n&&(n=e):(i=this.view.clientHeight)<n&&(n=i),void(this.splitPane.lastDividerLocation===this.splitPane.getPosition()?this.splitPane.setPosition(1):this.splitPane.lastDividerLocation>this.splitPane.getPosition()&&(this.splitPane.setPosition(this.splitPane.lastDividerLocation),this.splitPane.lastDividerLocation=this.splitPane.getPosition()))}this.splitPane.isDividerDraggable()&&(this.resizeDiv?this.clear(t):t.target!==this.dividerDiv&&t.target!==this.splitPane._coverDiv||(this.resizeDiv=m.createDiv(),(n=this.resizeDiv.style).left=this.dividerDiv.style.left,n.top=this.dividerDiv.style.top,n.width=this.dividerDiv.style.width,n.height=this.dividerDiv.style.height,n.opacity=this.splitPane.getDividerOpacity(),n.background=this.splitPane.getDividerBackground(),this.resizeDiv.lastPosition="horizontal"===this.splitPane._orientation?t.clientX:t.clientY,this.resizeDiv.maskDiv=m.createDiv(),(n=this.resizeDiv.maskDiv.style).left="0px",n.top="0px",n.width=this.view.clientWidth+"px",n.height=this.view.clientHeight+"px",n.background=this.splitPane.getMaskBackground(),this.view.appendChild(this.resizeDiv.maskDiv),this.view.appendChild(this.resizeDiv),m.handle_mousedown(this,t),t.preventDefault()))},handleMouseMove:function(t){var e;(!this.splitPane.isExpandable()||t.target!==this.splitPane._expandCvs1&&t.target!==this.splitPane._expandCvs2)&&this.splitPane.isDividerDraggable()&&(this.resizeDiv||m.target?this.resizeDiv&&m.target===this&&("horizontal"===this.splitPane._orientation?this.resizeDiv.style.left=this.dividerDiv.position+t.clientX-this.resizeDiv.lastPosition+"px":this.resizeDiv.style.top=this.dividerDiv.position+t.clientY-this.resizeDiv.lastPosition+"px"):(e="horizontal"===this.splitPane._orientation?"ew-resize":"ns-resize",this.view.style.cursor=t.target===this.dividerDiv||t.target===this.splitPane._coverDiv?e:"default"))},handleMouseUp:function(t){(!this.splitPane.isExpandable()||t.target!==this.splitPane._expandCvs1&&t.target!==this.splitPane._expandCvs2)&&this.splitPane.isDividerDraggable()&&0===t.button&&this.clear(t)},clear:function(t){var e,i,n;this.resizeDiv&&(e=this.splitPane._dividerWidth,"horizontal"===this.splitPane._orientation?((n=this.view.clientWidth)<e&&(e=n),i=this.dividerDiv.position+t.clientX-this.resizeDiv.lastPosition,this.isPercentPosition?this.splitPane.setPosition(i/(n-e)):this.splitPane.setPosition(i)):((n=this.view.clientHeight)<e&&(e=n),i=this.dividerDiv.position+t.clientY-this.resizeDiv.lastPosition,this.isPercentPosition?this.splitPane.setPosition(i/(n-e)):this.splitPane.setPosition(i)),this.splitPane.lastDividerLocation=this.splitPane.getPosition(),this.view.removeChild(this.resizeDiv.maskDiv),this.view.removeChild(this.resizeDiv),delete this.resizeDiv)}}),x.controls.SplitPaneTouchInteraction=function(t){this.splitPane=t,this.view=t._view,this.dividerDiv=t._dividerDiv,this.isPercentPosition=t._isPercentPosition,m.addEventListener("touchstart","handleTouchstart",this.view,this)},Y.ext("twaver.controls.SplitPaneTouchInteraction",Object,{handleTouchstart:function(t){if(m.preventDefault(t),this.splitPane.isExpandable()){var e,i,n=this.splitPane._dividerWidth;if(t.target===this.splitPane._expandCvs1)return"horizontal"===this.splitPane._orientation?(e=this.view.clientWidth)<n&&(n=e):(i=this.view.clientHeight)<n&&(n=i),void(this.splitPane.lastDividerLocation===this.splitPane.getPosition()?this.splitPane.setPosition(0):this.splitPane.lastDividerLocation<this.splitPane.getPosition()&&(this.splitPane.setPosition(this.splitPane.lastDividerLocation),this.splitPane.lastDividerLocation=this.splitPane.getPosition()));if(t.target===this.splitPane._expandCvs2)return"horizontal"===this.splitPane._orientation?(e=this.view.clientWidth)<n&&(n=e):(i=this.view.clientHeight)<n&&(n=i),void(this.splitPane.lastDividerLocation===this.splitPane.getPosition()?this.splitPane.setPosition(1):this.splitPane.lastDividerLocation>this.splitPane.getPosition()&&(this.splitPane.setPosition(this.splitPane.lastDividerLocation),this.splitPane.lastDividerLocation=this.splitPane.getPosition()))}this.resizeDiv?this.clear(t):t.target!==this.dividerDiv&&t.target!==this.splitPane._coverDiv||(this.resizeDiv=m.createDiv(),(n=this.resizeDiv.style).left=this.dividerDiv.style.left,n.top=this.dividerDiv.style.top,n.width=this.dividerDiv.style.width,n.height=this.dividerDiv.style.height,n.opacity=this.splitPane.getDividerOpacity(),n.background=this.splitPane.getDividerBackground(),t=t.changedTouches[0],this.resizeDiv.lastPosition="horizontal"===this.splitPane._orientation?t.clientX:t.clientY,this.resizeDiv.maskDiv=m.createDiv(),(n=this.resizeDiv.maskDiv.style).left="0px",n.top="0px",n.width=this.view.clientWidth+"px",n.height=this.view.clientHeight+"px",n.background=this.splitPane.getMaskBackground(),this.view.appendChild(this.resizeDiv.maskDiv),this.view.appendChild(this.resizeDiv)),m.addEventListener("touchmove","handleTouchmove",this.view,this),m.addEventListener("touchend","handleTouchend",this.view,this)},handleTouchmove:function(t){m.preventDefault(t),(!this.splitPane.isExpandable()||t.target!==this.splitPane._expandCvs1&&t.target!==this.splitPane._expandCvs2)&&this.resizeDiv&&(t=t.changedTouches[0],"horizontal"===this.splitPane._orientation?this.resizeDiv.style.left=this.dividerDiv.position+t.clientX-this.resizeDiv.lastPosition+"px":this.resizeDiv.style.top=this.dividerDiv.position+t.clientY-this.resizeDiv.lastPosition+"px")},handleTouchend:function(t){this.splitPane.isExpandable()&&(t.target===this.splitPane._expandCvs1||t.target===this.splitPane._expandCvs2)||(m.removeEventListener("touchmove",this.view,this),m.removeEventListener("touchend",this.view,this),this.clear(t))},clear:function(t){var e,i,n=t.changedTouches[0];this.resizeDiv&&(t=this.splitPane._dividerWidth,"horizontal"===this.splitPane._orientation?((e=this.view.clientWidth)<t&&(t=e),i=this.dividerDiv.position+n.clientX-this.resizeDiv.lastPosition,this.isPercentPosition?this.splitPane.setPosition(i/(e-t)):this.splitPane.setPosition(i)):((e=this.view.clientHeight)<t&&(t=e),i=this.dividerDiv.position+n.clientY-this.resizeDiv.lastPosition,this.isPercentPosition?this.splitPane.setPosition(i/(e-t)):this.splitPane.setPosition(i)),this.splitPane.lastDividerLocation=this.splitPane.getPosition(),this.view.removeChild(this.resizeDiv.maskDiv),this.view.removeChild(this.resizeDiv),delete this.resizeDiv)}}),x.controls.TabPane=function(){x.controls.TabPane.superClass.constructor.apply(this,arguments),this._tabBox=new x.TabBox,this._tabBox.addDataBoxChangeListener(this.handleTabChange,this),this._tabBox.addDataPropertyChangeListener(this.handleTabChange,this),this._tabBox.addHierarchyChangeListener(this.handleTabChange,this),this._tabBox.getSelectionModel().addSelectionChangeListener(this.handleTabChange,this),this._view=m.createView("hidden",!0),this._tabDiv=m.createDiv(),this._tabDiv.onmousedown=m.preventDefault,this._tabDiv.onkeydown=m.preventDefault,this._contentDiv=m.createDiv(),this._view.appendChild(this._tabDiv),this._view.appendChild(this._contentDiv),this._divPool=new x.Pool("div"),this._iconPool=new x.Pool("img"),this._closePool=new x.Pool("img"),this._textPool=new x.Pool("span"),this._resizePool=new x.Pool("div"),this._pools.add(this._divPool),this._pools.add(this._iconPool),this._pools.add(this._closePool),this._pools.add(this._textPool),this._pools.add(this._resizePool),this.invalidateTab(),g.isTouchable&&new x.controls.TabPaneTouchInteraction(this),new x.controls.TabPaneInteraction(this)},Y.ext("twaver.controls.TabPane",x.controls.ControlBase,{__accessor:["tabGap","tabRadius","tabHeight","horizontalAlign","tabOrientation","resizeTolerance","tabBackground","selectBackground","moveBackground","insertBackground","closeIcon","disabledColor"],__bool:["selectNextOnClose","selectNextOnInVisible"],_tabGap:ye.TABPANE_TAB_GAP,_tabRadius:ye.TABPANE_TAB_RADIUS,_tabHeight:ye.TABPANE_TAB_HEIGHT,_resizeTolerance:ye.TABPANE_RESIZE_TOLERANCE,_tabOrientation:ye.TABPANE_TAB_ORIENTATION,_tabBackground:ye.TABPANE_TAB_BACKGROUND,_disabledColor:ye.TABPANE_DISABLED_COLOR,_selectBackground:ye.TABPANE_SELECT_BACKGROUND,_moveBackground:ye.TABPANE_MOVE_BACKGROUND,_insertBackground:ye.TABPANE_INSERT_BACKGROUND,_horizontalAlign:ye.TABPANE_HORIZONTAL_ALIGN,_closeIcon:ye.TABPANE_CLOSE_ICON,_selectNextOnClose:ye.TABPANE_SELECT_NEXT_ON_CLOSE,_selectNextOnInVisible:ye.TABPANE_SELECT_NEXT_ON_INVISIBLE,onPropertyChanged:function(t){this.invalidateTab()},getTabBox:function(){return this._tabBox},getTabDiv:function(){return this._tabDiv},getContentDiv:function(){return this._contentDiv},handleTabChange:function(t){if(this._selectNextOnInVisible&&"visible"===t.property&&!t.newValue&&this._tabBox.getSelectionModel().contains(t.source)){for(var e,i,t=t.source,t=this._tabBox.getRoots().indexOf(t),n=this._tabBox.getRoots(),o=n.size(),s=t;s<o-1;)if((e=n.get(++s)).isVisible()&&!e.isDisabled()){i=e;break}if(!i)for(s=t;0<s;)if((e=n.get(--s)).isVisible()&&!e.isDisabled()){i=e;break}this._tabBox.getSelectionModel().setSelection(i)}this.invalidateTab()},invalidateTab:function(t){this._invalidateTab||(this._invalidateTab=!0,this.invalidate(t))},validateImpl:function(){this._invalidateTab&&(this._invalidateTab=!1,this.validateTab());var t=this._view.offsetWidth,e=this._view.offsetHeight,e="top"===this._tabOrientation?(this._tabDiv.style.top="0px",{x:0,y:this._tabHeight,width:t,height:Math.max(0,e-this._tabHeight)}):(this._tabDiv.style.top=e-this._tabHeight+"px",{x:0,y:0,width:t,height:Math.max(0,e-this._tabHeight)});this._currentView&&Y.setViewBounds(this._currentView,e)},getCurrentTab:function(){return this._currentTab},getCurrentView:function(){return this._currentView},onViewRemoved:function(t){},onViewAdded:function(t){},validateTab:function(){this._currentTab=this._tabBox.getSelectionModel().getLastData();var t,e=this._currentTab?this._currentTab.getView():null;e!==this._currentView&&(this._currentView&&((this._currentView.getView?this._currentView.getView():this._currentView).style.visibility="hidden",this.onViewRemoved(this._currentView)),e&&((t=e.getView?e.getView():e).style.visibility="inherit",t.parentNode||this._contentDiv.appendChild(t),this.onViewAdded(e)),this._currentView=e),m.release(this._tabDiv);for(var i=this._tabBox.getRoots(),n=this._tabHeight+"px",o=this._tabHeight-2+"px",s=this._tabRadius+"px",a=i.size(),r=0,h=0;h<a;h++){var l,c,u,d,_,g=i.get(h);g.isVisible()&&(l=this._currentTab===g,(c=g.getWidth())<0&&(c=0),u=Math.min(this._tabGap,c),(d=this._divPool.get())._tab=g,(_=d.style).position="absolute",_.whiteSpace="nowrap",_.lineHeight=o,_.overflow="hidden",_.textOverflow="ellipsis",_.background=l?this._selectBackground:this._tabBackground,_.textAlign=this._horizontalAlign,"top"===this._tabOrientation?(_.borderTopLeftRadius=s,_.borderTopRightRadius=s,_.borderBottomLeftRadius="0px",_.borderBottomRightRadius="0px"):(_.borderTopLeftRadius="0px",_.borderTopRightRadius="0px",_.borderBottomLeftRadius=s,_.borderBottomRightRadius=s),_.left=r+"px",_.width=c-u+"px",_.height=n,d._x=r,d._width=c-u,this.renderTab(d,g),this.onTabRendered(d,g),this._tabDiv.insertBefore(d,this._tabDiv.firstChild),r+=c,g.isResizable()&&((d=this._resizePool.get())._resizeTab=g,(_=d.style).position="absolute",_.backgroundColor="white",_.opacity=0,_.left=r-u-this._resizeTolerance+"px",_.width=u+2*this._resizeTolerance+"px",_.height=n,this._tabDiv.appendChild(d)))}this._tabDiv.style.left="0px",this._tabDiv.style.width=r+"px",this._tabDiv.style.height=this._tabHeight+"px",this._pools.forEach(function(t){t.clear()})},renderTab:function(t,e){var i,n,o,s;e.renderTab?e.renderTab(t):((n=e.getIcon())&&((s=this._iconPool.get()).setAttribute("src",Y.getImageSrc(n)),s.style.paddingLeft="4px",s.style.verticalAlign="middle",t.appendChild(s)),(i=e.getName())&&((n=this._textPool.get()).style.whiteSpace="nowrap",n.style.verticalAlign="middle",n.style.padding="2px 4px",n.innerHTML=i,t.appendChild(n)),g.isOpera&&((o=t.cloneNode(!1)).style.left="0px",o.style.top="0px",o.style.opacity=0,t.appendChild(o))),e.isClosable()&&(o=this._tabRadius/4+2,(s=this._closePool.get())._closeTab=e,s.setAttribute("src",Y.getImageSrc(this._closeIcon)),s.style.position="absolute",s.style.top=o+"px",s.style.right=o+"px",t.appendChild(s)),e.isDisabled()?t.style.color=this.getDisabledColor():t.style.color=""},onTabRendered:function(t,e){}}),x.controls.TabPaneInteraction=function(t){this.tabPane=t,this.view=t.getTabDiv();var e=this;this.view.addEventListener("mousedown",function(t){e.handleMouseDown(t)},!1),this.view.addEventListener("mousemove",function(t){e.handleMouseMove(t)},!1)},Y.ext("twaver.controls.TabPaneInteraction",Object,{handleMouseDown:function(t){0===t.button&&(this.movableDiv?this.handleMouseUp(t):(this.resizeTab=t.target._resizeTab,this.resizeTab||(this.movableDiv=this.getMovableDivAt(t)),this.changeCursor(t),this.lastX=this.getX(t),this._startClient=m.getClientPoint(t),this._startLogicalX=this.lastX,m.handle_mousedown(this,t)))},changeCursor:function(t){var e="";t.target._resizeTab?e="ew-resize":!(t=this.getTabAt(t))||t.isDisabled()&&!t.isMovable()||(e="pointer"),this.view.style.cursor=e},handleMouseMove:function(t){if(null!=this.lastX){if(m.target===this){var e=this._startLogicalX+t.clientX-this._startClient.x;if(this.resizeTab){if(null!=this.stopX){if(e<this.stopX)return;delete this.stopX}var i=this.resizeTab.getWidth()+(e-this.lastX);i<10&&(i=10,this.stopX=e),this.resizeTab.setWidth(i),this.lastX=e}else if(this.movableDiv){i=e-this.lastX;if(!this.cloneDiv){if(Math.abs(i)<3)return;this.cloneDiv=this.movableDiv.cloneNode(!0),this.cloneDiv._x=this.movableDiv._x,this.cloneDiv.style.background=this.tabPane.getMoveBackground(),this.insertDiv=m.createDiv(),this.insertDiv.style.width="1px",this.insertDiv.style.height=this.cloneDiv.style.height,this.insertDiv.style.background=this.tabPane.getInsertBackground(),this.movableDiv.parentNode.appendChild(this.cloneDiv),this.movableDiv.parentNode.appendChild(this.insertDiv)}i=this.cloneDiv._x+i;this.cloneDiv.style.left=i+"px",this.cloneDiv._x=i,this.lastX=e,this.tabInfo=this.getTabInfoAt(t),this.tabInfo&&(this.insertDiv.style.left=this.tabInfo.position)}}}else this.changeCursor(t)},handleMouseUp:function(t){var e,i,n,o;0===t.button&&(this.resizeTab||(this.movableDiv&&this.tabInfo?(o=this.movableDiv._tab,n=this.tabInfo.index,this.tabPane.getTabBox().moveTo(o,n)):(e=this.tabPane.getTabBox(),(o=t.target._closeTab)?this.tabPane.isSelectNextOnClose()&&this.tabPane.getCurrentTab()===o?(n=(i=e.getRoots()).indexOf(o),e.remove(o),0<i.size()&&(n>=i.size()&&(n=i.size()-1),e.getSelectionModel().setSelection(i.get(n)))):e.remove(o):(o=this.getTabAt(t))&&!o.isDisabled()&&e.getSelectionModel().setSelection(o))),this.clear())},clear:function(){this.view.style.cursor="",this.cloneDiv&&this.movableDiv&&this.movableDiv.parentNode.removeChild(this.cloneDiv),this.insertDiv&&this.movableDiv&&this.movableDiv.parentNode.removeChild(this.insertDiv),delete this.movableDiv,delete this.tabInfo,delete this.insertDiv,delete this.cloneDiv,delete this.resizeTab,delete this.stopX,delete this.lastX,delete this._startLogicalX,delete this._startClient},getTabAt:function(t){var e;for(t=t.target;t&&t!==this.view&&!(e=t._tab);)t=t.parentNode;return e},getMovableDivAt:function(t){var e;for(t=t.target;t&&t!==this.view&&!(e=t._tab);)t=t.parentNode;return e&&e.isMovable()?t:null},getX:function(t){t=m.getLogicalPoint(this.view,t);return t?t.x:null},getTabInfoAt:function(t){for(var e=this._startLogicalX+t.clientX-this._startClient.x,i=this.tabPane.getTabBox().getRoots(),n=i.size(),o=0,s=!1,a=0;a<n;a++){var r=i.get(a);if(r===this.movableDiv._tab&&(s=!0),r.isVisible()){var h=r.getWidth();if(!(h<=0)){if(o<=e&&e<=o+h){var l=e<o+h/2;!s||r===this.movableDiv._tab&&l||a--;var c=l?o:o+h;return{index:l?Math.max(0,a):Math.min(a+1,n),tab:r,position:(c=Math.max(0,c-1))+"px"}}o+=h}}}return this.tabInfo}}),x.controls.TabPaneTouchInteraction=function(t){this.tabPane=t,this.view=t.getTabDiv(),m.addEventListener("touchstart","handleTouchstart",this.view,this)},Y.ext("twaver.controls.TabPaneTouchInteraction",Object,{handleTouchstart:function(t){m.preventDefault(t),this.movableDiv?this.handleTouchend(t):(this.resizeTab=t.target._resizeTab,this.resizeTab||(this.movableDiv=this.getMovableDivAt(t)),this.lastX=this.getX(t),m.addEventListener("touchmove","handleTouchmove",this.view,this),m.addEventListener("touchend","handleTouchend",this.view,this))},handleTouchmove:function(t){if(null!=this.lastX)if(this.resizeTab){var e=this.getX(t);if(null!=this.stopX){if(e<this.stopX)return;delete this.stopX}var i=this.resizeTab.getWidth()+(e-this.lastX);i<0&&(i=0,this.stopX=e),this.resizeTab.setWidth(i),this.lastX=e}else if(this.movableDiv){i=(e=this.getX(t))-this.lastX;if(!this.cloneDiv){if(Math.abs(i)<3)return;this.cloneDiv=this.movableDiv.cloneNode(!0),this.cloneDiv._x=this.movableDiv._x,this.cloneDiv.style.background=this.tabPane.getMoveBackground(),this.insertDiv=m.createDiv(),this.insertDiv.style.width="1px",this.insertDiv.style.height=this.cloneDiv.style.height,this.insertDiv.style.background=this.tabPane.getInsertBackground(),this.movableDiv.parentNode.appendChild(this.cloneDiv),this.movableDiv.parentNode.appendChild(this.insertDiv)}i=this.cloneDiv._x+i;this.cloneDiv.style.left=i+"px",this.cloneDiv._x=i,this.lastX=e,this.tabInfo=this.getTabInfoAt(t),this.tabInfo&&(this.insertDiv.style.left=this.tabInfo.position)}},handleTouchend:function(t){var e,i,n,o;this.resizeTab||(this.movableDiv&&this.tabInfo?(o=this.movableDiv._tab,n=this.tabInfo.index,this.tabPane.getTabBox().moveTo(o,n)):(e=this.tabPane.getTabBox(),(o=t.target._closeTab)?this.tabPane.isSelectNextOnClose()&&this.tabPane.getCurrentTab()===o?(n=(i=e.getRoots()).indexOf(o),e.remove(o),0<i.size()&&(n>=i.size()&&(n=i.size()-1),e.getSelectionModel().setSelection(i.get(n)))):e.remove(o):(o=this.getTabAt(t))&&!o.isDisabled()&&e.getSelectionModel().setSelection(o))),this.clear(),m.removeEventListener("touchmove",this.view,this),m.removeEventListener("touchend",this.view,this)},clear:function(){this.cloneDiv&&this.movableDiv&&this.movableDiv.parentNode.removeChild(this.cloneDiv),this.insertDiv&&this.movableDiv&&this.movableDiv.parentNode.removeChild(this.insertDiv),delete this.movableDiv,delete this.tabInfo,delete this.insertDiv,delete this.cloneDiv,delete this.resizeTab,delete this.stopX,delete this.lastX},getTabAt:function(t){var e;for(t=t.target;t&&t!==this.view&&!(e=t._tab);)t=t.parentNode;return e},getMovableDivAt:function(t){var e;for(t=t.target;t&&t!==this.view&&!(e=t._tab);)t=t.parentNode;return e&&e.isMovable()?t:null},getX:function(t){t=m.getLogicalPoint(this.view,t);return t?t.x:null},getTabInfoAt:function(t){for(var e=this.getX(t),i=this.tabPane.getTabBox().getRoots(),n=i.size(),o=0,s=!1,a=0;a<n;a++){var r=i.get(a);if(r===this.movableDiv._tab&&(s=!0),r.isVisible()){var h=r.getWidth();if(!(h<=0)){if(o<=e&&e<=o+h){var l=e<o+h/2;!s||r===this.movableDiv._tab&&l||a--;var c=l?o:o+h;return{index:l?Math.max(0,a):Math.min(a+1,n),tab:r,position:(c=Math.max(0,c-1))+"px"}}o+=h}}}return this.tabInfo}}),x.controls.TitlePane=function(t,e,i){x.controls.TitlePane.superClass.constructor.apply(this,arguments),this.invalidate(),this._titleDiv=m.createDiv(),this._titleDiv.tabIndex=-1,this._titleDiv.style.verticalAlign="middle",this._titleDiv.style.fontWeight="bold",this._titleDiv.style.textOverflow="ellipsis",this._titleDiv.style.overflow="hidden",this._titleDiv.style.whiteSpace="nowrap",this._titleDiv.onmousedown=m.preventDefault,this._span=E.createElement("span"),this._span.style.verticalAlign="middle",this._span.style.paddingLeft="4px",this._span.style.paddingRight="4px",this._img=E.createElement("img"),this._img.style.verticalAlign="middle",this._img.style.paddingLeft="4px",this._view=m.createView("hidden",!0),this._view.tabIndex=-1,this._view.appendChild(this._titleDiv),e&&this.setTitle(e),t&&this.setContent(t),i&&this.setIcon(i)},Y.ext("twaver.controls.TitlePane",x.controls.ControlBase,{__accessor:["icon","title","titleHeight","titleHorizontalAlign","titleBackground"],_titleHeight:ye.TITLEPANE_TITLE_HEIGHT,_titleBackground:ye.TITLEPANE_TITLE_BACKGROUND,_titleHorizontalAlign:ye.TITLEPANE_TITLE_HORIZONTAL_ALIGN,onPropertyChanged:function(t){this.invalidate()},getTitleDiv:function(){return this._titleDiv},getContent:function(){return this._content},setContent:function(t){var e;this._content!==t&&((e=this._content)&&(e.getView?this._view.removeChild(e.getView()):this._view.removeChild(e)),(this._content=t)&&(t.getView?this._view.appendChild(t.getView()):this._view.appendChild(t)),this.firePropertyChange("content",e,t))},validateImpl:function(){var t=this._view.offsetWidth,e=this._view.offsetHeight,i=this._titleDiv.style;i.textAlign=this._titleHorizontalAlign,i.lineHeight=this._titleHeight-2+"px",i.background=this._titleBackground,m.clear(this._titleDiv),this._icon&&(this._img.setAttribute("src",Y.getImageSrc(this._icon)),this._titleDiv.appendChild(this._img)),this._title&&(this._span.innerHTML=this._title,this._span.setAttribute("title",this._title),this._titleDiv.appendChild(this._span)),(i=this._titleDiv.style).left="0px",i.top="0px",i.width=t+"px",i.height=this._titleHeight+"px",Y.setViewBounds(this._content,{x:0,y:this._titleHeight,width:t,height:Math.max(e-this._titleHeight,0)})}}),x.controls.Accordion=function(){x.controls.Accordion.superClass.constructor.apply(this,arguments),this._titleMap={},this._titleList=new ie,this._currentTitle=null,this._currentView=null,this._view=m.createView("hidden",!0),this.invalidate();var e=this;this._view.addEventListener("mousedown",function(t){e.handleMouseDown(t)},!1)},Y.ext("twaver.controls.Accordion",x.controls.ControlBase,{__accessor:["expandIcon","collapseIcon","titleHeight","titleBackground","borderBottomColor","iconPosition"],_expandIcon:ye.ACCORDION_EXPAND_ICON,_collapseIcon:ye.ACCORDION_COLLAPSE_ICON,_titleHeight:ye.ACCORDION_TITLE_HEIGHT,_titleBackground:ye.ACCORDION_TITLE_BACKGROUND,_borderBottomColor:ye.ACCORDION_BORDER_BOTTOM_COLOR,_iconPosition:ye.ACCORDION_ICON_POSITION,onPropertyChanged:function(t){this.invalidate()},handleMouseDown:function(t){var e;0!==t.button||(e=(e=t.target._title)||t.target.parentNode._title)&&(this._currentTitle===e?this.collapse():this.expand(e))},getTitles:function(){return this._titleList},getCurrentTitle:function(){return this._currentTitle},add:function(t,e){if(this._titleMap[t])throw"Title ' + title + ' already exists";var i=m.createDiv();i._title=t,i.onmousedown=m.preventDefault,i.style.cursor="pointer",i.style.textAlign="left",i.style.textOverflow="ellipsis",i.style.whiteSpace="nowrap",i.style.overflow="hidden",i.style.borderBottomWidth="1px",i.style.borderBottomStyle="solid";var n=E.createElement("img");n.style.verticalAlign="middle",n.style.paddingLeft="4px";var o,s,a=E.createElement("span");a.style.verticalAlign="middle",a.style.paddingLeft="4px",a.innerHTML=t,a.setAttribute("title",t),this._view.appendChild(i),i.appendChild(n),i.appendChild(a),"right"==this._iconPosition&&(o=n.style,s=(this._titleHeight-8)/2,o.marginTop=s+"px",o.right="15px",o.position="absolute"),this._titleMap[t]={content:e,titleDiv:i,span:a,img:n},this._titleList.add(t),this.invalidate()},remove:function(t){var e=this._titleMap[t];e&&this._view.removeChild(e.titleDiv),delete this._titleMap[t],this._titleList.remove(t),this.invalidate()},clear:function(){var e=this;Object.keys(e._titleMap).forEach(function(t){e._view.removeChild(e._titleMap[t].titleDiv)}),e._titleMap={},e._titleList.clear(),e.invalidate()},expand:function(t){this._titleMap[t]&&this._currentTitle!==t&&(this._currentTitle=t,this.onExpanded(t),this.invalidate())},onExpanded:function(t){},collapse:function(){this._currentTitle&&(this.onCollapsed(this._currentTitle),this._currentTitle=null,this.invalidate())},onCollapsed:function(t){},validateImpl:function(){var t=this._currentView;this._currentView=null;for(var e=this._view.offsetWidth,i=this._view.offsetHeight,n=this._titleList.size(),o=0,s=0;s<n;s++){var a=this._titleList.get(s),r=this._titleMap[a],h=r.titleDiv.style;h.lineHeight=this._titleHeight-3+"px",h.background=this._titleBackground,h.borderBottomColor=this._borderBottomColor,h.left="0px",h.top=o+"px",h.width=e+"px",h.height=this._titleHeight-1+"px";h=this._currentTitle===a,a=h?this._expandIcon:this._collapseIcon;r.img.setAttribute("src",Y.getImageSrc(a)),h?(h=Math.max(0,i-n*this._titleHeight),r.content&&(this._currentView=r.content.getView?r.content.getView():r.content,Y.setViewBounds(r.content,{x:0,y:o+this._titleHeight,width:e,height:h}),r.content.style.overflowY="auto"),o+=this._titleHeight+h):o+=this._titleHeight}this._currentView&&this._currentView!==t&&this._view.appendChild(this._currentView),t&&t!==this._currentView&&this._view.removeChild(t)}}),x.controls.BorderPane=function(t,e,i,n,o){x.controls.BorderPane.superClass.constructor.apply(this,arguments),this.invalidate(),this._view=m.createView("hidden",!0),this._view.tabIndex=-1,t&&this.setCenter(t),e&&this.setTop(e),i&&this.setRight(i),n&&this.setBottom(n),o&&this.setLeft(o)},Y.ext("twaver.controls.BorderPane",x.controls.ControlBase,{__accessor:["hGap","vGap","topHeight","bottomHeight","leftWidth","rightWidth"],_hGap:ye.BORDERPANE_HGAP,_vGap:ye.BORDERPANE_VGAP,_topHeight:0,_bottomHeight:0,_leftWidth:0,_rightWidth:0,onPropertyChanged:function(t){this.invalidate()},getCenter:function(){return this._center},setCenter:function(t){this._setContent("center",t)},getTop:function(){return this._top},setTop:function(t){this._setContent("top",t)},getRight:function(){return this._right},setRight:function(t){this._setContent("right",t)},getBottom:function(){return this._bottom},setBottom:function(t){this._setContent("bottom",t)},getLeft:function(){return this._left},setLeft:function(t){this._setContent("left",t)},_setContent:function(t,e){var i,n=this["_"+t];n!==e&&(n&&(i=n.getView?n.getView():n,this._view.contains(i)&&this._view.removeChild(i)),(this["_"+t]=e)&&(e.getView?this._view.appendChild(e.getView()):this._view.appendChild(e)),this.firePropertyChange(t,n,e))},validateImpl:function(){var t=this._view.offsetWidth,e=this._view.offsetHeight,i=0,n=0,o=t,s=e,a=0,r=0,h=0,l=0;this._top&&(n=(a=this._topHeight||(this._top.getView?this._top.getView():this._top).offsetHeight)+this._vGap),this._bottom&&(s=e-(r=this._bottomHeight||(this._bottom.getView?this._bottom.getView():this._bottom).offsetHeight)-this._vGap),this._left&&(i=(h=this._leftWidth||(this._left.getView?this._left.getView():this._left).offsetWidth)+this._hGap),this._right&&(o=t-(l=this._rightWidth||(this._right.getView?this._right.getView():this._right).offsetWidth)-this._hGap);var c=Math.max(0,o-i),e=Math.max(0,s-n);this._top&&Y.setViewBounds(this._top,{x:0,y:0,width:t,height:a}),this._bottom&&Y.setViewBounds(this._bottom,{x:0,y:s,width:t,height:r}),this._left&&Y.setViewBounds(this._left,{x:0,y:n,width:h,height:e}),this._right&&Y.setViewBounds(this._right,{x:o,y:n,width:l,height:e}),this._center&&Y.setViewBounds(this._center,{x:i,y:n,width:c,height:e})}}),x.controls.PopupMenu=function(t){this._view=m.createDiv(),this._view.style.zIndex=100001,this._items=[],this._itemsMap={},this.setContextView(t);var t=this._view,e=this;t.addEventListener("mouseover",function(t){e._mouseOver=!0},!1),t.addEventListener("mouseout",function(t){e._mouseOver=!1},!1),t.oncontextmenu=function(t){t.preventDefault()},m.addEventListener("mousedown","_handleClick",t,this)},Y.ext("twaver.controls.PopupMenu",Object,{_width:200,_xOffset:0,_yOffset:0,_menuItemHeight:25,_background:"#F9F9F9",_border:"2px outset white",_disabledColor:"#BABBBC",_focusColor:"white",_focusBackground:"#C2CFF1",_color:"black",_subMenuEnableIcon:ye.POPUPMENU_SUBNENU_ENABLE_ICON,_subMenuDisableIcon:ye.POPUPMENU_SUBNENU_DISABLE_ICON,_checkboxSelectedIcon:ye.POPUPMENU_CHECKBOX_SELECTED_ICON,_checkboxUnselectedIcon:ye.POPUPMENU_CHECKBOX_UNSELECTED_ICON,_radiobuttonSelectedIcon:ye.POPUPMENU_RADIOBUTTON_SELECTED_ICON,_radiobuttonUnselectedIcon:ye.POPUPMENU_RADIOBUTTON_UNSELECTED_ICON,getView:function(){return this._view},getContextView:function(){return this._contextView},setContextView:function(t){this._removeContextmenuListener(),(this._contextView=t)&&(t=t.getView?t.getView():t,g.isTouchable&&(t.addEventListener("touchstart",this._getTouchStartListener(),!1),t.addEventListener("touchmove",this._getTouchMoveListener(),!1),t.addEventListener("touchend",this._getTouchEndListener(),!1)),m.addEventListener("contextmenu","_handleContextmenu",t,this))},getMenuItems:function(){return this._items},setMenuItems:function(t){if(this._items=[],this._itemsMap={},t)for(var e=0,i=t.length;e<i;e++)this.addMenuItem(t[e])},addMenuItem:function(t){!0!==t.separator&&(this._itemsMap[t.id||t.label]=t),this._items.push(t)},getMenuItem:function(t){return this._itemsMap[t]},addSeparator:function(){this.addMenuItem({separator:!0})},getMenuItemById:function(t){return this._itemsMap[t]},isVisible:function(t){return!1!==t.visible},isEnabled:function(t){return!1!==t.enabled},show:function(t){this.hide();var e,i,n,o=this._view,s=this._view.style;n=g.isTouchable?(i=t.changedTouches&&t.changedTouches[0].clientX||t.clientX,t.changedTouches&&t.changedTouches[0].clientY||t.clientY):(i=t.clientX,t.clientY),m.clear(o),this.renderMenu(o,this._items),0!==this._height&&(g.isTouchable&&m.addEventListener("touchstart","_handleBodyClicked",E.body,this),m.addEventListener("mousedown","_handleBodyClicked",E.body,this),e=m.windowWidth()-this._width-10,n=(n=(t=m.windowHeight()-this._height-10)<n?t:n)<0?0:n,s.left=(i=(i=e<i?e:i)<0?0:i)+lt.scrollLeft()+this._xOffset+"px",s.top=n+lt.scrollTop()+this._yOffset+"px",E.body.appendChild(o))},_showMenuItem:function(t,e){this._hideMenuItem(e);var i=E.createElement("div"),n=(e.menuItem.childrenDiv=i).style;n.color="#000000",n.position="absolute";var o,s,a,r=this._width,h=e.offsetTop,l=e.menuItem.items;this._itemsShow=!0,e._itemsShow=!0,m.clear(i),this.renderMenu(i,l),0!==this._height&&(o=m.windowWidth()-this._width-10,s=m.windowHeight()-10,r=(a=this._getPosition(this._view)).left+this._width>o?-this._width:r,h=a.top+h+l.length*this._menuItemHeight>s?h-(l.length-1)*this._menuItemHeight:h,n.left=r+"px",n.top=h+"px",e.appendChild(i))},hide:function(){E.body.contains(this._view)&&E.body.removeChild(this._view),delete this._mouseOver,delete this._itemsShow,g.isTouchable&&m.removeEventListener("touchstart",E.body,this),m.removeEventListener("mousedown",E.body,this)},_hideMenuItem:function(t){var e=t.menuItem.childrenDiv;e&&t.contains(e)&&t.removeChild(e),this._itemsShow=!1,t._itemsShow=!1},dispose:function(){this._removeContextmenuListener(),this.hide()},onMenuShowing:function(t){return!0},onAction:function(t){},renderMenu:function(t,e){var i=t.style;i.background=this._background,i.border=this._border,i.width=this._width+"px",this._height=0,delete this._separator;for(var n=0,o=(t.menuItems=e).length;n<o;n++){var s,a=e[n];this.isVisible(a)&&(!0===a.separator?this._separator=!0:(s=E.createElement("div"),this.isEnabled(a)&&this._addMouseoverListener(s,a),s._itemsShow=!1,s.menuItem=a,t.appendChild(s),this.renderMenuItem(s,a),this.onMenuItemRendered(s,a),this._separator=!1,this._height+=this._menuItemHeight))}},renderMenuItem:function(t,e){var i=t.style;i.height=this._menuItemHeight+"px",this._separator&&(i.borderTop="1px solid gray"),this.isEnabled(e)||(i.color=this._disabledColor);var n,o=E.createElement("span");(i=o.style).position="absolute",i.width="25px",i.height=this._menuItemHeight+"px",i.lineHeight=this._menuItemHeight+"px",i.textAlign="center",t.appendChild(o),"check"===e.type?n=e.selected?this._checkboxSelectedIcon:this._checkboxUnselectedIcon:"radio"===e.type?n=e.selected?this._radiobuttonSelectedIcon:this._radiobuttonUnselectedIcon:e.icon&&(n=e.icon),n&&((s=new a).src=Y.getImageSrc(n),s.style.verticalAlign="middle",o.appendChild(s));var s=E.createElement("label");Y.setText(s,e.label,!0),(i=s.style).position="absolute",i.height=this._menuItemHeight+"px",i.lineHeight=this._menuItemHeight+"px",i.left="25px",t.appendChild(s),e.items&&t.parentNode&&(i=(s=E.createElement("img")).style,this.isEnabled(e)?s.setAttribute("src",Y.getImageSrc(this._subMenuEnableIcon)):s.setAttribute("src",Y.getImageSrc(this._subMenuDisableIcon)),e=(this._menuItemHeight-8)/2,i.marginTop=e+"px",i.right="5px",i.position="absolute",t.appendChild(s))},onMenuItemRendered:function(t,e){},_addMouseoverListener:function(o,s){var a=this;this._contextView;g.isTouchable&&(o.addEventListener("touchstart",function(t){o.style.background=a._focusBackground,o.style.color=a._focusColor,this===t.relatedTarget||this.contains(t.relatedTarget)||s.items&&!a._itemsShow&&o.parentNode==a._view&&a._showMenuItem(t,o)},!1),o.addEventListener("touchend",function(t){var e,i,n;o.style.background=a._background,o.style.color=a._color,this===t.relatedTarget||this.contains(t.relatedTarget)||s.items&&o.parentNode===a._view&&(e=t.clientX,i=t.clientY,n=s.childrenDiv,(e<(t=a._getPosition(n)).left+2||e>t.left+n.offsetWidth-2||i<t.top+2||i>t.top+n.offsetHeight-2)&&a._hideMenuItem(o))},!1)),o.addEventListener("mouseenter",function(t){o.style.background=a._focusBackground,o.style.color=a._focusColor,this===t.relatedTarget||this.contains(t.relatedTarget)||s.items&&!this._itemsShow&&this.parentNode&&a._showMenuItem(t,this)},!1),o.addEventListener("mouseleave",function(t){var e,i,n;this.style.background=a._background,this.style.color=a._color,this===t.relatedTarget||this.contains(t.relatedTarget)||s.items&&this.parentNode&&(e=t.clientX,i=t.clientY,n=s.childrenDiv,(e<(t=a._getPosition(n)).left+2||e>t.left+n.offsetWidth-2||i<t.top+2||i>t.top+n.offsetHeight-2)&&a._hideMenuItem(this))},!1)},_getPosition:function(t){for(var e=0,i=0;t;)i+=t.offsetLeft,e+=t.offsetTop,t=t.offsetParent;return{left:i,top:e}},_removeContextmenuListener:function(){var t=this._contextView;t&&(t=t.getView?t.getView():t,g.isTouchable&&(t.removeEventListener("touchstart",this._getTouchStartListener(),!1),t.removeEventListener("touchmove",this._getTouchMoveListener(),!1),t.removeEventListener("touchend",this._getTouchEndListener(),!1)),m.removeEventListener("contextmenu",t,this))},_handleContextmenu:function(t){!0===this.onMenuShowing(t)&&this.show(t),t.preventDefault()},_handleBodyClicked:function(t){if(g.isTouchable){for(var e=t.target;e&&e!==this._view;)e=e.parentElement;e!==this._view&&this.hide()}else this._mouseOver||this.hide()},_handleClick:function(t){if(0===t.button){for(var e=t.target;!e.menuItem&&e.parentElement;)e=e.parentElement;var i=e?e.menuItem:null;i&&this.isEnabled(i)&&("check"===i.type&&(i.selected=!i.selected),"radio"===i.type&&(i.groupName?(i.selected=!0,this._items.forEach(function(t){i!==t&&t.groupName===i.groupName&&(t.selected=!1),t.items&&t.items.forEach(function(t){i!==t&&t.groupName===i.groupName&&(t.selected=!1)})})):i.selected=!i.selected),i.action&&i.action(i),this.onAction(i),i.items&&0<i.items.length||this.hide())}},_getTouchStartListener:function(){var e;return this._touchStartListener||((e=this)._touchStartListener=function(t){e._touchMoved=!1,e._lastTouch=new Date}),this._touchStartListener},_getTouchMoveListener:function(){var e;return this._touchMoveListener||((e=this)._touchMoveListener=function(t){e._touchMoved=!0}),this._touchMoveListener},_getTouchEndListener:function(){var e;return this._touchEndListener||((e=this)._touchEndListener=function(t){!e._touchMoved&&1e3<(new Date).getTime()-e._lastTouch.getTime()&&e._handleContextmenu(t)}),this._touchEndListener},getWidth:function(){return this._width},setWidth:function(t){this._width=t},getMenuItemHeight:function(){return this._menuItemHeight},setMenuItemHeight:function(t){this._menuItemHeight=t},getBackground:function(){return this._background},setBackground:function(t){this._background=t},getBorder:function(){return this._border},setBorder:function(t){this._border=t},getDisabledColor:function(){return this._disabledColor},setDisabledColor:function(t){this._disabledColor=t},getFocusColor:function(){return this._focusColor},setFocusColor:function(t){this._focusColor=t},getFocusBackground:function(){return this._focusBackground},setFocusBackground:function(t){this._focusBackground=t},getColor:function(){return this._color},setColor:function(t){this._color=t},getSubMenuEnableIcon:function(){return this._subMenuEnableIcon},setSubMenuEnableIcon:function(t){this._subMenuEnableIcon=t},getSubMenuDisableIcon:function(){return this._subMenuDisableIcon},setSubMenuDisableIcon:function(t){this._subMenuDisableIcon=t},getCheckboxSelectedIcon:function(){return this._checkboxSelectedIcon},setCheckboxSelectedIcon:function(t){this._checkboxSelectedIcon=t},getCheckboxUnselectedIcon:function(){return this._checkboxUnselectedIcon},setCheckboxUnselectedIcon:function(t){this._checkboxUnselectedIcon=t},getRadiobuttonSelectedIcon:function(){return this._radiobuttonSelectedIcon},setRadiobuttonSelectedIcon:function(t){this._radiobuttonSelectedIcon=t},getRadiobuttonUnselectedIcon:function(){return this._radiobuttonUnselectedIcon},setRadiobuttonUnselectedIcon:function(t){this._radiobuttonUnselectedIcon=t},getXOffset:function(){return this._xOffset},setXOffset:function(t){this._xOffset=t},getYOffset:function(){return this._yOffset},setYOffset:function(t){this._yOffset=t}}),x.charts.IS_INVALIDATE_PROPERTY={xZoom:1,xTranslate:1,yZoom:1,yTranslate:1},x.charts.ChartBase=function(t){x.charts.ChartBase.superClass.constructor.apply(this,arguments),this._uniqueColors={},this._nonDataColors={},this._publishedDatas=new ie,this._view=m.createView("hidden"),this._canvas=m.createCanvas(),this._view.appendChild(this._canvas),this.setDataBox(t||new x.ElementBox),this.invalidate(),g.isTouchable?g.isMSTouchable?new x.charts.ChartMSTouchInteraction(this):(new x.charts.ChartTouchInteraction(this),new x.charts.ChartInteraction(this)):new x.charts.ChartInteraction(this),this.setToolTipEnabled(ye.CHART_TOOLTIP_ENABLED)},Y.ext("twaver.charts.ChartBase",x.controls.ViewBase,{__accessor:["xGap","yGap","xTranslate","yTranslate","valueVisible","sortFunction","visibleFunction","xTranslateEnabled","yTranslateEnabled","xZoomEnabled","yZoomEnabled","selectTolerance","backgroundVisible","backgroundFill","backgroundFillColor","backgroundOutlineWidth","backgroundOutlineColor","backgroundGradient","backgroundGradientColor","outerZoom"],__bool:["doubleClickToReset","focusOnClick"],_backgroundVisible:ye.CHART_BACKGROUND_VISIBLE,_backgroundFill:ye.CHART_BACKGROUND_FILL,_backgroundFillColor:ye.CHART_BACKGROUND_FILL_COLOR,_backgroundOutlineWidth:ye.CHART_BACKGROUND_OUTLINE_WIDTH,_backgroundOutlineColor:ye.CHART_BACKGROUND_OUTLINE_COLOR,_backgroundGradient:ye.CHART_BACKGROUND_GRADIENT,_backgroundGradientColor:ye.CHART_BACKGROUND_GRADIENT_COLOR,_selectTolerance:ye.CHART_SELECT_TOLERANCE,_doubleClickToReset:ye.CHART_DOUBLE_CLICK_TO_RESET,_focusOnClick:ye.FOCUS_ON_CLICK,_sortFunction:null,_visibleFunction:null,_canvasWidth:0,_canvasHeight:0,_outerZoomL:1,_xGap:ye.CHART_XGAP,_yGap:ye.CHART_YGAP,_xTranslate:0,_yTranslate:0,_xTranslateEnabled:ye.CHART_XTRANSLATE_ENABLED,_yTranslateEnabled:ye.CHART_YTRANSLATE_ENABLED,_xZoom:1,_yZoom:1,_maxZoom:ye.ZOOM_MAX,_minZoom:ye.ZOOM_MIN,_xZoomEnabled:ye.CHART_XZOOM_ENABLED,_yZoomEnabled:ye.CHART_YZOOM_ENABLED,_valueVisible:ye.CHART_VALUE_VISIBLE,_valueFont:ye.CHART_VALUE_FONT,isToolTipEnabled:function(){return!!this._toolTipListener},setToolTipEnabled:function(t){var e;t?this._toolTipListener||((e=this)._toolTipListener=function(t){ut.showToolTip(t,e.getToolTip(t))},this._canvas.addEventListener("mousemove",this._toolTipListener,!0),this.firePropertyChange("toolTipEnabled",!1,!0)):this._toolTipListener&&(ut.hideToolTip(),this._canvas.removeEventListener("mousemove",this._toolTipListener,!0),delete this._toolTipListener,this.firePropertyChange("toolTipEnabled",!0,!1))},getToolTip:function(t){if(this._toolTipInfos){var e=this.getLogicalPoint(t);e.x-=this._xTranslate,e.y-=this._yTranslate;for(var i=this._toolTipInfos.size()-1;0<=i;i--){var n=this._toolTipInfos.get(i);if(n.rect&&b.containsPoint(n.rect,e))return this.getToolTipByData(n.data,n)}}else{t=this.tryGetDataAt(t);if(t)return this.getToolTipByData(t,{value:this.getValue(t)})}return null},getToolTipByData:function(t,e){return void 0!==e.value?this.formatValueText(e.value,t):null},addToolTipInfo:function(t,e,i,n,o,s,a){this._toolTipInfos&&this._toolTipInfos.add({data:s,rect:{x:t,y:e,width:i,height:n},value:o,index:a})},getLogicalPoint:function(t){return m.getLogicalPoint(this._canvas,t,this._outerZoom)},getTextSize:function(t,e){e=R.getTextSize(t,e);return e.width&&(e.width+=4),e},getUniqueColor:function(t,e){if(null==t)return null;var i;if(!e&&(i=this._nonDataColors[t]))return i;var n=R.getColorArray(t);if(!e)return i=255!=n[3]?t:"rgba("+n[0]+","+n[1]+","+n[2]+",0.99)",this._nonDataColors[t]=i;var o="rgb("+n[0]+","+n[1]+","+n[2]+")";if(void 0!==this._uniqueColors[o]&&this._uniqueColors[o]!==e){var s=1,a=-1,r=1;for(g.isOpera&&(n=[n[0],n[1],n[2]]);n[0]+=s,255<=n[0]?(n[0]=255,s=-1):n[0]<=0&&(n[0]=0,s=1),o="rgb("+n[0]+","+n[1]+","+n[2]+")",void 0!==this._uniqueColors[o]&&this._uniqueColors[o]!==e&&(n[1]+=a,255<=n[1]?(n[1]=255,a=-1):n[1]<=0&&(n[1]=0,a=1),o="rgb("+n[0]+","+n[1]+","+n[2]+")",void 0!==this._uniqueColors[o]&&this._uniqueColors[o]!==e)&&(n[2]+=r,255<=n[2]?(n[2]=255,r=-1):n[2]<=0&&(n[2]=0,r=1),o="rgb("+n[0]+","+n[1]+","+n[2]+")",void 0!==this._uniqueColors[o]&&this._uniqueColors[o]!==e););}return this._uniqueColors[o]=e,o},tryGetDataAt:function(t,e){if((null==e||e<0)&&(e=this._selectTolerance),!(t=t.target?m.getLogicalPoint(this._canvas,arguments[0],this._outerZoom):t))return null;var i=t.x-e,n=t.y-e,o=2*e+1,s=2*e+1;try{for(var a=this._canvas.getContext("2d").getImageData(i,n,o,s).data,r=0,h=a.length;r<h;r+=4)if(255===a[r+3]){var l="rgb("+a[r]+","+a[r+1]+","+a[r+2]+")",c=this._uniqueColors[l];if(c)return c}}catch(t){}return null},_getPoint:function(){var t,e;if(2===arguments.length)t=arguments[0],e=arguments[1];else if(arguments[0].target){var i=m.getLogicalPoint(this._canvas,arguments[0],this._outerZoom);if(!i)return null;t=i.x,e=i.y}else t=arguments[0].x,e=arguments[0].y;return{x:t,y:e}},getDataAt:function(){var t=this._getPoint.apply(this,arguments),e=t.x,t=t.y;if(e<0||t<0||e>this._canvasWidth||t>this._canvasHeight)return null;try{var i=this._canvas.getContext("2d").getImageData(e,t,1,1).data;if(255===i[3]){var n="rgb("+i[0]+","+i[1]+","+i[2]+")",o=this._uniqueColors[n];if(o)return o}}catch(t){}return null},getBackgroundRect:function(){return this._backgroundRect},drawBackground:function(t,e){this._backgroundRect=Y.clone(e),null!=e&&0<e.width&&0<e.height&&this._backgroundVisible&&(this._backgroundFill&&R.fill(t,this.getUniqueColor(this._backgroundFillColor),this._backgroundGradient,this.getUniqueColor(this._backgroundGradientColor),e),0<this._backgroundOutlineWidth&&(t.lineWidth=this._backgroundOutlineWidth,t.strokeStyle=this._backgroundOutlineColor),t.beginPath(),t.rect(e.x,e.y,e.width,e.height),t.closePath(),this._backgroundFill&&t.fill(),0<this._backgroundOutlineWidth&&t.stroke())},getName:function(t){return t.getName()},getColor:function(t){return t.getStyle?t.getStyle("chart.color"):t.getClient("chart.color")},getValue:function(t){return t.getStyle?t.getStyle("chart.value"):0},getValueColor:function(t){return(t.getStyle?t:x.Styles).getStyle("chart.value.color")},setValueFont:function(t){t!==this._valueFont&&(this._valueFont=t,this.firePropertyChange("valueFont",t,t))},getValueFont:function(t){if(t){t=(t.getStyle?t:x.Styles).getStyle("chart.value.font");if(t)return t}return this._valueFont},formatValueText:function(t,e){return t},getCanvasWidth:function(){return this._canvasWidth},getCanvasHeight:function(){return this.canvasHeight},getCanvas:function(){return this._canvas},isVisible:function(t){return!(this._internalVisibleFunction&&!this._internalVisibleFunction(t))&&(!this._visibleFunction||this._visibleFunction(t))},onPropertyChanged:function(t){x.charts.IS_INVALIDATE_PROPERTY[t.property]?this.invalidate():this.invalidateModel()},getDataBox:function(){return this._box},setDataBox:function(t){if(!t)throw"DataBox can not be null";var e;this._box!==t&&((e=this._box)&&(e.removeDataBoxChangeListener(this.handleDataBoxChange,this),e.removeDataPropertyChangeListener(this.handlePropertyChange,this),e.removeHierarchyChangeListener(this.handleHierarchyChange,this),this._selectionModel||e.getSelectionModel().removeSelectionChangeListener(this.handleSelectionChange,this)),this._box=t,this._box.addDataBoxChangeListener(this.handleDataBoxChange,this),this._box.addDataPropertyChangeListener(this.handlePropertyChange,this),this._box.addHierarchyChangeListener(this.handleHierarchyChange,this),this._selectionModel?this._selectionModel._setDataBox(t):this._box.getSelectionModel().addSelectionChangeListener(this.handleSelectionChange,this),this.invalidateModel(),this.firePropertyChange("dataBox",e,this._box))},handleDataBoxChange:function(t){this.invalidateModel()},handlePropertyChange:function(t){this.invalidateModel()},handleHierarchyChange:function(t){this.invalidateModel()},handleSelectionChange:function(t){this.invalidateModel()},getUnfilteredDatas:function(){return this._unfilteredDatas||this._publishedDatas},getPublishedDatas:function(){return this._publishedDatas},createPublishedDatas:function(){return this._unfilteredDatas=new ie,this._buildChildren(this._box.getRoots(),this._unfilteredDatas),this._sortFunction&&this._unfilteredDatas.sort(this._sortFunction),this._unfilteredDatas.toList(this.isVisible,this)},_buildChildren:function(t,e){t.forEach(function(t){e.add(t),this._buildChildren(t.getChildren(),e)},this)},invalidateModel:function(){this._invalidateModel||(this._invalidateModel=!0,this.invalidate())},validateImpl:function(){this._invalidateModel&&(this._invalidateModel=!1,this._uniqueColors={},this._nonDataColors={},this._publishedDatas=this.createPublishedDatas(),this._publishedDatas.forEach(function(t){t.IStyle?t.getStyle("chart.color")||t.setStyle("chart.color",Y.nextColor()):t.getClient("chart.color")||t.setClient("chart.color",Y.nextColor())}),this.validateModel());var t=this._canvas.getContext("2d");this._canvasWidth=this._view.clientWidth,this._canvasHeight=this._view.clientHeight,this._canvas.setAttribute("width",this._canvasWidth),this._canvas.setAttribute("height",this._canvasHeight),t.clearRect(0,0,this._canvasWidth,this._canvasHeight),x.Util.makeHighRes(this._canvas),0<this._canvasWidth&&0<this._canvasHeight&&(t.translate(this._xTranslate,this._yTranslate),this._valueTexts=this._valueVisible?new ie:null,this.validateDisplay(t,this._canvasWidth*this._xZoom,this._canvasHeight*this._yZoom),delete this._valueTexts,t.translate(-this._xTranslate,-this._yTranslate))},adjustBounds:function(t){x.charts.ChartBase.superClass.adjustBounds.apply(this,arguments)},validateModel:function(){},validateDisplay:function(t,e,i){},drawLine:function(t,e,i,n,o,s,a){0<i&&(t.lineWidth=i,t.strokeStyle=this.getUniqueColor(e),t.beginPath(),t.moveTo(n,o),t.lineTo(s,a),t.stroke())},drawValueTexts:function(e){this._valueTexts&&this._valueTexts.forEach(function(t){R.drawText(e,t.text,t,t.font,t.color)})},drawVerticalText:function(t,e,i,n,o){o=this.getUniqueColor(o),t.translate(i.x,i.y),t.rotate(-Math.PI/2),R.drawText(t,e,null,n,o),t.rotate(Math.PI/2),t.translate(-i.x,-i.y)},_getValueTextInfo:function(t,e){if(this._valueTexts){var i=this.formatValueText(e,t);if(i&&""!==i){e=this.getValueColor(t),t={text:i,font:this.getValueFont(t),color:this.getUniqueColor(e,t)};return this._valueTexts.add(t),t}}return null},getMaxZoom:function(){return this._maxZoom},setMaxZoom:function(t){var e;t<0||(e=this._maxZoom,this._maxZoom=t,this.firePropertyChange("maxZoom",e,t),this.getXZoom()>t&&this.setXZoom(t,!1),this.getYZoom()>t&&this.setYZoom(t,!1))},getMinZoom:function(){return this._minZoom},setMinZoom:function(t){var e;t<0||(e=this._minZoom,this._minZoom=t,this.firePropertyChange("minZoom",e,t),this.getXZoom()<t&&this.setXZoom(t),this.getYZoom()<t&&this.setYZoom(t))},zoomIn:function(t){(t=null==t?ye.ZOOM_ANIMATE:t)?x.animate.AnimateManager.start(new x.animate.AnimateXYZoom(this,this._xZoom*ye.ZOOM_INCREMENT,this._yZoom*ye.ZOOM_INCREMENT)):(this.xZoomIn(!1),this.yZoomIn(!1))},zoomOut:function(t){(t=null==t?ye.ZOOM_ANIMATE:t)?x.animate.AnimateManager.start(new x.animate.AnimateXYZoom(this,this._xZoom/ye.ZOOM_INCREMENT,this._yZoom/ye.ZOOM_INCREMENT)):(this.xZoomOut(!1),this.yZoomOut(!1))},zoomReset:function(t){(t=null==t?ye.ZOOM_ANIMATE:t)?x.animate.AnimateManager.start(new x.animate.AnimateXYZoom(this,1,1)):(this.xZoomReset(!1),this.yZoomReset(!1))},getXZoom:function(){return this._xZoom},onXZoomChanged:function(t,e){},xZoomIn:function(t){this.setXZoom(this._xZoom*ye.ZOOM_INCREMENT,t)},xZoomOut:function(t){this.setXZoom(this._xZoom/ye.ZOOM_INCREMENT,t)},xZoomReset:function(t){this.setXZoom(1,t)},setXZoom:function(t,e){var i;!Y.num(t)||t<=0||(t=(t=t<this._minZoom?this._minZoom:t)>this._maxZoom?this._maxZoom:t)!==this.xZoom&&((e=null==e?ye.ZOOM_ANIMATE:e)?x.animate.AnimateManager.start(new x.animate.AnimateXZoom(this,t)):(i=this._xZoom,e=this._xTranslate-(this._canvasWidth/2-this._xTranslate)/i*(t-i),this._xZoom=t,this.firePropertyChange("xZoom",i,t),this.onXZoomChanged(i,t),this.setXTranslate(e)))},getYZoom:function(){return this._yZoom},onYZoomChanged:function(t,e){},yZoomIn:function(t){this.setYZoom(this._yZoom*ye.ZOOM_INCREMENT,t)},yZoomOut:function(t){this.setYZoom(this._yZoom/ye.ZOOM_INCREMENT,t)},yZoomReset:function(t){this.setYZoom(1,t)},setYZoom:function(t,e){var i;!Y.num(t)||t<=0||(t=(t=t<this._minZoom?this._minZoom:t)>this._maxZoom?this._maxZoom:t)!==this.YZoom&&((e=null==e?ye.ZOOM_ANIMATE:e)?x.animate.AnimateManager.start(new x.animate.AnimateYZoom(this,t)):(i=this._yZoom,e=this._yTranslate-(this._canvasHeight/2-this._yTranslate)/i*(t-i),this._yZoom=t,this.firePropertyChange("yZoom",i,t),this.onYZoomChanged(i,t),this.setYTranslate(e)))}}),x.charts.ScaleChart=function(t){x.charts.ScaleChart.superClass.constructor.apply(this,arguments)},Y.ext("twaver.charts.ScaleChart",x.charts.ChartBase,{__accessor:["upperLimit","lowerLimit","xAxisText","xAxisLineColor","xAxisLineWidth","xAxisTextColor","xAxisTextFont","yAxisText","yAxisLineColor","yAxisLineWidth","yAxisTextColor","yAxisTextFont","xScaleTexts","xScaleTextFont","xScaleTextColor","xScaleTextOrientation","yScaleTextVisible","yScaleTextColor","yScaleTextFont","yScaleLineColor","yScaleLineWidth","yScaleValueGap","yScalePixelGap","yScaleMinTextVisible","valueSpanCount"],_reset:function(){this._map={},this._max=0,this._min=0,this._columnCount=this._xScaleTexts?this._xScaleTexts.size():0,null!=this._upperLimit&&(this._max=this._upperLimit),null!=this._lowerLimit&&(this._min=this._lowerLimit)},getMin:function(){return this._min},getMax:function(){return this._max},getRange:function(){return this._range},getColumnCount:function(){return this._columnCount},getColumnWidth:function(){return this._columnWidth},getValues:function(t){return t.getStyle?t.getStyle("chart.values"):null},formatYScaleText:function(t){return t.toFixed(2)},_initRange:function(){null==this._lowerLimit&&(this._min>=this._max&&(this._min=this._max-.1*Math.abs(this._max)),this._min=this._min-.1*(this._max-this._min)),this._range=this._max-this._min},_initValuesProportion:function(){this._publishedDatas.forEach(function(t){var e=this._map[t.getId()];e.values.forEach(function(t){null==t?e.proportions.add(null):e.proportions.add(0==this._range?0:t/this._range)},this)},this)},_commonValidateModel:function(){this._publishedDatas.forEach(function(t){var e=new ie(this.getValues(t));e.size()>this._columnCount&&(this._columnCount=e.size());var i={data:t,values:e,proportions:new ie,color:this.getUniqueColor(this.getColor(t),t)};this._initInfo&&this._initInfo(t,i),this._map[t.getId()]=i,null!=this._upperLimit&&null!=this._lowerLimit||e.forEach(function(t){null!=t&&(null==this._upperLimit&&t>this._max&&(this._max=t),null==this._lowerLimit&&t<this._min&&(this._min=t))},this)},this),this._initRange(),this._initValuesProportion()},validateDisplay:function(i,t,e){var n=0;this._xAxisText&&(n=this.getTextSize(this._xAxisTextFont,this._xAxisText).height);var o=0;this._xScaleTexts&&this._xScaleTexts.forEach(function(t){t=this.getTextSize(this._xScaleTextFont,t),t="vertical"===this._xScaleTextOrientation?t.width:t.height;o<t&&(o=t)},this);var s,a=e-this._yGap-n-o,r=a-this._yGap,h=null==this._upperLimit?.9*r:r,l=0;this._yAxisText&&(l=this.getTextSize(this._yAxisTextFont,this._yAxisText).height);var c=0<this._yScaleValueGap?(s=Math.max(this._yScaleValueGap/this._range*h,1),this._yScaleValueGap):(s=Math.max(this._yScalePixelGap,1),this._range*(s/h)),u=0,d=new ie;if(this._yScaleTextVisible)for(var _,g,f=this._yScaleMinTextVisible?0:s,A=this._min+(this._yScaleMinTextVisible?0:c);f<=1+r;)(g=this.formatYScaleText(A))&&((_=this.getTextSize(this._yScaleTextFont,g)).width>u&&(u=_.width),d.add({text:g,size:_,cursor:f})),f+=s,A+=c;var p={x:this._xGap+l+u,y:this._yGap,width:t-this._xGap-l-u-this._xGap,height:e-this._yGap-o-n-this._yGap};if(this.drawBackground(i,p),0<this._columnCount?this._columnWidth=p.width/(3*this._columnCount+1)*2:this._columnWidth=p.width/2,0===this._columnWidth&&(this._columnWidth=1),0<this._yScaleLineWidth)for(f=0;f<=1+r;)this.drawLine(i,this._yScaleLineColor,this._yScaleLineWidth,p.x,a-f,p.x+p.width,a-f),f+=s;this._xAxisText&&R.drawText(i,this._xAxisText,{x:p.x+p.width/2,y:a+o+n/2},this._xAxisTextFont,this.getUniqueColor(this._xAxisTextColor)),this._yAxisText&&this.drawVerticalText(i,this._yAxisText,{x:this._xGap+l/2,y:r/2+this._yGap},this._yAxisTextFont,this.getUniqueColor(this._yAxisTextColor)),this.drawLine(i,this._yAxisLineColor,this._yAxisLineWidth,p.x,p.y+p.height,p.x,p.y);var m=this.getUniqueColor(this._yScaleTextColor);d.forEach(function(t){var e={x:this._xGap+l+u-t.size.width/2,y:a-t.cursor};R.drawText(i,t.text,e,this._yScaleTextFont,m)},this);for(var v=p.y+p.height+o/2,m=this.getUniqueColor(this._xScaleTextColor),y=0<this._xScaleLineWidth?this.getUniqueColor(this._xScaleLineColor):null,w=0;w<this._columnCount;w++){var x,E=p.x+this._columnWidth*(1+1.5*w);this._xScaleTexts&&w<this._xScaleTexts.size()&&(g=this._xScaleTexts.get(w))&&(x={x:E,y:v},"vertical"===this._xScaleTextOrientation?this.drawVerticalText(i,g,x,this._yScaleTextFont,m):this._valueSpanCount&&w%this._valueSpanCount!=0||R.drawText(i,g,x,this._xScaleTextFont,m)),"default"===this._type||!y||this._valueSpanCount&&w%this._valueSpanCount!=0||this.drawLine(i,y,this._xScaleLineWidth,E,p.y+p.height,E,p.y)}n=a+this._min/c*s;0<this._publishedDatas.size()&&0<this._columnCount&&this.drawContent(i,p,h,n),this.drawLine(i,this._xAxisLineColor,this._xAxisLineWidth,p.x,p.y+p.height,p.x+p.width,p.y+p.height)}}),x.charts.PieChart=function(t){this._sum=0,this._map={},x.charts.PieChart.superClass.constructor.apply(this,arguments)},Y.ext("twaver.charts.PieChart",x.charts.ChartBase,{__accessor:["type","selectOffset","startAngle","shadowColor","shadowOffset","lineRate","donutRate","valuePosition"],_type:ye.PIECHART_TYPE,_lineRate:ye.PIECHART_LINE_RATE,_donutRate:ye.PIECHART_DONUT_RATE,_startAngle:ye.PIECHART_START_ANGLE,_shadowColor:ye.PIECHART_SHADOW_COLOR,_shadowOffset:ye.PIECHART_SHADOW_OFFSET,_selectOffset:ye.PIECHART_SELECT_OFFSET,_valuePosition:ye.PIECHART_VALUE_POSITION,getSum:function(){return this._sum},validateModel:function(){this._sum=0,this._map={},this._publishedDatas.forEach(function(t){var e=this.getValue(t);this._map[t.getId()]={data:t,value:e,color:this.getUniqueColor(this.getColor(t),t)},this._sum+=e},this);var e=this._startAngle;this._publishedDatas.forEach(function(t){t=this._map[t.getId()];t.proportion=0===this._sum?0:t.value/this._sum,"line"!==this._type&&(t.startAngle=e,t.arc=t.proportion*Math.PI*2,e+=t.arc)},this)},validateDisplay:function(l,t,e){var c,u,d,_,o,s={x:this._xGap,y:this._yGap,width:t-2*this._xGap,height:e-2*this._yGap};this.drawBackground(l,s),b.grow(s,-4,-4),s.width<=0||s.height<=0||(0<(e=this._shadowOffset)&&(l.shadowOffsetX=e,l.shadowOffsetY=e,l.shadowBlur=1.5*e,l.shadowColor=this._shadowColor),"oval"===this._type||"circle"===this._type?(c=s.x+s.width/2,u=s.y+s.height/2,d=s.width/2,_=s.height/2,"circle"===this._type&&(d=_=Math.min(d,_)),this._publishedDatas.forEach(function(t){var e,i,n,o=this._map[t.getId()];0!==o.arc&&(i=e=0,this.isSelected(t)&&(n=o.startAngle+o.arc/2,e=Math.cos(n)*this._selectOffset,i=Math.sin(n)*this._selectOffset*_/d),l.fillStyle=o.color,l.beginPath(),l.moveTo(c+e,u-i),R.drawArc(l,c+e,u-i,o.startAngle,o.arc,d,_,!0),l.closePath(),l.fill(),(t=this._getValueTextInfo(t,o.value))&&(n=o.startAngle+o.arc/2,t.x=c+e+Math.cos(n)*d*this._valuePosition,t.y=u-i-Math.sin(n)*_*this._valuePosition))},this)):"donut"===this._type||"ovalDonut"===this._type?(c=s.x+s.width/2,u=s.y+s.height/2,d=s.width/2,_=s.height/2,"donut"===this._type&&(d=_=Math.min(d,_)),this._publishedDatas.forEach(function(t){var e,i,n,o,s,a,r,h=this._map[t.getId()];0!==h.arc&&(i=e=0,this.isSelected(t)&&(r=h.startAngle+h.arc/2,e=Math.cos(r)*this._selectOffset,i=Math.sin(r)*this._selectOffset*_/d),n=c+Math.cos(h.startAngle)*d*this._donutRate,o=u-Math.sin(h.startAngle)*_*this._donutRate,s=c+Math.cos(h.startAngle+h.arc)*d*this._donutRate,a=u-Math.sin(h.startAngle+h.arc)*_*this._donutRate,l.fillStyle=h.color,l.beginPath(),l.moveTo(n+e,o-i),R.drawArc(l,c+e,u-i,h.startAngle,h.arc,d,_,!0),l.lineTo(s+e,a-i),R.drawArc(l,c+e,u-i,h.startAngle+h.arc,-h.arc,d*this._donutRate,_*this._donutRate,!0),l.closePath(),l.fill(),(t=this._getValueTextInfo(t,h.value))&&(r=h.startAngle+h.arc/2,h=this._donutRate+(1-this._donutRate)*this._valuePosition,t.x=c+e+Math.cos(r)*d*h,t.y=u-i-Math.sin(r)*_*h))},this)):"line"===this._type&&(e=s.height*this._lineRate,s.y=s.y+s.height/2-e/2,s.height=e,o=s.x,this._publishedDatas.forEach(function(t){var e,i=this._map[t.getId()],n=s.width*i.proportion;0!=n&&(l.beginPath(),l.fillStyle=i.color,e=this.isSelected(t)?-this._selectOffset:0,l.rect(o,s.y+e,n,s.height),l.closePath(),l.fill(),(i=this._getValueTextInfo(t,i.value))&&(i.x=o+n/2,i.y=s.y+s.height+e-s.height*this._valuePosition),o+=n)},this)),0<this._shadowOffset&&(l.shadowOffsetX=0,l.shadowOffsetY=0,l.shadowBlur=0),this.drawValueTexts(l))}}),x.charts.BarChart=function(t){x.charts.BarChart.superClass.constructor.apply(this,arguments)},Y.ext("twaver.charts.BarChart",x.charts.ScaleChart,{__accessor:["type"],_upperLimit:ye.BARCHART_UPPER_LIMIT,_lowerLimit:ye.BARCHART_LOWER_LIMIT,_type:ye.BARCHART_TYPE,_xAxisText:null,_xAxisTextColor:ye.BARCHART_XAXIS_TEXT_COLOR,_xAxisTextFont:ye.BARCHART_XAXIS_TEXT_FONT,_xAxisLineColor:ye.BARCHART_XAXIS_LINE_COLOR,_xAxisLineWidth:ye.BARCHART_XAXIS_LINE_WIDTH,_yAxisText:null,_yAxisTextColor:ye.BARCHART_YAXIS_TEXT_COLOR,_yAxisTextFont:ye.BARCHART_YAXIS_TEXT_FONT,_yAxisLineColor:ye.BARCHART_YAXIS_LINE_COLOR,_yAxisLineWidth:ye.BARCHART_YAXIS_LINE_WIDTH,_xScaleTexts:null,_xScaleTextFont:ye.BARCHART_XSCALE_TEXT_FONT,_xScaleTextColor:ye.BARCHART_XSCALE_TEXT_COLOR,_xScaleTextOrientation:ye.BARCHART_XSCALE_TEXT_ORIENTATION,_yScaleTextVisible:ye.BARCHART_YSCALE_TEXT_VISIBLE,_yScaleTextColor:ye.BARCHART_YSCALE_TEXT_COLOR,_yScaleTextFont:ye.BARCHART_YSCALE_TEXT_FONT,_yScaleLineColor:ye.BARCHART_YSCALE_LINE_COLOR,_yScaleLineWidth:ye.BARCHART_YSCALE_LINE_WIDTH,_yScaleValueGap:ye.BARCHART_YSCALE_VALUE_GAP,_yScalePixelGap:ye.BARCHART_YSCALE_PIXEL_GAP,_yScaleMinTextVisible:ye.BARCHART_YSCALE_MIN_TEXT_VISIBLE,validateModel:function(){var t=this._type+"ValidateModel";this[t]&&(this._reset(),this[t]())},defaultValidateModel:function(){this._columnCount=this._publishedDatas.size(),this._publishedDatas.forEach(function(t){var e=this.getValue(t);null==this._upperLimit&&e>this._max&&(this._max=e),null==this._lowerLimit&&e<this._min&&(this._min=e),this._map[t.getId()]={data:t,value:e,color:this.getUniqueColor(this.getColor(t),t)}},this),this._initRange(),this._publishedDatas.forEach(function(t){t=this._map[t.getId()];t.proportion=0==this._range?0:t.value/this._range},this)},layerValidateModel:function(){this._commonValidateModel()},groupValidateModel:function(){this._commonValidateModel()},stackValidateModel:function(){if(this._publishedDatas.forEach(function(t){var e=new ie(this.getValues(t));e.size()>this._columnCount&&(this._columnCount=e.size());e={data:t,values:e,proportions:new ie,color:this.getUniqueColor(this.getColor(t),t)};this._map[t.getId()]=e},this),null==this._upperLimit||null==this._lowerLimit)for(var e=0;e<this._columnCount;e++){var i=0,n=0;this._publishedDatas.forEach(function(t){t=this._map[t.getId()];t.values.size()>e&&(null!=(t=t.values.get(e))&&(0<=t?i+=t:n+=t))},this),null==this._upperLimit&&i>this._max&&(this._max=i),null==this._lowerLimit&&n<this._min&&(this._min=n)}this._initRange(),this._initValuesProportion()},percentValidateModel:function(){this._publishedDatas.forEach(function(t){var e=new ie(this.getValues(t));e.size()>this._columnCount&&(this._columnCount=e.size());e={data:t,values:e,proportions:new ie,color:this.getUniqueColor(this.getColor(t),t)};this._map[t.getId()]=e},this);for(var n=new ie,o=0;o<this._columnCount;o++){var e=0;this._publishedDatas.forEach(function(t){t=this._map[t.getId()];t.values.size()>o&&(null!=(t=t.values.get(o))&&(e+=t))},this),n.add(e)}for(o=0;o<this._columnCount;o++)this._publishedDatas.forEach(function(t){var e=this._map[t.getId()],i=n.get(o);if(0!==i&&e.values.size()>o){t=e.values.get(o);if(null!=t)return void e.proportions.add(t/i)}e.proportions.add(null)},this);this._min=0,this._max=1,this._range=1},drawRect:function(t,e,i,n,o,s,a){t.fillStyle=e,i&&this._selectInfos.add({x:n,y:o,w:s,h:a,color:this.getUniqueColor(R.darker(e))}),t.beginPath(),t.rect(n,o,s,a),t.closePath(),t.fill()},drawContent:function(e,t,i,n){this._selectInfos=new ie,this._toolTipInfos=this.isToolTipEnabled()?new ie:null,"default"===this._type?this.drawDefaultContent(e,t,i,n):"group"===this._type?this.drawGroupContent(e,t,i,n):"percent"===this._type?this.drawPercentContent(e,t,i,n):"stack"===this._type?this.drawStackContent(e,t,i,n):"layer"===this._type&&this.drawLayerContent(e,t,i,n),this.drawValueTexts(e),this._selectInfos.forEach(function(t){e.lineWidth=2,e.strokeStyle=t.color,e.beginPath(),e.rect(t.x,t.y,t.w,t.h),e.closePath(),e.stroke()},this),delete this._selectInfos},drawDefaultContent:function(t,e,i,n){for(var o=this._publishedDatas.size(),s=this._columnWidth,a=0;a<o;a++){var r=this._publishedDatas.get(a),h=this._map[r.getId()],l=e.x+s*(.5+1.5*a),c=Math.abs(i*h.proportion),u=0<h.proportion?n-c:n;this.drawRect(t,h.color,this.isSelected(r),l,u,s,c),this.addToolTipInfo(l,u,s,c,h.value,r);r=this._getValueTextInfo(r,h.value);r&&(h=this.getTextSize(r.font,r.text),r.x=l+s/2,r.y=u-h.height/2+1)}},drawPercentContent:function(t,e,i,n){this.drawStackContent(t,e,i,n)},drawStackContent:function(n,t,o,e){for(var i=this._columnCount,s=this._columnWidth,a=0;a<i;a++){var r=e,h=t.x+s*(.5+1.5*a);this._publishedDatas.forEach(function(t){var e,i=this._map[t.getId()];a<i.proportions.size()&&(null!=(e=i.proportions.get(a))&&(r-=e=o*e,this.drawRect(n,i.color,this.isSelected(t),h,r,s,e),this.addToolTipInfo(h,r,s,e,i.values.get(a),t),(i=this._getValueTextInfo(t,i.values.get(a)))&&(i.x=h+s/2,i.y=r+e/2)))},this)}},drawLayerContent:function(a,t,r,h){for(var l=this._publishedDatas.size(),e=this._columnCount,c=this._columnWidth,u=3*c/8/l,d=0;d<e;d++){var _=t.x+c*(.5+1.5*d),g=0;this._publishedDatas.forEach(function(t){var e,i,n,o,s=this._map[t.getId()];d<s.proportions.size()&&(null!=(o=s.proportions.get(d))&&(i=h-(e=r*o),n=_+c/2-c/8-u*(l-g),o=2*(c/8+u*(l-g)),this.drawRect(a,s.color,this.isSelected(t),n,i,o,e),this.addToolTipInfo(n,i,o,e,s.values.get(d),t),(t=this._getValueTextInfo(t,s.values.get(d)))&&(s=this.getTextSize(t.font,t.text),t.x=n+o/2,t.y=i-s.height/2+1))),g++},this)}},drawGroupContent:function(o,t,s,a){for(var e=this._publishedDatas.size(),i=this._columnCount,n=this._columnWidth,r=n/e,h=0;h<i;h++){var l=t.x+n*(.5+1.5*h),c=0;this._publishedDatas.forEach(function(t){var e,i,n=this._map[t.getId()];h<n.proportions.size()&&(null!=(i=n.proportions.get(h))&&(i=a-(e=s*i),this.drawRect(o,n.color,this.isSelected(t),l+r*c,i,r,e),this.addToolTipInfo(l+r*c,i,r,e,n.values.get(h),t),(t=this._getValueTextInfo(t,n.values.get(h)))&&(n=this.getTextSize(t.font,t.text),t.x=l+r*c+r/2,t.y=i-n.height/2+1))),c++},this)}}}),x.charts.LineChart=function(t){x.charts.LineChart.superClass.constructor.apply(this,arguments),this._selectTolerance=2},Y.ext("twaver.charts.LineChart",x.charts.ScaleChart,{__accessor:["xScaleLineColor","xScaleLineWidth","interruptable"],_interruptable:ye.LINECHART_INTERRUPTABLE,_upperLimit:ye.LINECHART_UPPER_LIMIT,_lowerLimit:ye.LINECHART_LOWER_LIMIT,_xAxisText:null,_xAxisTextColor:ye.LINECHART_XAXIS_TEXT_COLOR,_xAxisTextFont:ye.LINECHART_XAXIS_TEXT_FONT,_xAxisLineColor:ye.LINECHART_XAXIS_LINE_COLOR,_xAxisLineWidth:ye.LINECHART_XAXIS_LINE_WIDTH,_yAxisText:null,_yAxisTextColor:ye.LINECHART_YAXIS_TEXT_COLOR,_yAxisTextFont:ye.LINECHART_YAXIS_TEXT_FONT,_yAxisLineColor:ye.LINECHART_YAXIS_LINE_COLOR,_yAxisLineWidth:ye.LINECHART_YAXIS_LINE_WIDTH,_xScaleTexts:null,_xScaleTextFont:ye.LINECHART_XSCALE_TEXT_FONT,_xScaleTextColor:ye.LINECHART_XSCALE_TEXT_COLOR,_xScaleTextOrientation:ye.LINECHART_XSCALE_TEXT_ORIENTATION,_xScaleLineColor:ye.LINECHART_XSCALE_LINE_COLOR,_xScaleLineWidth:ye.LINECHART_XSCALE_LINE_WIDTH,_valueSpanCount:ye.LINECHART_VALUESPANCOUNT,_yScaleTextVisible:ye.LINECHART_YSCALE_TEXT_VISIBLE,_yScaleTextColor:ye.LINECHART_YSCALE_TEXT_COLOR,_yScaleTextFont:ye.LINECHART_YSCALE_TEXT_FONT,_yScaleLineColor:ye.LINECHART_YSCALE_LINE_COLOR,_yScaleLineWidth:ye.LINECHART_YSCALE_LINE_WIDTH,_yScaleValueGap:ye.LINECHART_YSCALE_VALUE_GAP,_yScalePixelGap:ye.LINECHART_YSCALE_PIXEL_GAP,_yScaleMinTextVisible:ye.LINECHART_YSCALE_MIN_TEXT_VISIBLE,getLineWidth:function(t){return(t.getStyle?t:x.Styles).getStyle("chart.line.width")},getMarkerShape:function(t){return(t.getStyle?t:x.Styles).getStyle("chart.marker.shape")},getMarkerSize:function(t){return(t.getStyle?t:x.Styles).getStyle("chart.marker.size")},_initInfo:function(t,e){e.markerShape=this.getMarkerShape(t),e.markerSize=this.getMarkerSize(t),e.lineWidth=this.getLineWidth(t),this.isSelected(t)&&(e.lineWidth+=2)},validateModel:function(){this._reset(),this._commonValidateModel()},getPointIndexAt:function(){var t=this._getPoint.apply(this,arguments),e=this.tryGetDataAt(t);if(!e)return-1;for(var i,e=this._map[e.getId()],n=e.points,o=e.markerSize,s=0,a=n.size();s<a;s++)if((i=n.get(s))&&b.getDistance(t,i)<=o)return s;return-1},drawContent:function(_,g,f,A){this._toolTipInfos=this.isToolTipEnabled()?new ie:null,this._publishedDatas.forEach(function(t){var s=this._map[t.getId()],e=0<s.markerSize?new ie:null;_.strokeStyle=s.color,_.lineWidth=s.lineWidth,_.beginPath();var i=s.proportions,n=null,o=i.size(),a=new ie;s.points=a;for(var r,h=0;h<o;h++){var l,c,u,d=i.get(h);null!=d?(l={x:g.x+this._columnWidth*(1+1.5*h),y:A-f*d},a.add(l),null==n?_.moveTo(l.x,l.y):_.lineTo(l.x,l.y),c=s.values.get(h),(u=this._getValueTextInfo(t,c))&&(d=this.getTextSize(u.font,u.text),u.x=l.x,u.y=l.y-d.height/2+2),e&&e.add({point:l,value:c,data:t,index:h}),n=l):this._interruptable&&a.add(n=null)}_.stroke(),e&&(r=s.markerSize/2,e.forEach(function(t){_.fillStyle=s.color;var e=t.point.x-r,i=t.point.y-r,n=s.markerSize,o=s.markerSize;R.drawVector(_,s.markerShape,null,e,i,n,o),_.fill(),this.addToolTipInfo(e,i,n,o,t.value,t.data,t.index)},this))},this),this.drawValueTexts(_)}}),x.charts.BubbleChart=function(t){x.charts.BubbleChart.superClass.constructor.apply(this,arguments)},Y.ext("twaver.charts.BubbleChart",x.charts.ScaleChart,{__accessor:["xAxisUpperLimit","xAxisLowerLimit","xScaleLineColor","xScaleLineWidth","selectShadowColor","selectShadowOffset"],_upperLimit:ye.BUBBLECHART_UPPER_LIMIT,_lowerLimit:ye.BUBBLECHART_LOWER_LIMIT,_xAxisUpperLimit:ye.BUBBLECHART_XAXIS_UPPER_LIMIT,_xAxisLowerLimit:ye.BUBBLECHART_XAXIS_LOWER_LIMIT,_xAxisText:null,_xAxisTextColor:ye.BUBBLECHART_XAXIS_TEXT_COLOR,_xAxisTextFont:ye.BUBBLECHART_XAXIS_TEXT_FONT,_xAxisLineColor:ye.BUBBLECHART_XAXIS_LINE_COLOR,_xAxisLineWidth:ye.BUBBLECHART_XAXIS_LINE_WIDTH,_yAxisText:null,_yAxisTextColor:ye.BUBBLECHART_YAXIS_TEXT_COLOR,_yAxisTextFont:ye.BUBBLECHART_YAXIS_TEXT_FONT,_yAxisLineColor:ye.BUBBLECHART_YAXIS_LINE_COLOR,_yAxisLineWidth:ye.BUBBLECHART_YAXIS_LINE_WIDTH,_xScaleTexts:null,_xScaleTextFont:ye.BUBBLECHART_XSCALE_TEXT_FONT,_xScaleTextColor:ye.BUBBLECHART_XSCALE_TEXT_COLOR,_xScaleTextOrientation:ye.BUBBLECHART_XSCALE_TEXT_ORIENTATION,_xScaleLineColor:ye.BUBBLECHART_XSCALE_LINE_COLOR,_xScaleLineWidth:ye.BUBBLECHART_XSCALE_LINE_WIDTH,_yScaleTextVisible:ye.BUBBLECHART_YSCALE_TEXT_VISIBLE,_yScaleTextColor:ye.BUBBLECHART_YSCALE_TEXT_COLOR,_yScaleTextFont:ye.BUBBLECHART_YSCALE_TEXT_FONT,_yScaleLineColor:ye.BUBBLECHART_YSCALE_LINE_COLOR,_yScaleLineWidth:ye.BUBBLECHART_YSCALE_LINE_WIDTH,_yScaleValueGap:ye.BUBBLECHART_YSCALE_VALUE_GAP,_yScalePixelGap:ye.BUBBLECHART_YSCALE_PIXEL_GAP,_yScaleMinTextVisible:ye.BUBBLECHART_YSCALE_MIN_TEXT_VISIBLE,_selectShadowColor:ye.BUBBLECHART_SELECT_SHADOW_COLOR,_selectShadowOffset:ye.BUBBLECHART_SELECT_SHADOW_OFFSET,_resetX:function(){this._xMax=0,this._xMin=0,null!=this._xAxisUpperLimit&&(this._xMax=this._xAxisUpperLimit),null!=this._xAxisLowerLimit&&(this._xMin=this._xAxisLowerLimit)},getXMin:function(){return this._xMin},getXMax:function(){return this._xMax},getXRange:function(){return this._xRange},getShape:function(t){return(t.getStyle?t:x.Styles).getStyle("chart.bubble.shape")},getSize:function(t,e){return e},getNames:function(t){return(t.getStyle?t:x.Styles).getStyle("chart.names")},getXAxisValues:function(t){return(t.getStyle?t:x.Styles).getStyle("chart.xaxis.values")},getYAxisValues:function(t){return(t.getStyle?t:x.Styles).getStyle("chart.yaxis.values")},_initXRange:function(){null==this._xAxisLowerLimit&&(this._xMin>=this._xMax&&(this._xMin=this._xMax-.1*Math.abs(this._xMax)),this._xMin=this._xMin-.1*(this._xMax-this._xMin)),this._xRange=this._xMax-this._xMin},_initXYValuesProportion:function(){this._publishedDatas.forEach(function(t){var e=this._map[t.getId()];e.xAxisValues.forEach(function(t){null==t?e.xAxisProportions.add(null):e.xAxisProportions.add(0==this._xRange?0:t/this._xRange)},this),e.yAxisValues.forEach(function(t){null==t?e.yAxisProportions.add(null):e.yAxisProportions.add(0==this._range?0:t/this._range)},this)},this)},validateModel:function(){this._reset(),this._resetX(),this._columnCount=null==this._xScaleTexts?0:this._xScaleTexts.size(),this._publishedDatas.forEach(function(t){var e=new ie(this.getYAxisValues(t)),i=new ie(this.getXAxisValues(t)),n=new ie(this.getValues(t));n.size()>this._columnCount&&(this._columnCount=n.size());n={data:t,values:n,yAxisValues:e,xAxisValues:i,yAxisProportions:new ie,xAxisProportions:new ie,color:this.getUniqueColor(this.getColor(t),t),anchorShape:this.getShape(t)};this._map[t.getId()]=n,null!=this._upperLimit&&null!=this._lowerLimit||e.forEach(function(t){null!=t&&(null==this._upperLimit&&t>this._max&&(this._max=t),null==this._lowerLimit&&t<this._min&&(this._min=t))},this),null!=this._upperLimit&&null!=this._lowerLimit||i.forEach(function(t){null!=t&&(null==this._xAxisUpperLimit&&t>this._xMax&&(this._xMax=t),null==this._xAxisLowerLimit&&t<this._xMin&&(this._xMin=t))},this)},this),this._initRange(),this._initXRange(),this._initXYValuesProportion()},drawContent:function(f,A,p,m){this._toolTipInfos=this.isToolTipEnabled()?new ie:null,this._publishedDatas.forEach(function(t){var e=this._map[t.getId()],i=e.yAxisProportions,n=e.xAxisProportions,o=e.values,s=e.yAxisProportions.size(),a=this._selectShadowOffset;this.isSelected(t)&&0<a?(f.shadowOffsetX=a,f.shadowOffsetY=a,f.shadowBlur=2*a,f.shadowColor=this._selectShadowColor):(f.shadowOffsetX=0,f.shadowOffsetY=0,f.shadowBlur=0,f.shadowColor=e.color),f.fillStyle=e.color;for(var r=0;r<s;r++){var h,l,c,u,d,_=i.get(r),g=n.get(r);null!=_&&(h={x:A.x+A.width*g,y:m-p*_},u=o.get(r),d=this.getSize(t,u),R.drawVector(f,e.anchorShape,null,l=h.x-(a=d/2),c=h.y-a,g=d,_=d),f.fill(),this.addToolTipInfo(l,c,g,_,u,t,r),(u=this._getValueTextInfo(t,u))&&(d=this.getTextSize(u.font,u.text),u.x=h.x,u.y=h.y))}},this),this.drawValueTexts(f)}}),x.charts.DialChart=function(t){x.charts.DialChart.superClass.constructor.apply(this,arguments)},Y.ext("twaver.charts.DialChart",x.charts.ChartBase,{__accessor:["upperLimit","lowerLimit","startAngle","endAngle","innerRadius","colorRangeFillColor","outlineWidth","outlineColor","majorScaleCount","majorScaleLineWidth","majorScaleLineLength","majorScaleLineColor","minorScaleCount","minorScaleLineWidth","minorScaleLineLength","minorScaleLineColor","scaleTextVisible","scaleUpperLimitTextVisible","scaleLowerLimitTextVisible","scaleTextFont","scaleTextColor","pivotRadius","pivotFillColor","pivotOutlineWidth","pivotOutlineColor","pivotGradient","pivotGradientColor","valuePosition","colorRangeList","innerDarkerRadius","outerBrighterRadius","selectShadowColor","selectShadowOffset"],__bool:["scaleInside","pivotFill"],_upperLimit:ye.DIALCHART_UPPER_LIMIT,_lowerLimit:ye.DIALCHART_LOWER_LIMIT,_startAngle:ye.DIALCHART_START_ANGLE,_endAngle:ye.DIALCHART_END_ANGLE,_innerRadius:ye.DIALCHART_INNER_RADIUS,_colorRangeFillColor:ye.DIALCHART_COLOR_RANGE_FILL_COLOR,_outlineWidth:ye.DIALCHART_OUTLINE_WIDTH,_outlineColor:ye.DIALCHART_OUTLINE_COLOR,_scaleInside:ye.DIALCHART_SCALE_INSIDE,_majorScaleCount:ye.DIALCHART_MAJOR_SCALE_COUNT,_majorScaleLineWidth:ye.DIALCHART_MAJOR_SCALE_LINE_WIDTH,_majorScaleLineLength:ye.DIALCHART_MAJOR_SCALE_LINE_LENGTH,_majorScaleLineColor:ye.DIALCHART_MAJOR_SCALE_LINE_COLOR,_minorScaleCount:ye.DIALCHART_MINOR_SCALE_COUNT,_minorScaleLineWidth:ye.DIALCHART_MINOR_SCALE_LINE_WIDTH,_minorScaleLineLength:ye.DIALCHART_MINOR_SCALE_LINE_LENGTH,_minorScaleLineColor:ye.DIALCHART_MINOR_SCALE_LINE_COLOR,_scaleTextVisible:ye.DIALCHART_SCALE_TEXT_VISIBLE,_scaleUpperLimitTextVisible:ye.DIALCHART_SCALE_UPPER_LIMIT_TEXT_VISIBLE,_scaleLowerLimitTextVisible:ye.DIALCHART_SCALE_LOWER_LIMIT_TEXT_VISIBLE,_scaleTextFont:ye.DIALCHART_SCALE_TEXT_FONT,_scaleTextColor:ye.DIALCHART_SCALE_TEXT_COLOR,_pivotRadius:ye.DIALCHART_PIVOT_RADIUS,_pivotFill:ye.DIALCHART_PIVOT_FILL,_pivotFillColor:ye.DIALCHART_PIVOT_FILL_COLOR,_pivotOutlineWidth:ye.DIALCHART_PIVOT_OUTLINE_WIDTH,_pivotOutlineColor:ye.DIALCHART_PIVOT_OUTLINE_COLOR,_pivotGradient:ye.DIALCHART_PIVOT_GRADIENT,_pivotGradientColor:ye.DIALCHART_PIVOT_GRADIENT_COLOR,_valuePosition:ye.DIALCHART_VALUE_POSITION,_innerDarkerRadius:ye.DIALCHART_INNER_DARKER_RADIUS,_outerBrighterRadius:ye.DIALCHART_OUTER_BRIGHTER_RADIUS,_selectShadowColor:ye.DIALCHART_SELECT_SHADOW_COLOR,_selectShadowOffset:ye.DIALCHART_SELECT_SHADOW_OFFSET,formatScaleText:function(t){return t.toFixed(2)},validateModel:function(){this._map={},this._valueRange=this._upperLimit-this._lowerLimit;var t=this._startAngle;0!=t&&0==(t=(t%360+360)%360)&&(t=360),this._positiveStartAngle=t;var e=this._endAngle;0!=e&&0==(e=(e%360+360)%360)&&(e=360),this._positiveEndAngle=e,this._whole=360==Math.abs(t-e),this._startAngleByRadian=t*Math.PI/180,this._endAngleByRadian=e*Math.PI/180,this._clockwise=this._startAngleByRadian>this._endAngleByRadian,this._angleRange=Math.abs(this._startAngleByRadian-this._endAngleByRadian),this._publishedDatas.forEach(function(t){var e=this.getValue(t);this._map[t.getId()]={data:t,value:e,color:this.getUniqueColor(this.getColor(t),t),angle:this._startAngleByRadian+(this._clockwise?-1:1)*e/this._valueRange*this._angleRange}},this)},validateDisplay:function(l,t,e){e={x:this._xGap,y:this._yGap,width:t-2*this._xGap,height:e-2*this._yGap};if(this.drawBackground(l,e),this._startAngleByRadian!=this._endAngleByRadian){var i,n,o=this._lowerLimit,s=1<this._majorScaleCount?this._valueRange/(this._majorScaleCount-1):0,a=0,r=0,h=null;if(this._scaleTextVisible)for(h=new ie,d=0;d<this._majorScaleCount;d++)0==d&&!this._scaleLowerLimitTextVisible||d==this._majorScaleCount-1&&!this._scaleUpperLimitTextVisible?(i=null,h.add({text:"",size:{width:0,height:0}})):(n=this.formatScaleText(o),i=this.getTextSize(this._scaleTextFont,n),h.add({text:n,size:i})),this._scaleInside||null==i||(i.width>a&&(a=i.width),i.height>r&&(r=i.height)),o+=s;if(this._angleRange<=Math.PI&&(a=Math.max(a,this._pivotRadius),r=Math.max(r,this._pivotRadius)),b.grow(e,-a,-r),this._calcluateCenterAndRadius(e),l.lineWidth=0,null==this._colorRangeList||0==this._colorRangeList.size())this._drawArcGroup(l,this._startAngleByRadian,this._endAngleByRadian,this.getUniqueColor(this._colorRangeFillColor)),this._drawArcOutLine(l,this._startAngleByRadian,this._endAngleByRadian,!0,!0);else for(var c=this._angleRange/this._colorRangeList.size(),u=this._startAngleByRadian,d=0;d<this._colorRangeList.size();d++){var _=this.getUniqueColor(this._colorRangeList.get(d)),g=u+(this._clockwise?-1:1)*c;this._drawArcGroup(l,u,g,_),this._drawArcOutLine(l,u,u+(this._clockwise?-1:1)*c,0==d,d==this._colorRangeList.size()-1),u+=(this._clockwise?-1:1)*c}var f=this._startAngleByRadian,A=1<this._majorScaleCount?this._angleRange/(this._majorScaleCount-1):0,p=this._scaleInside?this._innerRadiusByPixel:this._outerRadius,m=p+this._majorScaleLineLength*(this._scaleInside?1:-1),v=p+this._minorScaleLineLength*(this._scaleInside?1:-1);for(d=0;d<this._majorScaleCount;d++){var y,w,x=this._center.x+Math.cos(f)*p,E=this._center.y+Math.sin(-f)*p,C=this._center.x+Math.cos(f)*m,T=this._center.y+Math.sin(-f)*m;if(l.lineWidth=this._majorScaleLineWidth,l.strokeStyle=this.getUniqueColor(this._majorScaleLineColor),l.beginPath(),l.moveTo(x,E),l.lineTo(C,T),l.closePath(),l.stroke(),this._scaleTextVisible&&(0==d&&!this._scaleLowerLimitTextVisible||d==this._majorScaleCount-1&&!this._scaleUpperLimitTextVisible||(y=h.get(d))&&(w=this.getScaleTextPosition(f/Math.PI*180,x,E,y.size.width,y.size.height),y.x=w.x,y.y=w.y)),this._whole||!this._whole&&d<this._majorScaleCount-1)for(var I=f,L=0<this._minorScaleCount?A/(this._minorScaleCount+1):0,S=0;S<this._minorScaleCount;S++)I+=(this._clockwise?-1:1)*L,x=this._center.x+Math.cos(I)*p,E=this._center.y+Math.sin(-I)*p,C=this._center.x+Math.cos(I)*v,T=this._center.y+Math.sin(-I)*v,l.lineWidth=this._minorScaleLineWidth,l.strokeStyle=this.getUniqueColor(this._minorScaleLineColor),l.beginPath(),l.moveTo(x,E),l.lineTo(C,T),l.closePath(),l.stroke();f+=(this._clockwise?-1:1)*A}this._pivotFill&&R.fill(l,this.getUniqueColor(this._pivotFillColor),this._pivotGradient,this._pivotGradientColor,this._center.x-this._pivotRadius,this._center.y-this._pivotRadius,2*this._pivotRadius,2*this._pivotRadius),l.lineWidth=this._pivotOutlineWidth,l.strokeStyle=this.getUniqueColor(this._pivotOutlineColor),l.beginPath(),l.arc(this._center.x,this._center.y,this._pivotRadius,0,2*Math.PI,!0),l.closePath(),this._pivotFill&&l.fill(),h&&h.forEach(function(t){t&&R.drawText(l,t.text,t,this._scaleTextFont,this._scaleTextColor)},this),this._publishedDatas.forEach(function(t){var e=this._map[t.getId()],i=this._getDataStyle("dialchart.rear.extension",t),n=this._getDataStyle("dialchart.base.width",t),o=this._getDataStyle("dialchart.top.width",t),s=this._getDataStyle("dialchart.radius",t);-1<=s&&s<=1&&(s*=this._innerRadiusByPixel),l.fillStyle=e.color,l.lineWidth=0;var a=b.createMatrix(-e.angle,this._center.x,this._center.y),r=a.transform(this._center.x+s,this._center.y+o/2),h=a.transform(this._center.x+s,this._center.y-o/2),o=a.transform(this._center.x-i,this._center.y-n/2),i=a.transform(this._center.x-i,this._center.y+n/2),n=this._selectShadowOffset;this.isSelected(t)&&0<n?(l.shadowOffsetX=n,l.shadowOffsetY=n,l.shadowBlur=2*n,l.shadowColor=this._selectShadowColor):(l.shadowOffsetX=0,l.shadowOffsetY=0,l.shadowBlur=0,l.shadowColor=e.color),l.beginPath(),l.moveTo(r.x,r.y),l.lineTo(h.x,h.y),l.lineTo(o.x,o.y),l.lineTo(i.x,i.y),l.lineTo(r.x,r.y),l.closePath(),l.fill();e=this._getValueTextInfo(t,e.value);e&&(s=a.transform(this._center.x+s*this._valuePosition,this._center.y),e.x=s.x,e.y=s.y)},this),this.drawValueTexts(l)}},_getDataStyle:function(t,e){return e.getStyle?e.getStyle(t):e.getClient(t)},_calcluateCenterAndRadius:function(t){var e=this._clockwise?this._positiveEndAngle:this._positiveStartAngle,i=this._clockwise?this._positiveStartAngle:this._positiveEndAngle;Math.abs(this._positiveEndAngle-this._positiveStartAngle);0<=e&&e<90?0<=i&&i<=90?(this._outerRadius=Math.min(t.width,t.height),this._center={x:t.x+(t.width-this._outerRadius)/2,y:t.y+(t.height+this._outerRadius)/2}):90<i&&i<=180?(this._outerRadius=Math.min(t.width/2,t.height),this._center={x:t.x+t.width/2,y:t.y+(t.height+this._outerRadius)/2}):(this._center={x:t.x+t.width/2,y:t.y+t.height/2},this._outerRadius=Math.min(t.width,t.height)/2):90<=e&&e<180?90<=i&&i<=180?(this._outerRadius=Math.min(t.width,t.height),this._center={x:t.x+(t.width+this._outerRadius)/2,y:t.y+(t.height+this._outerRadius)/2}):180<i&&i<=270?(this._outerRadius=Math.min(t.width,t.height/2),this._center={x:t.x+(t.width+this._outerRadius)/2,y:t.y+t.height/2}):(this._center={x:t.x+t.width/2,y:t.y+t.height/2},this._outerRadius=Math.min(t.width,t.height)/2):180<=e&&e<270?180<=i&&i<=270?(this._outerRadius=Math.min(t.width,t.height),this._center={x:t.x+(t.width+this._outerRadius)/2,y:t.y+(t.height-this._outerRadius)/2}):(this._outerRadius=Math.min(t.width/2,t.height),this._center={x:t.x+t.width/2,y:t.y+(t.height-this._outerRadius)/2}):(this._outerRadius=Math.min(t.width,t.height),this._center={x:t.x+(t.width-this._outerRadius)/2,y:t.y+(t.height-this._outerRadius)/2}),this._innerRadiusByPixel=1<this._innerRadius?this._innerRadius:this._outerRadius*this._innerRadius,this._innerDarkerRadiusByPixel=1<this._innerDarkerRadius?this._innerDarkerRadius:this._outerRadius*this._innerDarkerRadius,this._outerBrighterRadiusByPixel=1<this._outerBrighterRadius?this._outerBrighterRadius:this._outerRadius*this._outerBrighterRadius},_drawArcOutLine:function(t,e,i,n,o){var s,a,r,h,l,c,u,d,_;this._outlineWidth<=0||(s=Math.abs(e-i),a=this._center.x+Math.cos(e)*this._innerRadiusByPixel,r=this._center.y+Math.sin(-e)*this._innerRadiusByPixel,h=this._center.x+Math.cos(e)*this._outerRadius,l=this._center.y+Math.sin(-e)*this._outerRadius,c=this._center.x+Math.cos(i)*this._innerRadiusByPixel,u=this._center.y+Math.sin(-i)*this._innerRadiusByPixel,d=this._center.x+Math.cos(i)*this._outerRadius,_=this._center.y+Math.sin(-i)*this._outerRadius,this._clockwise?(t.lineWidth=this._outlineWidth,t.strokeStyle=this.getUniqueColor(this._outlineColor),t.beginPath(),t.moveTo(this._center.x,this._center.y),R.drawArc(t,this._center.x,this._center.y,i,s,this._outerRadius,this._outerRadius,!1),t.stroke(),!this._whole&&n?(t.lineWidth=this._outlineWidth,t.strokeStyle=this.getUniqueColor(this._outlineColor)):t.lineWidth=0,t.lineTo(a,r),t.stroke(),t.beginPath(),t.lineWidth=this._outlineWidth,t.strokeStyle=this.getUniqueColor(this._outlineColor),t.moveTo(this._center.x,this._center.y),R.drawArc(t,this._center.x,this._center.y,e,-s,this._innerRadiusByPixel,this._innerRadiusByPixel,!1),t.stroke(),!this._whole&&o?(t.lineWidth=this._outlineWidth,t.strokeStyle=this.getUniqueColor(this._outlineColor)):t.lineWidth=0,t.lineTo(d,_)):(t.lineWidth=this._outlineWidth,t.strokeStyle=this.getUniqueColor(this._outlineColor),t.beginPath(),t.moveTo(this._center.x,this._center.y),R.drawArc(t,this._center.x,this._center.y,e,s,this._outerRadius,this._outerRadius,!1),t.stroke(),!this._whole&&o?(t.lineWidth=this._outlineWidth,t.strokeStyle=this.getUniqueColor(this._outlineColor)):t.lineWidth=0,t.lineTo(c,u),t.stroke(),t.lineWidth=this._outlineWidth,t.strokeStyle=this.getUniqueColor(this._outlineColor),t.beginPath(),t.moveTo(this._center.x,this._center.y),R.drawArc(t,this._center.x,this._center.y,i,-s,this._innerRadiusByPixel,this._innerRadiusByPixel,!1),t.stroke(),!this._whole&&n?(t.lineWidth=this._outlineWidth,t.strokeStyle=this.getUniqueColor(this._outlineColor)):t.lineWidth=0,t.lineTo(h,l)),t.stroke())},_drawArcGroup:function(t,e,i,n){0!=this._outerBrighterRadiusByPixel&&this._drawArc(t,e,i,this._outerRadius-this._outerBrighterRadiusByPixel,this._outerRadius,R.brighter(n)),this._drawArc(t,e,i,this._innerRadiusByPixel+this._innerDarkerRadiusByPixel,this._outerRadius-this._outerBrighterRadiusByPixel,n),0!=this._innerDarkerRadiusByPixel&&this._drawArc(t,e,i,this._innerRadiusByPixel,this._innerRadiusByPixel+this._innerDarkerRadiusByPixel,R.darker(n,20))},_drawArc:function(t,e,i,n,o,s){var a=Math.abs(e-i);t.lineWidth=0,t.fillStyle=s;var r=this._center.x+Math.cos(e)*n,h=this._center.y+Math.sin(-e)*n,l=(this._center.x,Math.cos(e),this._center.y,Math.sin(-e),this._center.x+Math.cos(i)*n),s=this._center.y+Math.sin(-i)*n;this._center.x,Math.cos(i),this._center.y,Math.sin(-i);t.beginPath(),this._clockwise?(t.moveTo(l,s),R.drawArc(t,this._center.x,this._center.y,i,a,o,o,!0),t.lineTo(r,h),R.drawArc(t,this._center.x,this._center.y,e,-a,n,n,!0)):(t.moveTo(r,h),R.drawArc(t,this._center.x,this._center.y,e,a,o,o,!0),t.lineTo(l,s),R.drawArc(t,this._center.x,this._center.y,i,-a,n,n,!0)),t.closePath(),t.fill()},getScaleTextPosition:function(t,e,i,n,o){var s={x:e,y:i};return 0==(t=(t%360+360)%360)&&(s=this._scaleInside?{x:e-n/2,y:i}:{x:e+n/2,y:i}),180==t&&(s=this._scaleInside?{x:e+n/2,y:i}:{x:e-n/2,y:i}),90==t&&(s=this._scaleInside?{x:e,y:i+o/2}:{x:e,y:i-o/2}),270==t&&(s=this._scaleInside?{x:e,y:i-o/2}:{x:e,y:i+o/2}),270<t&&t<360&&(s=this._scaleInside?{x:e-n/2,y:i-o/2}:{x:e+n/2,y:i+o/2}),180<t&&t<270&&(s=this._scaleInside?{x:e+n/2,y:i-o/2}:{x:e-n/2,y:i+o/2}),90<t&&t<180&&(s=this._scaleInside?{x:e+n/2,y:i+o/2}:{x:e-n/2,y:i-o/2}),s=0<t&&t<90?this._scaleInside?{x:e-n/2,y:i+o/2}:{x:e+n/2,y:i-o/2}:s}}),x.charts.RadarChart=function(t){x.charts.RadarChart.superClass.constructor.apply(this,arguments),this._selectTolerance=2},Y.ext("twaver.charts.RadarChart",x.charts.ChartBase,{__accessor:["axisTextVisible","axisTextFont","axisTextColor","scaleTextVisible","scaleTextFont","scaleTextColor","axisVisible","axisLineColor","axisLineWidth","axisStartAngle","ringVisible","ringType","ringLineColor","ringLineWidth","scaleCount","scaleMaxValue","scaleMinValue","anchorVisible","areaFillAlpha","areaSelectFillAlpha","axisList"],__bool:["areaFill"],_axisTextVisible:ye.RADARCHART_AXIS_TEXT_VISIBLE,_axisTextFont:ye.RADARCHART_AXIS_TEXT_FONT,_axisTextColor:ye.RADARCHART_AXIS_TEXT_COLOR,_scaleTextVisible:ye.RADARCHART_SCALE_TEXT_VISIBLE,_scaleTextFont:ye.RADARCHART_SCALE_TEXT_FONT,_scaleTextColor:ye.RADARCHART_SCALE_TEXT_COLOR,_axisVisible:ye.RADARCHART_AXIS_VISIBLE,_axisLineColor:ye.RADARCHART_AXIS_LINE_COLOR,_axisLineWidth:ye.RADARCHART_AXIS_LINE_WIDTH,_axisStartAngle:ye.RADARCHART_AXIS_START_ANGLE,_ringVisible:ye.RADARCHART_RING_VISIBLE,_ringType:ye.RADARCHART_RING_TYPE,_ringLineColor:ye.RADARCHART_RING_LINE_COLOR,_ringLineWidth:ye.RADARCHART_RING_LINE_WIDTH,_scaleCount:ye.RADARCHART_SCALE_COUNT,_scaleMaxValue:ye.RADARCHART_SCALE_MAXVALUE,_scaleMinValue:ye.RADARCHART_SCALE_MINVALUE,_anchorVisible:ye.RADARCHART_ANCHOR_VISIBLE,_areaFill:ye.RADARCHART_AREA_FILL,_areaFillAlpha:ye.RADARCHART_AREA_FILL_ALPHA,_areaSelectFillAlpha:ye.RADARCHART_AREA_SELECT_FILL_ALPHA,getAxisCount:function(){return this._axisCount},formatScaleText:function(t,e){return t.toFixed(2)},getAnchorSize:function(t){return(t.getStyle?t:x.Styles).getStyle("chart.marker.size")},getAnchorShape:function(t){return(t.getStyle?t:x.Styles).getStyle("chart.marker.shape")},getLineWidth:function(t){return(t.getStyle?t:x.Styles).getStyle("chart.line.width")},getValues:function(t){return t.getStyle?t.getStyle("chart.values"):null},tryGetDataAt:function(t,e){if((null==e||e<0)&&(e=this._selectTolerance),!(t=t.target?m.getLogicalPoint(this._canvas,arguments[0],1):t))return null;if(!this._areaFill){var i=t.x-e,n=t.y-e,o=2*e+1,s=2*e+1;try{for(var a=this._canvas.getContext("2d").getImageData(i,n,o,s).data,r=0,h=a.length;r<h;r+=4)if(255===a[r+3]){var l="rgb("+a[r]+","+a[r+1]+","+a[r+2]+")";if(c=this._uniqueColors[l])return c}}catch(t){}return null}if(!this._center)return null;t={x:t.x-this._xTranslate,y:t.y-this._yTranslate};for(r=this._publishedDatas.size()-1;0<=r;r--){var c=this._publishedDatas.get(r),u=this._map[c.getId()];if(b.isPointInPolygon(u.points,t))return c}return null},getDataAt:function(){var t,e;if(2===arguments.length)t=arguments[0],e=arguments[1];else if(arguments[0].target){var i=m.getLogicalPoint(this._canvas,arguments[0],1);if(!i)return;t=i.x,e=i.y}else t=arguments[0].x,e=arguments[0].y;if(t<0||e<0||t>this._canvasWidth||e>this._canvasHeight)return null;if(!this._areaFill){try{var n=this._canvas.getContext("2d").getImageData(t,e,1,1).data;if(255===n[3]){var o="rgb("+n[0]+","+n[1]+","+n[2]+")";if(a=this._uniqueColors[o])return a}}catch(t){}return null}for(var s=this._publishedDatas.size()-1;0<=s;s--){var a=this._publishedDatas.get(s),r=this._map[a.getId()];if(b.isPointInPolygon(r.points,{x:t-this._xTranslate,y:e-this._yTranslate}))return a}return null},validateModel:function(){if(this._map={},this._axisTexts=new ie,this._axisMaxValues=new ie,this._axisMinValues=new ie,this._axisRangeValues=new ie,this._axisCount=null==this._axisList?0:this._axisList.size(),0!=this._axisCount){this._averageAngleByRadian=2*Math.PI/this._axisCount,this._averageAngle=360/this._axisCount,this._axisList.forEach(function(t){var e;"string"==typeof t?(this._axisTexts.add(t),this._axisMaxValues.add(this._scaleMaxValue),this._axisMinValues.add(this._scaleMinValue),this._axisRangeValues.add(this._scaleMaxValue-this._scaleMinValue)):(this._axisTexts.add(t.text),e=isNaN(t.max)?this._scaleMaxValue:t.max,t=isNaN(t.min)?this._scaleMinValue:t.min,this._axisMaxValues.add(e),this._axisMinValues.add(t),this._axisRangeValues.add(e-t))},this),this._publishedDatas.forEach(function(t){var e={data:t,values:new ie(this.getValues(t)),proportions:new ie,color:this.getUniqueColor(this.getColor(t),t),anchorShape:this.getAnchorShape(t),anchorSize:this.getAnchorSize(t),lineWidth:this.getLineWidth(t),points:new ie};this.isSelected(t)&&(e.lineWidth+=2),this._map[t.getId()]=e},this);for(var s=0;s<this._axisCount;s++)this._publishedDatas.forEach(function(t){var e,i,n=this._map[t.getId()],o=0;n.values.size()>s&&(e=n.values.get(s),i=this._axisMinValues.get(s),0<(t=this._axisRangeValues.get(s))&&(o=(e-i)/t)),n.proportions.add(o)},this)}},validateDisplay:function(s,t,e){e={x:this._xGap,y:this._yGap,width:t-2*this._xGap,height:e-2*this._yGap};if(this.drawBackground(s,e),!(e.width<=0||e.height<=0||this._axisCount<3)){var i=0,n=0,o=0,a=null,r=null,h=null,l=null;if(this._axisTextVisible)for(l=new ie,o=0;o<this._axisCount;o++)h=this._axisTexts.get(o),a=this.getTextSize(this._axisTextFont,h),l.add({text:h,size:a}),a.width>i&&(i=a.width),a.height>n&&(n=a.height);var c=e.height/2-n<e.width/2-i?e.height/2-2*n:e.width/2-i,u={x:e.x+e.width/2,y:e.y+e.height/2};this._center={x:u.x+this._xTranslate,y:u.y+this._yTranslate};var d=null;this._scaleTextVisible&&(d=new ie);for(var _=this._axisStartAngle/180*Math.PI,o=0;o<this._axisCount;o++){var g=180*_/Math.PI,f=u.x+Math.cos(_)*c,A=u.y+Math.sin(-_)*c,p=null;d&&(p=new ie,d.add(p)),this._ringVisible&&0<this._ringLineWidth&&(s.lineWidth=this._ringLineWidth,s.strokeStyle=this._ringLineColor);for(var m,v=1;v<=this._scaleCount;v++){var y,w,x=v/this._scaleCount,E=c*x,C=u.x+Math.cos(_)*E,T=u.y+Math.sin(-_)*E;this._ringVisible&&0<this._ringLineWidth&&(y=u.x+Math.cos(_+this._averageAngleByRadian)*E,w=u.y+Math.sin(-_-this._averageAngleByRadian)*E,"line"==this._ringType?this.drawLine(s,this._ringLineColor,this._ringLineWidth,C,T,y,w):"arc"==this._ringType&&(s.beginPath(),s.moveTo(u.x,u.y),R.drawArc(s,u.x,u.y,_,this._averageAngleByRadian,E,E,!0),s.closePath(),s.stroke())),p&&(h=this.formatScaleText(this._axisMinValues.get(o)+this._axisRangeValues.get(o)*x,o),a=this.getTextSize(this._scaleTextFont,h),r=this.getScaleTextPosition(g,C,T,a.width,a.height),p.add({text:h,x:r.x,y:r.y}))}this._axisVisible&&this.drawLine(s,this._axisLineColor,this._axisLineWidth,u.x,u.y,f,A),l&&(m=l.get(o),r=this.getAxisTextPosition(g,f,A,m.size.width,m.size.height),m.x=r.x,m.y=r.y),_+=this._averageAngleByRadian}this._publishedDatas.forEach(function(t){var e=this._map[t.getId()];e.points.clear();var i,n=0<e.anchorSize?new ie:null,o=e.proportions;s.lineWidth=0,s.globalAlpha=this.isSelected(t)?this._areaSelectFillAlpha:this._areaFillAlpha,this._areaFill&&(s.fillStyle=e.color),this._drawItem(s,o,u,c,n,e),this._areaFill&&s.fill(),s.lineWidth=e.lineWidth,s.strokeStyle=e.color,s.globalAlpha=1,this._drawItem(s,o,u,c),s.lineWidth=0,null!=n&&0<n.size()&&(i=e.anchorSize/2,n.forEach(function(t){s.fillStyle=e.color,R.drawVector(s,e.anchorShape,null,t.x-i,t.y-i,e.anchorSize,e.anchorSize),s.fill()}))},this),d&&d.forEach(function(t){t.forEach(function(t){R.drawText(s,t.text,t,this._scaleTextFont,this._scaleTextColor)},this)},this),l&&l.forEach(function(t){R.drawText(s,t.text,t,this._axisTextFont,this._axisTextColor)},this)}},_drawItem:function(t,e,i,n,o,s){var a=this._axisStartAngle/180*Math.PI,r=null;t.beginPath();for(var h=0;h<this._axisCount;h++){var l=e.get(h),l={x:i.x+Math.cos(a)*n*l,y:i.y+Math.sin(-a)*n*l};null==r?t.moveTo(l.x,l.y):t.lineTo(l.x,l.y),null!=o&&this._anchorVisible&&o.add(l),s&&s.points.add(l),0==h&&(r=l),a+=this._averageAngleByRadian}null!=r&&t.lineTo(r.x,r.y),t.closePath(),t.stroke()},getAxisTextPosition:function(t,e,i,n,o){return 0<(t=(t%360+360)%360)&&t<90?{x:e+n/2,y:i-o/2}:90<t&&t<180?{x:e-n/2,y:i-o/2}:180<t&&t<270?{x:e-n/2,y:i+o/2}:270<t&&t<360?{x:e+n/2,y:i+o/2}:270==t?{x:e,y:i+o/2}:90==t?{x:e,y:i-o/2}:180==t?{x:e-n/2,y:i}:0==t?{x:e+n/2,y:i}:{x:e,y:i}},getScaleTextPosition:function(t,e,i,n,o){return 0<(t=(t%360+360)%360)&&t<90?{x:e+n/2,y:i+o/2}:90<t&&t<180?{x:e-n/2,y:i+o/2}:180<t&&t<270?{x:e-n/2,y:i-o/2}:270<t&&t<360?{x:e+n/2,y:i-o/2}:270==t?{x:e+n/2,y:i}:90==t?{x:e+n/2,y:i}:180==t?{x:e-n/2,y:i+o/2}:0==t?{x:e,y:i+o/2}:{x:e,y:i}}}),x.charts.LegendPane=function(t){x.charts.LegendPane.superClass.constructor.apply(this,arguments),this._divPool=new x.Pool("div"),this._iconPool=new x.Pool("div"),this._textPool=new x.Pool("span"),this._pools.add(this._divPool),this._pools.add(this._iconPool),this._pools.add(this._textPool),this._chart=t,this._chart.addViewListener(this.handleViewChange,this),this._view=m.createView("hidden"),this._view.style.verticalAlign="middle",this._legendDiv=m.createDiv(),this._legendDiv.style.whiteSpace="nowrap",this._legendDiv.style.verticalAlign="middle",this._legendDiv.style.position="",this._view.appendChild(this._legendDiv),this._hiddenMap={};var e=this;this._chart._internalVisibleFunction=function(t){return!e.isHidden(t)},g.isTouchable&&new x.charts.LegendPaneTouchInteraction(this),new x.charts.LegendPaneInteraction(this)},Y.ext("twaver.charts.LegendPane",x.controls.ControlBase,{__accessor:["iconWidth","iconHeight","iconRadius","rowHeight","orientation","hiddenColor","selectBackgroundColor","selectForegroundColor"],_iconWidth:ye.LEGENDPANE_ICON_WIDTH,_iconHeight:ye.LEGENDPANE_ICON_HEIGHT,_iconRadius:ye.LEGENDPANE_ICON_RADIUS,_rowHeight:ye.LEGENDPANE_ROW_HEIGHT,_orientation:ye.LEGENDPANE_ORIENTATION,_hiddenColor:ye.LEGENDPANE_HIDDEN_COLOR,_selectBackgroundColor:ye.LEGENDPANE_SELECT_BACKGROUND_COLOR,_selectForegroundColor:ye.LEGENDPANE_SELECT_FOREGROUND_COLOR,onPropertyChanged:function(t){this.invalidate()},getChart:function(){return this._chart},isHidden:function(t){return null!=this._hiddenMap[t.getId()]},handleViewChange:function(t){"validateEnd"===t.kind&&(this._invalidate=!0,this.validate())},validate:function(){if(this._invalidate){this._invalidate=!1,m.release(this._legendDiv),Y.keys(this._hiddenMap).forEach(function(t){this._chart.getDataBox().containsById(t)||delete this._hiddenMap[t]},this);for(var t=new ie(this._chart.getUnfilteredDatas()),e=0;e<t.size();e++){var i=t.get(e);this._chart.isVisible(i)||this.isHidden(i)||(t.removeAt(e),e--)}var n=t.size(),o=this._view.style,s="horizontal"===this._orientation;for(s?(o.textAlign="center",o.height=this._rowHeight+"px"):(o.textAlign="",o.height=this._rowHeight*n+"px"),o.lineHeight=this._rowHeight-2+"px",e=0;e<n;e++){var i=t.get(e),a=this._divPool.get();a._data=i,a.style.cursor="pointer",a.style.height=this._rowHeight+"px",a.style.display=s?"inline-block":"block",this._legendDiv.appendChild(a),this.renderLegend(a,i),this.onLegendRendered(a,i)}this._pools.forEach(function(t){t.clear()})}},renderLegend:function(t,e){var i=!this.isHidden(e),n=this._chart.isSelected(e),o=this._iconPool.get(),s=o.style;s.display="inline-block",s.verticalAlign="middle",s.marginLeft="4px",s.width=this.getIconWidth()+"px",s.height=this.getIconHeight()+"px",s.backgroundColor=i?this._chart.getColor(e):this.getHiddenColor(),t.appendChild(o);o=this._textPool.get();(s=o.style).paddingLeft="2px",s.paddingRight="4px",s.display="inline-block",s.verticalAlign="middle",s.color=i?n?this._selectForegroundColor:"":this.getHiddenColor(),o.innerHTML=this._chart.getName(e),t.appendChild(o),t.style.backgroundColor=i&&n?this._selectBackgroundColor:""},onLegendRendered:function(t,e){}}),x.charts.ChartPane=function(t,e,i,n){x.charts.ChartPane.superClass.constructor.apply(this,arguments),this.invalidate(),this._chart=t,this._legendPane=new x.charts.LegendPane(t),this._titleDiv=m.createDiv(),this._titleDiv.style.verticalAlign="middle",this._titleDiv.style.whiteSpace="nowrap",this._view=m.createView("hidden"),this._view.appendChild(this._titleDiv),this._view.appendChild(this._legendPane.getView()),this._view.appendChild(this._chart.getView());var o=this;this._legendPane.addPropertyChangeListener(function(t){"rowHeight"!==t.property&&"orientation"!==t.porperty||o.invalidate()}),1<arguments.length&&this.setTitle(e),2<arguments.length&&this.setLegendOrientation(i),3<arguments.length&&this.setLegendWidth(n)},Y.ext("twaver.charts.ChartPane",x.controls.ControlBase,{__accessor:["title","titleHorizontalAlign","titleHeight","legendWidth"],_title:null,_titleHeight:ye.CHARTPANE_TITLE_HEIGHT,_titleHorizontalAlign:ye.CHARTPANE_TITLE_HORIZONTAL_ALIGN,_legendOrientation:ye.CHARTPANE_LEGEND_ORIENTATION,_legendWidth:ye.CHARTPANE_LEGEND_WIDTH,getLegendOrientation:function(){return this._legendOrientation},setLegendOrientation:function(t){var e;this._legendOrientation!==t&&(e=this._legendOrientation,this._legendOrientation=t,this.firePropertyChange("orientation",e,t),this._adjustLegendOrientation())},_adjustLegendOrientation:function(){"left"===this._legendOrientation||"right"===this._legendOrientation?this._legendPane.setOrientation("vertical"):this._legendPane.setOrientation("horizontal")},onPropertyChanged:function(t){this.invalidate()},getTitleDiv:function(){return this._titleDiv},getChart:function(){return this._chart},getLegendPane:function(){return this._legendPane},validateImpl:function(){this._adjustLegendOrientation();var t,e=this._view.offsetWidth,i=this._view.offsetHeight,n=this._legendPane.getRowHeight();this._title&&""!==this._title?(t=this._titleHeight,this._titleDiv.innerHTML=this._title):(t=0,this._titleDiv.innerHTML=""),this._titleDiv.innerHTML=this._title||"",this._titleDiv.style.textAlign=this._titleHorizontalAlign,this._titleDiv.style.lineHeight=this._titleHeight-2+"px";var o,s,a=this._titleDiv.style;a.left="0px",a.top="0px",a.width=e+"px",a.height=t+"px","bottom"===this._legendOrientation?(o={x:0,y:t,width:e,height:Math.max(i-t-n,0)},s={x:0,y:Math.max(i-n,0),width:e,height:n}):"right"===this._legendOrientation?(o={x:0,y:t,width:Math.max(e-this._legendWidth,0),height:Math.max(i-t,0)},s={x:Math.max(e-this._legendWidth,0),y:t,width:this._legendWidth,height:Math.max(i-t,0)}):"top"===this._legendOrientation?(o={x:0,y:t+n,width:e,height:Math.max(i-t-n,0)},s={x:0,y:t,width:e,height:n}):"left"===this._legendOrientation&&(o={x:this._legendWidth,y:t,width:Math.max(e-this._legendWidth,0),height:Math.max(i-t,0)},s={x:0,y:t,width:this._legendWidth,height:Math.max(i-t,0)}),o&&this._chart.adjustBounds(o),s&&this._legendPane.adjustBounds(s)}}),x.charts.ChartInteraction=function(t){this.chart=t,this.canvas=t._canvas;var e=this;this.canvas.addEventListener("mousedown",function(t){0===t.button&&e.handleMouseDown(t),t.preventDefault()},!1);t=g.isFirefox?"DOMMouseScroll":"mousewheel";this.canvas.addEventListener(t,function(t){e.handleMouseWheel(t)},!1)},Y.ext("twaver.charts.ChartInteraction",Object,{handleMouseDown:function(t){this.chart.isFocusOnClick()&&x.Util.setFocus(this.canvas),this.lastPoint=this.chart.getLogicalPoint(t);var e=this.chart.tryGetDataAt(t);2===t.detail&&null==e?this.chart.isDoubleClickToReset()&&(this.chart.zoomReset(!1),this.chart.setXTranslate(0),this.chart.setYTranslate(0)):(this._startLogical=this.lastPoint,this._startClient=m.getClientPoint(t),m.handle_mousedown(this,t))},handleMouseMove:function(t){this.lastPoint&&(t={x:this._startLogical.x+t.clientX-this._startClient.x,y:this._startLogical.y+t.clientY-this._startClient.y},!this.startPan&&3<b.getDistance(this.lastPoint,t)&&(this.startPan=!0,this.lastPoint=t),this.startPan&&(this.chart.isXTranslateEnabled()&&this.chart.setXTranslate(this.chart.getXTranslate()+t.x-this.lastPoint.x),this.chart.isYTranslateEnabled()&&this.chart.setYTranslate(this.chart.getYTranslate()+t.y-this.lastPoint.y),this.lastPoint=t))},handleMouseUp:function(t){var e,i;this.startPan||1!==t.detail||(e=this.chart.tryGetDataAt(t),i=this.chart.getSelectionModel(),e?Y.isCtrlDown(t)?i.contains(e)?i.removeSelection(e):i.appendSelection(e):i.contains(e)||i.setSelection(e):Y.isCtrlDown(t)||i.clearSelection()),delete this.lastPoint,delete this.startPan,delete this._startClient,delete this._startLogical},handleMouseWheel:function(t){m.preventDefault(t);t=g.isFirefox?-t.detail:t.wheelDelta;0<t?(this.chart.isXZoomEnabled()&&this.chart.setXZoom(1.1*this.chart.getXZoom(),!1),this.chart.isYZoomEnabled()&&this.chart.setYZoom(1.1*this.chart.getYZoom(),!1)):t<0&&(this.chart.isXZoomEnabled()&&this.chart.setXZoom(this.chart.getXZoom()/1.1,!1),this.chart.isYZoomEnabled()&&this.chart.setYZoom(this.chart.getYZoom()/1.1,!1))}}),x.charts.ChartTouchInteraction=function(t){this.chart=t,this.canvas=t._canvas,m.addEventListener("touchstart","handleTouchstart",this.canvas,this)},Y.ext("twaver.charts.ChartTouchInteraction",Object,{handleTouchstart:function(t){m.preventDefault(t),this.chart.isFocusOnClick()&&x.Util.setFocus(this.canvas),this.endPoint=this.chart.getLogicalPoint(t),lt.isMultiTouch(t)&&(this.distance=lt.getDistance(t),this.xZoom=this.chart.getXZoom(),this.yZoom=this.chart.getYZoom()),m.addEventListener("touchmove","handleTouchmove",this.canvas,this),m.addEventListener("touchend","handleTouchend",this.canvas,this)},handleTouchmove:function(t){var e;m.preventDefault(t),this.endPoint&&(e=this.chart.getLogicalPoint(t),!this.moved&&10<b.getDistance(this.endPoint,e)&&(this.moved=!0,this.lastPoint=e),this.moved&&(lt.isSingleTouch(t)?this.endPoint&&(this.chart.isXTranslateEnabled()&&this.chart.setXTranslate(this.chart.getXTranslate()+e.x-this.endPoint.x),this.chart.isYTranslateEnabled()&&this.chart.setYTranslate(this.chart.getYTranslate()+e.y-this.endPoint.y),this.endPoint=e):this.distance&&(e=lt.getDistance(t)/this.distance,t=this.xZoom*e,e=this.yZoom*e,this.chart.isXZoomEnabled()&&this.chart.setXZoom(t,!1),this.chart.isYZoomEnabled()&&this.chart.setYZoom(e,!1))))},handleTouchend:function(t){var e;m.preventDefault(t),this.moved||(this.endPoint=this.chart.getLogicalPoint(t),(e=this.lastPoint&&this.lastTouchStartTime&&(new Date).getTime()-this.lastTouchStartTime.getTime()<=300&&Math.abs(this.endPoint.x-this.lastPoint.x)<=10&&Math.abs(this.endPoint.y-this.lastPoint.y)<=10)?(this.lastPoint=null,this.lastTouchStartTime=null):(this.lastPoint=this.endPoint,this.lastTouchStartTime=new Date),t=this.chart.tryGetDataAt(t),e&&null==t?this.chart.isDoubleClickToReset()&&(this.chart.zoomReset(!1),this.chart.setXTranslate(0),this.chart.setYTranslate(0)):(e=this.chart.getSelectionModel(),t?e.contains(t)||e.setSelection(t):e.clearSelection())),delete this.endPoint,delete this.distance,delete this.xZoom,delete this.yZoom,delete this.moved,m.removeEventListener("touchmove",this.canvas,this),m.removeEventListener("touchend",this.canvas,this)}}),x.charts.ChartMSTouchInteraction=function(t){this.chart=t,this.canvas=t._canvas,this._pointerMap={},this._pointerIdArray=[],m.addEventListener("MSPointerDown","handleTouchstart",this.canvas,this),m.addEventListener("MSPointerMove","handleTouchmove",this.canvas,this),m.addEventListener("MSPointerUp","handleTouchend",this.canvas,this),m.addEventListener("MSPointerCancel","handleTouchend",this.canvas,this);t=g.isFirefox?"DOMMouseScroll":"mousewheel";this.canvas.addEventListener(t,function(t){self.handleMouseWheel(t)},!1)},Y.ext("twaver.charts.ChartMSTouchInteraction",Object,{handleTouchstart:function(t){this.chart.isFocusOnClick()&&x.Util.setFocus(this.canvas);var e=this.chart.getLogicalPoint(t);t.isPrimary&&0<this._pointerIdArray.length&&(this._pointerMap={},this._pointerIdArray=[]),!this._pointerMap[t.pointerId]&&e&&(this._pointerIdArray.push(t.pointerId),this._pointerMap[t.pointerId]=t);var i=this.chart.tryGetDataAt(t);1==this._pointerIdArray.length&&e?this._startTouchPoint&&this._startTouchTime&&(new Date).getTime()-this._startTouchTime.getTime()<=500&&b.getDistance(this._startTouchPoint,e)<=10&&null==i?this.chart.isDoubleClickToReset()&&(this.chart.zoomReset(!1),this.chart.setXTranslate(0),this.chart.setYTranslate(0),this._startTouchPoint=null,this._startTouchTime=null,this._startClientPoint=null):(this._startTouchPoint=e,this._startTouchTime=new Date,this._startClientPoint={x:t.clientX,y:t.clientY},m.handle_mousedown(this,t)):2==this._pointerIdArray.length&&(this.xZoom=this.chart.getXZoom(),this.yZoom=this.chart.getYZoom(),this._distance=this._getDistance())},handleTouchmove:function(t){var e;0==this._pointerIdArray.length||!this._pointerMap[t.pointerId]||b.getDistance({x:this._pointerMap[t.pointerId].pageX,y:this._pointerMap[t.pointerId].pageY},{x:t.pageX,y:t.pageY})<=3||(this._pointerMap[t.pointerId]=t,2==this._pointerIdArray.length&&(e=this._getDistance()/this._distance,t=this.xZoom*e,e=this.yZoom*e,this.chart.isXZoomEnabled()&&this.chart.setXZoom(t,!1),this.chart.isYZoomEnabled()&&this.chart.setYZoom(e,!1)))},handleTouchend:function(t){var e,i,n=this.chart.getLogicalPoint(t);1==this._pointerIdArray.length&&n&&!this.moved&&(e=this.chart.tryGetDataAt(t),i=this._startTouchPoint&&this._startTouchTime&&(new Date).getTime()-this._startTouchTime.getTime()<=500&&b.getDistance(this._startTouchPoint,n)<=10,n=this.chart.getSelectionModel(),e&&i?Y.isCtrlDown(t)?n.contains(e)?n.removeSelection(e):n.appendSelection(e):n.contains(e)||n.setSelection(e):Y.isCtrlDown(t)||n.clearSelection()),this.moved=!1,this._pointerMap={},this._pointerIdArray=[]},handleMouseWheel:function(t){m.preventDefault(t);t=g.isFirefox?-t.detail:t.wheelDelta;0<t?(this.chart.isXZoomEnabled()&&this.chart.setXZoom(1.1*this.chart.getXZoom(),!1),this.chart.isYZoomEnabled()&&this.chart.setYZoom(1.1*this.chart.getYZoom(),!1)):t<0&&(this.chart.isXZoomEnabled()&&this.chart.setXZoom(this.chart.getXZoom()/1.1,!1),this.chart.isYZoomEnabled()&&this.chart.setYZoom(this.chart.getYZoom()/1.1,!1))},handle_mousemove:function(t){var e;1==this._pointerIdArray.length&&this._startTouchPoint&&this._startClientPoint&&(e={x:this._startTouchPoint.x+(t.clientX-this._startClientPoint.x)/this.chart.getXZoom(),y:this._startTouchPoint.y+(t.clientY-this._startClientPoint.y)/this.chart.getYZoom()},3<b.getDistance(this._startTouchPoint,e)&&(this.moved=!0,this.chart.isXTranslateEnabled()&&this.chart.setXTranslate(this.chart.getXTranslate()+e.x-this._startTouchPoint.x),this.chart.isYTranslateEnabled()&&this.chart.setYTranslate(this.chart.getYTranslate()+e.y-this._startTouchPoint.y),this._startClientPoint.x=t.clientX,this._startClientPoint.y=t.clientY))},handle_mouseup:function(t){this.handleTouchend(t)},_getDistance:function(){return b.getDistance({x:this._pointerMap[this._pointerIdArray[0]].pageX,y:this._pointerMap[this._pointerIdArray[0]].pageY},{x:this._pointerMap[this._pointerIdArray[1]].pageX,y:this._pointerMap[this._pointerIdArray[1]].pageY})}}),x.charts.LegendPaneInteraction=function(t){this.legendPane=t;var e=this;this.legendPane._legendDiv.addEventListener("mousedown",function(t){e.handleMouseDown(t)},!1)},Y.ext("twaver.charts.LegendPaneInteraction",Object,{handleMouseDown:function(t){var e;0!==t.button||(e=(e=t.target._data)||t.target.parentNode._data)&&(this.legendPane._hiddenMap[e.getId()]?delete this.legendPane._hiddenMap[e.getId()]:this.legendPane._hiddenMap[e.getId()]=e,this.legendPane._chart.invalidateModel())}}),x.charts.LegendPaneTouchInteraction=function(t){this.legendPane=t,m.addEventListener("touchstart","handleTouchstart",this.legendPane._legendDiv,this)},Y.ext("twaver.charts.LegendPaneTouchInteraction",Object,{handleTouchstart:function(t){m.preventDefault(t);var e=t.target._data;(e=e||t.target.parentNode._data)&&(this.legendPane._hiddenMap[e.getId()]?delete this.legendPane._hiddenMap[e.getId()]:this.legendPane._hiddenMap[e.getId()]=e,this.legendPane._chart.invalidateModel())}});var Ot=function(t,e){Y.registerImage(t,e),De[t]=1},De={};Ot("node_image",{w:32,h:24,origin:{x:0,y:0},v:[{shape:"path",data:"M32,23.5c0,0.276-0.224,0.5-0.5,0.5h-31C0.224,24,0,23.776,0,23.5v-2C0,21.224,0.224,21,0.5,21h31  c0.276,0,0.5,0.224,0.5,0.5V23.5z",gradient:{id:"SVGID_1_",type:"linear",x1:"15.9995",y1:"21",x2:"15.9995",y2:"24",stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"path",data:"M15,22.3c0-0.165-0.134-0.3-0.3-0.3H3.3C3.134,22,3,22.135,3,22.3V24h12V22.3z",gradient:{id:"SVGID_2_",type:"linear",x1:"9",y1:"22",x2:"9",y2:"25",stop:[{offset:"0",color:"#69B4A5"},{offset:"0.1",color:"#61AD9C"}]}},{shape:"path",data:"M31,20H1V1c0-0.553,0.448-1,1-1h28c0.553,0,1,0.447,1,1V20z",gradient:{id:"SVGID_3_",type:"linear",x1:"15.9995",y1:"-0.1221",x2:"15.9995",y2:"19.9471",stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"rect",x:2,y:1,w:28,h:18,fill:"#FFFFFF"},{shape:"rect",x:3,y:2,w:26,h:16,gradient:{id:"SVGID_4_",type:"linear",x1:"15.9995",y1:"2.0654",x2:"15.9995",y2:"17.3835",stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#0089C1"}]}},{shape:"path",data:"9.649,17.034 6.815,17.034 9.935,2.966 12.768,2.966 z",fill:"#FFFFFF"},{shape:"path",data:"12.065,17.034 10.815,17.034 13.935,2.966 15.185,2.966 z",fill:"#FFFFFF"},{shape:"path",data:"14.065,17.034 13.315,17.034 16.435,2.966 17.185,2.966 z",fill:"#FFFFFF"}]}),Ot("group_image",{w:32,h:24,origin:{x:0,y:0},v:[{shape:"path",data:"M32,16.5c0,0.276-0.224,0.5-0.5,0.5h-24C7.224,17,7,16.776,7,16.5v-1C7,15.224,7.224,15,7.5,15h24   c0.276,0,0.5,0.224,0.5,0.5V16.5z",gradient:{id:"SVGID_1_",type:"linear",x1:"19.5",y1:"15",x2:"19.5",y2:"17",stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"path",data:"M19,16.5c0-0.277-0.224-0.5-0.5-0.5h-8c-0.276,0-0.5,0.223-0.5,0.5V17h9V16.5z",gradient:{id:"SVGID_2_",type:"linear",x1:"14.4995",y1:"15.9209",x2:"14.4995",y2:"17.0459",stop:[{offset:"0",color:"#58AC9A"},{offset:"1",color:"#248576"}]}},{shape:"path",data:"M31,14H8V1c0-0.553,0.448-1,1-1h21c0.553,0,1,0.447,1,1V14z",gradient:{id:"SVGID_3_",type:"linear",x1:"19.5",y1:"0",x2:"19.5",y2:"14.0005",stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"rect",x:9,y:1,w:21,h:12,fill:"#FFFFFF"},{shape:"rect",x:10,y:2,w:19,h:10,gradient:{id:"SVGID_4_",type:"linear",x1:"19.5",y1:"1.9619",x2:"19.5",y2:"11.9744",stop:[{offset:"0",color:"#58AC9A"},{offset:"1",color:"#248576"}]}},{shape:"path",data:"M25,23.5c0,0.276-0.224,0.5-0.5,0.5h-24C0.224,24,0,23.776,0,23.5v-1C0,22.224,0.224,22,0.5,22h24   c0.276,0,0.5,0.224,0.5,0.5V23.5z",gradient:{id:"SVGID_5_",type:"linear",x1:"12.4995",y1:"22",x2:"12.4995",y2:"24",stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"path",data:"M12,23.5c0-0.277-0.224-0.5-0.5-0.5h-8C3.224,23,3,23.223,3,23.5V24h9V23.5z",gradient:{id:"SVGID_6_",type:"linear",x1:"7.5",y1:"22.9209",x2:"7.5",y2:"24.0459",stop:[{offset:"0",color:"#58AC9A"},{offset:"1",color:"#248576"}]}},{shape:"path",data:"M24,21H1V8c0-0.553,0.448-1,1-1h21c0.553,0,1,0.447,1,1V21z",gradient:{id:"SVGID_7_",type:"linear",x1:"12.4995",y1:"7",x2:"12.4995",y2:"21.0005",stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"rect",x:2,y:8,w:21,h:12,fill:"#FFFFFF"},{shape:"rect",x:3,y:9,w:19,h:10,gradient:{id:"SVGID_8_",type:"linear",x1:"12.4995",y1:"8.9619",x2:"12.4995",y2:"18.9749",stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#0089C1"}]}}]}),Ot("subnetwork_image",{w:32,h:24,origin:{x:0,y:0},v:[{shape:"path",data:"M32,14.499c0,0.276-0.224,0.5-0.5,0.5h-20c-0.276,0-0.5-0.224-0.5-0.5v-1c0-0.276,0.224-0.5,0.5-0.5  h20c0.276,0,0.5,0.224,0.5,0.5V14.499z",gradient:{id:"SVGID_1_",type:"linear",x1:21.5,y1:12.999,x2:21.5,y2:14.9995,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"path",data:"M22,14.499c0-0.277-0.224-0.5-0.5-0.5h-7c-0.276,0-0.5,0.223-0.5,0.5v0.5h8V14.499z",gradient:{id:"SVGID_2_",type:"linear",x1:18,y1:13.9199,x2:18,y2:15.0449,stop:[{offset:"0",color:"#58AC9A"},{offset:"1",color:"#248576"}]}},{shape:"path",data:"M31,11.499c0,0.276-0.224,0.5-0.5,0.5h-18c-0.276,0-0.5-0.224-0.5-0.5v-11c0-0.276,0.224-0.5,0.5-0.5  h18c0.276,0,0.5,0.224,0.5,0.5V11.499z",gradient:{id:"SVGID_3_",type:"linear",x1:21.5,y1:-.9502,x2:21.5,y2:12.5498,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"rect",x:13,y:.999,w:17,h:10,fill:"#FFFFFF"},{shape:"rect",x:14,y:1.999,w:15,h:8,gradient:{id:"SVGID_4_",type:"linear",x1:21.5,y1:1.9312,x2:21.5,y2:9.6537,stop:[{offset:"0",color:"#58AC9A"},{offset:"1",color:"#248576"}]}},{shape:"path",data:"M21,23.5c0,0.276-0.224,0.5-0.5,0.5h-20C0.224,24,0,23.776,0,23.5v-1C0,22.224,0.224,22,0.5,22h20  c0.276,0,0.5,0.224,0.5,0.5V23.5z",gradient:{id:"SVGID_5_",type:"linear",x1:10.4995,y1:22,x2:10.4995,y2:24,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"rect",x:22,y:20.5,w:3,h:1.999,gradient:{id:"SVGID_6_",type:"linear",x1:-464.9424,y1:-722.2754,x2:-462.9424,y2:-722.2754,stop:[{offset:"0",color:"#58AC9A"},{offset:"1",color:"#248576"}]}},{shape:"rect",x:28,y:16,w:2,h:3,gradient:{id:"SVGID_7_",type:"linear",x1:29,y1:16,x2:29,y2:19,stop:[{offset:"0",color:"#58AC9A"},{offset:"1",color:"#248576"}]}},{shape:"path",data:"M11,23.5c0-0.277-0.224-0.5-0.5-0.5h-7C3.224,23,3,23.223,3,23.5V24h8V23.5z",gradient:{id:"SVGID_8_",type:"linear",x1:7,y1:22.9209,x2:7,y2:24.0459,stop:[{offset:"0",color:"#58AC9A"},{offset:"1",color:"#248576"}]}},{shape:"path",data:"M20,20.5c0,0.276-0.224,0.5-0.5,0.5h-18C1.224,21,1,20.776,1,20.5v-11C1,9.224,1.224,9,1.5,9h18  C19.776,9,20,9.224,20,9.5V20.5z",gradient:{id:"SVGID_9_",type:"linear",x1:10.4995,y1:8.0508,x2:10.4995,y2:21.5513,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"rect",x:2,y:10,w:17,h:10,fill:"#FFFFFF"},{shape:"rect",x:3,y:11,w:15,h:8,gradient:{id:"SVGID_10_",type:"linear",x1:10.4995,y1:10.9321,x2:10.4995,y2:18.6551,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#0089C1"}]}},{shape:"path",data:"M32,22.7c0,0.165-0.135,0.3-0.301,0.3h-5.4C26.134,23,26,22.865,26,22.7v-2.4  c0-0.165,0.134-0.3,0.299-0.3h5.4C31.865,20,32,20.135,32,20.3V22.7z",gradient:{id:"SVGID_11_",type:"linear",x1:29,y1:20,x2:29,y2:23,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}}]}),Ot("bus_icon",{w:16,h:16,origin:{x:0,y:0},v:[{shape:"rect",x:4,y:6,w:1,h:1,fill:"#232424"},{shape:"path",data:"M7,4c0,0.552-0.448,1-1,1H3C2.448,5,2,4.552,2,4V3c0-0.552,0.448-1,1-1h3c0.552,0,1,0.448,1,1V4z",gradient:{id:"SVGID_1_",type:"linear",x1:4.5,y1:2,x2:4.5,y2:5,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"rect",x:3,y:3,w:3,h:1,fill:"#232424"},{shape:"rect",x:3,y:3,w:3,h:1,fill:"#FFFFFF"},{shape:"path",data:"M6,5.5C6,5.776,5.776,6,5.5,6h-2C3.224,6,3,5.776,3,5.5l0,0C3,5.224,3.224,5,3.5,5h2  C5.776,5,6,5.224,6,5.5L6,5.5z",gradient:{id:"SVGID_2_",type:"linear",x1:4.5,y1:6,x2:4.5,y2:5,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"rect",x:12,y:6,w:1,h:1,fill:"#232424"},{shape:"path",data:"M15,4c0,0.552-0.447,1-1,1h-3c-0.553,0-1-0.448-1-1V3c0-0.552,0.447-1,1-1h3c0.553,0,1,0.448,1,1V4z",gradient:{id:"SVGID_3_",type:"linear",x1:12.5,y1:2,x2:12.5,y2:5,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"rect",x:11,y:3,w:3,h:1,fill:"#232424"},{shape:"rect",x:11,y:3,w:3,h:1,fill:"#FFFFFF"},{shape:"path",data:"M14,5.5C14,5.776,13.777,6,13.5,6h-2C11.225,6,11,5.776,11,5.5l0,0C11,5.224,11.225,5,11.5,5h2  C13.777,5,14,5.224,14,5.5L14,5.5z",gradient:{id:"SVGID_4_",type:"linear",x1:12.5,y1:6,x2:12.5,y2:5,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"rect",x:8,y:10,w:1,h:1,fill:"#232424"},{shape:"path",data:"M6,13c0-0.553,0.448-1,1-1h3c0.553,0,1,0.447,1,1v1c0,0.553-0.447,1-1,1H7c-0.552,0-1-0.447-1-1V13z",gradient:{id:"SVGID_5_",type:"linear",x1:-1428.3853,y1:-571.5747,x2:-1428.3853,y2:-568.5747,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"rect",x:7,y:13,w:3,h:1,fill:"#232424"},{shape:"rect",x:7,y:13,w:3,h:1,fill:"#FFFFFF"},{shape:"path",data:"M7,11.5C7,11.223,7.224,11,7.5,11h2c0.277,0,0.5,0.223,0.5,0.5l0,0c0,0.275-0.223,0.5-0.5,0.5h-2  C7.224,12,7,11.775,7,11.5L7,11.5z",gradient:{id:"SVGID_6_",type:"linear",x1:-1428.3862,y1:-567.5737,x2:-1428.3862,y2:-568.5737,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"path",data:"M15,7.5C15,7.776,14.777,8,14.5,8h-12C2.224,8,2,7.776,2,7.5l0,0C2,7.224,2.224,7,2.5,7h12  C14.777,7,15,7.224,15,7.5L15,7.5z",gradient:{id:"SVGID_7_",type:"linear",x1:8.4995,y1:6.1152,x2:8.4995,y2:7.5558,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"path",data:"M15,9.5c0,0.275-0.223,0.5-0.5,0.5h-12C2.224,10,2,9.775,2,9.5l0,0C2,9.223,2.224,9,2.5,9h12  C14.777,9,15,9.223,15,9.5L15,9.5z",gradient:{id:"SVGID_8_",type:"linear",x1:8.4995,y1:8.1147,x2:8.4995,y2:9.556,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}}]}),Ot("data_icon",{w:16,h:16,origin:{x:0,y:0},v:[{shape:"path",data:"M15,12c0,0.553-0.447,1-1,1H7c-0.552,0-1-0.447-1-1V8c0-0.552,0.448-1,1-1h7c0.553,0,1,0.448,1,1V12   z",gradient:{id:"SVGID_1_",type:"linear",x1:10.5,y1:6.959,x2:10.5,y2:12.2259,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"rect",x:7,y:8,w:7,h:4,fill:"#FFFFFF"},{shape:"rect",x:8,y:9,w:5,h:2,gradient:{id:"SVGID_2_",type:"linear",x1:10.5,y1:8.6997,x2:10.5,y2:11.0333,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"path",data:"M15,14.5c0,0.275-0.225,0.5-0.5,0.5h-8C6.224,15,6,14.775,6,14.5l0,0C6,14.223,6.224,14,6.5,14h8   C14.775,14,15,14.223,15,14.5L15,14.5z",gradient:{id:"SVGID_3_",type:"linear",x1:10.5,y1:13.125,x2:10.5,y2:14.5518,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"rect",x:8,y:14,w:1,h:1,gradient:{id:"SVGID_4_",type:"linear",x1:8.4995,y1:14.0049,x2:8.4995,y2:14.9471,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"path",data:"M12,4H6c0,0-0.152-0.275-0.5-1C5.021,2,5.021,2,4,2C3.057,2,2,2,2,2C1.448,2,1,2.448,1,3v8  c0,0.553,0.448,1,1,1h3v-1H2V3h2.387l1.024,1.998L12,5v1h1V5C13,4.448,12.553,4,12,4z",gradient:{id:"SVGID_5_",type:"linear",x1:6.9995,y1:2.0527,x2:6.9995,y2:11.4757,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"path",data:"M12,5L5.411,4.998L4.387,3H2v8h3v-0.645V7.254V7c0-0.552,0.448-1,1-1h0.324h3.032H12V5z",gradient:{id:"SVGID_6_",type:"linear",x1:6.9995,y1:2.9902,x2:6.9995,y2:11.0032,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}}]}),Ot("grid_icon",{w:16,h:16,origin:{x:0,y:0},v:[{shape:"path",data:"M15,14c0,0.553-0.447,1-1,1H3c-0.552,0-1-0.447-1-1V3c0-0.552,0.448-1,1-1h11c0.553,0,1,0.448,1,1V14  z",gradient:{id:"SVGID_1_",type:"linear",x1:8.4995,y1:2.1255,x2:8.4995,y2:14.909,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"rect",x:3,y:3,w:11,h:11,fill:"#FFFFFF"},{shape:"rect",x:3,y:5,w:11,h:1,gradient:{id:"SVGID_2_",type:"linear",x1:8.4995,y1:3.209,x2:8.4995,y2:13.8043,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"rect",x:3,y:8,w:11,h:1,gradient:{id:"SVGID_3_",type:"linear",x1:8.4995,y1:3.209,x2:8.4995,y2:13.8043,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"rect",x:3,y:11,w:11,h:1,gradient:{id:"SVGID_4_",type:"linear",x1:8.4995,y1:3.2095,x2:8.4995,y2:13.8048,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"rect",x:11,y:3,w:1,h:11,gradient:{id:"SVGID_5_",type:"linear",x1:11.5,y1:3.209,x2:11.5,y2:13.8048,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"rect",x:8,y:3,w:1,h:11,gradient:{id:"SVGID_6_",type:"linear",x1:8.4995,y1:3.209,x2:8.4995,y2:13.8048,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"rect",x:5,y:3,w:1,h:11,gradient:{id:"SVGID_7_",type:"linear",x1:5.5,y1:3.209,x2:5.5,y2:13.8048,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}}]}),Ot("databox_icon",{w:16,h:16,origin:{x:0,y:0},v:[{shape:"path",data:"M14.5,6h-12H2v0.5v7C2,13.776,2.224,14,2.5,14h12c0.276,0,0.5-0.224,0.5-0.5v-7V6H14.5z",gradient:{id:"SVGID_1_",type:"linear",x1:8.4995,y1:6.0625,x2:8.4995,y2:14.063,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"path",data:"M14.776,5.553l-1.553-3.105C13.101,2.201,12.775,2,12.5,2h-8C4.225,2,3.899,2.201,3.776,2.447  L2.224,5.553L2,6h0.5h12H15L14.776,5.553z",gradient:{id:"SVGID_2_",type:"linear",x1:8.5005,y1:3.104,x2:8.5005,y2:-5.6467,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"path",data:"12,2 9.5,2 7.5,2 5,2 3,6 7.5,6 9.5,6 14,6 z",gradient:{id:"SVGID_3_",type:"linear",x1:8.5005,y1:9.2295,x2:8.5005,y2:5.4586,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"path",data:"M11.5,9c0,0.276-0.224,0.5-0.5,0.5H6C5.724,9.5,5.5,9.276,5.5,9l0,0c0-0.276,0.224-0.5,0.5-0.5h5  C11.276,8.5,11.5,8.724,11.5,9L11.5,9z",fill:"#FFFFFF"}]}),Ot("group_icon",{w:16,h:16,origin:{x:0,y:0},v:[{shape:"path",data:"M15,8.5C15,8.776,14.776,9,14.5,9h-10C4.224,9,4,8.776,4,8.5v-7C4,1.224,4.224,1,4.5,1h10    C14.776,1,15,1.224,15,1.5V8.5z",gradient:{id:"SVGID_1_",type:"linear",x1:9.5,y1:.9512,x2:9.5,y2:8.9787,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"rect",x:5,y:2,w:9,h:6,fill:"#FFFFFF"},{shape:"rect",x:6,y:3,w:7,h:4,gradient:{id:"SVGID_2_",type:"linear",x1:9.5,y1:3.02,x2:9.5,y2:6.9606,stop:[{offset:"0",color:"#58AC9A"},{offset:"1",color:"#248576"}]}},{shape:"path",data:"M16,10.5c0,0.276-0.224,0.5-0.5,0.5h-12C3.224,11,3,10.776,3,10.5l0,0C3,10.224,3.224,10,3.5,10h12    C15.776,10,16,10.224,16,10.5L16,10.5z",gradient:{id:"SVGID_3_",type:"linear",x1:9.5,y1:9.9941,x2:9.5,y2:10.9976,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"rect",x:6,y:10.001,w:2,h:.999,gradient:{id:"SVGID_4_",type:"linear",x1:7,y1:10.0059,x2:7,y2:10.9472,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"path",data:"M12,12.5c0,0.276-0.224,0.5-0.5,0.5h-10C1.224,13,1,12.776,1,12.5v-7C1,5.224,1.224,5,1.5,5h10    C11.776,5,12,5.224,12,5.5V12.5z",gradient:{id:"SVGID_5_",type:"linear",x1:6.4995,y1:4.9512,x2:6.4995,y2:12.9792,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"rect",x:2,y:6,w:9,h:6,fill:"#FFFFFF"},{shape:"rect",x:3,y:7,w:7,h:4,gradient:{id:"SVGID_6_",type:"linear",x1:6.4995,y1:7.02,x2:6.4995,y2:10.9611,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"path",data:"M13,14.5c0,0.276-0.224,0.5-0.5,0.5h-12C0.224,15,0,14.776,0,14.5l0,0C0,14.224,0.224,14,0.5,14h12    C12.776,14,13,14.224,13,14.5L13,14.5z",gradient:{id:"SVGID_7_",type:"linear",x1:6.4995,y1:13.9941,x2:6.4995,y2:14.9976,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"rect",x:3,y:14.001,w:2,h:.999,gradient:{id:"SVGID_8_",type:"linear",x1:4,y1:14.0059,x2:4,y2:14.9472,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}}]}),Ot("link_icon",{w:16,h:16,origin:{x:0,y:0},v:[{shape:"line",p1:{x:2.5,y:2.5},p2:{x:13.5,y:13.5},lineColor:"url(#SVGID_1_)",lineWidth:1},{shape:"ellipse",cx:13,cy:13,rx:2,ry:2,gradient:{id:"SVGID_2_",type:"linear",x1:11.5371,y1:11.5371,x2:14.2155,y2:14.2155,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"ellipse",cx:13,cy:13,rx:1,ry:1,fill:"#FFFFFF"},{shape:"ellipse",cx:3,cy:3,rx:2,ry:2,gradient:{id:"SVGID_3_",type:"linear",x1:1.4956,y1:1.4956,x2:4.1473,y2:4.1473,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"ellipse",cx:3,cy:3,rx:1,ry:1,fill:"#FFFFFF"}]}),Ot("linksubnetwork_icon",{w:16,h:16,origin:{x:0,y:0},v:[{shape:"path",data:"M15,7.661c0-1.202-0.642-2.247-1.596-2.835C12.848,3.188,11.314,2,9.486,2  c-1.587,0-2.95,0.902-3.649,2.211C4.573,4.22,3.548,5.194,3.438,6.432C3.389,6.429,3.342,6.417,3.292,6.417  C2.026,6.417,1,7.443,1,8.708C1,9.975,2.026,11,3.292,11h8.371l0,0C13.506,11,15,9.506,15,7.661z",gradient:{id:"SVGID_1_",type:"linear",x1:7.9995,y1:1.959,x2:7.9995,y2:11.0921,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"path",data:"M3.292,10C2.58,10,2,9.42,2,8.708c0-0.712,0.58-1.292,1.292-1.292C3.286,7.422,3.332,7.427,3.379,7.43  l0.969,0.058L4.435,6.52C4.5,5.779,5.106,5.216,5.844,5.211l0.595-0.004l0.28-0.524C7.273,3.645,8.334,3,9.486,3  c1.342,0,2.535,0.863,2.971,2.147l0.116,0.341l0.307,0.189C13.581,6.11,14,6.851,14,7.661C14,8.951,12.951,10,11.661,10H3.292z",fill:"#FFFFFF"},{shape:"path",data:"M3.292,10h8.37c1.11,0,2.04-0.781,2.276-1.821c-0.131-0.615-0.5-1.158-1.058-1.501l-0.307-0.189  l-0.116-0.341C12.021,4.863,10.828,4,9.486,4C8.334,4,7.273,4.645,6.719,5.682l-0.28,0.524L5.844,6.211  C5.106,6.216,4.5,6.779,4.435,7.52L4.349,8.487L3.379,8.43C3.332,8.427,3.286,8.422,3.292,8.417c-0.535,0-0.994,0.328-1.19,0.792  C2.297,9.672,2.757,10,3.292,10z",gradient:{id:"SVGID_2_",type:"linear",x1:8.019,y1:4.084,x2:8.019,y2:9.8062,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"line",p1:{x:8.01,y:8.01},p2:{x:13.186,y:13.186},lineColor:"url(#SVGID_3_)",lineWidth:1},{shape:"ellipse",cx:8,cy:8,rx:2,ry:2,gradient:{id:"SVGID_4_",type:"linear",x1:6.7881,y1:6.7881,x2:9.9924,y2:9.9924,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"ellipse",cx:8,cy:8,rx:1,ry:1,fill:"#FFFFFF"},{shape:"ellipse",cx:13,cy:13,rx:2,ry:2,gradient:{id:"SVGID_5_",type:"linear",x1:11.5791,y1:11.5791,x2:14.3132,y2:14.3132,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"ellipse",cx:13,cy:13,rx:1,ry:1,fill:"#FFFFFF"}]}),Ot("node_icon",{w:16,h:16,origin:{x:0,y:0},v:[{shape:"path",data:"M15,11.5c0,0.276-0.224,0.5-0.5,0.5h-13C1.224,12,1,11.776,1,11.5v-9C1,2.224,1.224,2,1.5,2h13  C14.776,2,15,2.224,15,2.5V11.5z",gradient:{id:"SVGID_1_",type:"linear",x1:7.9995,y1:1.939,x2:7.9995,y2:11.9739,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"rect",x:2,y:3,w:12,h:8,fill:"#FFFFFF"},{shape:"rect",x:3,y:4,w:10,h:6,gradient:{id:"SVGID_2_",type:"linear",x1:7.9995,y1:4.0513,x2:7.9995,y2:9.865,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"path",data:"M16,14.5c0,0.276-0.224,0.5-0.5,0.5h-15C0.224,15,0,14.776,0,14.5v-1C0,13.224,0.224,13,0.5,13h15  c0.276,0,0.5,0.224,0.5,0.5V14.5z",gradient:{id:"SVGID_3_",type:"linear",x1:7.9995,y1:13.0508,x2:7.9995,y2:14.9258,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"path",data:"M9,14.5C9,14.224,8.776,14,8.5,14h-5C3.224,14,3,14.224,3,14.5V15h6V14.5z",gradient:{id:"SVGID_4_",type:"linear",x1:5.9995,y1:14.0508,x2:5.9995,y2:15.9258,stop:[{offset:"0",color:"#69B4A5"},{offset:"0.1",color:"#61AD9C"},{offset:"0.4637",color:"#449981"},{offset:"0.7764",color:"#2C8E73"},{offset:"1",color:"#218A6E"}]}}]}),Ot("shapelink_icon",{w:16,h:16,origin:{x:0,y:0},v:[{shape:"line",p1:{x:7.5,y:2.5},p2:{x:2.5,y:7.5},lineColor:"url(#SVGID_1_)",lineWidth:1},{shape:"line",p1:{x:2.5,y:7.5},p2:{x:8.5,y:13.5},lineColor:"url(#SVGID_2_)",lineWidth:1},{shape:"line",p1:{x:9,y:13.186},p2:{x:13.5,y:6.5},lineColor:"url(#SVGID_3_)",lineWidth:1},{shape:"ellipse",cx:7,cy:3,rx:2,ry:2,gradient:{id:"SVGID_4_",type:"linear",x1:5.5864,y1:1.5864,x2:8.4149,y2:4.4149,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"ellipse",cx:7,cy:3,rx:1,ry:1,fill:"#FFFFFF"},{shape:"ellipse",cx:2,cy:8,rx:2,ry:2,gradient:{id:"SVGID_5_",type:"linear",x1:.5864,y1:6.5864,x2:3.4142,y2:9.4142,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"ellipse",cx:2,cy:8,rx:1,ry:1,fill:"#FFFFFF"},{shape:"ellipse",cx:8,cy:13,rx:2,ry:2,gradient:{id:"SVGID_6_",type:"linear",x1:6.5869,y1:11.5869,x2:9.4147,y2:14.4147,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"ellipse",cx:8,cy:13,rx:1,ry:1,fill:"#FFFFFF"},{shape:"ellipse",cx:13,cy:7,rx:2,ry:2,gradient:{id:"SVGID_7_",type:"linear",x1:11.5859,y1:5.5859,x2:14.4144,y2:8.4144,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"ellipse",cx:13,cy:7,rx:1,ry:1,fill:"#FFFFFF"}]}),Ot("shapenode_icon",{w:16,h:16,origin:{x:0,y:0},v:[{shape:"path",data:"M14.5,3h-9l-4,4v7h13L9,8.5L14.5,3z M12.086,13H2.5V7.414L5.914,4h6.172l-4.5,4.5L12.086,13z",gradient:{id:"SVGID_1_",type:"linear",x1:7.9995,y1:3.209,x2:7.9995,y2:13.6621,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"ellipse",cx:6,cy:3,rx:2,ry:2,gradient:{id:"SVGID_2_",type:"linear",x1:4.5859,y1:1.5859,x2:7.4151,y2:4.4151,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"ellipse",cx:6,cy:3,rx:1,ry:1,fill:"#FFFFFF"},{shape:"ellipse",cx:13,cy:3,rx:2,ry:2,gradient:{id:"SVGID_3_",type:"linear",x1:11.5869,y1:1.5864,x2:14.4153,y2:4.4149,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"ellipse",cx:13,cy:3,rx:1,ry:1,fill:"#FFFFFF"},{shape:"ellipse",cx:9,cy:8,rx:2,ry:2,gradient:{id:"SVGID_4_",type:"linear",x1:7.5864,y1:6.5864,x2:10.4149,y2:9.4149,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"ellipse",cx:9,cy:8,rx:1,ry:1,fill:"#FFFFFF"},{shape:"ellipse",cx:2,cy:7,rx:2,ry:2,gradient:{id:"SVGID_5_",type:"linear",x1:.5859,y1:5.5859,x2:3.4144,y2:8.4144,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"ellipse",cx:2,cy:7,rx:1,ry:1,fill:"#FFFFFF"},{shape:"ellipse",cx:12.825,cy:13,rx:2,ry:2,gradient:{id:"SVGID_6_",type:"linear",x1:11.4111,y1:11.5869,x2:14.2396,y2:14.4153,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"ellipse",cx:12.825,cy:13,rx:1,ry:1,fill:"#FFFFFF"}]}),Ot("shapesubnetwork_icon",{w:16,h:16,origin:{x:0,y:0},v:[{shape:"path",data:"M15,6.661c0-1.202-0.642-2.247-1.596-2.835C12.848,2.188,11.314,1,9.486,1  c-1.587,0-2.95,0.902-3.649,2.211C4.573,3.22,3.548,4.194,3.438,5.432C3.389,5.429,3.342,5.417,3.292,5.417  C2.026,5.417,1,6.443,1,7.708S2.026,10,3.292,10h8.371l0,0C13.506,10,15,8.505,15,6.661z",gradient:{id:"SVGID_1_",type:"linear",x1:7.9995,y1:1.3755,x2:7.9995,y2:9.733,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"path",data:"M3.292,9C2.58,9,2,8.42,2,7.708s0.58-1.292,1.292-1.292C3.286,6.422,3.332,6.427,3.379,6.43l0.969,0.058  L4.435,5.52C4.5,4.779,5.106,4.216,5.844,4.211l0.595-0.004l0.28-0.524C7.273,2.645,8.334,2,9.486,2  c1.342,0,2.535,0.863,2.971,2.147l0.116,0.341l0.307,0.189C13.581,5.11,14,5.851,14,6.661C14,7.951,12.951,9,11.661,9H3.292z",fill:"#FFFFFF"},{shape:"path",data:"M3.272,9h8.37c1.11,0,2.039-0.689,2.275-1.729c-0.131-0.615-0.499-1.249-1.057-1.593l-0.307-0.189  l-0.116-0.341C12.002,3.863,10.809,3,9.468,3C8.314,3,7.254,3.645,6.7,4.682L6.42,5.207L5.825,5.211  C5.087,5.216,4.481,5.779,4.416,6.52L4.33,7.487L3.36,7.43C3.313,7.427,3.267,7.422,3.272,7.417c-0.535,0-0.994,0.327-1.19,0.792  C2.278,8.672,2.738,9,3.272,9z",gradient:{id:"SVGID_2_",type:"linear",x1:7.9995,y1:3.459,x2:7.9995,y2:8.4597,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"path",data:"M11.516,7.102h-8l2.469,6h8.5L11.516,7.102z M5.024,8.123h5.905l1.938,3.979H6.662L5.024,8.123z",gradient:{id:"SVGID_3_",type:"linear",x1:7.4443,y1:7.1724,x2:10.1111,y2:12.8383,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"path",data:"5,8.112 10.904,8.112 12.842,12.092 6.638,12.092 z",fill:"#FFFFFF"},{shape:"ellipse",cx:5,cy:8,rx:2,ry:2,gradient:{id:"SVGID_4_",type:"linear",x1:3,y1:8,x2:7,y2:8,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"ellipse",cx:5,cy:8,rx:1,ry:1,fill:"#FFFFFF"},{shape:"ellipse",cx:12,cy:8,rx:2,ry:2,gradient:{id:"SVGID_5_",type:"linear",x1:10,y1:8,x2:14,y2:8,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"ellipse",cx:12,cy:8,rx:1,ry:1,fill:"#FFFFFF"},{shape:"ellipse",cx:7,cy:12,rx:2,ry:2,gradient:{id:"SVGID_6_",type:"linear",x1:5,y1:12,x2:9,y2:12,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"ellipse",cx:7,cy:12,rx:1,ry:1,fill:"#FFFFFF"},{shape:"ellipse",cx:14,cy:12,rx:2,ry:2,gradient:{id:"SVGID_7_",type:"linear",x1:12,y1:12,x2:16,y2:12,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"ellipse",cx:14,cy:12,rx:1,ry:1,fill:"#FFFFFF"}]}),Ot("subnetwork_icon",{w:16,h:16,origin:{x:0,y:0},v:[{shape:"rect",x:10,y:14.001,w:2,h:1,gradient:{id:"SVGID_1_",type:"linear",x1:11,y1:14.0059,x2:11,y2:14.9481,stop:[{offset:"0",color:"#58AC9A"},{offset:"1",color:"#248576"}]}},{shape:"rect",x:14,y:10.001,w:1,h:2,gradient:{id:"SVGID_2_",type:"linear",x1:14.5,y1:10.0117,x2:14.5,y2:11.8962,stop:[{offset:"0",color:"#58AC9A"},{offset:"1",color:"#248576"}]}},{shape:"path",data:"M16,6.001c0,0.552-0.447,1-1,1H8c-0.552,0-1-0.448-1-1v-4c0-0.552,0.448-1,1-1h7   c0.553,0,1,0.448,1,1V6.001z",gradient:{id:"SVGID_3_",type:"linear",x1:11.5,y1:.96,x2:11.5,y2:6.2265,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"rect",x:8,y:2.001,w:7,h:4,fill:"#FFFFFF"},{shape:"rect",x:9,y:3.001,w:5,h:2,gradient:{id:"SVGID_4_",type:"linear",x1:11.5,y1:2.7007,x2:11.5,y2:5.0337,stop:[{offset:"0",color:"#58AC9A"},{offset:"1",color:"#248576"}]}},{shape:"path",data:"M16,8.501c0,0.276-0.225,0.5-0.5,0.5h-8c-0.276,0-0.5-0.224-0.5-0.5l0,0c0-0.276,0.224-0.5,0.5-0.5   h8C15.775,8.001,16,8.225,16,8.501L16,8.501z",gradient:{id:"SVGID_5_",type:"linear",x1:11.5,y1:7.126,x2:11.5,y2:8.5535,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"rect",x:9,y:8.001,w:1,h:.999,gradient:{id:"SVGID_6_",type:"linear",x1:9.5,y1:8.0063,x2:9.5,y2:8.9477,stop:[{offset:"0",color:"#58AC9A"},{offset:"1",color:"#248576"}]}},{shape:"path",data:"M9,12c0,0.553-0.447,1-1,1H1c-0.552,0-1-0.447-1-1V8c0-0.552,0.448-1,1-1h7c0.553,0,1,0.448,1,1V12z   ",gradient:{id:"SVGID_7_",type:"linear",x1:4.4995,y1:6.959,x2:4.4995,y2:12.2259,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"rect",x:1,y:8,w:7,h:4,fill:"#FFFFFF"},{shape:"rect",x:2,y:9,w:5,h:2,gradient:{id:"SVGID_8_",type:"linear",x1:4.5,y1:8.6997,x2:4.5,y2:11.0333,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"path",data:"M9,14.5C9,14.776,8.775,15,8.5,15h-8C0.224,15,0,14.776,0,14.5l0,0C0,14.224,0.224,14,0.5,14h8   C8.775,14,9,14.224,9,14.5L9,14.5z",gradient:{id:"SVGID_9_",type:"linear",x1:4.4995,y1:13.125,x2:4.4995,y2:14.5518,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}},{shape:"rect",x:2,y:14,w:1,h:1,gradient:{id:"SVGID_10_",type:"linear",x1:2.5,y1:14.0049,x2:2.5,y2:14.9471,stop:[{offset:"0",color:"#61B7D9"},{offset:"1",color:"#005EAD"}]}},{shape:"path",data:"M16,14.501c0,0.276-0.224,0.5-0.5,0.5h-2c-0.276,0-0.5-0.224-0.5-0.5v-1c0-0.276,0.224-0.5,0.5-0.5  h2c0.276,0,0.5,0.224,0.5,0.5V14.501z",gradient:{id:"SVGID_11_",type:"linear",x1:14.5,y1:13.0117,x2:14.5,y2:14.8962,stop:[{offset:"0",color:"#666767"},{offset:"1",color:"#232424"}]}}]});var ke={_hitCanvas:null,getHitCanvas:function(t,e){return null==this._hitCanvas&&(this._hitCanvas=m.createCanvas()),0==arguments.length&&(e=t=2),this._hitCanvas.setAttribute("width",""+t-1),this._hitCanvas.setAttribute("height",""+e-1),this._hitCanvas.setAttribute("width",""+t),this._hitCanvas.setAttribute("height",""+e),this.getCtx(this._hitCanvas).clearRect(0,0,t,e),this._hitCanvas},disposeHitCanvas:function(){this._hitCanvas=null},getCtx:function(t){return t.getContext("2d")},render:function(t,e,i){null!=e&&(t.fillStyle=e,t.fill()),null!=i&&(t.strokeStyle=i,t.stroke())},text:function(t,e,i,n,o,s){t.textAlign="center",t.textBaseline="middle",null!=o&&(t.fillStyle=o,t.fillText(e,i,n)),s&&(t.strokeStyle=s,t.strokeText(e,i,n))},circle:function(t,e,i,n,o,s){t.arc(e,i,n,0,2*Math.PI,!0),t.closePath(),this.render(t,o,s)},rect:function(t,e,i,n,o,s,a){t.rect(e,i,n,o),t.closePath(),this.render(t,s,a)},OUT_LEFT:1,OUT_TOP:2,OUT_RIGHT:4,OUT_BOTTOM:8,outcode:function(t,e,i,n,o,s){var a=0;return o<=0?a|=this.OUT_LEFT|this.OUT_RIGHT:t<i?a|=this.OUT_LEFT:i+o<t&&(a|=this.OUT_RIGHT),s<=0?a|=this.OUT_TOP|this.OUT_BOTTOM:e<n?a|=this.OUT_TOP:n+s<e&&(a|=this.OUT_BOTTOM),a},intersectsLine:function(t,e,i,n,o,s,a,r){var h,l,c;if(0==(l=this.outcode(i,n,o,s,a,r)))return!0;for(;0!=(h=this.outcode(t,e,o,s,a,r));){if(0!=(h&l))return!1;0!=(h&(this.OUT_LEFT|this.OUT_RIGHT))?(c=o,0!=(h&this.OUT_RIGHT)&&(c+=a),e+=(c-t)*(n-e)/(i-t),t=c):(c=s,0!=(h&this.OUT_BOTTOM)&&(c+=r),t+=(c-e)*(i-t)/(n-e),e=c)}return!0}};x.vector={},x.vector.interaction={},x.vector.Network=function(t){x.vector.Network.superClass.constructor.apply(this,arguments),this.zoomManager=new x.vector.PhysicalZoomManager(this),this._view=m.createView("hidden"),this._rootCanvas=m.createCanvas(),this._topCanvas=m.createCanvas(),this._view.appendChild(this._rootCanvas),this._view.appendChild(this._topCanvas),this.realWidth=0,this.realHeight=0,this._unionBounds={x:0,y:0,width:0,height:0},this._zoom=1,this._elementUIMap={},this._zoomMap={},this._viewRectMap={},this.viewRect={x:0,y:0,width:0,height:0},this.state={zooming:!1,panning:!1,autoLayout:!1},this.hScrollBarVisible=!1,this.vScrollBarVisible=!1,this.markerList=new x.List,this._topAttachmentList=new x.List,this._hitTestTopAttachmentList=new x.List,this.setElementBox(t||new x.ElementBox),!g.isTouchable||g.isMSTouchable?this.setDefaultInteractions(!1,!1):this.setTouchInteractions();var i=this;this._flowLink=function(){i.isMovingElement()||i.isSelectingElement()||i.isEditingElement()||i._box._layoutMovingElements||(i._flowLinkQuickFinder||(i._flowLinkQuickFinder=new x.QuickFinder(i._box,"link.flow","style")),i._flowLinkQuickFinder.find(!0).forEach(function(t){t._styleMap["link.flow.offset"]=i.getLinkFlowOffset(t),i.invalidateElementUI(t)}))},this.setToolTipEnabled(x.Defaults.NETWORK_TOOLTIP_ENABLED),this._paintAll=!0,this._dirtyRects=new ie,this._invalidateMap={},this._invalidateAll=!0,i._count=0,i._invalidate=!0,function t(e){i._loopId=requestAnimationFrame(t),i._invalidate&&(i._count++,i._now=e,i.validate())}(0),x.imageUtil.addEventListener(this.invalidateElementUIs,this),m.addEventListener("mousemove","handle_mousemove",this._view,this)},Y.ext("twaver.vector.Network",x.controls.View,{__accessor:["selectMode","makeVisibleOnSelected","movableFunction","editPointSize","editPointFillColor","scrollBarWidth","editPointOutlineWidth","editPointOutlineColor","editLineColor","editLineWidth","resizePointSize","resizePointFillColor","resizePointOutlineWidth","resizePointOutlineColor","resizeLineColor","resizeLineWidth","rotatePointSize","rotatePointFillColor","rotatePointOffset","rotatePointOutlineWidth","rotatePointOutlineColor","rotateScaleFillColor","rotateScaleFontColor","rotateScaleWidth","rotateScaleHeight","selectOutlineColor","selectOutlineWidth","selectFillColor","lazyMoveOutlineColor","lazyMoveOutlineWidth","lazyMoveFillColor","rectSelectFilter","selectionTolerance"],__bool:["doubleClickToUpSubNetwork","doubleClickToSubNetwork","doubleClickToEmptySubNetwork","doubleClickToLinkBundle","doubleClickToGroupExpand","scrollBarVisible","limitViewInCanvas","autoValidateCanvasSize","subNetworkAnimate","lazyMoveAnimate","resizeAnimate","noAgentLinkVisible","keyboardRemoveEnabled","keyboardSelectEnabled","sendToTopOnSelected","lazyMoveFill","editingElement","rotatingElement","movingElement","selectingElement","rectSelectEnabled","limitElementInPositiveLocation","showRotateScale","transparentSelectionEnable","edgeDetect","dragToPan","wheelToZoom","asyncZoomAndViewRect","debug","zoomDivVisible","showShadowInEdit","showAttachOnChg"],_currentSubNetwork:null,_subNetworkAnimate:x.Defaults.NETWORK_SUBNETWORK_ANIMATE,_scrollBarWidth:10,_scrollBarVisible:!0,_limitViewInCanvas:!1,_autoValidateCanvasSize:!0,_makeVisibleOnSelected:x.Defaults.NETWORK_MAKE_VISIBLE_ON_SELECTED,_keyboardRemoveEnabled:x.Defaults.NETWORK_KEYBOARD_REMOVE_ENABLED,_keyboardSelectEnabled:x.Defaults.NETWORK_KEYBOARD_SELECT_ENABLED,_rectSelectEnabled:ye.NETWORK_RECT_SELECT_ENABLED,_rectSelectFilter:null,_elementUIFunction:x.Defaults.VECTORUI_FUNCTION,_doubleClickToUpSubNetwork:x.Defaults.NETWORK_DOUBLECLICK_TO_UPSUBNETWORK,_doubleClickToSubNetwork:x.Defaults.NETWORK_DOUBLECLICK_TO_SUBNETWORK,_doubleClickToEmptySubNetwork:x.Defaults.NETWORK_DOUBLECLICK_TO_EMPTYSUBNETWORK,_doubleClickToLinkBundle:x.Defaults.NETWORK_DOUBLECLICK_TO_LINKBUNDLE,_doubleClickToGroupExpand:x.Defaults.NETWORK_DOUBLECLICK_TO_GROUPEXPAND,_selectOutlineColor:x.Defaults.NETWORK_SELECT_OUTLINE_COLOR,_selectOutlineWidth:x.Defaults.NETWORK_SELECT_OUTLINE_WIDTH,_selectFillColor:x.Defaults.NETWORK_SELECT_FILL_COLOR,_sendToTopOnSelected:x.Defaults.NETWORK_SENDTOTOP_ON_SELECTED,_lazyMoveOutlineColor:x.Defaults.NETWORK_LAZYMOVE_OUTLINE_COLOR,_lazyMoveOutlineWidth:x.Defaults.NETWORK_LAZYMOVE_OUTLINE_WIDTH,_lazyMoveFillColor:x.Defaults.NETWORK_LAZYMOVE_FILL_COLOR,_lazyMoveFill:x.Defaults.NETWORK_LAZYMOVE_FILL,_lazyMoveAnimate:x.Defaults.NETWORK_LAZYMOVE_ANIMATE,_resizePointSize:x.Defaults.NETWORK_RESIZE_POINT_SIZE,_resizePointFillColor:x.Defaults.NETWORK_RESIZE_POINT_FILL_COLOR,_resizePointOutlineColor:x.Defaults.NETWORK_RESIZE_POINT_OUTLINE_COLOR,_resizePointOutlineWidth:x.Defaults.NETWORK_RESIZE_POINT_OUTLINE_WIDTH,_resizeLineColor:x.Defaults.NETWORK_RESIZE_LINE_COLOR,_resizeLineWidth:x.Defaults.NETWORK_RESIZE_LINE_WIDTH,_resizeAnimate:x.Defaults.NETWORK_RESIZE_ANIMATE,_rotatePointSize:x.Defaults.NETWORK_ROTATE_POINT_SIZE,_rotatePointFillColor:x.Defaults.NETWORK_ROTATE_POINT_FILL_COLOR,_rotatePointOffset:x.Defaults.NETWORK_ROTATE_POINT_OFFSET,_rotatePointOutlineWidth:x.Defaults.NETWORK_ROTATE_POINT_OUTLINE_WIDTH,_rotatePointOutlineColor:x.Defaults.NETWORK_ROTATE_POINT_OUTLINE_COLOR,_rotateScaleWidth:ye.NETWORK_ROTATE_SCALE_WIDTH,_rotateScaleHeight:ye.NETWORK_ROTATE_SCALE_HEIGHT,_rotateScaleFillColor:ye.NETWORK_ROTATE_SCALE_FILL_COLOR,_rotateScaleFontColor:ye.NETWORK_ROTATE_SCALE_FONT_COLOR,_editPointSize:x.Defaults.NETWORK_EDIT_POINT_SIZE,_editPointFillColor:x.Defaults.NETWORK_EDIT_POINT_FILL_COLOR,_editPointOutlineColor:x.Defaults.NETWORK_EDIT_POINT_OUTLINE_COLOR,_editPointOutlineWidth:x.Defaults.NETWORK_EDIT_POINT_OUTLINE_WIDTH,_editLineColor:x.Defaults.NETWORK_EDIT_LINE_COLOR,_editLineWidth:x.Defaults.NETWORK_EDIT_LINE_WIDTH,_limitElementInPositiveLocation:!1,_linkFlowInterval:ye.NETWORK_LINK_FLOW_INTERVAL,_selectionTolerance:ye.NETWORK_SELECTION_TOLERANCE,_invalidateViewRectFlag:!1,_repaintTopFlag:!1,_invalidateCanvasSizeFlag:!1,_isEditingElement:!1,_isRotatingElement:!1,_isMovingElement:!1,_isSelectingElement:!1,_hasEditInteraction:!1,_showRotateScale:!0,_transparentSelectionEnable:x.Defaults.NETWORK_TRANSPARENT_SELECTION_ENABLE,_edgeDetect:!1,_dragToPan:!0,_wheelToZoom:!0,_asyncZoomAndViewRect:!1,_debug:!1,_zoomDivVisible:!0,_showShadowInEdit:!1,_showAttachOnChg:!0,adjustBounds:function(t){var e=!1,i=this._view.style;i.left==t.x+"px"&&i.top==t.y+"px"&&i.width==t.width+"px"&&i.height==t.height+"px"&&(e=!0),x.vector.Network.superClass.adjustBounds.apply(this,arguments),1!=e&&(i=t.width,e=t.height,this._rootCanvas.setAttribute("width",i),this._rootCanvas.setAttribute("height",e),this._topCanvas.setAttribute("width",i),this._topCanvas.setAttribute("height",e),this.setViewRect(this.viewRect.x,this.viewRect.y,i,e),void 0===x.gis&&(x.Util.makeHighRes(this._rootCanvas),x.Util.makeHighRes(this._topCanvas)),this.invalidateElementVisibility())},getLabel:function(t){return t.getStyle("network.label")||t.getName()},getLabel2:function(t){return t.getStyle("network.label")||t.getName2()},setZoomManager:function(t){var e=this.zoomManager;e!=t&&(this.zoomManager=t,this.invalidateElementVisibility(),this.invalidateCanvasSize(),this.validateCanvasSize(),this.invalidateElementUIs(),this.firePropertyChange("zoomManager",e,t))},getZoomManager:function(){return this.zoomManager},getRootCanvas:function(){return this._rootCanvas},getTopCanvas:function(){return this._topCanvas},validateImpl:function(){J.twm(this);for(var t,e,i,n=this.getElementBox().getDatas()._as,o=n.length,s={},a=this._visibleFunction,r=1===this._box._layerBox.size()?this._box._layerBox._defaultLayer:null,h=0;h<o;h++)s[(e=n[h])._id]=this.isVisible(e,a,r);var l=this.getGraphicsZoom(),c=null,l={x:this.viewRect.x/l,y:this.viewRect.y/l,width:this.viewRect.width/l,height:this.viewRect.height/l};if(this._invalidateAll){if(this._visibleMap)for(h=0;h<o;h++)s[(e=n[h])._id]!==this._visibleMap[e._id]&&(i=this._elementUIMap[e._id])&&i.invalidate();for(h=0;h<o;h++)e=n[h],(i=this._elementUIMap[e._id])&&i.validate();this._paintAll=!0}else if(this._paintAll){for(t in this._invalidateMap)(i=this._elementUIMap[t])&&i.invalidate();for(t in this._invalidateMap)(i=this._elementUIMap[t])&&i.validate()}else{for(t in this._invalidateMap)(i=this._elementUIMap[t])&&(this._dirtyRects.add(i.getZoomViewRect(!1)),i.invalidate());for(t in this._invalidateMap)(i=this._elementUIMap[t])&&(i.validate(),this._dirtyRects.add(i.getZoomViewRect(!0)))}c=this._paintAll?l:(this._dirtyRects.forEach(function(t){c=null==c?Y.cloneRect(t):b.unionRect(c,t)}),c?(b.grow(c,2,2),b.intersection(c,l)):l),this._visibleMap=s,c&&this.paintRoot(c),this.validateCanvasSize(),1==this._repaintTopFlag&&(this._repaintTopFlag=!1,this.paintTopCanvas())},isLinkFlowEnabled:function(){return!!this._linkFlowEnabled},setLinkFlowEnabled:function(t){t?(this._linkFlowEnabled||(this._linkFlowEnabled=!0,this.firePropertyChange("linkFlowEnabled",!1,!0)),clearInterval(this._linkFlowTimerId),this._linkFlowTimerId=setInterval(this._flowLink,this._linkFlowInterval)):(this._linkFlowEnabled&&(this._linkFlowEnabled=!1,this.firePropertyChange("linkFlowEnabled",!0,!1)),clearInterval(this._linkFlowTimerId),delete this._linkFlowTimerId)},getLinkFlowInterval:function(){return this._linkFlowInterval},setLinkFlowInterval:function(t){var e=this._linkFlowInterval;this._linkFlowInterval=t,this.firePropertyChange("linkFlowInterval",e,t),clearInterval(this._linkFlowTimerId),this.isLinkFlowEnabled()&&(this._linkFlowTimerId=setInterval(this._flowLink,this._linkFlowInterval))},getElementBox:function(){return this._box},setElementBox:function(t){if(!t)throw"ElementBox can not be null";var e;this._box!==t&&((e=this._box)&&(e.removeDataBoxChangeListener(this.handleElementBoxChange,this),e.removeDataPropertyChangeListener(this.handleElementPropertyChange,this),e.removePropertyChangeListener(this.handleElementBoxPropertyChange,this),e.removeIndexChangeListener(this.handleIndexChange,this),e.getLayerBox().removeDataBoxChangeListener(this.handleLayerBoxChange,this),e.getLayerBox().removeDataPropertyChangeListener(this.handleLayerPropertyChange,this),e.getLayerBox().removeHierarchyChangeListener(this.handleLayerHierarchyChange,this),this._selectionModel||e.getSelectionModel().removeSelectionChangeListener(this.handleSelectionChange,this)),this._box=t,this._box.addDataBoxChangeListener(this.handleElementBoxChange,this),this._box.addDataPropertyChangeListener(this.handleElementPropertyChange,this),this._box.addPropertyChangeListener(this.handleElementBoxPropertyChange,this),this._box.addIndexChangeListener(this.handleIndexChange,this),this._box.getLayerBox().addDataBoxChangeListener(this.handleLayerBoxChange,this),this._box.getLayerBox().addDataPropertyChangeListener(this.handleLayerPropertyChange,this),this._box.getLayerBox().addHierarchyChangeListener(this.handleLayerHierarchyChange,this),this._flowLinkQuickFinder&&(this._flowLinkQuickFinder.dispose(),this._flowLinkQuickFinder=new x.QuickFinder(this._box,"link.flow","style")),this._selectionModel?this._selectionModel._setDataBox(t):this._box.getSelectionModel().addSelectionChangeListener(this.handleSelectionChange,this),this._elementUIMap={},this._box.forEach(this.createElementUI,this),this.invalidateElementVisibility(),this.invalidateCanvasSize(),this.firePropertyChange("elementBox",e,this._box))},handleElementBoxChange:function(t){var e=t.data;if("add"===t.kind)this.createElementUI(e),this.invalidateBundleLink(e);else if("remove"===t.kind){var i=this.getElementUI(e);i&&(this._dirtyRects.add(i.getZoomViewRect()),i.dispose(),delete this._elementUIMap[e.getId()]),e===this._currentSubNetwork&&null!=this._currentSubNetwork&&this._setCurrentSubNetwork(null),delete this._invalidateMap[e._id]}else if("clear"===t.kind){for(var n in this._elementUIMap)this._elementUIMap[n]&&this._elementUIMap[n].dispose&&this._elementUIMap[n].dispose();this._elementUIMap={},null!=this._currentSubNetwork&&this._setCurrentSubNetwork(null),this._paintAll=!0}else"layoutEnd"===t.kind?this.state.layouting=!1:"layouting"===t.kind&&(this.state.layouting=!0);this.invalidateElementVisibility(),this.invalidateCanvasSize()},handleElementPropertyChange:function(t){var e=t.source,i=this.getElementUI(e);i&&(this.invalidateElementUI(e),i.handlePropertyChange(t)),this.invalidateBundleLink(e),this.invalidateElementVisibility(),this.invalidateCanvasSize()},handleElementBoxPropertyChange:function(){this.invalidateElementVisibility()},handleIndexChange:function(t){this.invalidateElementVisibility()},handleLayerBoxChange:function(){this.invalidateElementVisibility()},handleLayerPropertyChange:function(t){"editable"===t.property&&this.invalidateSelectedElementUIs(!0),this.invalidateElementVisibility()},handleLayerHierarchyChange:function(){this.invalidateElementVisibility()},handleSelectionChange:function(i){var t=this.getSelectionModel().getLastData();t&&("append"!==i.kind&&"set"!==i.kind||(this.isMakeVisibleOnSelected()&&this.makeVisible(t),this.isSendToTopOnSelected()&&this.sendToTop(t))),i.datas.forEach(function(t){var e=this.getElementUI(t);e&&e.handleSelectionChange(i),this.invalidateElementUI(t)},this),this.invalidateElementVisibility()},sendToTop:function(t){if(this._box.contains(t)){for(var e=t;e._parent&&this.isVisible(e._parent)&&(e=e._parent););e!==t&&this._box.adjustElementIndex(e),this._box.adjustElementIndex(t)}},getScopeRect:function(t){var e=this.getGraphicsZoom();this.zoomManager;if("viewsize"===t)return{x:this._unionBounds.x-this.viewRect.x,y:this._unionBounds.y-this.viewRect.y,width:this._unionBounds.width,height:this._unionBounds.height};if("viewport"===t){if(this.viewRect)return Y.cloneRect(this.viewRect)}else if("rootcanvas"===t)return{x:this.viewRect.x,y:this.viewRect.y,width:(Math.abs(this.viewRect.x-this._unionBounds.x)+this._unionBounds.width)*e,height:(Math.abs(this.viewRect.y-this._unionBounds.y)+this._unionBounds.height)*e};return{x:0,y:0,width:0,height:0}},getViewRect:function(){return this.viewRect?Y.cloneRect(this.viewRect):{x:0,y:0,width:0,height:0}},getCanvasSize:function(){return{width:this.realWidth,height:this.realHeight}},setViewOffSet:function(t,e){var i=this.viewRect.x,n=this.viewRect.y,o=this.viewRect.width,s=this.viewRect.height;this.setViewRect(i+t,n+e,o,s)},setViewRect:function(t,e,i,n){1==this.isLimitViewInCanvas()&&(t<0&&(t=0),i>this.realWidth?t=0:t+i>this.realWidth&&(t=this.realWidth-i),e<0&&(e=0),n>this.realHeight?e=0:e+n>this.realHeight&&(e=this.realHeight-n));var o=this.viewRect;null!=this.viewRect&&t==this.viewRect.x&&e==this.viewRect.y&&i==this.viewRect.width&&n==this.viewRect.height||(this.viewRect={x:t,y:e,width:i,height:n},this.firePropertyChange("viewRect",o,this.viewRect),this.invalidateElementVisibility(),this._paintAll=!0)},isHScrollBarVisible:function(){return this.hScrollBarVisible},setHScrollBarVisible:function(t){this.hScrollBarVisible=t},isVScrollBarVisible:function(){return this.vScrollBarVisible},setVScrollBarVisible:function(t){this.vScrollBarVisible=t},setZoomVisibilityThresholds:function(t){var e=this._visibilityThresholds;this._zoomVisibilityThresholds=t,this.firePropertyChange("zoomVisibilityThresholds",e,t),this.invalidateElementVisibility()},getZoomVisibilityThresholds:function(){return this._zoomVisibilityThresholds||{}},invalidateElementVisibility:function(){this.invalidate()},repaintTopCanvas:function(){this._repaintTopFlag||(this._repaintTopFlag=!0,this.invalidate())},invalidateCanvasSize:function(t){this._invalidateCanvasSizeFlag||(this._invalidateCanvasSizeFlag=!0,this.invalidate())},validateCanvasSize:function(){0!=this._invalidateCanvasSizeFlag&&(this._invalidateCanvasSizeFlag=!1,this._validateCanvasSize())},_validateCanvasSize:function(){if(0==this.isAutoValidateCanvasSize())return this.realWidth=0,this.realHeight=0,void(this._unionBounds={x:0,y:0,width:0,height:0});var t,e=this.getElementBox().getDatas(),i=e.size();if(0<i){for(var n=0;n<i;n++){var o=e.get(n);!this._visibleMap[o._id]||(o=this._elementUIMap[o._id])&&(t=t?b.unionRect(t,o.getZoomViewRect(!0)):Y.cloneRect(o.getZoomViewRect(!0)))}null==t&&(t={x:0,y:0,width:0,height:0});var s=this.getGraphicsZoom();if(this._unionBounds={x:t.x*s,y:t.y*s,width:t.width*s,height:t.height*s},this.realWidth==(t.x+t.width)*s&&this.realHeight==(t.y+t.height)*s)return;this.realWidth=(t.x+t.width)*s,this.realHeight=(t.y+t.height)*s}else this.realWidth=0,this.realHeight=0,this._unionBounds={x:0,y:0,width:0,height:0};this.setViewRect(this.viewRect.x,this.viewRect.y,this.viewRect.width,this.viewRect.height),this.firePropertyChange("canvasSizeChange",null,this.viewRect)},getElementUI:function(t){return null==t?null:this._elementUIMap[t._id]},getUnionBounds:function(){return this._unionBounds},getZoomBodyRect:function(t){t=this.getElementUI(t);return t?t.getZoomBodyRect():null},getShapeNodeZoomPoints:function(t,e){if(t._points){t=this.getElementUI(t);if(t)return t._getZoomPoints()}return null},createElementUI:function(t){var e,i=this._elementUIMap[t.getId()];return i||((i=this._elementUIFunction(this,t))||(e=(e=t.getClassName()).substr(e.indexOf(".")+1)+"UI",(e=x.vector[e])&&(i=new e(this,t))),i&&(this._elementUIMap[t.getId()]=i)),this._invalidateMap&&(this._invalidateMap[t._id]=t),i},getElementUIFunction:function(){return this._elementUIFunction},setElementUIFunction:function(t){if(!t)throw"ElementUIFunction can not be null";var e;this._elementUIFunction!==t&&(e=this._elementUIFunction,this._elementUIFunction=t,this.firePropertyChange("elementUIFunction",e,t),this._box.isEmpty()||(this._elementUIMap={},this._box.forEach(this.createElementUI,this),this.invalidateElementVisibility(),this.invalidateCanvasSize()))},invalidateElementUI:function(t,e){var i;this._invalidateAll||(this._invalidateMap[t._id]=t,this.getElementUI(t),t instanceof Re&&(null!=(i=t.getAgentLinks())&&i.forEach(this.invalidateElementUI,this),(t=t.getParent())instanceof x.Group&&this.invalidateElementUI(t)),this.invalidateElementVisibility())},invalidateElementUIs:function(t){this._invalidateAll=!0,this._invalidateMap={},this._visibleMap={},this.invalidateElementVisibility(),this.invalidateCanvasSize(),this.invalidate()},invalidateSelectedElementUIs:function(e){this.getSelectionModel().getSelection().forEach(function(t){this.invalidateElementUI(t,e)},this)},invalidateBundleLink:function(e){var i;e instanceof x.Link&&e._bundleLinks&&(i=this._elementUIMap,e._bundleLinks.forEachSiblingLink(function(t){t===e||(t=i[t._id])&&t.invalidate(!1)},this))},paintRoot:function(e){var i=this._rootCanvas.getContext("2d");i.save();var t=this.getGraphicsZoom();i.beginPath(),i.rect(Math.round(e.x*t-this.viewRect.x),Math.round(e.y*t-this.viewRect.y),Math.round(e.width*t),Math.round(e.height*t)),i.clip(),i.clearRect(Math.round(e.x*t-this.viewRect.x),Math.round(e.y*t-this.viewRect.y),Math.round(e.width*t),Math.round(e.height*t)),this.visibleList=new x.List,this._topAttachmentList=new x.List,te.draw(i,this);var n=this.getElementBox().getDatas()._as,o=n.length;this.zoomManager._zoomGraphicsBegin(i),this.paintBottom(i,e);var s,a,r,h,l,c,u,d,_,g,f=this._box._layerBox,t=this.getGraphicsZoom(),A={x:this.viewRect.x/t,y:this.viewRect.y/t,width:this.viewRect.width/t,height:this.viewRect.height/t};if(this.adjustLinkIndex(),1===f.size())for(s=0;s<o;s++)a=n[s],this._visibleMap[a._id]?(r=this._elementUIMap[a._id],this._debug&&R.strokeRect(i,e,"red"),null!=r&&this._isInView(r,e)&&(r.paint(i),r.setAttachmentVisible&&r.setAttachmentVisible(!0)),null!=r&&b.intersects(A,r.getZoomViewRect())?r.setAttachmentVisible&&r.setAttachmentVisible(!0):r.setAttachmentVisible&&r.setAttachmentVisible(!1),this.visibleList.add(a)):(r=this._elementUIMap[a._id])&&r.setAttachmentVisible&&r.setAttachmentVisible(!1);else f.forEachByDepthFirst(function(t){for(s=0;s<o;s++)a=n[s],f.getLayerByElement(a)===t&&this._visibleMap[a._id]?(null!=(r=this._elementUIMap[a._id])&&this._isInView(r,e)&&(r.paint(i),r.setAttachmentVisible&&r.setAttachmentVisible(!0)),null!=r&&b.intersects(A,r.getZoomViewRect())?r.setAttachmentVisible&&r.setAttachmentVisible(!0):r.setAttachmentVisible&&r.setAttachmentVisible(!1),r&&r.validateZIndex&&r.validateZIndex(f.getDatas().indexOf(t)),this.visibleList.add(a)):r=this._elementUIMap[a._id]},null,this);for(o=this._topAttachmentList.size(),s=0;s<o;s++)(h=this._topAttachmentList.get(s)).getElementUI().paintAttachment(i,h);this.paintTop(i,e),void 0!==this._xyz&&(l=(_=this._xyz).markText,c=_.type,_.expired,u=_.innerHTML,g=d=0,_=this.viewRect,i.translate(this.viewRect.x/this.getZoom(),this.viewRect.y/this.getZoom()),i.scale(1/this.getZoom(),1/this.getZoom()),t=this.getZoom(),g=null!=l&&""!=l||"2"==c?(i.font="15px Arial sans-serif",o=Y.g.getTextSize(i.font,u),i.fillStyle="red",d=_.width-o.width,_.height-20):(i.font="10px Arial sans-serif",o=Y.g.getTextSize(i.font,u),d=_.width/2-o.width/2,_.height/2),i.fillText(u,d,g)),i.restore(),this._invalidateMap={},this._invalidateAll=!1,this._paintAll=!1,this._dirtyRects=new ie},adjustLinkIndex:function(){var t,e,n,o,s=this._box.getDatas()._as;if(this.hasEditInteraction())for(this._hasAdjustedLinks=!1,i=s.length-1;-1<i;i--)(e=s[i])instanceof x.Link&&(this.isEditable(e)&&this.getElementUI(e).isEditable()&&this.isSelected(e)?(t=this._box.getDatas().indexOf(e),this._box.getDatas().removeAt(t),this._box.getDatas().add(e),this._hasAdjustedLinks=!0):(n=e.getToNode(),t=this._box.getDatas().indexOf(n),this._box.getDatas().removeAt(t),this._box.getDatas().add(n),o=e.getFromNode(),t=this._box.getDatas().indexOf(o),this._box.getDatas().removeAt(t),this._box.getDatas().add(o)));else if(this._hasAdjustedLinks){for(i=s.length-1;-1<i;i--)(e=s[i])instanceof x.Link&&(n=e.getToNode(),t=this._box.getDatas().indexOf(n),this._box.getDatas().removeAt(t),this._box.getDatas().add(n),o=e.getFromNode(),t=this._box.getDatas().indexOf(o),this._box.getDatas().removeAt(t),this._box.getDatas().add(o));this._hasAdjustedLinks=!1}},paintBottom:function(t,e){},paintTop:function(t,e){},_isInView:function(t,e){return b.intersects(e,t.getZoomViewRect())},paintTopCanvas:function(){var t=this._topCanvas.getContext("2d");t.clearRect(0,0,this._topCanvas.width,this._topCanvas.height),this.paintMarker(t)},paintMarker:function(t){for(var e=this.markerList.size(),i=0;i<e;i++)this.markerList.get(i).paint(t)},getLayerByElement:function(t){return this._box.getLayerBox().getLayerByElement(t)},getLogicalPoint2:function(t){return this.zoomManager._getLogicalPoint(t)},getLogicalPoint:function(t){return this.zoomManager._getLogicalPoint(t,!0)},getElementAt:function(t){if(null==this.visibleList)return null;var e;if(t.target?e=this.getLogicalPoint2(t):t.event?t.event.target&&(e=this.getLogicalPoint2(t.event)):e=t,null!=this._hitTestTopAttachmentList)for(var i=this._hitTestTopAttachmentList.size()-1;0<=i;i--){var n=this._hitTestTopAttachmentList.get(i);if(n.hit(e.x,e.y))return n.getElement()}if(null!=this.visibleList)for(var o=this.visibleList.size()-1;0<=o;o--){var s=this.visibleList.get(o),a=this.getElementUI(s);if(a&&a.hit(e.x,e.y))return s}return null},getElementsAt:function(t){var e,i=new x.List;if(null==this.visibleList)return null;if(t.target?e=this.getLogicalPoint2(t):t.event?t.event.target&&(e=this.getLogicalPoint2(t.event)):e=t,null!=this._hitTestTopAttachmentList)for(var n=this._hitTestTopAttachmentList.size()-1;0<=n;n--){var o=this._hitTestTopAttachmentList.get(n);o.hit(e.x,e.y)&&i.add(o.getElement())}if(null!=this.visibleList)for(var s=this.visibleList.size()-1;0<=s;s--){var a=this.visibleList.get(s),r=this.getElementUI(a);r&&r.hit(e.x,e.y)&&i.add(a)}return i},hitTest:function(t){var e=this.getElementAt(t);if(!e)return null;e=this.getElementUI(e);return e?(t=t.target?this.getLogicalPoint2(t):t.event?this.getLogicalPoint2(t.event):t,e.hitTest(t.x,t.y)):null},getElementsAtRect:function(t,e,i,n){var o=new x.List;if(null==this.visibleList)return o;n=void 0===n||n;for(var s=this.visibleList.size()-1;0<=s;s--){var a=this.visibleList.get(s),r=this.getElementUI(a);r&&(!i||i(r._element))&&(n&&this.isSelectable(r._element)||!n)&&(e?r.intersects(t)&&o.add(a):b.contains(t,r.getZoomViewRect(H))&&o.add(a))}return o},getPosition:function(t,e,i,n,o,s){var a,r=e instanceof x.vector.ElementUI?e:this.getElementUI(e);if(r)if("from"===t||"to"===t){if(r.getFromPosition&&(a="from"===t?r.getFromPosition(n,o):r.getToPosition(n,o)))return i?{x:a.x-i.width/2,y:a.y-i.height/2}:a}else a="hotspot"===t?s?r.getZoomHotSpot(this.zoomManager):r.getHotSpot():h.get(t,s?r.getZoomBodyRect():r.getBodyRect(),i);if(a=!a&&e.getRect?h.get(t,e.getRect(),i):a)return{x:a.x+n,y:a.y+o};throw"position '"+t+"' object '"+e+"'"},isValidEvent:function(t){if(!t)return!1;var e;if(t.currentTarget===this._view){if(t=g.isFirefox?(e=t.layerX,t.layerY):(e=t.offsetX,t.offsetY),1==this.isHScrollBarVisible()&&t>=this.viewRect.height-this.getScrollBarWidth())return!1;if(1==this.isVScrollBarVisible()&&e>=this.viewRect.width-this.getScrollBarWidth())return!1}return!0},addMarker:function(t){this.markerList.add(t),this.repaintTopCanvas()},removeMarker:function(t){this.markerList.remove(t),this.repaintTopCanvas()},clearMarker:function(){this.markerList.clear(),this.repaintTopCanvas()},isMovable:function(t){return!!this._box.contains(t)&&(!!t.isMovable()&&(!(this._movableFunction&&!this._movableFunction(t))&&this.getLayerByElement(t).isMovable()))},hasMovableSelectedElements:function(){for(var t=this.getSelectionModel().getSelection(),e=0;e<t.size();e++){var i=t.get(e);if(this.isMovable(i))return!0}return!1},getMovableSelectedElements:function(){return this.getSelectionModel().toSelection(function(t){return this.isMovable(t)},this)},moveSelectedElements:function(t,e,i,n){var o;0===t&&0===e||null!=(o=this.getMovableSelectedElementsRect())&&(this._limitElementInPositiveLocation&&(o.x+t<0&&(t=-o.x),o.y+e<0&&(e=-o.y)),x.Util.moveElements(this.getMovableSelectedElements(),t,e,i,n,this))},getMovableSelectedElementsRect:function(){var t=this.getMovableSelectedElements();if(0===t.size())return null;for(var e=null,i=0,n=t.size();i<n;i++){var o=t.get(i);o instanceof Re&&((o=this.getElementUI(o))&&(e=b.unionRect(e,o.getViewRect())))}return e},isVisibleAttachment:function(t){return!this.state.zooming&&!this.state.panning&&!this.state.layouting},isVisible:function(t,e,i){if(!this._box.contains(t))return!1;if(!t.isVisible())return!1;if((e=3!==arguments.length?this._visibleFunction:e)&&!e(t))return!1;if(!(i||this._box._layerBox.getLayerByElement(t))._visible)return!1;if(st.getSubNetwork(t)!==this._currentSubNetwork)return!1;if(!this.zoomManager.isElementVisible(t))return!1;if(t instanceof x.Link){if(!this._noAgentLinkVisible){if(!t._fromAgent||!t._toAgent)return!1;if(!this.isVisible(t._fromAgent,e,i)||!this.isVisible(t._toAgent,e,i))return!1}if(0<t.getBundleIndex()&&1<t.getBundleCount()&&!t.getStyle("link.bundle.expanded"))return!1}else for(var n=t._parent;n&&!n.ISubNetwork;){if(n instanceof x.Group&&(!n.isExpanded()||!this.isVisible(n,e,i)))return!1;n=n._parent}return!t.IDummy},getVisibleFunction:function(){return this._visibleFunction},setVisibleFunction:function(t){var e=this._visibleFunction;this._visibleFunction=t,this.firePropertyChange("visibleFunction",e,t),this.invalidateElementVisibility()},isEditable:function(t){return!!this._box.contains(t)&&(!(this._editableFunction&&!this._editableFunction(t))&&this.getLayerByElement(t).isEditable())},getEditableFunction:function(){return this._editableFunction},setEditableFunction:function(t){var e=this._editableFunction;this._editableFunction=t,this.firePropertyChange("editableFunction",e,t),this.invalidateSelectedElementUIs(!0)},isRotatable:function(t){return!(this._rotatableFunction&&!this._rotatableFunction(t))},getRotatableFunction:function(){return this._rotatableFunction},setRotatableFunction:function(t){var e=this._rotatableFunction;this._rotatableFunction=t,this.firePropertyChange("rotatableFunction",e,t),this.invalidateSelectedElementUIs(!0)},isLinkable:function(t,e){return null==this._linkableFunction||this._linkableFunction(t,e)},getLinkableFunction:function(){return this._linkableFunction},setLinkableFunction:function(t){var e=this._linkableFunction;this._linkableFunction=t,this.firePropertyChange("linkableFunction",e,t),this.invalidateSelectedElementUIs(!0)},onShareSelectionModelChanged:function(){this.invalidateElementUIs()},getShadowColor:function(t){var e=t.getStyle("shadow.color");return!e&&this.isSelected(t)&&"shadow"===t.getStyle("select.style")?t.getStyle("select.color"):e},getSelectColor:function(t){return t.getStyle("select.color")},getAlarmLabel:function(t){var e=t.getAlarmState().getHighestNewAlarmSeverity();if(e){e=t.getAlarmState().getNewAlarmCount(e)+e.nickName;return t.getAlarmState().hasLessSevereNewAlarms()&&(e+="+"),e}return null},getLinkHandlerLabel:function(t){return t.isBundleAgent()?"+("+t.getBundleCount()+")":null},setInteractions:function(t){var e=this._interactions;e&&e.forEach(function(t){t.tearDown()}),(this._interactions=t)&&t.forEach(function(t){t.setUp()}),this.invalidateSelectedElementUIs(!0),this.firePropertyChange("interactions",e,t)},getInteractions:function(){return this._interactions},setDefaultInteractions:function(t,e){var i=[new x.vector.interaction.DefaultInteraction(this,t)];e&&i.push(new x.vector.interaction.MoveLinkInteraction(this,t)),this.setInteractions(i)},setTouchInteractions:function(){this.setInteractions([new x.vector.interaction.DefaultInteraction(this,!1),new x.vector.interaction.TouchInteraction(this)])},setMSTouchInteractions:function(){this.setInteractions([new x.vector.interaction.MSTouchInteraction(this)])},setEditInteractions:function(t,e){var i=[new x.vector.interaction.EditInteraction(this,t),new x.vector.interaction.DefaultInteraction(this)];e&&i.push(new x.vector.interaction.MoveLinkInteraction(this,t)),this.setInteractions(i)},setCreateElementInteractions:function(t){this.setInteractions([new x.vector.interaction.CreateElementInteraction(this,t),new x.vector.interaction.DefaultInteraction(this)])},setCreateLinkInteractions:function(t){this.setInteractions([new x.vector.interaction.CreateLinkInteraction(this,t),new x.vector.interaction.DefaultInteraction(this)])},setCreateShapeLinkInteractions:function(t){this.setInteractions([new x.vector.interaction.CreateShapeLinkInteraction(this,t),new x.vector.interaction.DefaultInteraction(this)])},setCreateShapeNodeInteractions:function(t){this.setInteractions([new x.vector.interaction.CreateShapeNodeInteraction(this,t),new x.vector.interaction.DefaultInteraction(this)])},setMagnifyInteractions:function(){this.setInteractions([new x.vector.interaction.DefaultInteraction(this),new x.vector.interaction.MagnifyInteraction(this)])},hasEditInteraction:function(){return this._hasEditInteraction},setHasEditInteraction:function(t){var e=this._hasEditInteraction;this._hasEditInteraction=t,this.firePropertyChange("hasEditInteraction",e,t)},addElementByInteraction:function(t){t.getParent()||t.setParent(this._currentSubNetwork),this._box.add(t),this.getSelectionModel().setSelection(t),this.fireInteractionEvent({kind:"createElement",element:t})},getToolTip:function(t){if(t){var e=t.getToolTip();return e?e:t.getName()}return null},isToolTipEnabled:function(){return!!this._toolTipEnabled},setToolTipEnabled:function(t){var n;(this._toolTipEnabled=t)?this._toolTipListener||((n=this)._toolTipListener=function(t){var e;n.isMovingElement()?ut.hideToolTip():(e=n.getElementAt(t),n._preElement!==e&&((n._preElement=e)?(e=n.getToolTip(e),ut.showToolTip({x:t.pageX,y:t.pageY},e,function(t){var e=n._view.getBoundingClientRect(),i=t.getBoundingClientRect();i.width+i.left>e.width+e.left&&(t.style.left=e.width+e.left-i.width+(E.documentElement.scrollLeft||E.body.scrollLeft)+"px"),i.height+i.top>e.height+e.top&&(t.style.top=e.height+e.top-i.height+(E.documentElement.scrollTop||E.body.scrollTop)+"px")})):ut.hideToolTip()))},this._view.addEventListener("mousemove",this._toolTipListener,!1),this.firePropertyChange("toolTipEnabled",!1,!0)):this._toolTipListener&&(ut.hideToolTip(),this._view.removeEventListener("mousemove",this._toolTipListener,!1),delete this._toolTipListener,this.firePropertyChange("toolTipEnabled",!0,!1))},setZoom:function(t,e){var i,n,o,s,a;(t=this.checkZoom(t))!=(i=this.isAsyncZoomAndViewRect()?this._zoomMap[this._currentSubNetwork].zoom:this._zoom)&&(n=this.getViewRect(),e=e||{x:n.width/2,y:n.height/2},o=this.viewRect,n=e.x-(e.x+o.x)*t/i,o=e.y-(e.y+o.y)*t/i,this.isAsyncZoomAndViewRect()?this._zoomMap[this._currentSubNetwork].zoom=t:this._zoom=t,this._paintAll=!0,this.invalidateElementVisibility(),this.invalidateCanvasSize(),this.zoomManager._invalidateZoom(),this.setViewRect(-n,-o,this.viewRect.width,this.viewRect.height),this._asyncZoomAndViewRect?this.firePropertyChange("zoom",i,this._zoomMap[this._currentSubNetwork].zoom):this.firePropertyChange("zoom",i,this._zoom),this.state.zooming=!0,a=this,(s=null)?clearTimeout(s):s=setTimeout(function(){s=null,a.state.zooming=!1,a.invalidateElementUIs(!0)},100))},getZoom:function(){return this.isAsyncZoomAndViewRect()?(this._zoomMap[this._currentSubNetwork]||(this._zoomMap[this._currentSubNetwork]={zoom:1}),this._zoomMap[this._currentSubNetwork].zoom):this._zoom},getSizeZoom:function(t){return this.zoomManager.getSizeZoom(t)},getLocationZoom:function(){return this.zoomManager.getLocationZoom()},getGraphicsZoom:function(){return this.zoomManager.getGraphicsZoom()},zoomOverview:function(t){var e,i,n,o,s,a;this._unionBounds.width<=0||this._unionBounds.width<=0||(e=this.getZoom(),n=(i=this._unionBounds).width/e,o=i.height/e,i=this.viewRect.width/n,n=this.viewRect.height/o,o=Math.min(i,n),this.setZoom(o),i=this.getZoom(),n=this.viewRect.width/2-this._unionBounds.width/2*i/e,o=this.viewRect.height/2-this._unionBounds.height/2*i/e,this.setViewRect(this._unionBounds.x*i/e-n,this._unionBounds.y*i/e-o,this.viewRect.width,this.viewRect.height),1==this.getLocationZoom()||0<(s=null==arguments[1]?5:arguments[1])&&(s--,a=this,setTimeout(function(){a.zoomOverview(t,s)},25)))},zoomReset:function(t){this.setZoom(1,t)},zoomIn:function(t){this.setZoom(1.2*this.getZoom(),t)},zoomOut:function(t){this.setZoom(this.getZoom()/1.2,t)},upSubNetwork:function(t,e){this._currentSubNetwork&&this.setCurrentSubNetwork(st.getSubNetwork(this._currentSubNetwork),t,e)},getCurrentSubNetwork:function(){return this._currentSubNetwork},setCurrentSubNetwork:function(t,e,i){if(x.animate.AnimateManager.endAnimate(),e){if(this._currentSubNetwork!==t){if(t&&!this._box.contains(t))throw t+" is not contained in this network's elementBox";e=new x.animate.AnimateSubNetwork(this,t,i);x.animate.AnimateManager.start(e)}}else this._setCurrentSubNetwork(t),i&&i()},_setCurrentSubNetwork:function(t){if(this._currentSubNetwork!==t){if(t&&!this._box.contains(t))throw t+" is not contained in this network's elementBox";this.isAsyncZoomAndViewRect()&&(e=this._viewRectMap[this._currentSubNetwork],this._viewRectMap[this._currentSubNetwork]=e?this.viewRect:this.viewRect||{x:0,y:0,width:this.viewRect.width,height:this.viewRect.height});var e,i=this._currentSubNetwork;this._currentSubNetwork=t,this.firePropertyChange("currentSubNetwork",i,t),this.isAsyncZoomAndViewRect()&&(this._viewRectMap[this._currentSubNetwork]||(this._viewRectMap[this._currentSubNetwork]={x:0,y:0,width:this.viewRect.width,height:this.viewRect.height}),e=this._viewRectMap[this._currentSubNetwork],this.setViewRect(e.x,e.y,e.width,e.height),this.invalidateElementUIs()),this.invalidateElementVisibility(),this.invalidateCanvasSize(),this._paintAll=!0}},makeVisible:function(t){var e=this.getElementUI(t);if(e){var i=st.getSubNetwork(t);if(i===this._currentSubNetwork){for(var n=t;(n=n.getParent())&&n!==i;)n instanceof x.Group&&n.setExpanded(!0);var o=e.getViewRect();o&&(e=e.getZoomViewRect(this.zoomManager),e=o.x==e.x&&o.y==e.y&&o.width==e.width&&o.height==e.height?{x:o.x*this.getGraphicsZoom(),y:o.y*this.getGraphicsZoom(),width:o.width*this.getGraphicsZoom(),height:o.height*this.getGraphicsZoom()}:e,b.intersects(this.viewRect,e)||this.isVisible(t)&&Y.callLater(this.centerByLogicalPoint,this,[e.x+e.width/2,e.y+e.height/2]))}else{var s=this;this.setCurrentSubNetwork(i,this.isSubNetworkAnimate(),function(){Y.callLater(s.makeVisible,s,[t])})}}},centerByLogicalPoint:function(t,e,i){t-=this.viewRect.width/2,e-=this.viewRect.height/2;this.setViewRect(t,e,this.viewRect.width,this.viewRect.height)},panByOffset:function(t,e){this.setViewOffSet(t,e)},getIconsNames:function(t){return t.getStyle("icons.names")},getIconsColors:function(t){return t.getStyle("icons.colors")},getLinkFlowStepping:function(t){return parseInt(t.getStyle("link.flow.stepping"))||ye.NETWORK_LINK_FLOW_STEPPING},getLinkFlowOffset:function(t){var e=t.getStyle("link.flow.offset");return(e=isNaN(e)?0:e)+this.getLinkFlowStepping(t)},toCanvas:function(t,e,i,n,o,s){(i=i||m.createCanvas()).setAttribute("width",t),i.setAttribute("height",e),i._viewRect?(i._viewRect.width=t,i._viewRect.height=e):i._viewRect={x:0,y:0,width:t,height:e};var a=i.getContext("2d");if(a.translate(-o,-s),a.clearRect(0,0,t,e),te.draw(a,this),0===this._view.clientWidth||0===this._view.clientHeight)return i;this.realWidth,this.getGraphicsZoom(),this.realHeight,this.getGraphicsZoom();a.scale(n,n);var r=this.getElementBox().getDatas()._as,h=r.length;this._topAttachmentList=new x.List;var l,c,u,d,_,g,f=this.getElementBox().getLayerBox(),A=f.getRoots(),p=A.size();if(this.adjustLinkIndex(),1===p)for(u=0;u<h;u++)d=r[u],this._visibleMap[d._id]&&null!=(_=this._elementUIMap[d._id])&&_.paint(a);else for(l=0;l<p;l++)for(c=A.get(l),u=0;u<h;u++)d=r[u],f.getLayerByElement(d)===c&&this._visibleMap[d._id]&&null!=(_=this._elementUIMap[d._id])&&_.paint(a);for(h=this._topAttachmentList.size(),u=0;u<h;u++)(g=this._topAttachmentList.get(u)).getElementUI().paintAttachment(a,g);return i},toCanvasByRegion:function(t,e,i){i=i||m.createCanvas();var n=t.width*e,o=t.height*e;i.setAttribute("width",n),i.setAttribute("height",o),i._viewRect?(i._viewRect.width=n,i._viewRect.height=o):i._viewRect={x:0,y:0,width:n,height:o};var s=i.getContext("2d");if(s.clearRect(0,0,n,o),te.draw(s,this),0===this._view.clientWidth||0===this._view.clientHeight)return i;s.save(),s.scale(e,e),s.beginPath(),s.translate(-t.x,-t.y);var a=this.getElementBox().getDatas()._as,r=a.length;this._topAttachmentList=new x.List;var h,l,c,u,d,_,g=this.getElementBox().getLayerBox(),f=g.getRoots(),A=f.size();if(this.adjustLinkIndex(),1===A)for(c=0;c<r;c++)u=a[c],this._visibleMap[u._id]&&null!=(d=this._elementUIMap[u._id])&&b.intersects(t,d.getZoomViewRect())&&d.paint(s);else for(h=0;h<A;h++)for(l=f.get(h),c=0;c<r;c++)u=a[c],g.getLayerByElement(u)===l&&this._visibleMap[u._id]&&null!=(d=this._elementUIMap[u._id])&&b.intersects(t,d.getZoomViewRect())&&d.paint(s);for(r=this._topAttachmentList.size(),c=0;c<r;c++)(_=this._topAttachmentList.get(c)).getElementUI().paintAttachment(s,_);return s.restore(),i},getGroupChildrenRects:function(t){return this.zoomManager._getGroupChildrenRects(t)},convertPointFromView:function(t){return this.zoomManager._convertPointFromView(t)},getOffset:function(t,e){return this.zoomManager._getOffset(t,e)},panToCenter:function(){this.setViewRect((this.realWidth-this.viewRect.width)/2,(this.realHeight-this.viewRect.height)/2,this.viewRect.width,this.viewRect.height)},moveElementsToCenter:function(){var t,e,i;this._limitViewInCanvas?(t=this.viewRect,i=this._unionBounds,e=t.x+t.width/2-i.x-i.width/2,i=t.y+t.height/2-i.y-i.height/2,x.Util.moveElements(this._box.toDatas(),e,i)):(e=this.viewRect.width/2-this._unionBounds.width/2,i=this.viewRect.height/2-this._unionBounds.height/2,this.setViewRect(this._unionBounds.x-e,this._unionBounds.y-i,this.viewRect.width,this.viewRect.height))},getLinkPathFunction:function(){return this._linkPathFunction},setLinkPathFunction:function(t){var e=this._linkPathFunction;this._linkPathFunction=t,this.firePropertyChange("linkPathFunction",e,t),this.invalidateElementUIs()},invalidate:function(){this._invalidate||(this._invalidate=!0,this.fireViewEvent({kind:"invalidate"}))},validate:function(){this._invalidate&&(!o&&0===this._view.offsetWidth&&0===this._view.offsetHeight||(this._invalidate=!1,this._isValidating=!0,this.fireViewEvent({kind:"validateStart"}),this.validateImpl(),this.fireViewEvent({kind:"validateEnd"}),this._isValidating=!1))},onClickElement:function(t,e){},onClickBackground:function(t){},onDoubleClickElement:function(t,e){},onDoubleClickBackground:function(t){},onLongClickElement:function(t,e){},onLongClickBackground:function(t){},onMouseMove:function(t,e){},onMouseEnter:function(t,e){},onMouseLeave:function(t,e){},setMovingElement:function(t){var e;t!=this._movingElement&&(e=this._movingElement,this._movingElement=t,this.firePropertyChange("movingElement",e,t),this._box._undoManager._enabled&&(t?this._box._undoManager.startBatch():this._box._undoManager.endBatch()))},setEditingElement:function(t){var e;t!=this._editingElement&&(e=this._editingElement,this._editingElement=t,this.firePropertyChange("editingElement",e,t),this._box._undoManager._enabled&&(t?this._box._undoManager.startBatch():this._box._undoManager.endBatch()))},dispose:function(){x.imageUtil.removeEventListener(this.invalidateElementUIs,this),this.setInteractions(null),cancelAnimationFrame(this._loopId)},handle_mousemove:function(t){var e=this.getElementAt(t),i=this.__preElement,n=_t(i),o=_t(e);i!==e&&(i&&(n&&n.onMouseLeave&&n.onMouseLeave(i,this),this.onMouseLeave(i,t)),e&&(o&&o.onMouseEnter&&o.onMouseEnter(e,this),this.onMouseEnter(e,t))),e&&o&&o.onMouseMove&&o.onMouseMove(e,this),this.onMouseMove(e,t),this.__preElement=e}}),x.vector.Overview=function(t){x.vector.Overview.superClass.constructor.apply(this,t),this._view=m.createView(),this._rootDiv=m.createDiv(),this._imageCanvas=m.createCanvas(),this._imageDiv=m.createDiv(),this._maskCanvas=m.createCanvas(),this._selectDiv=m.createDiv(),this._isNetworkDirty=!1,this._isMaskDirty=!1,m.setVisible(this._selectDiv,!1),this._view.appendChild(this._rootDiv),this._rootDiv.appendChild(this._imageDiv),this._rootDiv.appendChild(this._maskCanvas),this._rootDiv.appendChild(this._selectDiv),this._imageDiv.appendChild(this._imageCanvas),this._exportImageCanvas=m.createCanvas(),this._imageCtx=this._imageCanvas.getContext("2d"),this.setNetwork(t),g.isTouchable?g.isMSTouchable?new x.vector.OverviewMSTouchInteraction(this):(new x.vector.OverviewTouchInteraction(this),new x.vector.OverviewInteraction(this)):new x.vector.OverviewInteraction(this)},Y.ext("twaver.vector.Overview",x.controls.ControlBase,{__accessor:["fillColor","outlineColor","outlineWidth","selectColor","selectWidth","padding","maxPackingWidth","maxPackingHeight"],__bool:["animate"],_fillColor:ye.OVERVIEW_FILL_COLOR,_outlineColor:ye.OVERVIEW_OUTLINE_COLOR,_outlineWidth:ye.OVERVIEW_OUTLINE_WIDTH,_selectColor:ye.OVERVIEW_SELECT_COLOR,_selectWidth:ye.OVERVIEW_SELECT_WIDTH,_padding:ye.OVERVIEW_PADDING,_animate:ye.OVERVIEW_ANIMATE,_maxPackingWidth:ye.OVERVIEW_MAX_PACKING_WIDTH,_maxPackingHeight:ye.OVERVIEW_MAX_PACKING_HEIGHT,getNetwork:function(){return this._network},onPropertyChanged:function(t){this._invalidateMask()},setNetwork:function(t){t!==this._network&&(this._network&&(this._network.removePropertyChangeListener(this._handleNetworkPropertyChange,this),this._network.removeViewListener(this._handleNetworkViewChange,this),m.removeEventListener("scroll","_handleScrollChange",this._network.getView(),this)),this._network=t,this._network&&(this._network.addPropertyChangeListener(this._handleNetworkPropertyChange,this),this._network.addViewListener(this._handleNetworkViewChange,this),m.addEventListener("scroll","_handleScrollChange",this._network.getView(),this)),this.invalidate())},_handleNetworkPropertyChange:function(t){"zoom"!==t.property&&"currentSubNetwork"!==t.property&&"elementBox"!==t.property&&"dataBox"!==t.property&&"canvasSizeChange"!==t.property||this.invalidate()},_handleNetworkViewChange:function(t){"validateEnd"===t.kind&&this.invalidate()},_handleScrollChange:function(){this._invalidateMask()},invalidate:function(t){this._isNetworkDirty&&this._isMaskDirty||(this._isNetworkDirty||(this._isNetworkDirty=!0),this._isMaskDirty||(this._isMaskDirty=!0),Y.callLater(this.validate,this,null,t))},_invalidateMask:function(){this._isMaskDirty||(this._isMaskDirty=!0,Y.callLater(this.validate,this,[],100))},validate:function(){var t,e,i,n,o,s,a,r,h,l,c,u,d;(this._isMaskDirty||this._isNetworkDirty)&&this._network&&(0<this._maxPackingWidth&&0<this._maxPackingHeight||0<this._view.clientWidth&&0<this._view.clientHeight)&&0!==this._network.getViewRect().width&&0!==this._network.getViewRect().height&&!this._network._invalidate?(h=(n=0<this._maxPackingWidth&&0<this._maxPackingHeight)?{x:0,y:0,width:this._maxPackingWidth,height:this._maxPackingHeight}:{x:0,y:0,width:this._view.clientWidth,height:this._view.clientHeight},b.grow(h,-this._padding,-this._padding),n&&(m.setDiv(this._view,{x:0,y:0,width:this._imageDiv._viewRect.width,height:this._imageDiv._viewRect.height},null,0,null),h.width=this._imageDiv._viewRect.width,h.height=this._imageDiv._viewRect.height),s=this._network.getGraphicsZoom(),r=this._network._unionBounds,r={x:(r=b.unionRect(r,{x:0,y:0,width:r.x,height:r.y})).x/s,y:r.y/s,width:r.width/s,height:r.height/s},t=this._network.viewRect.x/s,e=this._network.viewRect.y/s,c=this._network.viewRect.width/s,u=this._network.viewRect.height/s,l=r,d=Math.min(h.width/l.width,h.height/l.height),a=h.x+(h.width-(o=i=l.width*d))/2,r=h.y+(h.height-(s=n=l.height*d))/2,this._isNetworkDirty&&(h={x:a,y:r,width:o,height:s},this._network.toCanvas(i,n,this._exportImageCanvas,d,l.x*d,l.y*d),this._imageCanvas.setAttribute("width",o),this._imageCanvas.setAttribute("height",s),this._imageCtx.drawImage(this._exportImageCanvas,0,0,i,n),m.setDiv(this._imageDiv,h,null,0,null),this._network.getElementBox&&(this._imageDiv.style.backgroundColor=(this._network.getCurrentSubNetwork()||this._network.getElementBox()).getStyle("background.color")||""),this._isNetworkDirty=!1),this._isMaskDirty&&(l={x:(t-l.x)*d,y:(e-l.y)*d,width:c*d,height:u*d},(c=m.setCanvas(this._maskCanvas,a,r,o,s)).lineWidth=0,c.fillStyle=this._fillColor,R.drawVector(c,"rectangle",null,a,r,o,s),c.closePath(),c.fill(),c.stroke(),c.clearRect(a+l.x,r+l.y,l.width,l.height),c.lineWidth=this._outlineWidth,c.strokeStyle=this._outlineColor,u=l.width-2*this._outlineWidth,d=l.height-2*this._outlineWidth,u=Math.min(u,o-2-l.x-this._outlineWidth),d=Math.min(d,s-2-l.y-this._outlineWidth),R.drawVector(c,"rectangle",null,a+l.x+this._outlineWidth,r+l.y+this._outlineWidth,u,d),c.closePath(),c.stroke(),this._isMaskDirty=!1)):(this._isNetworkDirty=!1,this._isMaskDirty=!1)},getLogicalPoint:function(t){return m.getLogicalPoint(this._view,t,1,this._rootDiv)},centerNetwork:function(t,e){var i,n,o,s=this._imageDiv._viewRect;b.containsPoint(s,t)&&(i=this._network.getGraphicsZoom(),n=this._network._unionBounds,n={x:(n=b.unionRect(n,{x:0,y:0,width:n.x,height:n.y})).x/i,y:n.y/i,width:n.width/i,height:n.height/i},o={x:this._network.viewRect.x/i,y:this._network.viewRect.y/i,width:this._network.viewRect.width/i,height:this._network.viewRect.height/i},o=b.unionRect(n,o),this._network.centerByLogicalPoint((o.x+(t.x-s.x)/s.width*o.width)*i,(o.y+(t.y-s.y)/s.height*o.height)*i,e),this._invalidateMask())}}),x.vector.OverviewTouchInteraction=function(t){this.overview=t,this.network=t.getNetwork(),this.view=t._view,m.addEventListener("touchstart","handleTouchstart",this.view,this)},Y.ext("twaver.vector.OverviewTouchInteraction",Object,{handleTouchstart:function(t){m.preventDefault(t),this.clear(),this.endPoint=this.overview.getLogicalPoint(t),lt.isMultiTouch(t)&&(this.distance=lt.getDistance(t),this.zoom=this.network.getZoom()),m.addEventListener("touchmove","handleTouchmove",this.view,this),m.addEventListener("touchend","handleTouchend",this.view,this)},handleTouchmove:function(t){this.moved||(this.moved=!0),this.endPoint=this.overview.getLogicalPoint(t),lt.isSingleTouch(t)?this.overview.centerNetwork(this.endPoint,!1):this.distance&&(t=lt.getDistance(t)/this.distance,this.network.setZoom(this.zoom*t,!1))},handleTouchend:function(t){this.moved||(this.endPoint=this.overview.getLogicalPoint(t),(t=this.lastPoint&&this.lastTouchStartTime&&(new Date).getTime()-this.lastTouchStartTime.getTime()<=300&&Math.abs(this.endPoint.x-this.lastPoint.x)<=10&&Math.abs(this.endPoint.y-this.lastPoint.y)<=10)?(this.lastPoint=null,this.lastTouchStartTime=null):(this.lastPoint=this.endPoint,this.lastTouchStartTime=new Date),t?Y.callLater(this.network.zoomReset,this.network,[this.overview._animate]):this.overview.centerNetwork(this.endPoint,this.overview._animate)),this.clear()},clear:function(){this.endPoint&&(this.endPoint=null,m.removeEventListener("touchmove",this.view,this),m.removeEventListener("touchend",this.view,this)),this.moved=!1}}),x.vector.OverviewMSTouchInteraction=function(t){this.overview=t,this.network=t.getNetwork(),this.view=t._view,this._pointerMap={},this._pointerIdArray=[],m.addEventListener("MSPointerDown","handleTouchstart",this.view,this),m.addEventListener("MSPointerMove","handleTouchmove",this.view,this),m.addEventListener("MSPointerUp","handleTouchend",this.view,this),m.addEventListener("MSPointerCancel","handleTouchend",this.view,this)},Y.ext("twaver.vector.OverviewMSTouchInteraction",Object,{handleTouchstart:function(t){m.preventDefault(t),t.isPrimary&&0<this._pointerIdArray.length&&(this._pointerMap={},this._pointerIdArray=[]),!this._pointerMap[t.pointerId]&&this.overview.getLogicalPoint(t)&&(this._pointerIdArray.push(t.pointerId),this._pointerMap[t.pointerId]=t),1==this._pointerIdArray.length?(this._startTouchPoint=this.overview.getLogicalPoint(t),this._startTouchTime=new Date):2==this._pointerIdArray.length&&(this._distance=this._getDistance(),this._zoom=this.network.getZoom())},handleTouchmove:function(t){var e;0==this._pointerIdArray.length||!this._pointerMap[t.pointerId]||b.getDistance({x:this._pointerMap[t.pointerId].pageX,y:this._pointerMap[t.pointerId].pageY},{x:t.pageX,y:t.pageY})<=10||(this._pointerMap[t.pointerId]=t,2==this._pointerIdArray.length?(e=this._getDistance()/this._distance,this.network.setZoom(this._zoom*e,!1)):1==this._pointerIdArray.length&&(!this._startTouchPoint||null!=(t=this.overview.getLogicalPoint(t))&&(this._startTouchPoint=t,this.overview.centerNetwork(this._startTouchPoint,!1))))},handleTouchend:function(t){var e=this.overview.getLogicalPoint(t);1==this._pointerIdArray.length&&e&&((t=this._endTouchPoint&&this._endTouchTime&&(new Date).getTime()-this._endTouchTime.getTime()<=500&&b.getDistance(this._endTouchPoint,e)<=10)?(this._endTouchPoint=null,this._endTouchTime=null):(this._endTouchPoint=e,this._endTouchTime=new Date),t?Y.callLater(this.network.zoomReset,this.network,[this.overview._animate]):this.overview.centerNetwork(this._endTouchPoint,this.overview._animate)),this._pointerMap={},this._pointerIdArray=[]},_getDistance:function(){return b.getDistance({x:this._pointerMap[this._pointerIdArray[0]].pageX,y:this._pointerMap[this._pointerIdArray[0]].pageY},{x:this._pointerMap[this._pointerIdArray[1]].pageX,y:this._pointerMap[this._pointerIdArray[1]].pageY})}}),x.vector.OverviewInteraction=function(t){this.overview=t,this.network=t.getNetwork(),this.view=t._view,m.addEventListener("mousedown","handleMousedown",this.view,this)},Y.ext("twaver.vector.OverviewInteraction",Object,{handleMousedown:function(t){this.clear(),this.endPoint=this.overview.getLogicalPoint(t),Y.isCtrlDown(t)&&(this.startPoint=this.endPoint,m.setVisible(this.overview._selectDiv,!0)),m.addEventListener("mousemove","handleMousemove",this.view,this),m.addEventListener("mouseup","handleMouseup",E,this)},handleMouseup:function(t){var e,i,n,o;this.endPoint=this.overview.getLogicalPoint(t),"detail"in t&&2===t.detail?Y.callLater(this.network.zoomReset,this.network,[this.endPoint,this.overview._animate]):m.isVisible(this.overview._selectDiv)&&this.startPoint?(o=this.overview._imageDiv._viewRect,n=this.overview._selectDiv._viewRect.x,e=this.overview._selectDiv._viewRect.y,i=o.width/this.overview._selectDiv._viewRect.width,t=o.height/this.overview._selectDiv._viewRect.height,t=Math.min(i,t),this.network.setZoom(t*Math.min(this.network.getViewRect().width/this.network.getCanvasSize().width,this.network.getViewRect().height/this.network.getCanvasSize().height)*this.network.getZoom(),!1),n=this.network.getCanvasSize().width*((n-o.x+this.overview._selectDiv._viewRect.width/2)/o.width),o=this.network.getCanvasSize().height*((e-o.y+this.overview._selectDiv._viewRect.height/2)/o.height),Y.callLater(this.network.centerByLogicalPoint,this.network,[n,o,this.overview._animate]),m.setVisible(this.overview._selectDiv,!1),m.setDiv(this.overview._selectDiv,{x:0,y:0,width:0,height:0},null,0,null),this.startPoint=null):this.overview.centerNetwork(this.endPoint,this.overview._animate),this.clear()},handleMousemove:function(t){var e,i,n,o,s=this.overview.getLogicalPoint(t);this.endPoint=s,m.isVisible(this.overview._selectDiv)&&this.startPoint?(e=(s.x>this.startPoint.x?this.startPoint:s).x,i=(s.x>this.startPoint.x?this.startPoint:s).y,s.x>this.startPoint.x&&s.y<this.startPoint.y&&(i=s.y),s.x<this.startPoint.x&&s.y>this.startPoint.y&&(i=this.startPoint.y),(e=e<(n=this.overview._imageDiv._viewRect).x?n.x:e)>n.x+n.width&&(e=n.x+n.width),(i=i<n.y?n.y:i)>n.y+n.height&&(i=n.y+n.height),o=Math.abs(s.x-this.startPoint.x),t=Math.abs(s.y-this.startPoint.y),e+o>n.x+n.width&&(o=n.x+n.width-e),i+t>n.y+n.height&&(t=n.y+n.height-i),m.setDiv(this.overview._selectDiv,{x:e,y:i,width:o,height:t},null,this.overview._selectWidth,this.overview._selectColor)):this.overview.centerNetwork(s,!1)},clear:function(){this.endPoint&&(this.endPoint=null,m.removeEventListener("mousemove",this.view,this),m.removeEventListener("mouseup",this.view,this))}}),x.vector.ElementUI=function(t,e){this._network=t,this._element=e,this._attachments=new x.List,this._bodyBounds=new x.List,this._hitTest=!1,this._hitTest=!1,this._intersectTest=!1,this.invalidate(!0)},Y.ext("twaver.vector.ElementUI",Object,{getElement:function(){return this._element},getNetwork:function(){return this._network},handlePropertyChange:function(t){},handleSelectionChange:function(t){},invalidate:function(t){(t=void 0===t?!0:t)&&(this._invalidateAttachmentsFlag=!0),this._invalidateFlag||(this._hotSpot=null,this._bodyRect=null,this._invalidateFlag=!0,this.invalidateZoom(),this.setAttachmentVisible&&this.setAttachmentVisible(!1))},invalidateZoom:function(){this._zoomBodyRect=null,this._zoomViewRect=null,this._zoomHotSpot=null},updateStyle:function(){this._innerColor=this._network.getInnerColor(this._element),this._outerColor=this._network.getOuterColor(this._element),this._glowBlur=this._element.getStyle("glow.blur"),this._shadowColor=this._network.getShadowColor(this._element),this._shadowXOffset=this._element.getStyle("shadow.xoffset"),this._shadowYOffset=this._element.getStyle("shadow.yoffset"),this._shadowBlur=this._element.getStyle("shadow.blur"),this._wholeAlpha=this._element.getStyle("whole.alpha")},validate:function(){var e,i=this;0!=this._invalidateFlag&&(this._bodyBounds.clear(),this._invalidateAttachmentsFlag&&(this._invalidateAttachmentsFlag=!1,this.checkAttachments()),this._invalidateFlag=!1,this.updateStyle(),this.validateImpl(),this._attachments.forEach(function(t){t.validate()}),this._bodyBounds.forEach(function(t){e=b.unionRect(e,t)}),null==e&&((e=Y.cloneRect(this._element.getLocation())).width=0,e.height=0),this._unionBodyBounds={x:e.x,y:e.y,width:e.width,height:e.height},this._attachments.forEach(function(t){e=t instanceof x.vector.EditAttachment?t.getElementUI()instanceof x.vector.LinkUI?b.unionRect(e,t._viewRect):b.unionRect(e,i._network.zoomManager._reverseElementZoomRect(i,t._viewRect)):!(t.getElementUI()instanceof x.vector.LinkUI||t.getElementUI()instanceof x.vector.GroupUI&&t.getElementUI()._shapeRect&&!(t instanceof x.vector.IconsAttachment))?b.unionRect(e,t._viewRect):b.unionRect(e,i._network.zoomManager._getAttachmentZoomOutLineRect(t,t._viewRect))}),this._viewRect=e)},validateImpl:function(){},setGlow:function(t,e){"glow"===this._element.getStyle("outer.style")&&(e.shadowColor=this._outerColor,e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=this._glowBlur)},clearGlow:function(t){0==t.shadowOffsetX&&0==t.shadowOffsetY&&0==t.shadowBlur||(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0)},setShadow:function(t,e){var i=this._network.zoomManager,t=t.isShadowable()&&this._shadowColor&&!this._editAttachment;return e.shadowOffsetX===this._shadowXOffset&&e.shadowOffsetY===this._shadowYOffset&&e.shadowBlur===this._shadowBlur||(t||this._network._showShadowInEdit)&&(t=i.getGraphicsZoom(),i=i.getSizeZoom(),e.shadowOffsetX=this._shadowXOffset*(t=1<(t*=i)?1:t),e.shadowOffsetY=this._shadowYOffset*t,e.shadowBlur=this._shadowBlur*t,e.shadowColor=this._shadowColor),e},clearShadow:function(t){0==t.shadowOffsetX&&0==t.shadowOffsetY&&0==t.shadowBlur||(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0)},appendShadowBound:function(t,e){var i;return t.isShadowable()&&this._shadowColor&&!this._editAttachment&&(t=(i=this._network.zoomManager).getGraphicsZoom(),1<(t*=i.getSizeZoom())&&(t=1),0<this._shadowXOffset?e.width+=this._shadowXOffset:(e.x+=this._shadowXOffset,e.width+=-this._shadowXOffset),0<this._shadowYOffset?e.height+=this._shadowYOffset:(e.y+=this._shadowYOffset,e.height+=-this._shadowYOffset),i=this._shadowBlur,i=Math.ceil(i/t),b.grow(e,i+1,i+1)),e},appendGlowBound:function(t,e){var i,n;"glow"===this._element.getStyle("outer.style")&&(i=(n=this._network.zoomManager).getGraphicsZoom(),1<(i*=n.getSizeZoom())&&(i=1),n=this._glowBlur,n=Math.ceil(n/i),b.grow(e,n+1,n+1))},isShadowable:function(){return!(!this._shadowColor||!this._network.isSelected(this._element)||"shadow"!==this._element.getStyle("select.style"))},addAttachment:function(t){this._attachments.add(t),this.invalidate(!1)},removeAttachment:function(t){this._attachments.remove(t),this._network._hitTestTopAttachmentList.remove(t),this.invalidate(!1)},getAttachments:function(){return this._attachments},checkAttachments:function(){this.checkLabelAttachment(),this.checkLabel2Attachment(),this.checkAlarmAttachment(),this.checkIconsAttachment(),this.checkEditAttachment()},checkLabelAttachment:function(){var t=this._network.getLabel(this._element);null!=t&&""!==t?this._labelAttachment||(this._labelAttachment=new x.vector.LabelAttachment(this,ye.SHOW_LABEL_IN_ATTACHMENT_DIV),this.addAttachment(this._labelAttachment)):this._labelAttachment&&(this.removeAttachment(this._labelAttachment),this._labelAttachment=null)},checkLabel2Attachment:function(){var t=this._network.getLabel2(this._element);null!=t&&""!==t?this._label2Attachment||(this._label2Attachment=new x.vector.Label2Attachment(this,ye.SHOW_LABEL2_IN_ATTACHMENT_DIV),this.addAttachment(this._label2Attachment)):this._label2Attachment&&(this.removeAttachment(this._label2Attachment),this._label2Attachment=null)},checkAlarmAttachment:function(){var t=this._network.getAlarmLabel(this._element);null!=t&&""!==t?this._alarmAttachment||(this._alarmAttachment=new x.vector.AlarmAttachment(this,ye.SHOW_ALARM_IN_ATTACHMENT_DIV),this.addAttachment(this._alarmAttachment)):this._alarmAttachment&&(this.removeAttachment(this._alarmAttachment),this._alarmAttachment=null)},checkIconsAttachment:function(){var t=this._network.getIconsNames(this._element);t&&0<t.length?this._iconsAttachment||(this._iconsAttachment=new x.vector.IconsAttachment(this,ye.SHOW_ICON_IN_ATTACHMENT_DIV),this.addAttachment(this._iconsAttachment)):this._iconsAttachment&&(this.removeAttachment(this._iconsAttachment),this._iconsAttachment=null)},checkEditAttachment:function(){this._network.hasEditInteraction()&&this._network.isSelected(this._element)&&this._network.isEditable(this._element)&&this.isEditable()?this._editAttachment||(this._editAttachment=new x.vector.EditAttachment(this,ye.SHOW_EDIT_IN_ATTACHMENT_DIV),this.addAttachment(this._editAttachment)):this._editAttachment&&(this.removeAttachment(this._editAttachment),this._editAttachment=null)},getLabelAttachment:function(){return this._labelAttachment},getAlarmAttachment:function(){return this._alarmAttachment},getIconsAttachment:function(){return this._iconsAttachment},getEditAttachment:function(){return this._editAttachment},isEditable:function(){return!0},getInnerColor:function(){return this._innerColor},getOuterColor:function(){return this._outerColor},getShadowColor:function(){return this._shadowColor},getDyeColor:function(t){return this._innerColor||this.getStyle(t)},getStyle:function(t){return this._element.getStyle(t)},getFont:function(t){t=this._element.getStyle(t);return t||x.Defaults.FONT},paint:function(t){t.save(),t.globalAlpha=this._wholeAlpha,t.beginPath(),this.paintBody(t),this.clearShadow(t),this.clearGlow(t),t.closePath(),t.beginPath(),this.paintAttachments(t),t.closePath(),t.restore(),this._network._debug&&R.strokeRect(t,this.getZoomBodyRect(),"orange")},paintBody:function(t){},getZoomBodyRect:function(t){return this._network.zoomManager._getElementZoomRect(this,this.getBodyRect())},getZoomHotSpot:function(){return this._zoomHotSpot||(this._zoomHotSpot=this._network.zoomManager._getZoomHotSpot(this,this._hotSpot)),Y.clone(this._zoomHotSpot)},getZoomPointers:function(t,e){return this._network.zoomManager._getZoomPointers(t,this,e)},_getZoomViewRect:function(t,e,i){var n=this._network.zoomManager;if(e)return Y.cloneRect(n._getAttachmentZoomRect(e,t));var o=n.getLocationZoom(),s=n.getSizeZoom(this),e=this._bodyRect||this.getBodyRect();t=t||{x:e.x,y:e.y,width:0,height:0};n=e.x+e.width/2,e=e.y+e.height/2;return{x:n*o+(t.x-n)*s,y:e*o+(t.y-e)*s,width:t.width*s,height:t.height*s}},getZoomViewRect:function(t){var e,i=this._network.zoomManager,n=i.getLocationZoom();i.getGraphicsZoom();return 1==n?Y.cloneRect(this._viewRect):(this._zoomViewRect&&!t||(t=this._getZoomViewRect(Y.cloneRect(this._unionBodyBounds),!1),e=b.unionRect(e,t),this._attachments.forEach(function(t){e=t instanceof x.vector.EditAttachment?b.unionRect(e,t._viewRect):b.unionRect(e,t.getZoomViewRect())}),this._zoomViewRect=e),Y.cloneRect(this._zoomViewRect))},paintAttachments:function(t){t.beginPath();for(var e=this._attachments.size(),i=0;i<e;i++){var n=this._attachments.get(i);(this._network.isShowAttachOnChg()||this._network.isVisibleAttachment(n))&&(1==this._hitTest&&0==n.isShowOnTop()&&this.paintAttachment(t,n),1==this._intersectTest&&this.paintAttachment(t,n),0==this._hitTest&&0==this._intersectTest&&(n.isShowOnTop()?this._network._topAttachmentList.add(n):this.paintAttachment(t,n)))}},paintAttachment:function(t,e){var i=this._network.zoomManager;i.isAttachmentVisible(this._element)&&(e!=this._labelAttachment&&e!=this._label2Attachment||i.isLabelVisible(this._element))&&(e==this._alarmAttachment&&!i.isAlarmBalloonVisible(this._element)||(t.beginPath(),e.paint(t),this.clearShadow(t)))},getViewRect:function(){return Y.cloneRect(this._viewRect)},getUnionBodyBounds:function(){return Y.cloneRect(this._unionBodyBounds)},addBodyBounds:function(t){t&&this._bodyBounds.add(t)},getBodyRect:function(t){return null==t&&(t=!0),this._bodyRect||(this._bodyRect=this.createBodyRect()),t?Y.cloneRect(this._bodyRect):this._bodyRect},getHotSpot:function(){return this._hotSpot?Y.clone(this._hotSpot):{x:0,y:0}},setHotSpot:function(t){this._hotSpot=t},hit:function(t,e){return!1},intersects:function(t){return!!b.contains(t,this.getZoomViewRect())},hitCanvasRectAtBody:function(e){e.width<1&&(e.width=1),e.height<1&&(e.height=1);var t=ke.getHitCanvas(e.width,e.height),i=ke.getCtx(t);if(i.save(),i.translate(-e.x,-e.y),this._element.getImage){t=Y.getImageAsset(this._element.getImage());if(t&&t.getImage()instanceof Ie)return 1}this.paintBody(i);try{for(var n=i.getImageData(0,0,e.width,e.height),o=n.data,s=0;s<n.width;s++)for(var a=0;a<n.height;a++)if(0!==o[3+4*(a*n.width+s)])return i.restore(),1}catch(t){if(ke.disposeHitCanvas(),b.contains(this.getUnionBodyBounds(),e))return 0}return i.restore(),-1},hitCanvasRectAtAttachments:function(t){var e=ke.getHitCanvas(t.width,t.height),i=ke.getCtx(e);i.save(),i.translate(-t.x,-t.y),this.paintAttachments(i);try{for(var n=i.getImageData(0,0,t.width,t.height),o=n.data,s=0;s<n.width;s++)for(var a=0;a<n.height;a++)if(0!==o[3+4*(a*n.width+s)])return i.restore(),1}catch(t){ke.disposeHitCanvas()}return i.restore(),-1},hitCanvasRect:function(t){this._intersectTest=!0,1==this._hitTest&&(this._intersectTest=!1);var e=b.intersection(t,this.getZoomViewRect()),t=this.hitCanvasRectAtBody(e);return 1==t||1==this.hitCanvasRectAtAttachments(e)?!(this._intersectTest=!1):(this._intersectTest=!1,0==t)},hitCanvasPoint:function(t,e){t={x:t,y:e,width:0,height:0},e=this._network.getSelectionTolerance();if(e&&0<e&&b.grow(t,e,e),!b.intersects(this.getZoomViewRect(),t))return!1;this._hitTest=!0;t=this.hitCanvasRect(t);return this._hitTest=!1,t},hitTest:function(t,e){var i={x:t,y:e,width:0,height:0},n=this._network.getSelectionTolerance();if(n&&0<n&&b.grow(i,n,n),!b.intersects(this.getZoomViewRect(),i))return null;for(var i=b.intersection(i,this.getZoomViewRect()),o=this._attachments.size(),s=0;s<o;s++){var a=this._attachments.get(s);if(a.hit(t,e))return a}i=this.hitCanvasRectAtBody(i);return 1==i||0==i?this:null},dispose:function(){this._attachments.forEach(function(t){t.dispose()}),this._attachments.clear()}}),x.vector.NodeUI=function(t,e){x.vector.NodeUI.superClass.constructor.call(this,t,e)},Y.ext("twaver.vector.NodeUI",x.vector.ElementUI,{invalidate:function(t){this.curInterval&&clearInterval(this.curInterval),x.vector.NodeUI.superClass.invalidate.call(this,t)},createBodyRect:function(){return this._element.getRect()},validateImpl:function(){x.vector.NodeUI.superClass.validateImpl.call(this);var t=this.getStyle("vector.shape"),e=this.getBodyRect();this._hotSpot=b.getHotSpot(e.x,e.y,e.width,e.height,t),this.validateBodyBounds()},validate:function(){0!=this._invalidateFlag&&x.vector.NodeUI.superClass.validate.call(this)},validateBodyBounds:function(){var t=this.getStyle("body.type");"default"===t?this.addBodyBounds(this.getDefaultBodyRect()):"vector"===t?this.addBodyBounds(this.getVectorBody()):"default.vector"===t?(this.addBodyBounds(this.getVectorBody()),this.addBodyBounds(this.getDefaultBodyRect())):"vector.default"===t&&(this.addBodyBounds(this.getDefaultBodyRect()),this.addBodyBounds(this.getVectorBody())),this._outerColor&&"border"===this.getStyle("outer.style")&&this.addBodyBounds(this.getOuterBorderRect()),!this._editAttachment&&"border"===this.getStyle("select.style")&&this._network.isSelected(this._element)&&this.addBodyBounds(this.getSelectBorderRect())},getDefaultBodyRect:function(){var t=this._element,e=this.getBodyRect();if(!t.getImage()||"string"==typeof t.getImage()&&!Y.getImageAsset(t.getImage()))return e;b.addPadding(e,this._element,"image.padding",1);t=Y.cloneRect(e);return this.appendGlowBound(this,t),this.appendShadowBound(this,t),e=t},getVectorBody:function(){return this.getPathRect("vector")},getOuterBorderRect:function(){return this._getBorderRect("outer")},getSelectBorderRect:function(){return this._getBorderRect("select")},_getBorderRect:function(t){var e=this._element,i=e.getStyle(t+".width"),n=e.getStyle("select.physicalZoom")?1:this._network.getGraphicsZoom();if(0<i){var i="select"===t?i/n:i,o=this.getBodyRect();b.addPadding(o,e,t+".padding","select"===t?1/n:1);o=Y.cloneRect(o);return b.grow(o,2*i,2*i),o}return null},getPathRect:function(t,e){var i=this._element,n=this.getBodyRect();this._network.zoomManager.getSizeZoom();e&&b.addPadding(n,i,t+".padding",1);var n=Y.cloneRect(n),o=i.getStyle(t+".outline.width");if(0<o)if(this._getZoomPoints){for(var s,a,r=this._element._points,h=r.size(),l=0,c=0;c<h;c++){d=0==c?(s=r.get(c),a=r.get(h-1),r.get(c+1)):c==h-1?(s=r.get(c),a=r.get(c-1),r.get(0)):(s=r.get(c),a=r.get(c-1),r.get(c+1));var u=b.getCenterPoint(a,d),d=b.getAngle(u,s),u=Math.abs(5*(o+1)*Math.sin(d));l=(l=l<u?u:l)<(u=Math.abs(5*(o+1)*Math.cos(d)))?u:l}b.grow(n,l,l)}else b.grow(n,o/2,o/2);return this.appendGlowBound(this,n),this.appendShadowBound(this,n),n},getZoomPathRect:function(t,e){var i=this._element,n=this.getZoomBodyRect();this._network.zoomManager.getSizeZoom();e&&b.addPadding(n,i,t+".padding",1);var n=Y.cloneRect(n),o=i.getStyle(t+".outline.width");if(0<o)if(this._getZoomPoints){for(var s,a,r=this._getZoomPoints(),h=r.size(),l=0,c=0;c<h;c++){d=0==c?(s=r.get(c),a=r.get(h-1),r.get(c+1)):c==h-1?(s=r.get(c),a=r.get(c-1),r.get(0)):(s=r.get(c),a=r.get(c-1),r.get(c+1));var u=b.getCenterPoint(a,d),d=b.getAngle(u,s),u=Math.abs(5*(o+1)*Math.sin(d));l=(l=l<u?u:l)<(u=Math.abs(5*(o+1)*Math.cos(d)))?u:l}b.grow(n,l,l)}else b.grow(n,o/2,o/2);return this.appendGlowBound(this,n),this.appendShadowBound(this,n),n},paintBody:function(t){this.curInterval&&clearInterval(this.curInterval);var e=this.getStyle("body.type");"default"===e?this.drawDefaultBody(t):"vector"===e?this.drawVectorBody(t):"default.vector"===e?(this.drawVectorBody(t),this.drawDefaultBody(t)):"vector.default"===e&&(this.drawDefaultBody(t),this.drawVectorBody(t)),this._outerColor&&"border"===this.getStyle("outer.style")&&this.drawOuterBorder(t),"border"===this.getStyle("select.style")&&this._network.isSelected(this._element)&&this.drawSelectBorder(t)},drawOuterBorder:function(t){var e,i=this._element,n=i.getStyle("outer.width");0<n&&(e=this.getZoomBodyRect(),b.addPadding(e,i,"outer.padding",1),t.lineWidth=n,t.lineCap=i.getStyle("outer.cap"),t.lineJoin=i.getStyle("outer.join"),t.strokeStyle=this._outerColor,R.drawVector(t,i.getStyle("outer.shape"),null,e),t.stroke())},drawDefaultBody:function(t){var e,i,n,o,s,a,r=this._element;r.getImage()&&("string"!=typeof r.getImage()||(e=Y.getImageAsset(r.getImage())))&&(this._shapeRect&&(!r.getStyle("group.expend.image")||"string"==typeof r.getStyle("group.expend.image")&&!(e=Y.getImageAsset(r.getStyle("group.expend.image"))))||(i=this.getZoomBodyRect(),b.addPadding(i,this._element,"image.padding",1),0!=r.getAngle()&&(t.save(),i=r.getOriginalRect(),i=this._network.zoomManager._getElementZoomRect(this,i),x.Util.rotateCanvas(t,i,r.getAngle())),this.setGlow(this,t),this.setShadow(this,t),e&&e.getImage()instanceof Ie?(n=e.getImage().frames,o=e.getImage().size,a=Le(n,o,s=0),t.drawImage(a,i.x,i.y,i.width,i.height),this.curInterval=setInterval(function(){s=(s+n.length)%n.length,a=Le(n,o,s),t.drawImage(a,i.x,i.y,i.width,i.height),s++},100)):this._shapeRect?xt(t,r.getStyle("group.expend.image"),this.getInnerColor(),i,r,this._network):xt(t,r.getImage(),this.getInnerColor(),i,r,this._network),0!=r.getAngle()&&t.restore()))},drawSelectBorder:function(t){this.clearGlow(t);var e,i,n=this._element,o=n.getStyle("select.width");0<o&&(e=this.getZoomBodyRect(),e=Y.cloneRect(e),i=n.getStyle("select.physicalZoom")?1:this._network.getGraphicsZoom(),b.addPadding(e,n,"select.padding",1/i),b.grow(e,o/2/i,o/2/i),t.lineWidth=o/i,t.lineCap=n.getStyle("select.cap"),t.lineJoin=n.getStyle("select.join"),t.strokeStyle=n.getStyle("select.color"),R.drawVector(t,n.getStyle("select.shape"),null,e),t.stroke())},drawVectorBody:function(t){this.drawPath(t,"vector",!0,this._element.getStyle("vector.outline.pattern"));var e,i,n,o=this.getStyle("vector.deep"),s=this.getStyle("vector.fill.color");0!==o&&s&&"rectangle"===this.getStyle("vector.shape")&&(e=this.getZoomBodyRect(),0!=(i=this._element.getAngle())&&(t.save(),n=this._element.getOriginalRect(),n=this._network.zoomManager._getElementZoomRect(this,n),x.Util.rotateCanvas(t,n,i)),R.draw3DRect(t,s,o,e),0!=i&&t.restore())},drawPath:function(t,e,i,n,o,s,a){var r=this._network.zoomManager,h=this._element,l=null,l="group"==e?this._shapeRect:this.getZoomBodyRect();i&&b.addPadding(l,h,e+".padding",1);i=h.getStyle(e+".outline.width");this.setGlow(this,t),this.setShadow(this,t),0!=h.getAngle()&&(h instanceof Me||(l=h.getOriginalRect(),l=r._getElementZoomRect(this,l)),t.save(),x.Util.rotateCanvas(t,l,h.getAngle()));r=h.getStyle(e+".fill");r&&(u=this._innerColor&&!st.hasDefault(this._element)?this._innerColor:h.getStyle(e+".fill.color"),(c=h.getStyle(e+".gradient"))?R.fill(t,u,c,h.getStyle(e+".gradient.color"),l):t.fillStyle=u);var c=h.getStyle(e+".shape"),u=h.getStyle("group.shape.roundrect.radius");u<0&&(u=10),r&&(t.beginPath(),o?R.drawLinePoints(t,o,null,s,a):"roundrect"===c&&"group"===e?R.drawVector(t,c,null,l,u):R.drawVector(t,c,null,l),t.fill()),0<i&&(t.lineWidth=i,t.lineCap=h.getStyle(e+".cap"),t.lineJoin=h.getStyle(e+".join"),t.strokeStyle=h.getStyle(e+".outline.color"),t.beginPath(),o?R.drawLinePoints(t,o,n,s,a):"roundrect"===c&&"group"===e?R.drawVector(t,c,n,l,u):R.drawVector(t,c,n,l),t.stroke()),0!=h.getAngle()&&t.restore()},hit:function(t,e){var i={x:t,y:e,width:0,height:0},n=this._network.getSelectionTolerance();if(n&&0<n&&b.grow(i,n,n),this._network._transparentSelectionEnable){n=this.getBodyRect();if(Y.math.intersects(n,i))return!0}return!!b.intersects(this.getZoomViewRect(),i)&&this.hitCanvasPoint(t,e)},intersects:function(t){if(1==x.vector.NodeUI.superClass.intersects.apply(this,arguments))return!0;if(this._network._transparentSelectionEnable){var e=this.getBodyRect();if(Y.math.intersects(e,t))return!0}return!!b.intersects(t,this.getZoomViewRect())&&this.hitCanvasRect(t)}}),x.vector.LinkUI=function(t,e){x.vector.LinkUI.superClass.constructor.call(this,t,e)},Y.ext("twaver.vector.LinkUI",x.vector.ElementUI,{isEditable:function(){return!0},invalidate:function(t){this._linkPoints=null,this._fromPoint=null,this._toPoint=null,this._angle=null,x.vector.LinkUI.superClass.invalidate.call(this,t)},invalidateZoom:function(){this._fromPoint=null,this._toPoint=null,this._linkPoints=null,x.vector.LinkUI.superClass.invalidateZoom.call(this)},validateImpl:function(){this.validateBodyBounds(),x.vector.LinkUI.superClass.validateImpl.call(this)},validateBodyBounds:function(){var t,e,i,n=this.getLinkPoints();!n||n.size()<2||(t=this._element,e=b.getLineRect(n),i=t.getStyle("link.width"),this._outerColor&&(i+=2*t.getStyle("outer.width")),!this._editAttachment&&"border"===t.getStyle("select.style")&&this._network.isSelected(this._element)&&(i+=2*t.getStyle("select.width")),b.grow(e,i/2,i/2),t.getStyle("arrow.from")&&(e=this._network._edgeDetect?(this._network._debug&&(this._arrowFromRect=ne.getArrowRect(this,n,!0,t.getStyle("arrow.from.shape"),t.getStyle("arrow.from.width"),t.getStyle("arrow.from.height"),0,0,this._network.zoomManager)),b.unionRect(e,ne.getArrowRect(this,n,!0,t.getStyle("arrow.from.shape"),t.getStyle("arrow.from.width"),t.getStyle("arrow.from.height"),0,0,this._network.zoomManager))):(this._network._debug&&(this._arrowFromRect=ne.getArrowRect(this,n,!0,t.getStyle("arrow.from.shape"),t.getStyle("arrow.from.width"),t.getStyle("arrow.from.height"),t.getStyle("arrow.from.xoffset"),t.getStyle("arrow.from.yoffset"),this._network.zoomManager)),b.unionRect(e,ne.getArrowRect(this,n,!0,t.getStyle("arrow.from.shape"),t.getStyle("arrow.from.width"),t.getStyle("arrow.from.height"),t.getStyle("arrow.from.xoffset"),t.getStyle("arrow.from.yoffset"),this._network.zoomManager)))),t.getStyle("arrow.to")&&(e=this._network._edgeDetect?(this._network._debug&&(this._arrowToRect=ne.getArrowRect(this,n,!1,t.getStyle("arrow.to.shape"),t.getStyle("arrow.to.width"),t.getStyle("arrow.to.height"),0,0,this._network.zoomManager)),b.unionRect(e,ne.getArrowRect(this,n,!1,t.getStyle("arrow.to.shape"),t.getStyle("arrow.to.width"),t.getStyle("arrow.to.height"),0,0,this._network.zoomManager))):(this._network._debug&&(this._arrowToRect=ne.getArrowRect(this,n,!1,t.getStyle("arrow.to.shape"),t.getStyle("arrow.to.width"),t.getStyle("arrow.to.height"),t.getStyle("arrow.to.xoffset"),t.getStyle("arrow.to.yoffset"),this._network.zoomManager)),b.unionRect(e,ne.getArrowRect(this,n,!1,t.getStyle("arrow.to.shape"),t.getStyle("arrow.to.width"),t.getStyle("arrow.to.height"),t.getStyle("arrow.to.xoffset"),t.getStyle("arrow.to.yoffset"),this._network.zoomManager)))),this.appendShadowBound(this,e),this.addBodyBounds(e),this._growLinkJoinBounds(e,i))},_growLinkJoinBounds:function(t,e){},createBodyRect:function(){var t=this.getHotSpot();return t?{x:t.x-1,y:t.y-1,width:2,height:2}:null},paintBody:function(t){var e,i,n,o,s,a,r,h=this.getLinkPoints();!h||h.size()<2||(o=n=(i=(e=this._element).isBundleAgent()&&e.getStyle("link.agent"))?e.getStyle("link.agent.width"):e.getStyle("link.width"),this._outerColor&&"border"===this.getStyle("outer.style")&&(o+=2*(s=e.getStyle("outer.width"))),(a=!this._editAttachment&&"border"===e.getStyle("select.style")&&this._network.isSelected(this._element))&&(o+=2*e.getStyle("select.width")),this.setGlow(this,t),this.setShadow(this,t),t.lineCap=i?e.getStyle("link.agent.cap"):e.getStyle("link.cap"),t.lineJoin=i?e.getStyle("link.agent.join"):e.getStyle("link.join"),r=i?e.getStyle("link.agent.pattern"):e.getStyle("link.pattern"),a&&this.drawLinePoints(t,h,o,e.getStyle("select.color"),r),this._outerColor&&"border"===this.getStyle("outer.style")&&this.drawLinePoints(t,h,n+2*s,this._outerColor,r),this.drawLinePoints(t,h,n,this._innerColor||(i?e.getStyle("link.agent.color"):e.getStyle("link.color")),r),ne.drawLinkArrow(this,t,h,this._network.zoomManager),this._network._debug&&(R.strokeRect(t,this._arrowToRect,x.Util.randomColor()),R.strokeRect(t,this._arrowFromRect,x.Util.randomColor())))},drawLinePoints:function(t,e,i,n,o){t.lineWidth=i,t.strokeStyle=n;var s,a=this._element.isBundleAgent()&&this._element.getStyle("link.agent");!0===this._element.getStyle(a?"link.agent.flow":"link.flow")&&o&&1<o.length?(s=new ot(t,o[0],o[1]),i=this._element.getStyle(a?"link.agent.flow.offset":"link.flow.offset"),2<(n=Math.floor(i/(o[0]+o[1])))&&(i-=(o[0]+o[1])*n),this._element.getStyle(a?"link.agent.flow.converse":"link.flow.converse")?i<o[0]?s.overflow=o[0]-i:i>=o[0]&&i<=o[0]+o[1]?(s.overflow=o[1]-(i-o[0]),s.overflow&&(s.isLine=!1)):(i-=o[0]+o[1],s.overflow=o[0]-i):i<=o[1]?(s.overflow=i)&&(s.isLine=!1):i>o[1]&&i<=o[0]+o[1]?s.overflow=i-o[1]:((i-=o[0]+o[1])&&(s.isLine=!1),s.overflow=i),this._element._styleMap[a?"link.agent.flow.offset":"link.flow.offset"]=i,t.beginPath(),R._drawLine(e,t),t.stroke(),t.shadowColor="transparent",t.beginPath(),a=(a=this._element.getStyle(a?"link.agent.flow.color":"link.flow.color"))||ye.NETWORK_LINK_FLOW_COLOR,t.strokeStyle=a,R._drawLine(e,s),t.stroke(),t.shadowColor=this._shadowColor):(t.beginPath(),R.drawLinePoints(t,e,o),t.stroke())},getLinkPoints:function(){return this._linkPoints||(this._linkPoints=this.createLinkPoints(),this._lineLength=b.calculateLineLength(this._linkPoints)),this._linkPoints},getFromPosition:function(t,e){var i=this.getFromPoint();return i?{x:i.x+t,y:i.y+e}:null},getToPosition:function(t,e){var i=this.getToPoint();return i?{x:i.x+t,y:i.y+e}:null},getFromPoint:function(){return this._fromPoint||(this._fromPoint=rt.createFromPoint(this,this._network.zoomManager)),this._fromPoint},getToPoint:function(){return this._toPoint||(this._toPoint=rt.createToPoint(this,this._network.zoomManager)),this._toPoint},getZoomBodyRect:function(){return this.getBodyRect()},getZoomViewRect:function(){return this._viewRect},createLinkPoints:function(){var t=this._network.zoomManager,e=this.getStyle("link.type"),i=new x.List;if(rt.isOrthogonalOrFlexionalLink(this._element))i=rt.orthogonalAndFlexional(this,e,t);else if(this._element.isLooped()){var n=this._network.getElementUI(this._element.getFromAgent());null!=n&&(this._hotSpot=rt.fillLoopedPoints(this,n.getZoomBodyRect(),i))}else{if("arc"!==e&&"triangle"!==e&&"parallel"!==e)throw"Can not resolve link type '"+e+"'";var o=this.getFromPoint(),n=this.getToPoint();this._hotSpot=rt.fillBundlePoints(this,e,o,n,i,t)}return!this._network._linkPathFunction||(t=this._network._linkPathFunction(this,i))&&(i=t),i},checkAttachments:function(){x.vector.LinkUI.superClass.checkAttachments.call(this),this.checkLinkHandlerAttachment()},checkLinkHandlerAttachment:function(){var t=this._network.getLinkHandlerLabel(this._element);null!=t&&""!==t?this._linkHandlerAttachment||(this._linkHandlerAttachment=new x.vector.LinkHandlerAttachment(this),this.addAttachment(this._linkHandlerAttachment)):this._linkHandlerAttachment&&(this.removeAttachment(this._linkHandlerAttachment),this._linkHandlerAttachment=null)},getLinkHandlerAttachment:function(){return this._linkHandlerAttachment},getControlPoint:function(){return rt.getControlPoint(this._element,this,this._network.zoomManager)},setControlPoint:function(t){var e,i,n;t&&(e=this.getStyle("link.type"),rt.hasControlPoint(e)&&(i=rt.getLinkSourceBounds(this,this._network.zoomManager),n=rt.getLinkTargetBounds(this,this._network.zoomManager),rt.setParamsByControlPoint(t,i,n,e,this._element)))},getLineLength:function(){return this._lineLength},hit:function(t,e){var i={x:t,y:e,width:0,height:0},n=this._network.getSelectionTolerance();return n&&0<n&&b.grow(i,n,n),!!b.intersects(this._viewRect,i)&&this.hitCanvasPoint(t,e)},intersects:function(t){if(1==x.vector.NodeUI.superClass.intersects.apply(this,arguments))return!0;if(0==b.intersects(t,this._viewRect))return!1;var e=this.getLinkPoints(),i=e.size();if(2==i)for(var n=0;n<i;n+=2){var o=e.get(n);if(n+1<i){var s=e.get(n+1);if(ke.intersectsLine(o.x,o.y,s.x,s.y,t.x,t.y,t.width,t.height))return!0}}return this.hitCanvasRect(t)},getAngle:function(){return!this._angle&&this._fromPoint&&this._toPoint&&(this._angle=b.getAngle(this._fromPoint,this._toPoint)),this._angle||0},getAbsoluteAngle:function(){var t=10,e=0,i=this._fromPoint,n=this._toPoint,o=n.x-i.x,s=n.y-i.y,s=180*Math.acos((o*t+s*e)/(Math.sqrt(t*t+e*e)*Math.sqrt(o*o+s*s)))/Math.PI;return s=(s=!(i.y<=n.y)?360-s:s)%360*Math.PI/180},appendShadowBound:function(t,e){return t.isShadowable()&&this._shadowColor&&!this._editAttachment&&(0<this._shadowXOffset?e.width+=this._shadowXOffset:(e.x+=this._shadowXOffset,e.width+=-this._shadowXOffset),0<this._shadowYOffset?e.height+=this._shadowYOffset:(e.y+=this._shadowYOffset,e.height+=-this._shadowYOffset),t=this._shadowBlur,b.grow(e,t+1,t+1)),e}}),x.vector.GroupUI=function(t,e){x.vector.GroupUI.superClass.constructor.call(this,t,e)},Y.ext("twaver.vector.GroupUI",x.vector.NodeUI,{isEditable:function(){return!this._element.isExpanded()},paintBody:function(t){this._shapeRect?this._element.getStyle("group.expend.image")?(x.vector.GroupUI.superClass.paintBody.apply(this,arguments),this._element.getStyle("group.expend.image.vector")&&this.drawExpandedGroup(t)):this.drawExpandedGroup(t):x.vector.GroupUI.superClass.paintBody.apply(this,arguments)},validateBodyBounds:function(){var t,e;this.getBodyRect(),this._shapeRect?(t=this.getPathRect("group",!1),e=this.getStyle("group.deep"),b.grow(t,e+1,e+1),this.addBodyBounds(t)):x.vector.GroupUI.superClass.validateBodyBounds.call(this)},getZoomBodyRect:function(){return this._element.isExpanded()?this.getBodyRect():x.vector.GroupUI.superClass.getZoomBodyRect.call(this)},getZoomViewRect:function(){return this._element.isExpanded()?this.getViewRect():x.vector.GroupUI.superClass.getZoomViewRect.call(this)},drawExpandedGroup:function(t){this.drawPath(t,"group",!1,this._element.getStyle("vector.outline.pattern"));var e=this.getStyle("group.deep"),i=this.getStyle("group.fill.color");0!==e&&i&&"rectangle"===this.getStyle("group.shape")&&R.draw3DRect(t,i,e,this._shapeRect)},getChildrenRects:function(){return this._network.getGroupChildrenRects(this._element)},createBodyRect:function(){this._shapeRect=null;var t=this._element,e=this._network;if(t.isExpanded()){t.getChildren().forEach(function(t){t=e.getElementUI(t);t&&t.validate()});var i=this.getChildrenRects();if(!i.isEmpty()){var n=t.getStyle("group.shape"),o=r[n];if(!o)throw"Can not resolve group shape '"+n+"'";this._shapeRect=o(i)}}return this._shapeRect?(b.addPadding(this._shapeRect,t,"group.padding",1),this._shapeRect):x.vector.GroupUI.superClass.createBodyRect.call(this)},appendShadowBound:function(t,e){return t.isShadowable()&&this._shadowColor&&!this._editAttachment&&(0<this._shadowXOffset?e.width+=this._shadowXOffset:(e.x+=this._shadowXOffset,e.width+=-this._shadowXOffset),0<this._shadowYOffset?e.height+=this._shadowYOffset:(e.y+=this._shadowYOffset,e.height+=-this._shadowYOffset),t=this._shadowBlur,b.grow(e,t+1,t+1)),e}}),x.vector.ShapeNodeUI=function(t,e){x.vector.ShapeNodeUI.superClass.constructor.call(this,t,e)},Y.ext("twaver.vector.ShapeNodeUI",x.vector.NodeUI,{getDefaultBodyRect:function(){return this._element._points.size()<2?null:this._reverseZoomPathRect()},drawDefaultBody:function(t){this._element._points.size()<2||(this.drawPath(t,"vector",!0,this._element.getStyle("vector.outline.pattern"),this._getZoomPoints(),this._element._segments,this._element.getStyle("shapenode.closed")),ne.drawLinkArrow(this,t,b.getPointObject(this._element._points,this._element._segments)))},invalidateZoom:function(){this._zoomPoints=null,x.vector.LinkUI.superClass.invalidateZoom.call(this)},_getZoomPoints:function(){return this._zoomPoints=this._network.zoomManager._getShapeNodeZoomPoints(this,this._element._points),this._zoomPoints},_reverseZoomPathRect:function(){return this._network.zoomManager._reverseElementZoomRect(this,this.getZoomPathRect("vector",!0))}}),x.vector.ShapeLinkUI=function(t,e){x.vector.ShapeLinkUI.superClass.constructor.call(this,t,e)},Y.ext("twaver.vector.ShapeLinkUI",x.vector.LinkUI,{isEditable:function(){return!0},createLinkPoints:function(){var t,e,i,n,o,s=this.getFromPoint(),a=this.getToPoint(),r=new x.List,h=this.getStyle("shapelink.type");if(r.add(s),null!=this._element._points&&0<this._element._points.size()&&r.addAll(this._network.zoomManager._getShapeLinkZoomPoints(this._element._points)),r.add(a),"lineto"!==h)if("quadto"===h){for(t=new x.List(r.get(0)),e=1,pointCount=r.size();e<pointCount;e++)e<pointCount-1?t.add(new x.List([r.get(e++),r.get(e)])):t.add(r.get(e));r=t}else if("cubicto"===h){for(t=new x.List(r.get(0)),e=1,pointCount=r.size();e<pointCount;e++)e<pointCount-2?t.add(new x.List([r.get(e++),r.get(e++),r.get(e)])):e<pointCount-1?t.add(new x.List([r.get(e++),r.get(e)])):t.add(r.get(e));r=t}else{if("orthogonalto"!==h)throw"Can not resolve shapelink type '"+h+"'";for(i=r.get(0),t=new x.List(i),e=1,pointCount=r.size();e<pointCount;e++)e<pointCount-1?(n=(l=Y.clone(r.get(e))).x,o=l.y,u=n-i.x,d=o-i.y,Math.abs(u)>Math.abs(d)?(l.x=n,l.y=i.y):(l.x=i.x,l.y=o),i=l,t.add(i)):t.add(r.get(e));r=t}for(var l,c,u,d,_,g,f,A,p=b.calculateLineLength(r)/2,m=r.size(),v=0,y=0,w=0;w<m;w++)l=r.get(w),0!=w?(A=(f=(f=l)instanceof ie?f._as:f)instanceof Array?(c=b.calculateCurveLength(A,f,1),f[f.length-1]):(d=l.y-A.y,u=l.x-A.x,c=Math.sqrt(u*u+d*d),f),y+=c,v<=p&&p<=y&&(g=p-v,(_=r.get(w-1))instanceof ie&&(_=_._as)instanceof Array&&(_=_[_.length-1]),f=r.get(w),g=b.getPathInfo(f,_,g,0,-1).point,this._hotSpot=Y.clone(g)),v=y):A=l;return r},_growLinkJoinBounds:function(t,e){b.grow(t,3*e,3*e)}}),x.vector.GridUI=function(t,e){x.vector.GridUI.superClass.constructor.call(this,t,e)},Y.ext("twaver.vector.GridUI",x.vector.NodeUI,{drawDefaultBody:function(t){this._element.getImage()?x.vector.GridUI.superClass.drawDefaultBody.apply(this,arguments):this.drawGridBody(t)},validateBodyBounds:function(){var t,e;this._element.getImage()?x.vector.GridUI.superClass.validateBodyBounds.call(this):(e=this.getBodyRect(),t=Y.clone(e),e=this._element.getStyle("outer.width"),b.grow(t,e,e),this.appendShadowBound(this,t),this.addBodyBounds(t))},_getZoomCellRect:function(t,e){var i=this._element.getCellRect(t,e),n=this._element.getRect(),o=n.x+n.width/2,t=n.y+n.height/2,e=this.getZoomBodyRect(),n=e.width/n.width,e=e.x+e.width/2,e=0==o?1:e/o;return{x:o*e+(i.x-o)*n,y:t*e+(i.y-t)*n,width:i.width*n,height:i.height*n}},drawGridBody:function(t){var e=this.getStyle("grid.fill"),i=this.getStyle("grid.deep"),n=this.getStyle("grid.cell.deep");if(e||0!==i||0!==n){t.beginPath();var o=this.getZoomBodyRect(),s=this.getDyeColor("grid.fill.color");if(this.setGlow(this,t),this.setShadow(this,t),e&&(t.fillStyle=s,t.rect(o.x,o.y,o.width,o.height),t.fill()),t.closePath(),this.clearShadow(t),t.beginPath(),0!=i&&R.draw3DRect(t,s,i,o.x,o.y,o.width,o.height),t.closePath(),0!=n)for(var a=this.getStyle("grid.row.count"),r=this.getStyle("grid.column.count"),h=0;h<a;h++)for(var l=0;l<r;l++){var c=this._getZoomCellRect(h,l);null!=c&&(t.beginPath(),R.draw3DRect(t,s,n,c.x,c.y,c.width,c.height),t.closePath())}}}}),x.vector.RotatableNodeUI=function(t,e){x.vector.RotatableNodeUI.superClass.constructor.call(this,t,e)},Y.ext("twaver.vector.RotatableNodeUI",x.vector.NodeUI,{isEditable:function(){return!1},getDefaultBodyRect:function(){var t=this._element,e=Y.getImageAsset(t.getImage()),t=this.getBodyRect();return e&&b.addPadding(t,this._element,"image.padding",1),t},drawDefaultBody:function(t){var e=this._element,i=Y.getImageAsset(e.getImage());if(i){var n=this.getBodyRect();if(b.addPadding(n,this._element,"image.padding",1),i.getImage()){var o=this._element._getOrignalWidth(),s=this._element._getOrignalHeight(),a=this._element._getRotateRect();t.save(),t.translate(n.x-a.x+o/2,n.y-a.y+s/2),t.rotate(this._element._angle*Math.PI/180),t.drawImage(i.getImage(this._innerColor),-o/2,-s/2,o,s),t.restore()}else if(!i.getSrc()&&!i.getFunction())throw"ImageAsset '"+e.getImage()+" ' is empty"}}}),x.vector.HTMLNodeUI=function(t,e){x.vector.HTMLNodeUI.superClass.constructor.call(this,t,e)},Y.ext("twaver.vector.HTMLNodeUI",x.vector.NodeUI,{checkAttachments:function(){x.vector.NodeUI.prototype.checkAttachments.call(this)},checkLabelAttachment:function(){var t=this._element.getStyle("attachment.label.style");t&&"none"===t?x.vector.HTMLNodeUI.superClass.checkLabelAttachment.call(this):null!=(t=this._network.getLabel(this._element))&&""!==t?this._labelAttachment||(this._labelAttachment=new x.vector.HTMLLabelAttachment(this,ye.SHOW_LABEL_IN_ATTACHMENT_DIV),this.addAttachment(this._labelAttachment)):this._labelAttachment&&(this.removeAttachment(this._labelAttachment),this._labelAttachment=null)},checkLabel2Attachment:function(){var t=this._element.getStyle("attachment.label2.style");t&&"none"===t?x.vector.HTMLNodeUI.superClass.checkLabel2Attachment.call(this):null!=(t=this._network.getLabel2(this._element))&&""!==t?this._label2Attachment||(this._label2Attachment=new x.vector.HTMLLabel2Attachment(this,ye.SHOW_LABEL_IN_ATTACHMENT_DIV),this.addAttachment(this._label2Attachment)):this._label2Attachment&&(this.removeAttachment(this._label2Attachment),this._label2Attachment=null)},checkAlarmAttachment:function(){var t=this._element.getStyle("attachment.alarm.style");t&&"none"===t?x.vector.HTMLNodeUI.superClass.checkAlarmAttachment.call(this):null!=(t=this._network.getAlarmLabel(this._element))&&""!==t?this._alarmAttachment||(this._alarmAttachment=new x.vector.HTMLAlarmAttachment(this,!1),this.addAttachment(this._alarmAttachment)):this._alarmAttachment&&(this.removeAttachment(this._alarmAttachment),this._alarmAttachment=null)},setAttachmentVisible:function(t){t?(this._labelAttachment&&this._labelAttachment.setVisibility("visible"),this._label2Attachment&&this._label2Attachment.setVisibility("visible"),this._alarmAttachment&&this._alarmAttachment.setVisibility("visible")):(this._labelAttachment&&this._labelAttachment.setVisibility("hidden"),this._label2Attachment&&this._label2Attachment.setVisibility("hidden"),this._alarmAttachment&&this._alarmAttachment.setVisibility("hidden"))},validateZIndex:function(t){this._labelAttachment&&this._labelAttachment.validateZIndex(t)}}),x.vector.HTMLLinkUI=function(t,e){x.vector.HTMLLinkUI.superClass.constructor.call(this,t,e)},Y.ext("twaver.vector.HTMLLinkUI",x.vector.LinkUI,{checkAttachments:function(){x.vector.LinkUI.prototype.checkAttachments.call(this)},checkLabelAttachment:function(){var t=this._element.getStyle("attachment.label.style");t&&"none"===t?x.vector.HTMLLinkUI.superClass.checkLabelAttachment.call(this):null!=(t=this._network.getLabel(this._element))&&""!==t?this._labelAttachment||(this._labelAttachment=new x.vector.HTMLLabelAttachment(this,ye.SHOW_LABEL_IN_ATTACHMENT_DIV),this.addAttachment(this._labelAttachment)):this._labelAttachment&&(this.removeAttachment(this._labelAttachment),this._labelAttachment=null)},checkLabel2Attachment:function(){var t=this._element.getStyle("attachment.label2.style");t&&"none"===t?x.vector.HTMLNodeUI.superClass.checkLabelAttachment.call(this):null!=(t=this._network.getLabel2(this._element))&&""!==t?this._label2Attachment||(this._label2Attachment=new x.vector.HTMLLabel2Attachment(this,ye.SHOW_LABEL_IN_ATTACHMENT_DIV),this.addAttachment(this._label2Attachment)):this._label2Attachment&&(this.removeAttachment(this._label2Attachment),this._label2Attachment=null)},checkAlarmAttachment:function(){var t=this._element.getStyle("attachment.alarm.style");t&&"none"===t?x.vector.HTMLLinkUI.superClass.checkAlarmAttachment.call(this):null!=(t=this._network.getAlarmLabel(this._element))&&""!==t?this._alarmAttachment||(this._alarmAttachment=new x.vector.HTMLAlarmAttachment(this,!1),this.addAttachment(this._alarmAttachment)):this._alarmAttachment&&(this.removeAttachment(this._alarmAttachment),this._alarmAttachment=null)},setAttachmentVisible:function(t){t?(this._labelAttachment&&this._labelAttachment.setVisibility("visible"),this._label2Attachment&&this._label2Attachment.setVisibility("visible"),this._alarmAttachment&&this._alarmAttachment.setVisibility("visible")):(this._labelAttachment&&this._labelAttachment.setVisibility("hidden"),this._label2Attachment&&this._label2Attachment.setVisibility("hidden"),this._alarmAttachment&&this._alarmAttachment.setVisibility("hidden"))}}),x.vector.Attachment=function(t,e){this._ui=t,this._element=this._ui.getElement(),this._network=t.getNetwork(),(this._showOnTop=e)&&this._network._hitTestTopAttachmentList.add(this)},Y.ext("twaver.vector.Attachment",Object,{getElement:function(){return this._element},getElementUI:function(){return this._ui},getNetwork:function(){return this._network},isShowOnTop:function(){return!0===this._showOnTop},setShowOnTop:function(t){this._showOnTop=t},getStyle:function(t){return this._ui.getStyle(t)},getFont:function(t){return this._ui.getFont(t)},getViewRect:function(){return Y.clone(this._viewRect)},getAlpha:function(){return 1},validate:function(){},paint:function(t){},getZoomViewRect:function(){return this._network.zoomManager._getAttachmentZoomOutLineRect(this,this._viewRect)},hit:function(t,e){return!!b.containsPoint(this.getZoomViewRect(),t,e)&&this.hitCanvasRect({x:t-1,y:e-1,width:2,height:2})},hitCanvasRect:function(t){var e=ke.getHitCanvas(t.width,t.height),i=ke.getCtx(e);i.save(),i.translate(-t.x,-t.y),this.paint(i);try{for(var n=i.getImageData(0,0,t.width,t.height),o=n.data,s=0;s<n.width;s++)for(var a=0;a<n.height;a++)if(0!==o[3+4*(a*n.width+s)])return i.restore(),!0}catch(t){ke.disposeHitCanvas()}return i.restore(),!1},dispose:function(){this._network._hitTestTopAttachmentList.remove(this)},_rotatePoint:function(t,e,i){return b.createMatrix(e*Math.PI/180,i.x+i.width/2,i.y+i.height/2).transform(t)},_rotatePointList:function(t,e,i){var n=this,o=new x.List;return t.forEach(function(t){o.add(n._rotatePoint(t,e,i))}),o}}),x.vector.BasicAttachment=function(t,e){x.vector.BasicAttachment.superClass.constructor.call(this,t,e),this._roundRect={x:0,y:0,width:0,height:0},this._contentRect={x:0,y:0,width:0,height:0}},Y.ext("twaver.vector.BasicAttachment",x.vector.Attachment,{paint:function(t){x.vector.BasicAttachment.superClass.paint.apply(this,arguments);var e=this.isFill(),i=this.getOutlineWidth(),n=this._network.zoomManager._getAttachmentZoomOutLineRect(this,this._roundRect);this.getElementUI().setGlow(this,t),this.getElementUI().setShadow(this,t),(0<i||e)&&(R.drawRoundRect(t,n.x,n.y,n.width,n.height,this.getCornerRadius()),this._network._debug&&R.strokeRect(t,n,"#C71585"),this._pointers&&(n=this._ui.getZoomPointers(this,this._pointers),t.moveTo(n[0].x,n[0].y),t.lineTo(n[1].x,n[1].y),t.lineTo(n[2].x,n[2].y)),t.closePath(),0<i&&(t.lineWidth=i,t.strokeStyle=this.getOutlineColor(),t.lineCap=this.getCap(),t.lineJoin=this.getJoin(),t.stroke()),e&&(i=this.getFillColor(),(e=this.getGradient())?R.fill(t,i,e,this.getGradientColor(),this._viewRect):t.fillStyle=i,t.fill()))},validate:function(){x.vector.BasicAttachment.superClass.validate.call(this),this.calculateMeasure();var t,e,i=this.getOutlineWidth();(null==i||i<=0)&&(i=1),this._viewRect=b.getRect(this._pointers),this._viewRect=b.unionRect(this._viewRect,this._roundRect),0<i&&b.grow(this._viewRect,2*i,2*i),this._viewRect=this._ui.appendShadowBound(this,this._viewRect),this._element instanceof x.Link&&this._element.getStyle("link.label.rotatable")&&(t=this._viewRect.x+this._viewRect.width/2,e=this._viewRect.y+this._viewRect.height/2,i=Math.sqrt(this._viewRect.height*this._viewRect.height+this._viewRect.width*this._viewRect.width),this._viewRect={x:t-i,y:e-i,width:2*i,height:2*i})},calculateMeasure:function(){var t,e=this.getContentWidth(),i=this.getContentHeight(),n=this.getCornerRadius(),o=this.getPointerLength(),s=this.getPointerWidth(),a=this.getPosition(),r=this.getXOffset(),h=this.getYOffset(),l=this._roundRect;if(l.width=e+n,l.height=i,this._ui._element instanceof x.Link&&(t=this._ui.getLinkPoints(),u=(this._ui.getLineLength?this._ui:this._ui._element).getLineLength(),0<Math.abs(r)&&Math.abs(r)<1?"from"===a?r*=u:"to"===a?r=u*(1-r):(r/=2,r+=.5,r*=u):"from"===a||("to"===a?r=u-r:r+=u/2),t=(u=b.calculatePointInfoAlongLine(t,!0,r,h)).point,u.angle,u="from"===a?this._ui.getFromPoint():"to"===a?this._ui.getToPoint():this._ui._hotSpot,r=t.x-u.x,h=t.y-u.y),0<o){var c,u=this.getDirection(),d=this._network.getPosition(a,this._ui,null,r,h,!1);if("aboveleft"===u)l.y=d.y-o-l.height,l.x=d.x-(l.width-n),c=Math.max(d.x-s,d.x-(l.width-n)+n/2),this._pointers=[d,{x:d.x,y:d.y-o},{x:c,y:d.y-o}];else if("aboveright"===u)l.y=d.y-o-l.height,l.x=d.x-n,c=Math.min(d.x+s,d.x-n+l.width-n/2),this._pointers=[d,{x:d.x,y:d.y-o},{x:c,y:d.y-o}];else if("belowleft"===u)l.y=d.y+o,l.x=d.x-(l.width-n),c=Math.max(d.x-s,d.x-(l.width-n)+n/2),this._pointers=[d,{x:d.x,y:d.y+o},{x:c,y:d.y+o}];else if("belowright"===u)l.y=d.y+o,l.x=d.x-n,c=Math.min(d.x+s,d.x-n+l.width-n/2),this._pointers=[d,{x:d.x,y:d.y+o},{x:c,y:d.y+o}];else if("leftabove"===u)l.y=d.y+n-l.height,l.x=d.x-o-l.width,c=Math.max(d.y-s,d.y+n-l.height+n/2),this._pointers=[d,{x:d.x-o,y:d.y},{x:d.x-o,y:c}];else if("leftbelow"===u)l.y=d.y-n,l.x=d.x-o-l.width,c=Math.min(d.y+s,d.y-n+l.height-n/2),this._pointers=[d,{x:d.x-o,y:d.y},{x:d.x-o,y:c}];else if("rightabove"===u)l.y=d.y+n-l.height,l.x=d.x+o,c=Math.max(d.y-s,d.y+n-l.height+n/2),this._pointers=[d,{x:d.x+o,y:d.y},{x:d.x+o,y:c}];else if("rightbelow"===u)l.y=d.y-n,l.x=d.x+o,c=Math.min(d.y+s,d.y-n+l.height-n/2),this._pointers=[d,{x:d.x+o,y:d.y},{x:d.x+o,y:c}];else if("above"===u)l.y=d.y-o-l.height,l.x=d.x-l.width/2,c=Math.min(e/2,s/2),this._pointers=[d,{x:d.x-c,y:d.y-o},{x:d.x+c,y:d.y-o}];else if("below"===u)l.y=d.y+o,l.x=d.x-l.width/2,c=Math.min(e/2,s/2),this._pointers=[d,{x:d.x-c,y:d.y+o},{x:d.x+c,y:d.y+o}];else if("left"===u)l.y=d.y-l.height/2,l.x=d.x-o-l.width,c=Math.min(i/2,s/2),this._pointers=[d,{x:d.x-o,y:d.y+c},{x:d.x-o,y:d.y-c}];else{if("right"!==u)throw"Can not resolve '"+u+"' attachment direction";l.y=d.y-l.height/2,l.x=d.x+o,c=Math.min(i/2,s/2),this._pointers=[d,{x:d.x+o,y:d.y+c},{x:d.x+o,y:d.y-c}]}}else d=this._network.getPosition(a,this._ui,{width:l.width,height:l.height},r,h,!1),l.x=d.x,l.y=d.y,this._pointers=null;this._contentRect.x=l.x+(l.width-e)/2,this._contentRect.y=l.y+(l.height-i)/2,this._contentRect.width=e,this._contentRect.height=i;i=this.getPadding();0!=i&&b.grow(l,i,i),0!=(i=this.getPaddingLeft())&&(l.x-=i,l.width+=i),0!=(i=this.getPaddingRight())&&(l.width+=i),0!=(i=this.getPaddingTop())&&(l.y-=i,l.height+=i),0!=(i=this.getPaddingBottom())&&(l.height+=i),l.width<0&&(l.width=l.width,l.x-=l.width),l.height<0&&(l.height=-l.height,l.y-=l.height)},getContentWidth:function(){return x.Defaults.ATTACHMENT_CONTENT_WIDTH},getContentHeight:function(){return x.Defaults.ATTACHMENT_CONTENT_HEIGHT},getCornerRadius:function(){return x.Defaults.ATTACHMENT_CORNER_RADIUS},getPointerLength:function(){return x.Defaults.ATTACHMENT_POINTER_LENGTH},getPointerWidth:function(){return x.Defaults.ATTACHMENT_POINTER_WIDTH},getPosition:function(){return x.Defaults.ATTACHMENT_POSITION},getXOffset:function(){return x.Defaults.ATTACHMENT_XOFFSET},getYOffset:function(){return x.Defaults.ATTACHMENT_YOFFSET},getPadding:function(){return x.Defaults.ATTACHMENT_PADDING},getPaddingLeft:function(){return x.Defaults.ATTACHMENT_PADDING_LEFT},getPaddingRight:function(){return x.Defaults.ATTACHMENT_PADDING_RIGHT},getPaddingTop:function(){return x.Defaults.ATTACHMENT_PADDING_TOP},getPaddingBottom:function(){return x.Defaults.ATTACHMENT_PADDING_BOTTOM},getDirection:function(){return x.Defaults.ATTACHMENT_DIRECTION},isFill:function(){return x.Defaults.ATTACHMENT_FILL},getFillColor:function(){return x.Defaults.ATTACHMENT_FILL_COLOR},getGradient:function(){return x.Defaults.ATTACHMENT_GRADIENT},getGradientColor:function(){return x.Defaults.ATTACHMENT_GRADIENT_COLOR},getOutlineWidth:function(){return x.Defaults.ATTACHMENT_OUTLINE_WIDTH},getOutlineColor:function(){return x.Defaults.ATTACHMENT_OUTLINE_COLOR},getCap:function(){return x.Defaults.ATTACHMENT_CAP},getJoin:function(){return x.Defaults.ATTACHMENT_JOIN},isShadowable:function(){return x.Defaults.ATTACHMENT_SHADOWABLE},getRoundRect:function(){return Y.clone(this._roundRect)},getContentRect:function(){return Y.clone(this._contentRect)}}),x.vector.LabelAttachment=function(t,e){x.vector.LabelAttachment.superClass.constructor.call(this,t,e)},Y.ext("twaver.vector.LabelAttachment",x.vector.BasicAttachment,{paint:function(t){var e=this._element instanceof x.Link&&this._element.getStyle("link.label.rotatable");e&&(t.save(),o=(n=this.getZoomViewRect()).x+n.width/2,s=n.y+n.height/2,t.translate(o,s),t.rotate(this._network.getElementUI(this._element).getAngle()),t.translate(-o,-s)),x.vector.LabelAttachment.superClass.paint.apply(this,arguments);var i=this._network.zoomManager,n=i._getAttachmentZoomRect(this,this._contentRect),o=this._element.getStyle("label.align"),s=this._element&&this._element.getStyle("label.rotate.angle");0!==s&&(t.save(),x.Util.rotateCanvas(t,this._contentRect,s)),i._drawText(this,t,this.text,n,this.font,this.getStyle("label.color"),o,this.getStyle("label.linespacing")),!e&&0===s||t.restore(),this._network._debug&&(s=this._viewRect,R.strokeRect(t,s,"#AAABBB"))},validate:function(){this.font=this.getFont("label.font");var t=this.getLabel(),e=Y.g.getTextSize(this.font,t),i=this.getMaxLength();0!==i&&e.width>i?(this.text=Y.g.getCollapseTextInLength(this.font,t,i),this._textSize=Y.g.getTextSize(this.font,this.text)):(this.text=t,this._textSize=e),x.vector.LabelAttachment.superClass.validate.call(this);i=this._viewRect,t=this._element&&this._element.getStyle("label.rotate.angle");0!==t&&((e=new x.List).add({x:i.x,y:i.y}),e.add({x:i.x+i.width,y:i.y}),e.add({x:i.x+i.width,y:i.y+i.height}),e.add({x:i.x,y:i.y+i.height}),e=this._rotatePointList(e,t,i),e=x.Util.getRect(e),this._viewRect=e)},getLabel:function(){return this._network.getLabel(this._element)},getContentWidth:function(){return this._textSize?this._textSize.width:0},getContentHeight:function(){return this._textSize?this._textSize.height:0},getCornerRadius:function(){return this.getStyle("label.corner.radius")},getPointerLength:function(){return this.getStyle("label.pointer.length")},getPointerWidth:function(){return this.getStyle("label.pointer.width")},getPosition:function(){return this.getStyle("label.position")},getXOffset:function(){return this.getStyle("label.xoffset")},getYOffset:function(){return this.getStyle("label.yoffset")},getPadding:function(){return this.getStyle("label.padding")},getPaddingLeft:function(){return this.getStyle("label.padding.left")},getPaddingRight:function(){return this.getStyle("label.padding.right")},getPaddingTop:function(){return this.getStyle("label.padding.top")},getPaddingBottom:function(){return this.getStyle("label.padding.bottom")},getDirection:function(){return this.getStyle("label.direction")},isFill:function(){return this.getStyle("label.fill")},getFillColor:function(){return this.getStyle("label.fill.color")},getGradient:function(){return this.getStyle("label.gradient")},getGradientColor:function(){return this.getStyle("label.gradient.color")},getOutlineWidth:function(){return this.getStyle("label.outline.width")},getOutlineColor:function(){return this.getStyle("label.outline.color")},getCap:function(){return this.getStyle("label.cap")},getJoin:function(){return this.getStyle("label.join")},getAlpha:function(){return this.getStyle("label.alpha")},getMaxLength:function(){return this.getStyle("label.maxlength")},isShadowable:function(){return this.getStyle("label.shadowable")}}),x.vector.Label2Attachment=function(t,e){x.vector.Label2Attachment.superClass.constructor.call(this,t,e)},Y.ext("twaver.vector.Label2Attachment",x.vector.BasicAttachment,{paint:function(t){var e=this._element instanceof x.Link&&this._element.getStyle("link.label.rotatable");e&&(t.save(),o=(n=this.getZoomViewRect()).x+n.width/2,s=n.y+n.height/2,t.translate(o,s),t.rotate(this._network.getElementUI(this._element).getAngle()),t.translate(-o,-s)),x.vector.Label2Attachment.superClass.paint.apply(this,arguments);var i=this._network.zoomManager,n=i._getAttachmentZoomRect(this,this._contentRect),o=this._element.getStyle("label.align"),s=this._element&&this._element.getStyle("label2.rotate.angle");0!==s&&(t.save(),x.Util.rotateCanvas(t,this._contentRect,s)),i._drawText(this,t,this.text,n,this.font,this.getStyle("label2.color"),o,this.getStyle("label2.linespacing")),!e&&0===s||t.restore(),this._network._debug&&(i=i.getAttachmentSizeZoom(this),(n=n).width*=i,n.height*=i,R.strokeRect(t,n,"#AAABBB"))},validate:function(){this.font=this.getFont("label2.font");var t=this.getLabel(),e=Y.g.getTextSize(this.font,t),i=this.getMaxLength();0!==i&&e.width>i?(this.text=Y.g.getCollapseTextInLength(this.font,t,i),this._textSize=Y.g.getTextSize(this.font,this.text)):(this.text=t,this._textSize=e),x.vector.LabelAttachment.superClass.validate.call(this);i=this._viewRect,t=this._element&&this._element.getStyle("label2.rotate.angle");0!==t&&((e=new x.List).add({x:i.x,y:i.y}),e.add({x:i.x+i.width,y:i.y}),e.add({x:i.x+i.width,y:i.y+i.height}),e.add({x:i.x,y:i.y+i.height}),e=this._rotatePointList(e,t,i),e=x.Util.getRect(e),this._viewRect=e)},getLabel:function(){return this._network.getLabel2(this._element)},getContentWidth:function(){return this._textSize?this._textSize.width:0},getContentHeight:function(){return this._textSize?this._textSize.height:0},getCornerRadius:function(){return this.getStyle("label2.corner.radius")},getPointerLength:function(){return this.getStyle("label2.pointer.length")},getPointerWidth:function(){return this.getStyle("label2.pointer.width")},getPosition:function(){return this.getStyle("label2.position")},getXOffset:function(){return this.getStyle("label2.xoffset")},getYOffset:function(){return this.getStyle("label2.yoffset")},getPadding:function(){return this.getStyle("label2.padding")},getPaddingLeft:function(){return this.getStyle("label2.padding.left")},getPaddingRight:function(){return this.getStyle("label2.padding.right")},getPaddingTop:function(){return this.getStyle("label2.padding.top")},getPaddingBottom:function(){return this.getStyle("label2.padding.bottom")},getDirection:function(){return this.getStyle("label2.direction")},isFill:function(){return this.getStyle("label2.fill")},getFillColor:function(){return this.getStyle("label2.fill.color")},getGradient:function(){return this.getStyle("label2.gradient")},getGradientColor:function(){return this.getStyle("label2.gradient.color")},getOutlineWidth:function(){return this.getStyle("label2.outline.width")},getOutlineColor:function(){return this.getStyle("label2.outline.color")},getCap:function(){return this.getStyle("label2.cap")},getJoin:function(){return this.getStyle("label2.join")},getAlpha:function(){return this.getStyle("label2.alpha")},getMaxLength:function(){return this.getStyle("label2.maxlength")},isShadowable:function(){return this.getStyle("label2.shadowable")}}),x.vector.AlarmAttachment=function(t,e){x.vector.AlarmAttachment.superClass.constructor.call(this,t,e)},Y.ext("twaver.vector.AlarmAttachment",x.vector.BasicAttachment,{paint:function(t){x.vector.AlarmAttachment.superClass.paint.apply(this,arguments);var e=this._network.zoomManager,i=e._getAttachmentZoomRect(this,this._contentRect);e._drawText(this,t,this.text,i,this.font,this.getStyle("alarm.color"))},validate:function(){this.font=this.getFont("alarm.font"),this.text=this._network.getAlarmLabel(this._element),this._textSize=R.getTextSize(this.font,this.text),this._fillColor=this._network.getAlarmFillColor(this._element),x.vector.AlarmAttachment.superClass.validate.call(this)},getContentWidth:function(){return this._textSize?this._textSize.width:0},getContentHeight:function(){return this._textSize?this._textSize.height:0},getCornerRadius:function(){return this.getStyle("alarm.corner.radius")},getPointerLength:function(){return this.getStyle("alarm.pointer.length")},getPointerWidth:function(){return this.getStyle("alarm.pointer.width")},getPosition:function(){return this.getStyle("alarm.position")},getXOffset:function(){return this.getStyle("alarm.xoffset")},getYOffset:function(){return this.getStyle("alarm.yoffset")},getPadding:function(){return this.getStyle("alarm.padding")},getPaddingLeft:function(){return this.getStyle("alarm.padding.left")},getPaddingRight:function(){return this.getStyle("alarm.padding.right")},getPaddingTop:function(){return this.getStyle("alarm.padding.top")},getPaddingBottom:function(){return this.getStyle("alarm.padding.bottom")},getDirection:function(){return this.getStyle("alarm.direction")},isFill:function(){return null!=this._fillColor},getFillColor:function(){return this._fillColor},getGradient:function(){return this.getStyle("alarm.gradient")},getGradientColor:function(){return this.getStyle("alarm.gradient.color")},getOutlineWidth:function(){return this.getStyle("alarm.outline.width")},getOutlineColor:function(){return this.getStyle("alarm.outline.color")},getCap:function(){return this.getStyle("alarm.cap")},getJoin:function(){return this.getStyle("alarm.join")},getAlpha:function(){return this.getStyle("alarm.alpha")},isShadowable:function(){return this.getStyle("alarm.shadowable")}}),x.vector.LinkHandlerAttachment=function(t,e){x.vector.LinkHandlerAttachment.superClass.constructor.call(this,t,e)},Y.ext("twaver.vector.LinkHandlerAttachment",x.vector.BasicAttachment,{paint:function(t){var e=this._network.zoomManager;x.vector.LinkHandlerAttachment.superClass.paint.apply(this,arguments);var i=e._getAttachmentZoomRect(this,this._contentRect);e._drawText(this,t,this.linkHandlerLabel,i,this.linkHandlerFont,this.getStyle("link.handler.color"))},validate:function(){this.linkHandlerFont=this.getFont("link.handler.font"),this.linkHandlerLabel=this._network.getLinkHandlerLabel(this._element),this._textSize=R.getTextSize(this.linkHandlerFont,this.linkHandlerLabel),x.vector.LinkHandlerAttachment.superClass.validate.call(this)},getContentWidth:function(){return this._textSize?this._textSize.width:0},getContentHeight:function(){return this._textSize?this._textSize.height:0},getCornerRadius:function(){return this.getStyle("link.handler.corner.radius")},getPointerLength:function(){return this.getStyle("link.handler.pointer.length")},getPointerWidth:function(){return this.getStyle("link.handler.pointer.width")},getPosition:function(){return this.getStyle("link.handler.position")},getXOffset:function(){return this.getStyle("link.handler.xoffset")},getYOffset:function(){return this.getStyle("link.handler.yoffset")},getPadding:function(){return this.getStyle("link.handler.padding")},getPaddingLeft:function(){return this.getStyle("link.handler.padding.left")},getPaddingRight:function(){return this.getStyle("link.handler.padding.right")},getPaddingTop:function(){return this.getStyle("link.handler.padding.top")},getPaddingBottom:function(){return this.getStyle("link.handler.padding.bottom")},getDirection:function(){return this.getStyle("link.handler.direction")},isFill:function(){return this.getStyle("link.handler.fill")},getFillColor:function(){return this.getStyle("link.handler.fill.color")},getGradient:function(){return this.getStyle("link.handler.gradient")},getGradientColor:function(){return this.getStyle("link.handler.gradient.color")},getOutlineWidth:function(){return this.getStyle("link.handler.outline.width")},getOutlineColor:function(){return this.getStyle("link.handler.outline.color")},getCap:function(){return this.getStyle("link.handler.cap")},getJoin:function(){return this.getStyle("link.handler.join")},getAlpha:function(){return this.getStyle("link.handler.alpha")},isShadowable:function(){return this.getStyle("link.handler.shadowable")}}),x.vector.IconsAttachment=function(t,e){x.vector.IconsAttachment.superClass.constructor.call(this,t,e)},Y.ext("twaver.vector.IconsAttachment",x.vector.Attachment,{isShadowable:function(){return x.Defaults.ATTACHMENT_SHADOWABLE},validate:function(){if(x.vector.IconsAttachment.superClass.validate.call(this),this.iconsNames=this._network.getIconsNames(this._element),this.iconsNames&&0!=this.iconsNames.length){var t,e,n=this._makeGroup(this.iconsNames),o=this._makeGroup(this._network.getIconsColors(this._element)),s=this._network.zoomManager;for(len=n.length,this.iconsOrientation=this._makeArray(this._element.getStyle("icons.orientation"),len,"right"),this.iconsPosition=this._makeArray(this._element.getStyle("icons.position"),len,"topleft.bottomright"),this.iconsXoffset=this._makeArray(this._element.getStyle("icons.xoffset"),len,0),this.iconsYoffset=this._makeArray(this._element.getStyle("icons.yoffset"),len,0),this.iconsXgap=this._makeArray(this._element.getStyle("icons.xgap"),len,1),this.iconsYgap=this._makeArray(this._element.getStyle("icons.ygap"),len,1),this.locations=[],this.iconsSizes=[],this.iconsOrientations=[],i=0;i<len;i++){var a,r,h=n[i],l=this.iconsOrientation[i]||"right",c=this.iconsPosition[i]||"topleft.bottomright",u=this.iconsXgap[i]||1,d=this.iconsYgap[i]||1,_=this.iconsXoffset[i]||0,g=this.iconsYoffset[i]||0;this._ui._element instanceof x.Link&&(a=this._ui.getLinkPoints(),r=(this._ui.getLineLength?this._ui:this._ui._element).getLineLength(),0<Math.abs(_)&&Math.abs(_)<1?"from"===c?_*=r:"to"===c?_=r*(1-_):(_/=2,_+=.5,_*=r):"from"===c||("to"===c?_=r-_:_+=r/2),a=(r=b.calculatePointInfoAlongLine(a,!0,_,g)).point,r.angle,r="from"===c?this._ui.getFromPoint():"to"===c?this._ui.getToPoint():this._ui._hotSpot,_=a.x-r.x,g=a.y-r.y),e=null,(t=this._getIconsSize(h,l,u,d,s))&&(e=this._network.getPosition(c,this._ui,t,_,g),this._iconLocation=e,"top"===l?e.y+=t.height:"left"===l&&(e.x+=t.width)),this.locations.push(e),this.iconsSizes.push(t),this.iconsOrientations.push(l)}var f=null;for(i=0;i<this.locations.length;i++)e=this.locations[i],t=this.iconsSizes[i],l=this.iconsOrientations[i],null!=e&&(f=null==f?"top"===l?{x:e.x,y:e.y-t.height,width:t.width,height:t.height}:"left"===l?{x:e.x-t.width,y:e.y,width:t.width,height:t.height}:{x:e.x,y:e.y,width:t.width,height:t.height}:"top"===l?b.unionRect(f,{x:e.x,y:e.y-t.height,width:t.width,height:t.height}):"left"===l?b.unionRect(f,{x:e.x-t.width,y:e.y,width:t.width,height:t.height}):b.unionRect(f,{x:e.x,y:e.y,width:t.width,height:t.height}));this._viewRect=s?f||this.getElementUI().getViewRect():f||{x:this._element.getLocation().x,y:this._element.getLocation().y,width:0,height:0},this.iconsGroups=n,this.colorGroups=o;var A,p,m,v=this._element instanceof x.Link&&this._element.getStyle("link.icons.rotatable");for(i=0;i<len;i++)v instanceof Array&&v[i]&&this._viewRect&&(A=this._viewRect.x+this._viewRect.width/2,p=this._viewRect.y+this._viewRect.height/2,m=Math.sqrt(this._viewRect.height*this._viewRect.height+this._viewRect.width*this._viewRect.width),this._viewRect={x:A-m/2,y:p-m/2,width:m,height:m})}},_makeGroup:function(t){if(!Array.isArray(t))return[[t]];for(var e,i=[],n=!1,o=t.length,s=0;s<o;s++)e=t[s],Array.isArray(e)?(n=!0,i.push(e)):i.push([e]);return n||(i.length=0,i.push(t)),i},_makeArray:function(t,e,i){if(Array.isArray(t))return t;for(var n=[],o=0;o<e;o++)n.push(t||i);return n},paint:function(t){if(x.vector.IconsAttachment.superClass.paint.apply(this,arguments),this.iconsNames&&0!=this.iconsNames.length&&this.locations)for(var e,i,n,o,s,a,r,h=this._network.zoomManager,l=0;l<this.iconsGroups.length;l++)if(e=this.locations[l])for(var c in f=e.x,A=e.y,n=this.iconsGroups[l],o=this.colorGroups[l],s=this.iconsOrientation[l],a=this.iconsXgap[l]||1,r=this.iconsYgap[l]||1,i=0,n){var u=null,d=null;o&&o.length>i&&(d=o[i++]);var _=Y.getImageAsset(n[c]);if(null!=_){if(h&&this._ui instanceof x.vector.GroupUI&&this._ui._shapeRect){var g=h.getAttachmentSizeZoom(this),c=_.getWidth()*g,g=_.getHeight()*g;if("right"===s)f+=(u={x:f,y:A,width:c,height:g}).width+a;else if("left"===s)f-=(u={x:f-c,y:A,width:c,height:g}).width+a;else if("top"===s)A-=(u={x:f,y:A-g,width:c,height:g}).height+r;else{if("bottom"!==s)throw"Can not resolve '"+s+"' orientation";A+=(u={x:f,y:A,width:c,height:g}).height+r}}else{if("right"===s)f+=(u={x:f,y:A,width:_.getWidth(),height:_.getHeight()}).width+a;else if("left"===s)f-=(u={x:f-_.getWidth(),y:A,width:_.getWidth(),height:_.getHeight()}).width+a;else if("top"===s)A-=(u={x:f,y:A-_.getHeight(),width:_.getWidth(),height:_.getHeight()}).height+r;else{if("bottom"!==s)throw"Can not resolve '"+s+"' orientation";A+=(u={x:f,y:A,width:_.getWidth(),height:_.getHeight()}).height+r}u=h._getAttachmentZoomOutLineRect(this,u)}var f,A,g=this._element instanceof x.Link&&this._element.getStyle("link.icons.rotatable");g instanceof Array&&g[l]?(t.save(),f=(g=u).x+g.width/2,A=g.y+g.height/2,t.translate(f,A),t.rotate(this._network.getElementUI(this._element).getAbsoluteAngle()),t.translate(-f,-A),xt(t,_.getImage(d,u.width,u.height),d,u,this._element,this._network),t.restore()):xt(t,_.getImage(d,u.width,u.height),d,u,this._element,this._network),this._network._debug&&(u=this._viewRect,R.strokeRect(t,u,"#FCFC00",1),R.strokeRect(t,u,"#FCFC00",1))}}},_getIconsSize:function(t,e,i,n,o){var s,a=0,r=0,h=null,l=null,c=null;for(s in t)if(l=Y.getImageAsset(t[s])){if("right"===e)a+=(h={x:a,y:r,width:l.getWidth(),height:l.getHeight()}).width+i;else if("left"===e)a-=(h={x:a-l.getWidth(),y:r,width:l.getWidth(),height:l.getHeight()}).width+i;else if("top"===e)r-=(h={x:a,y:r-l.getHeight(),width:l.getWidth(),height:l.getHeight()}).height+n;else{if("bottom"!==e)throw"Can not resolve '"+e+"' orientation";r+=(h={x:a,y:r,width:l.getWidth(),height:l.getHeight()}).height+n}c=null==c?Y.clone(h):b.unionRect(c,h)}return c?o&&this._ui instanceof x.vector.GroupUI&&this._ui._shapeRect?{width:Math.abs(c.width)*o.getAttachmentSizeZoom(this),height:Math.abs(c.height)*o.getAttachmentSizeZoom(this)}:{width:Math.abs(c.width),height:Math.abs(c.height)}:null}}),x.vector.EditAttachment=function(t,e){x.vector.EditAttachment.superClass.constructor.call(this,t,e)},Y.ext("twaver.vector.EditAttachment",x.vector.Attachment,{paint:function(t){x.vector.EditAttachment.superClass.paint.apply(this,arguments),this.paintResizingPoints(t),this.paintEditPoints(t),this.paintRotatePoints(t)},paintResizingPoints:function(t){var e=this.resizingPoints.size();if(!(e<=0)){var i=this._element.getStyle("edit.physicalZoom")?1:this._network.getGraphicsZoom(),n=this.resizePointSize/i,o=2*n,s=2*n,a=this._network.getResizePointFillColor(),r=this._network.getResizePointOutlineWidth()/i,h=this._network.getResizePointOutlineColor(),l=this._element.getAngle(),i=this._network.zoomManager,c=i._getElementZoomRect(this.getElementUI(),this._element.getOriginalRect());t.lineWidth=r;for(var u=this.resizingPoints,d=0;d<e;d++){var _=u.get(d),_={x:_.x-n,y:_.y-n,width:2*n,height:2*n},_=this._getRotateRect(_,l,{x:c.x+c.width/2,y:c.y+c.height/2});t.save(),x.Util.rotateCanvas(t,_,l),ke.rect(t,_.x,_.y,o,s),t.restore()}t.fillStyle=a,t.strokeStyle=h,t.fill(),t.stroke(),this._network._debug&&(h=this.getViewRect("resize"),R.strokeRect(t,h,"#CCDDCC"),h=i._getElementZoomRect(this.getElementUI(),this.getElementUI()._viewRect),R.strokeRect(t,h,"#FD7766"))}},paintEditPoints:function(t){var e=this.editPoints.size();if(!(e<=0)){var i=this._element.getStyle("edit.physicalZoom")?1:this._network.getGraphicsZoom(),n=this._network.getEditPointOutlineColor(),o=this._network.getEditPointFillColor(),i=this._network.getEditPointOutlineWidth()/i;t.beginPath(),t.lineWidth=i;for(var s=this.editPoints,a=0;a<e;a++){var r=s.get(a);t.beginPath(),ke.circle(t,r.x,r.y,this.editPointSize,o,n),t.closePath()}this._network._debug&&(i=this.getViewRect("edit"),R.strokeRect(t,i,"#AAABBC"))}},paintRotatePoints:function(t){var e=this.rotatePoints.size();if(!(e<=0)){var i=this._element.getStyle("edit.physicalZoom")?1:this._network.getGraphicsZoom(),n=this._network.getRotatePointOutlineColor(),o=this._network.getRotatePointFillColor(),s=this._network.getRotatePointOutlineWidth()/i;t.beginPath(),t.lineWidth=s;for(var a=this.rotatePoints,r=0;r<e;r++){var h=a.get(r);t.beginPath(),ke.circle(t,h.x,h.y,this.rotatePointSize/i,o,n),t.closePath(),t.beginPath()}this._network._debug&&(s=this.getViewRect("rotate"),R.strokeRect(t,s,"green"))}},getViewRect:function(t){if(t){if("resize"===t)return this._resizeRect;if("rotate"===t)return this._rotateRect;if("edit"===t)return this._editRect}return this._viewRect||{x:0,y:0,width:0,height:0}},validate:function(){x.vector.EditAttachment.superClass.validate.call(this);var t=this._network.getGraphicsZoom();this.editPointSize=this._network.getEditPointSize(),this.resizePointSize=this._network.getResizePointSize(),this.rotatePointSize=this._network.getRotatePointSize(),this.resizingPoints=new x.List,this.editPoints=new x.List,this.rotatePoints=new x.List,this._element instanceof x.Node&&this._addResizingPoint(this._element),!(this._network.isRotatable(this._element)&&this._element instanceof Re)||this._element instanceof x.ShapeNode||this._element instanceof x.Grid||this._element instanceof x.Group||this._addRotatePoint(this._element),this._element instanceof x.ShapeNode&&(this._addResizingPoint(this._element),this._addShapeNodePoint(this._element)),this._ui instanceof x.vector.ShapeLinkUI&&this._addShapeLinkPoints(this._element),this._ui instanceof x.vector.LinkUI&&this._addLinkControlPoint(this._ui);var e=this._network.getResizePointOutlineWidth()/t,i=this.getElementUI().getZoomBodyRect(),n=2*Math.sqrt(2);this._resizeOffset=(this.resizePointSize+e+1)*n,b.grow(i,this._resizeOffset,this._resizeOffset),this._resizeRect=i,e=this._network.getEditPointOutlineWidth()/t,0<this.editPoints.size()&&(o=b.getRect(this.editPoints),b.grow(o,2*this.editPointSize+2*e),i=b.unionRect(i,o)),this._editRect=o;var e=this._network.getRotatePointOutlineWidth()/t,o=this.rotatePointSize;0<this.rotatePoints.size()&&(e={x:(t=this.rotatePoints.get(0)).x-o-e-1,y:t.y-o-e-1,width:2*o+2*e+2,height:2*o+2*e+2},i=b.unionRect(i,e),this._rotateRect=e),this._viewRect=i},_addResizingPoint:function(t){var e,i,n,o=this._network.zoomManager._getElementZoomRect(this.getElementUI(),t.getOriginalRect());o&&(this._network.getResizePointSize()<=0||(e=new ie([{x:o.x,y:o.y},{x:o.x+o.width/2,y:o.y},{x:o.x+o.width,y:o.y},{x:o.x,y:o.y+o.height/2},{x:o.x+o.width,y:o.y+o.height/2},{x:o.x,y:o.y+o.height},{x:o.x+o.width/2,y:o.y+o.height},{x:o.x+o.width,y:o.y+o.height}]),i=this._network.getResizePointOutlineWidth(),n=this._network.getResizePointOutlineColor(),o=this._network.getResizePointFillColor(),this._addPoints(t.getRect(),e,i,n,o,!0)))},_addRotatePoint:function(t){var e,i,n,o=this._network.zoomManager._getElementZoomRect(this.getElementUI(),t.getOriginalRect());o&&((i=this._network.getRotatePointSize()/this._network.getGraphicsZoom())<=0||(n=2*i,e=new x.List([{x:o.x+o.width/2,y:o.y-this._network.getRotatePointOffset()/this._network.getGraphicsZoom()-i}]),i={x:(i=(e=0!=(i=t.getAngle())?this._rotatePointList(e,i,o):e).get(0)).x-n/2,y:i.y-n/2,width:n,height:n},n=this._network.getRotatePointOutlineWidth(),n=this.rotatePointSize+n,b.grow(o,n,n),b.unionRect(t.getRect(),i),this.rotatePoints=e))},_addShapeNodePoint:function(t){t=this._network.zoomManager._getShapeNodeZoomPoints(this.getElementUI(),t.getPoints());this._addEditPoints(t)},_addShapeLinkPoints:function(t){t=this._network.zoomManager._getShapeLinkZoomPoints(t.getPoints());this._addEditPoints(t)},_addLinkControlPoint:function(t){var e=new x.List,i=t._element.getFromAgent()?t._element.getFromAgent():t._element.getFromNode(),n=t._element.getStyle("link.from.xoffset"),o=t._element.getStyle("link.from.yoffset"),s=this._network.getElementUI(i).getZoomBodyRect(),i=s.x+s.width/2,s=s.y+s.height/2;e.add({x:i+n,y:s+o});i=t._element.getToAgent()?t._element.getToAgent():t._element.getToNode(),n=t._element.getStyle("link.to.xoffset"),s=t._element.getStyle("link.to.yoffset"),o=this._network.getElementUI(i).getZoomBodyRect(),i=o.x+o.width/2,o=o.y+o.height/2;e.add({x:i+n,y:o+s}),rt.isOrthogonalLink(t._element)&&t.getControlPoint()&&((t=t.getControlPoint())&&e.add(t));var a=this.editPoints.size();if(0<a)for(var r=0;r<a;r++)e.add(this.editPoints.get(r));this._addEditPoints(e)},_addEditPoints:function(t){var e,i=b.getRect(t);i&&(this._network.getEditPointSize()<=0||(e=this._network.getEditPointOutlineWidth(),this._addPoints(i,t,e,!1)))},_addPoints:function(t,e,i,n,o,s){var a=s?this._network.getResizePointSize():this._network.getEditPointSize();a<0||(b.grow(t,i=a+i,i),1==s?this.resizingPoints=e:this.editPoints=e)},_rotatePoint:function(t,e,i){return b.createMatrix(e*Math.PI/180,i.x+i.width/2,i.y+i.height/2).transform(t)},_rotatePointList:function(t,e,i){var n=this,o=new x.List;return t.forEach(function(t){o.add(n._rotatePoint(t,e,i))}),o},_getRotateRect:function(t,e,i){e=b.createMatrix(e*Math.PI/180,i.x,i.y),i={x:t.x+t.width/2,y:t.y+t.height/2},i=e.transform(i),t=new x.List([{x:i.x-t.width/2,y:i.y-t.height/2},{x:i.x+t.width/2,y:i.y-t.height/2},{x:i.x+t.width/2,y:i.y+t.height/2},{x:i.x-t.width/2,y:i.y+t.height/2}]);return b.getRect(t)}}),x.vector.HTMLLabelAttachment=function(t,e){x.vector.HTMLLabelAttachment.superClass.constructor.call(this,t,e),this._triangleDiv=x.Util.createDiv(),this._roundDiv=x.Util.createDiv(),this._contentDiv=x.Util.createDiv();this._network.getView().appendChild(this._roundDiv),this._roundDiv.appendChild(this._contentDiv)},Y.ext("twaver.vector.HTMLLabelAttachment",x.vector.LabelAttachment,{validate:function(){var t=this._element.getStyle("attachment.zIndex");this.validateZIndex(t);t=this._element.getStyle("attachment.pointer.events");x.Util.setCSSStyle(this._triangleDiv,"pointer-events",t),x.Util.setCSSStyle(this._contentDiv,"pointer-events",t),x.Util.setCSSStyle(this._triangleDiv,"border-style","solid"),x.Util.setCSSStyle(this._contentDiv,"white-space","nowrap");this.getFont("label.font");t=this.getLabel();t!==this.text&&(this.text&&("object"==typeof this.text?window.jquery?window.jquery(this.text).remove():this._contentDiv.removeChild(this.text):this._contentDiv.innerHTML=""),t&&("object"==typeof t?window.jquery?window.jquery(this._contentDiv).append(t):this._contentDiv.appendChild(t):this._contentDiv.innerHTML=t),this.text=t),this._contentDiv.style.visibility="hidden",x.vector.HTMLLabelAttachment.superClass.validate.call(this)},validateZIndex:function(t){this._roundDiv.style.zIndex=t+this._network.getElementBox().getDatas().indexOf(this._element)},getContentWidth:function(){return this._contentDiv.scrollWidth||parseInt(x.Util.getCSSStyle(this._contentDiv.firstChild,"width"))},getContentHeight:function(){return this._contentDiv.scrollHeight||parseInt(x.Util.getCSSStyle(this._contentDiv.firstChild,"height"))},paint:function(t){var e=this.isFill(),i=this.getOutlineWidth(),n=this._contentRect;this.getElementUI().setGlow(this,t),this.getElementUI().setShadow(this,t),(0<i||e)&&(R.drawRoundRect(t,n.x,n.y,n.width,n.height,this.getCornerRadius()),this._pointers&&(o=this._ui.getZoomPointers(this,this._pointers),t.moveTo(o[0].x,o[0].y),t.lineTo(o[1].x,o[1].y),t.lineTo(o[2].x,o[2].y)),t.closePath(),0<i&&(t.lineWidth=i,t.strokeStyle=this.getOutlineColor(),t.lineCap=this.getCap(),t.lineJoin=this.getJoin(),t.stroke()),e&&(a=this.getFillColor(),(s=this.getGradient())?R.fill(t,a,s,this.getGradientColor(),this._viewRect):t.fillStyle=a,t.fill()));this.getFont("label.font"),this.getLabel();var o=this._network.getViewRect().x,i=this._network.getViewRect().y,e=this._network.getZoom(),s=this._contentRect.x+this._contentRect.width/2,a=this._contentRect.y+this._contentRect.height/2,o=s*e-o-this._contentDiv.offsetWidth/2*e+"px",i=a*e-i-this._contentDiv.offsetHeight/2*e+"px";this._contentDiv.style.left=o,this._contentDiv.style.top=i,g.isFirefox?(x.Util.setCSSStyle(this._contentDiv,"-moz-transform","scale("+e+")"),x.Util.setCSSStyle(this._contentDiv,"-moz-transform-origin","0 0")):g.isOpera?(x.Util.setCSSStyle(this._contentDiv,"-o-transform","scale("+e+")"),x.Util.setCSSStyle(this._contentDiv,"-o-transform-origin","0 0")):g.isChrome||g.isSafari?(x.Util.setCSSStyle(this._contentDiv,"-webkit-transform","scale("+e+")"),x.Util.setCSSStyle(this._contentDiv,"-webkit-transform-origin","0 0")):g.isIE?(x.Util.setCSSStyle(this._contentDiv,"-ms-transform","scale("+e+")"),x.Util.setCSSStyle(this._contentDiv,"-ms-transform-origin","0 0")):(x.Util.setCSSStyle(this._contentDiv,"transform","scale("+e+")"),x.Util.setCSSStyle(this._contentDiv,"transform-origin","0 0")),this._network._debug&&(R.strokeRect(t,this._contentRect,"blue"),R.strokeRect(t,this._roundRect,"red"),R.strokeRect(t,this._viewRect,"green")),this._element instanceof x.Link&&this._element.getStyle("link.label.rotatable")&&((t=this.getZoomViewRect()).x,t.width,t.y,t.height,t=180*this._network.getElementUI(this._element).getAbsoluteAngle()/Math.PI,this._contentDiv.offsetWidth,this._contentDiv.offsetHeight,g.isFirefox?x.Util.setCSSStyle(this._contentDiv,"-moz-transform","translate(0px,0px) rotate("+t+"deg) scale("+e+")"):g.isOpera?x.Util.setCSSStyle(this._contentDiv,"-o-transform","translate(0px,0px) rotate("+t+"deg) scale("+e+")"):g.isChrome||g.isSafari?x.Util.setCSSStyle(this._contentDiv,"-webkit-transform","translate(0px, 0px) rotate("+t+"deg) scale("+e+")"):g.isIE?x.Util.setCSSStyle(this._contentDiv,"-ms-transform","translate(0px,0px) rotate("+t+"deg) scale("+e+")"):x.Util.setCSSStyle(this._contentDiv,"transform","translate(0px,0px) rotate("+t+"deg) scale("+e+")"))},setVisibility:function(t){this._contentDiv.style.visibility=t},dispose:function(){this._network.getView().removeChild(this._roundDiv)},getView:function(){return this._roundDiv}}),x.vector.HTMLLabel2Attachment=function(t,e){x.vector.HTMLLabel2Attachment.superClass.constructor.call(this,t,e),this._triangleDiv=x.Util.createDiv(),this._roundDiv=x.Util.createDiv(),this._contentDiv=x.Util.createDiv();this._network.getView().appendChild(this._roundDiv),this._roundDiv.appendChild(this._contentDiv)},Y.ext("twaver.vector.HTMLLabel2Attachment",x.vector.LabelAttachment,{validate:function(){var t=this._element.getStyle("attachment.zIndex");this.validateZIndex(t);t=this._element.getStyle("attachment.pointer.events");x.Util.setCSSStyle(this._triangleDiv,"pointer-events",t),x.Util.setCSSStyle(this._contentDiv,"pointer-events",t),x.Util.setCSSStyle(this._triangleDiv,"border-style","solid"),x.Util.setCSSStyle(this._contentDiv,"white-space","nowrap");this.getFont("label2.font");t=this.getLabel();t!==this.text&&(this.text&&("object"==typeof this.text?window.jquery?window.jquery(this.text).remove():this._contentDiv.removeChild(this.text):this._contentDiv.innerHTML=""),t&&("object"==typeof t?window.jquery?window.jquery(this._contentDiv).append(t):this._contentDiv.appendChild(t):this._contentDiv.innerHTML=t),this.text=t),this._contentDiv.style.visibility="hidden",x.vector.HTMLLabelAttachment.superClass.validate.call(this)},validateZIndex:function(t){this._roundDiv.style.zIndex=t+this._network.getElementBox().getDatas().indexOf(this._element)},getContentWidth:function(){return this._contentDiv.scrollWidth||parseInt(x.Util.getCSSStyle(this._contentDiv.firstChild,"width"))},getContentHeight:function(){return this._contentDiv.scrollHeight||parseInt(x.Util.getCSSStyle(this._contentDiv.firstChild,"height"))},paint:function(t){var e=this.isFill(),i=this.getOutlineWidth(),n=this._contentRect;this.getElementUI().setGlow(this,t),this.getElementUI().setShadow(this,t),(0<i||e)&&(R.drawRoundRect(t,n.x,n.y,n.width,n.height,this.getCornerRadius()),this._pointers&&(o=this._ui.getZoomPointers(this,this._pointers),t.moveTo(o[0].x,o[0].y),t.lineTo(o[1].x,o[1].y),t.lineTo(o[2].x,o[2].y)),t.closePath(),0<i&&(t.lineWidth=i,t.strokeStyle=this.getOutlineColor(),t.lineCap=this.getCap(),t.lineJoin=this.getJoin(),t.stroke()),e&&(a=this.getFillColor(),(s=this.getGradient())?R.fill(t,a,s,this.getGradientColor(),this._viewRect):t.fillStyle=a,t.fill()));this.getFont("label2.font"),this.getLabel();var o=this._network.getViewRect().x,i=this._network.getViewRect().y,e=this._network.getZoom(),s=this._contentRect.x+this._contentRect.width/2,a=this._contentRect.y+this._contentRect.height/2,o=s*e-o-this._contentDiv.offsetWidth/2*e+"px",i=a*e-i-this._contentDiv.offsetHeight/2*e+"px";this._contentDiv.style.left=o,this._contentDiv.style.top=i,this._contentDiv.style.setProperty("-webkit-transform","scale("+e+")",null),this._contentDiv.style.setProperty("-webkit-transform-origin","0 0",null),this._network._debug&&(R.strokeRect(t,this._contentRect,"blue"),R.strokeRect(t,this._roundRect,"red"),R.strokeRect(t,this._viewRect,"green")),this._element instanceof x.Link&&this._element.getStyle("link.label2.rotatable")&&((t=this.getZoomViewRect()).x,t.width,t.y,t.height,t=180*this._network.getElementUI(this._element).getAbsoluteAngle()/Math.PI,this._contentDiv.offsetWidth,this._contentDiv.offsetHeight,g.isFirefox?x.Util.setCSSStyle(this._contentDiv,"-moz-transform","translate(0px,0px) rotate("+t+"deg) scale("+e+")"):g.isOpera?x.Util.setCSSStyle(this._contentDiv,"-o-transform","translate(0px,0px) rotate("+t+"deg) scale("+e+")"):g.isChrome||g.isSafari?x.Util.setCSSStyle(this._contentDiv,"-webkit-transform","translate(0px, 0px) rotate("+t+"deg) scale("+e+")"):g.isIE?x.Util.setCSSStyle(this._contentDiv,"-ms-transform","translate(0px,0px) rotate("+t+"deg) scale("+e+")"):x.Util.setCSSStyle(this._contentDiv,"transform","translate(0px,0px) rotate("+t+"deg) scale("+e+")"))},setVisibility:function(t){this._contentDiv.style.visibility=t},dispose:function(){this._network.getView().removeChild(this._roundDiv)},getView:function(){return this._roundDiv},getLabel:function(){return this._network.getLabel2(this._element)},getCornerRadius:function(){return this.getStyle("label2.corner.radius")},getPointerLength:function(){return this.getStyle("label2.pointer.length")},getPointerWidth:function(){return this.getStyle("label2.pointer.width")},getPosition:function(){return this.getStyle("label2.position")},getXOffset:function(){return this.getStyle("label2.xoffset")},getYOffset:function(){return this.getStyle("label2.yoffset")},getPadding:function(){return this.getStyle("label2.padding")},getPaddingLeft:function(){return this.getStyle("label2.padding.left")},getPaddingRight:function(){return this.getStyle("label2.padding.right")},getPaddingTop:function(){return this.getStyle("label2.padding.top")},getPaddingBottom:function(){return this.getStyle("label2.padding.bottom")},getDirection:function(){return this.getStyle("label2.direction")},isFill:function(){return this.getStyle("label2.fill")},getFillColor:function(){return this.getStyle("label2.fill.color")},getGradient:function(){return this.getStyle("label2.gradient")},getGradientColor:function(){return this.getStyle("label2.gradient.color")},getOutlineWidth:function(){return this.getStyle("label2.outline.width")},getOutlineColor:function(){return this.getStyle("label2.outline.color")},getCap:function(){return this.getStyle("label2.cap")},getJoin:function(){return this.getStyle("label2.join")},getAlpha:function(){return this.getStyle("label2.alpha")},isShadowable:function(){return this.getStyle("label2.shadowable")}}),x.vector.HTMLAlarmAttachment=function(t,e){x.vector.HTMLAlarmAttachment.superClass.constructor.call(this,t,e),this._triangleDiv=x.Util.createDiv(),this._roundDiv=x.Util.createDiv(),this._contentDiv=x.Util.createDiv(),x.Util.setCSSStyle(this._triangleDiv,"border-style","solid"),x.Util.setCSSStyle(this._triangleDiv,"pointer-events","none"),x.Util.setCSSStyle(this._contentDiv,"white-space","nowrap"),x.Util.setCSSStyle(this._contentDiv,"pointer-events","none");this._network.getView().appendChild(this._roundDiv),this._roundDiv.appendChild(this._contentDiv)},Y.ext("twaver.vector.HTMLAlarmAttachment",x.vector.AlarmAttachment,{validate:function(){this.getFont("alarm.font");var t=this._network.getAlarmLabel(this._element);this._contentDiv.innerHTML=t,this._contentDiv.style.visibility="hidden",x.vector.HTMLAlarmAttachment.superClass.validate.call(this)},getContentWidth:function(){return this._contentDiv.scrollWidth||parseInt(x.Util.getCSSStyle(this._contentDiv.firstChild,"width"))},getContentHeight:function(){return this._contentDiv.scrollHeight||parseInt(x.Util.getCSSStyle(this._contentDiv.firstChild,"height"))},paint:function(t){var e=this.isFill(),i=this.getOutlineWidth(),n=this._contentRect;this.getElementUI().setShadow(this,t),(0<i||e)&&(R.drawRoundRect(t,n.x,n.y,n.width,n.height,this.getCornerRadius()),this._pointers&&(o=this._ui.getZoomPointers(this,this._pointers),t.moveTo(o[0].x,o[0].y),t.lineTo(o[1].x,o[1].y),t.lineTo(o[2].x,o[2].y)),t.closePath(),0<i&&(t.lineWidth=i,t.strokeStyle=this.getOutlineColor(),t.lineCap=this.getCap(),t.lineJoin=this.getJoin(),t.stroke()),e&&(a=this.getFillColor(),(s=this.getGradient())?R.fill(t,a,s,this.getGradientColor(),this._viewRect):t.fillStyle=a,t.fill()));this.getFont("alarm.font"),this._network.getAlarmLabel(this._element);var o=this._network.getViewRect().x,i=this._network.getViewRect().y,e=this._network.getZoom(),s=this._contentRect.x+this._contentRect.width/2,a=this._contentRect.y+this._contentRect.height/2,o=s*e-o-this._contentDiv.offsetWidth/2*e+"px",i=a*e-i-this._contentDiv.offsetHeight/2*e+"px";this._contentDiv.style.left=o,this._contentDiv.style.top=i,this._contentDiv.style.setProperty("-webkit-transform","scale("+e+")",null),this._contentDiv.style.setProperty("-webkit-transform-origin","0 0",null),this._network._debug&&R.strokeRect(t,this._contentRect,"#DDDDDD"),x.vector.AlarmAttachment.superClass.paint.apply(this,arguments)},setVisibility:function(t){this._contentDiv.style.visibility=t},dispose:function(){this._network.getView().removeChild(this._roundDiv)},getView:function(){return this._roundDiv}}),x.vector.BaseZoomManager=function(t){this.network=t,this.visibilityThresholds=t.visibilityThresholds},Y.ext("twaver.vector.BaseZoomManager",Object,{getZoom:function(){return this.network.getZoom()},getGraphicsZoom:function(){return 1},getSizeZoom:function(t){return 1},getAttachmentSizeZoom:function(t){t=t.getElementUI();return this.getSizeZoom(t)},getLocationZoom:function(t){return 1},_getZoomVisibilityThresholds:function(){return this.network.getZoomVisibilityThresholds()},_convertPointFromView:function(t){return{x:t.x*this.getGraphicsZoom()-this.network.getViewRect().x,y:t.y*this.getGraphicsZoom()-this.network.getViewRect().y}},_getElementViewRect:function(t,e){var i=this.getLocationZoom(t),n=this.getSizeZoom(t);if(1==i&&1==n)return e;var o=this._getZoomPoint(t),t=o.x,o=o.y;return null==e&&console.log("View rect is null"),{x:t*i+(e.x-t)*n,y:o*i+(e.y-o)*n,width:e.width*n,height:e.height*n}},_invalidateZoom:function(){this.network.invalidateElementUIs()},_getGroupChildrenRects:function(t){var e=new ie;return t.getChildren().forEach(function(t){t instanceof Re&&(!(t=this.network.getElementUI(t))||(t=t.getZoomViewRect(this))&&e.add(t))},this),e},_zoomGraphicsBegin:function(t){var e=this.network,i=this.getGraphicsZoom();t.scale(i,i),t.translate(-e.viewRect.x/i,-e.viewRect.y/i)},_getEditZoomPoints:function(t,e){var i=this.getLocationZoom(t),n=this.getSizeZoom(t);if(1==i&&1==n||t instanceof x.vector.LinkUI&&!(t instanceof x.vector.ShapeLinkUI))return e;var o=(t=t instanceof x.vector.ShapeLinkUI?b.getCenterPoint(b.getRect(e)):this._getZoomPoint(t)).x,s=t.y;if(e.forEach){var a,r=new ie;return e.forEach(function(t){t instanceof ie?(a=new ie,t.forEach(function(t){a.add({x:o*i+(t.x-o)*n,y:s*i+(t.y-s)*n})}),r.add(a)):r.add({x:o*i+(t.x-o)*n,y:s*i+(t.y-s)*n})}),r}return e.x?{x:o*i+(e.x-o)*n,y:s*i+(e.y-s)*n}:void 0},_getShapeNodeZoomPoints:function(t,e,i){var n=this.getLocationZoom(t),o=this.getSizeZoom(t);if(1==n&&1==o)return e;i&&(n=1/n,o=1/o);var s,i=b.getRect(e),a=i.x+i.width/2,r=i.y+i.height/2,h=new ie;return e.forEach(function(t){t instanceof ie?(s=new ie,t.forEach(function(t){s.add({x:a*n+(t.x-a)*o,y:r*n+(t.y-r)*o})}),h.add(s)):h.add({x:a*n+(t.x-a)*o,y:r*n+(t.y-r)*o})}),h},_getShapeLinkZoomPoints:function(t,e){var i=this.getLocationZoom(),n=i;if(1==i&&1==n)return t;e&&(i=1/i,n=1/n);var o,e=b.getRect(t),s=e.x+e.width/2,a=e.y+e.height/2,r=new ie;return t.forEach(function(t){t instanceof ie?(o=new ie,t.forEach(function(t){o.add({x:s*i+(t.x-s)*n,y:a*i+(t.y-a)*n})}),r.add(o)):r.add({x:s*i+(t.x-s)*n,y:a*i+(t.y-a)*n})}),r},_getLogicalPoint:function(t,e){var i=e?this.getZoom():this.getGraphicsZoom(),n=this.network;if(g.isTouchable&&t.changedTouches&&0<t.changedTouches.length){var o=n._view.getBoundingClientRect(),s=t.changedTouches[0],a=g.isAndroid?0:lt.scrollLeft(),e=g.isAndroid?0:lt.scrollTop();return{x:(s.clientX+n.viewRect.x-o.left-a)/i,y:(s.clientY+n.viewRect.y-o.top-e)/i}}return g.isFirefox?{x:(t.layerX+n.viewRect.x)/i,y:(t.layerY+n.viewRect.y)/i}:{x:(t.offsetX+n.viewRect.x)/i,y:(t.offsetY+n.viewRect.y)/i}},_getVisibleRect:function(t){return t},_getElementZoomRect:function(t,e){var i=this.getLocationZoom(t),n=this.getSizeZoom(t);if(1==i&&1==n)return Y.cloneRect(e);var o=null!=t?this._getZoomPoint(t):{x:e.x+e.width/2,y:e.y+e.height/2},t=o.x,o=o.y;return{x:t*i+(e.x-t)*n,y:o*i+(e.y-o)*n,width:e.width*n,height:e.height*n}},_reverseElementZoomRect:function(t,e){var i=this.getLocationZoom(t),n=this.getSizeZoom(t);if(1==i&&1==n)return Y.cloneRect(e);var o=null!=t?this._getZoomPoint(t):{x:e.x+e.width/2,y:e.y+e.height/2},t=o.x,o=o.y;return{x:t+(e.x-t*i)/n,y:o+(e.y-o*i)/n,width:e.width/n,height:e.height/n}},_getZoomContentRect:function(t,e,i,n,o,s){var a=this.getSizeZoom(t.getElementUI()),r=this.getAttachmentSizeZoom(t),h=t.getElementUI();return null==s?h instanceof x.vector.GroupUI&&h._shapeRect?{x:n.x*o+(e.x-n.x)+(i.x-e.x)*r,y:n.y*o+(e.y-n.y)+(i.y-e.y)*r,width:i.width,height:i.height}:{x:n.x*o+(e.x-n.x)*a+(i.x-e.x)*r,y:n.y*o+(e.y-n.y)*a+(i.y-e.y)*r,width:i.width,height:i.height}:{x:n.x*o+(e.x-n.x)*a+(i.x-e.x)*r,y:n.y*o+(e.y-n.y)*a+(i.y-e.y)*r+s*(t.textHeight-4)*r,width:i.width,height:t.textHeight}},_getAttachmentZoomRect:function(t,e,i){var n=this.getLocationZoom(t.getElementUI()),o=(t.getElementUI(),this.getSizeZoom(t.getElementUI())),s=this.getAttachmentSizeZoom(t),a=t._pointers;if(1==n&&1==s&&1==o)return null==i?e:{x:e.x,y:e.y+i*(t.textHeight-4),width:e.width,height:t.textHeight};var r=t.getElementUI(),s=this._getZoomPoint(r,t),o=(s.x,s.y,t.getPosition?t.getPosition():"center"),o=a?a[0]:Oe.get(o,e);return null==i?r instanceof x.vector.LinkUI||r instanceof x.vector.GroupUI&&r._shapeRect?this._getZoomContentRect(t,o,e,s,1):this._getZoomContentRect(t,o,e,s,n):this._getZoomContentRect(t,o,e,s,n,i)},_getZoomPoint:function(t,e){var i,n=t._element;if(n instanceof x.Follower&&n.getHost()&&n.getHost()instanceof x.Grid)return{x:(i=n.getHost().getRect()).x+i.width/2,y:i.y+i.height/2};if(i=t.getBodyRect(),t instanceof x.vector.LinkUI&&e&&e.getPosition){e.getXOffset(),e.getYOffset();if("from"===e.getPosition())return t._fromPoint;if("to"===e.getPosition())return t._toPoint}return{x:i.x+i.width/2,y:i.y+i.height/2}},_getZoomPointers:function(t,e,i){if(i){var n=this._getZoomPoint(e),o=this.getLocationZoom(e),s=this.getSizeZoom(e),a=this.getAttachmentSizeZoom(t),t=i[0];return e instanceof x.vector.LinkUI?[{x:n.x+(t.x-n.x)*s,y:n.y+(t.y-n.y)*s},{x:n.x+(t.x-n.x)*s+(i[1].x-t.x)*a,y:n.y+(t.y-n.y)*s+(i[1].y-t.y)*a},{x:n.x+(t.x-n.x)*s+(i[2].x-t.x)*a,y:n.y+(t.y-n.y)*s+(i[2].y-t.y)*a}]:e instanceof x.vector.GroupUI&&e._shapeRect?[{x:n.x+(t.x-n.x),y:n.y+(t.y-n.y)},{x:n.x+(t.x-n.x)+(i[1].x-t.x)*a,y:n.y+(t.y-n.y)+(i[1].y-t.y)*a},{x:n.x+(t.x-n.x)+(i[2].x-t.x)*a,y:n.y+(t.y-n.y)+(i[2].y-t.y)*a}]:[{x:n.x*o+(t.x-n.x)*s,y:n.y*o+(t.y-n.y)*s},{x:n.x*o+(t.x-n.x)*s+(i[1].x-t.x)*a,y:n.y*o+(t.y-n.y)*s+(i[1].y-t.y)*a},{x:n.x*o+(t.x-n.x)*s+(i[2].x-t.x)*a,y:n.y*o+(t.y-n.y)*s+(i[2].y-t.y)*a}]}},_getZoomHotSpot:function(t,e){if(e){var i=this._getZoomPoint(t),n=this.getLocationZoom(t),t=this.getSizeZoom(t);return{x:i.x*n+(e.x-i.x)*t,y:i.y*n+(e.y-i.y)*t}}return null},limitZoom:function(t){return t},_isVisible:function(t){var e=this._getZoomVisibilityThresholds(),t=e[t];if(null!=t){e=e.zoomName;if(("sizeZoom"==e?this.getSizeZoom():"locationZoom"==e?this.getLocationZoom():"graphicsZoom"==e?this.getGraphicsZoom():this.getZoom())<t)return!1}return!0},isElementVisible:function(t){var e=this.getZoom(),e=this._isVisible("element",e);return e&&t instanceof x.Link?this.isLinkVisible(t):e},isLinkVisible:function(t){var e=this.getZoom();return this._isVisible("link",e)},isLabelVisible:function(t){var e=this.getZoom();return this._isVisible("label",e)},isAttachmentVisible:function(t){var e=this.getZoom();return this._isVisible("attachment",e)},isAlarmBalloonVisible:function(t){var e=this.getZoom();return this._isVisible("alarmBallon",e)},_getAttachmentOutLineWidth:function(t){return t.getOutlineWidth()},_getAttachmentZoomOutLineRect:function(t,e){var i=this.getLocationZoom(t.getElementUI()),n=this.getAttachmentSizeZoom(t);if(1==i&&1==n)return e;i=this._getAttachmentZoomRect(t,e,null),e=t.getElement();return!this.isAttachmentVisible(e)||(t instanceof x.vector.LabelAttachment||t instanceof x.vector.Label2Attachment)&&!this.isLabelVisible(e)||t instanceof x.vector.AlarmAttachment&&!this.isAlarmBalloonVisible(e)?{x:i.x,y:i.x,width:0,height:0}:{x:i.x,y:i.y,width:i.width*n,height:i.height*n}},_drawText:function(t,e,i,n,o,s,a,r){var h=this.getLocationZoom(t.getElementUI()),t=this.getAttachmentSizeZoom(t);1!=h&&1!=t?(e.translate(n.x,n.y),e.scale(t,t),R.drawText(e,i,{x:0,y:0,width:n.width,height:n.height},o,s,a),e.scale(1/t,1/t),e.translate(-n.x,-n.y)):R.drawText(e,i,n,o,s,a,r)},_getOffset:function(t,e){var i=this.getLocationZoom();return{x:(t.x-e.x)/i,y:(t.y-e.y)/i}}});var Oe={"topleft.topleft":function(t){return{x:t.x+t.width,y:t.y+t.height}},"topleft.topright":function(t){return{x:t.x,y:t.y+t.height}},"top.top":function(t){return{x:t.x+t.width/2,y:t.y+t.height}},"topright.topleft":function(t){return{x:t.x+t.width,y:t.y+t.height}},"topright.topright":function(t){return{x:t.x,y:t.y+t.height}},topleft:function(t){return{x:t.x+t.width/2,y:t.y+t.height/2}},top:function(t){return{x:t.x+t.width/2,y:t.y+t.height/2}},topright:function(t){return{x:t.x+t.width/2,y:t.y+t.height/2}},"topleft.bottomleft":function(t){return{x:t.x+t.width,y:t.y}},"topleft.bottomright":function(t){return{x:t.x,y:t.y}},"top.bottom":function(t){return{x:t.x+t.width/2,y:t.y}},"topright.bottomleft":function(t){return{x:t.x+t.width,y:t.y}},"topright.bottomright":function(t){return{x:t.x,y:t.y}},"left.left":function(t){return{x:t.x+t.width,y:t.y+t.height/2}},left:function(t){return{x:t.x+t.width/2,y:t.y+t.height/2}},"left.right":function(t){return{x:t.x,y:t.y+t.height/2}},center:function(t){return{x:t.x+t.width/2,y:t.y+t.height/2}},"right.left":function(t){return{x:t.x+t.width,y:t.y+t.height/2}},right:function(t){return{x:t.x+t.width/2,y:t.y+t.height/2}},"right.right":function(t){return{x:t.x,y:t.y+t.height/2}},"bottomleft.topleft":function(t){return{x:t.x+t.width,y:t.y+t.height}},"bottomleft.topright":function(t){return{x:t.x,y:t.y+t.height}},"bottom.top":function(t){return{x:t.x+t.width/2,y:t.y+t.height}},"bottomright.topleft":function(t){return{x:t.x+t.width,y:t.y+t.height}},"bottomright.topright":function(t){return{x:t.x,y:t.y+t.height}},bottomleft:function(t){return{x:t.x+t.width/2,y:t.y+t.height/2}},bottom:function(t){return{x:t.x+t.width/2,y:t.y+t.height/2}},bottomright:function(t){return{x:t.x+t.width/2,y:t.y+t.height/2}},"bottomleft.bottomleft":function(t){return{x:t.x+t.width,y:t.y}},"bottomleft.bottomright":function(t){return{x:t.x,y:t.y}},"bottom.bottom":function(t){return{x:t.x+t.width/2,y:t.y}},"bottomright.bottomleft":function(t){return{x:t.x+t.width,y:t.y}},"bottomright.bottomright":function(t){return{x:t.x,y:t.y}},from:function(t){return{x:t.x+t.width/2,y:t.y+t.height/2}},to:function(t){return{x:t.x+t.width/2,y:t.y+t.height/2}},get:function(t,e){if(!e)throw"rect can not be null";var i=Oe[t];if(i)return i(e);throw"Can not resolve '"+t+"' position"}};x.vector.PhysicalZoomManager=function(t){x.vector.PhysicalZoomManager.superClass.constructor.apply(this,arguments)},Y.ext("twaver.vector.PhysicalZoomManager",x.vector.BaseZoomManager,{getGraphicsZoom:function(){return this.getZoom()},_invalidateZoom:function(){}}),x.vector.LogicalZoomManager=function(t,e){x.vector.LogicalZoomManager.superClass.constructor.apply(this,arguments),this.sizeChange=e},Y.ext("twaver.vector.LogicalZoomManager",x.vector.BaseZoomManager,{getLocationZoom:function(t){return this.getZoom()},getSizeZoom:function(t){return this.sizeChange?this.getZoom():1}}),x.vector.MixedZoomManager=function(t,e){x.vector.MixedZoomManager.superClass.constructor.call(this,t,e)},Y.ext("twaver.vector.MixedZoomManager",x.vector.LogicalZoomManager,{}),function(){var t,e=x.vector.LogicalZoomManager.prototype,i=x.vector.PhysicalZoomManager.prototype,n=x.vector.MixedZoomManager.prototype;for(t in i)"function"==typeof i[t]&&"constructor"!=t&&(e.hasOwnProperty(t)||i.hasOwnProperty(t))&&function(t){n[t]=function(){return(1<this.getZoom()?e:i)[t].apply(this,arguments)}}(t);n._invalidateZoom=function(){this.network.invalidateElementUIs()}}(),x.vector.interaction.BaseInteraction=function(t){this.network=t},Y.ext("twaver.vector.interaction.BaseInteraction",Object,{setUp:function(){},tearDown:function(){},repaint:function(){this.network.repaintTopCanvas()},getOffset:function(t,e){return this.network.getOffset(t,e)},convertPointFromView:function(t){return this.network.convertPointFromView(t)},convertFromUIToMarkerRect:function(t,e,i,n){var o=this.network.zoomManager,s=o.getLocationZoom(),a=o.getGraphicsZoom(),n=o.getSizeZoom(this.network.getElementUI(n));return{x:t.x*s*a-this.network.getViewRect().x+e*s*a,y:t.y*s*a-this.network.getViewRect().y+i*s*a,width:t.width*n*a,height:t.height*n*a}},getMarkerPoint:function(t){if(g.isTouchable&&t.changedTouches&&0<t.changedTouches.length){var e=t.changedTouches[0];return{x:e.clientX,y:e.clientY}}return g.isFirefox?{x:t.layerX,y:t.layerY}:{x:t.offsetX,y:t.offsetY}},paint:function(t){},addListener:function(){for(var t=0;t<arguments.length;t++){var e=arguments[t];m.addEventListener(e,"handle_"+e,this.network.getView(),this)}},removeListener:function(){for(var t=0;t<arguments.length;t++)m.removeEventListener(arguments[t],this.network.getView(),this)},_handle_mousedown:function(t){0===t.button&&(this._startLogical=this.network.getLogicalPoint2(t),this._startClient=m.getClientPoint(t),this._startLogical&&m.handle_mousedown(this,t))},_handle_mousemove:function(t){this._endLogical={x:this._startLogical.x+(t.clientX-this._startClient.x)/this.network.getGraphicsZoom(),y:this._startLogical.y+(t.clientY-this._startClient.y)/this.network.getGraphicsZoom()}},_handle_mouseup:function(t){delete this._startClient,delete this._startLogical,delete this._endLogical}}),x.vector.interaction.DefaultInteraction=function(t,e){x.vector.interaction.DefaultInteraction.superClass.constructor.call(this,t),this.lazyMode=e},Y.ext("twaver.vector.interaction.DefaultInteraction",x.vector.interaction.BaseInteraction,{setUp:function(){this.addListener("mousedown","mouseover","mouseout","keydown"),g.isFirefox?m.addEventListener("DOMMouseScroll","handleMouseWheel",this.network.getView(),this):m.addEventListener("mousewheel","handleMouseWheel",this.network.getView(),this),m.addEventListener("mouseup","handle_mouseup",window,this),m.addEventListener("dblclick","handleDoubleClicked",this.network.getView(),this),m.addEventListener("blur","handle_blur",this.network.getView(),this),this._oldCursor=this.network.getView().style.cursor,this.network.addPropertyChangeListener(this.handleViewRectChange,this),this.validateScrollBar(),this.network.addMarker(this),this.network.getView().oncontextmenu=function(t){t.preventDefault()},this._createZoomDiv()},tearDown:function(){this.removeListener("mousedown","mouseover","mouseout","keydown"),g.isFirefox?m.removeEventListener("DOMMouseScroll",this.network.getView(),this):m.removeEventListener("mousewheel",this.network.getView(),this),m.removeEventListener("mouseup",window,this),m.removeEventListener("dblclick",this.network.getView(),this),m.removeEventListener("blur",this.network.getView(),this),this.network.removePropertyChangeListener(this.handleViewRectChange,this),this.end(),this.network.removeMarker(this),this._zoomDiv=null},_createZoomDiv:function(){var t,e,i,n,o;null==this._zoomDiv&&(this._zoomDiv=E.createElement("div"),this._zoomLabel=E.createElement("span"),this._zoomLabel.style.display="block",this._zoomLabel.style.textAlign="center",(t=E.createElement("button")).innerHTML="Reset to default",this._zoomDiv.appendChild(this._zoomLabel),this._zoomDiv.appendChild(t),e=ye,(i=this._zoomDiv.style).position="absolute",i.color=e.TOOLTIP_COLOR,i.background=e.TOOLTIP_BACKGROUND,i.fontSize=e.TOOLTIP_FONT_SIZE,i.padding=e.TOOLTIP_PADDING,i.border=e.TOOLTIP_BORDER,i.borderRadius=e.TOOLTIP_BORDER_RADIUS,i.boxShadow=e.TOOLTIP_BOX_SHADOW,i.zIndex=e.TOOLTIP_ZINDEX,i.setProperty&&i.setProperty("-webkit-box-shadow",e.TOOLTIP_BOX_SHADOW,null),n=this,t.onclick=function(t){n.network.setZoom(1),n._setZoomDivVisible(!1)},(o=this._zoomDiv)._clearFunc=function(){if(o.style.opacity=parseFloat(o.style.opacity)-.05,parseFloat(o.style.opacity)<=.05)return n._setZoomDivVisible(!1),void(o._clearTimeout=null);o._clearTimeout=setTimeout(o._clearFunc,100)},o.onmouseover=function(t){for(var e=(t=t||window.event).relatedTarget||t.fromElement;e&&e!=o;)e=e.parentNode;e!=o&&(o._clearTimeout&&(clearTimeout(o._clearTimeout),o._clearTimeout=null),o.style.opacity=1)},o.onmouseout=function(t){for(var e=(t=t||window.event).relatedTarget||t.toElement;e&&e!=o;)e=e.parentNode;e!=o&&(o._clearTimeout=setTimeout(o._clearFunc,10))})},_isZoomDivVisible:function(){return null!=this._zoomDiv&&null!=this._zoomDiv.parentNode},_getZoomDiv:function(){return this._zoomDiv||this._createZoomDiv(),this._zoomDiv},_setZoomDivVisible:function(t,e,i){var n=this._getZoomDiv();t?(this._zoomLabel.innerHTML=i,n.style.opacity=1,this._isZoomDivVisible()||this.network.getView().appendChild(n),n.style.left=ye.TOOLTIP_XOFFSET+"px",n.style.top=ye.TOOLTIP_YOFFSET+"px",n._clearTimeout&&(clearTimeout(n._clearTimeout),n._clearTimeout=null),n._clearTimeout=setTimeout(n._clearFunc,250)):n.parentNode&&n.parentNode.removeChild(n)},handleViewRectChange:function(t){"viewRect"!=t.property&&"canvasSizeChange"!=t.property||this.validateScrollBar()},getScrollBarWidth:function(){return this.network.getScrollBarWidth()},getScrollBarColor:function(){return"#cccccc"},validateScrollBar:function(){var t,e,i,n,o,s,a,r,h,l,c,u,d,_,g,f,A,p,m,v,y,w;this.hThumbRect=null,this.vThumbRect=null,0!=this.network.isScrollBarVisible()&&(t=this.network.getViewRect().height,e=this.network.getViewRect().width,i=this.network.getViewRect().x,n=this.network.getViewRect().y,w=this.network.getCanvasSize(),o=(v=this.network._unionBounds).x,s=v.y,a=v.width,r=v.height,h=w.width,l=w.height,d=!1,_=o<i||e+i<h,(s<n||n+t<l)&&(d=!0),p=A=f=g=0,m=c=e,v=u=t,w=this.getScrollBarWidth(),_&&(d&&(m-=w),A=o<i&&h<i+e?m-(g=y=(y=i-o)*m/(y+c)):i<o&&i+e<h?(g=0,m-(y=m*(y=h-(i+e))/(y+c))):c-(g=m*(i-o)/a)-m*(h-(i+e))/a,this.hThumbRect={x:g,y:f=u-(p=w),width:A,height:p}),p=A=f=g=0,m=c,v=u,d&&(_&&(v-=w),p=s<n&&l<n+t?v-(f=y=v*(y=n-s)/(y+u)):n<s&&n+t<l?(f=0,v-(y=v*(y=l-(n+t))/(y+u))):v-(f=v*(n-s)/r)-v*(l-(n+t))/r,this.vThumbRect={x:g=c-(A=w),y:f,width:A,height:p}),this.network.setHScrollBarVisible(null!=this.hThumbRect),this.network.setVScrollBarVisible(null!=this.vThumbRect)),this.repaint()},scrollXOffset:function(t){var e=this.network.getViewRect().height,i=this.network.getViewRect().width,n=this.network.getViewRect().x,o=this.network.getViewRect().y,t=t?-30:30;this.network.setViewRect(n+t,o,i,e)},scrollYOffset:function(t){var e=this.network.getViewRect().height,i=this.network.getViewRect().width,n=this.network.getViewRect().x,o=this.network.getViewRect().y,t=t?-30:30;this.network.setViewRect(n,o+t,i,e)},handle_mouseover:function(t){1!=this.scrollBarVisible&&(this.scrollBarVisible=!0,this.repaint())},handle_mouseout:function(t){0!=this.scrollBarVisible&&null==this.vBarDownPoint&&null==this.hBarDownPoint&&(this.scrollBarVisible=!1,this.repaint(),this.end(t))},handle_keydown:function(t){this.currentKeyEvent=t,this.addListener("keyup"),dt.handleKeyDown(this.network,t)},handle_keyup:function(t){this.currentKeyEvent=null,this.removeListener("keyup")},start:function(t){this.end(t,!0),this.lastPoint=this.network.getLogicalPoint2(t),this.startPoint=this.network.getLogicalPoint2(t),this.lastPanPoint=this.getMarkerPoint(t),this.lazyMode&&(this.pressPoint=this.lastPoint),m.addEventListener("mousemove","handle_mousemove",window,this)},end:function(t,e){var i,n,o,s;this.vBarDownPoint=null,this.hBarDownPoint=null,this.network.state.panning&&(this.network.state.panning=!1,this.network.invalidateElementUIs(!0)),e||(this.network.getView().style.cursor=this._oldCursor),this.isMoving&&(this.lazyMode?null!=this.dragPoint&&null!=this.pressPoint&&(e=(n=(i=this).getOffset(this.dragPoint,this.pressPoint)).x,n=n.y,this.network.moveSelectedElements(e,n,this.network.isLazyMoveAnimate(),function(){i.network.fireInteractionEvent({kind:"lazyMoveEnd",event:t}),i.network.setMovingElement(!1)})):this.network.isMovingElement()&&(this.network.setMovingElement(!1),this.network.fireInteractionEvent({kind:"liveMoveEnd",event:t})),this.isParenting()&&(null==this.parent&&(this.parent=this.network.getCurrentSubNetwork()),(i=this).network.getMovableSelectedElements().forEach(function(t){t.setParent(i.parent)},this.network)),this.parentProcess(t,!0),this.isParenting()&&this.repaint(),this.network.invalidateCanvasSize(),this.lastPoint=null,this.dragPoint=null,this.pressPoint=null,this.repaint()),this.isSelecting&&this.startPoint&&(this.endPoint&&this.startPoint.x!==this.endPoint.x&&this.startPoint.y!==this.endPoint.y&&(n=b.getRect([this.startPoint,this.endPoint]),(n=this.network.getElementsAtRect(n,this.getIntersectMode(),this.network.getRectSelectFilter()))&&0<n.size()&&(o=this.network.getSelectionModel(),s=o.toSelection(),n.forEach(function(t){o.contains(t)?s.remove(t):s.add(t)},this),o.setSelection(s)),this.network.fireInteractionEvent({kind:"selectEnd",event:t})),this.network.setSelectingElement(!1),this.startPoint=null,this.endPoint=null,this.repaint()),this.isMouseDown=!1,m.removeEventListener("mousemove",window,this)},_isDragToSelect:function(t){return!this.network._dragToPan},handle_mousedown:function(t){if(g.isTouchable||0===t.button||!this.network.isSelectingElement()){var e=this.network;if(t.target==e.getView()||t.target==e._topCanvas||t.target==e._rootCanvas){if(this.isMoving=!1,this.isSelecting=!1,this.hBarDownPoint=null,this.vBarDownPoint=null,this._setZoomDivVisible(!1),!this.network.isValidEvent(t)){var i=this.getMarkerPoint(t);return this.start(t),null!=this.vThumbRect&&b.containsPoint(this.vThumbRect,i.x,i.y)&&(this.vBarDownPoint={x:t.screenX,y:t.screenY},this.vBarDownOffset=this.vBarDownPoint.y-this.vThumbRect.y),void(null!=this.hThumbRect&&b.containsPoint(this.hThumbRect,i.x,i.y)&&(this.hBarDownPoint={x:t.screenX,y:t.screenY},this.hBarDownOffset=this.hBarDownPoint.x-this.hThumbRect.x))}this.network.isFocusOnClick()&&x.Util.setFocus(this.network.getView());var n=this.network.getElementAt(t),o=this.network.getElementsAt(t);if(o&&o instanceof ie)for(var s=0;s<o.size();s++){var a=o.get(s);if(this.network.getElementBox().getSelectionModel().isSelectable(a)){n=a;break}}this.network.isSelectingElement()||this.network.isEditingElement()||null==n||(this.network.isMovable(n)&&this.network.getElementBox().getSelectionModel().isSelectable(n)?this.isMoving=!0:this.network.getView().style.cursor="pointer",this.start(t)),this.network.isSelectingElement()||this.network.isEditingElement()||(i=this.network.getSelectionModel(),null==n||n&&!this.network.getElementBox().getSelectionModel().isSelectable(n)?(Y.isCtrlDown(t)?this.isSelecting=!0:this._isDragToSelect(t)?(this.isSelecting=!0,i.clearSelection()):this.network.isRectSelectEnabled()&&(i.clearSelection(),this.network.getView().style.cursor="pointer"),e._rectSelectEnabled&&this.start(t)):Y.isCtrlDown(t)?i.contains(n)?i.removeSelection(n):i.appendSelection(n):i.contains(n)||i.setSelection(n)),this.handleClicked(t,n),this.isMouseDown=!0}}else this.end(t)},handle_mousemove:function(t){if(this._setZoomDivVisible(!1),e=this.network.getLogicalPoint2(t)){var e,i,n={x:t.screenX,y:t.screenY},o=this.network.getCanvasSize(),s=this.network.getViewRect().height,a=this.network.getViewRect().width,r=this.getScrollBarWidth();if(null!=this.hBarDownPoint){var h=n.x-this.hBarDownPoint.x;return this.hBarDownPoint=n,void this.network.setViewOffSet(h*o.width/(a-r),0)}if(null!=this.vBarDownPoint){a=n.y-this.vBarDownPoint.y;return this.vBarDownPoint=n,void this.network.setViewOffSet(0,a*o.height/(s-r))}this.network.isSelectingElement()||this.network.isEditingElement()||!this.isMoving||!this.isMouseDown||Y.isCtrlDown(t)?this.isSelecting&&(Y.isCtrlDown(t)||this._isDragToSelect())?(this.network.setSelectingElement(!0),null==this.endPoint?this.network.fireInteractionEvent({kind:"selectStart",event:t}):this.network.fireInteractionEvent({kind:"selectBetween",event:t}),this.endPoint=e,this.repaint()):this.isMoving||this.isSelecting||!this.isMouseDown?this.end(t):this.lastPanPoint&&this.network._dragToPan&&(e=this.getMarkerPoint(t))&&(r=e.x-this.lastPanPoint.x,i=e.y-this.lastPanPoint.y,this.network.panByOffset(-r,-i),this.network.fireInteractionEvent({kind:"panning",event:t}),this.network.state.panning=!0,this.lastPanPoint=e):(i=this.getOffset(e,this.lastPoint),this.xoffset=i.x,this.yoffset=i.y,Math.abs(this.xoffset)<1&&Math.abs(this.yoffset)<1||(this.lazyMode?null==this.dragPoint?(this.network.fireInteractionEvent({kind:"lazyMoveStart",event:t}),this.network.setMovingElement(!0)):this.network.fireInteractionEvent({kind:"lazyMoveBetween",event:t}):(this.lastPoint=e,this.network.isMovingElement()?this.network.fireInteractionEvent({kind:"liveMoveBetween",event:t}):(this.network.setMovingElement(!0),this.network.fireInteractionEvent({kind:"liveMoveStart",event:t})),this.network.moveSelectedElements(this.xoffset,this.yoffset)),this.parentProcess(t,!1),this.lazyMode&&(this.dragPoint=e),(this.lazyMode||this.isParenting())&&this.repaint()))}},handleMouseWheel:function(t){var e,i;E.activeElement===this.network.getView()&&(this.network._wheelToZoom?(m.preventDefault(t),e={x:t.offsetX||t.layerX,y:t.offsetY||t.layerY},i=this.network.getZoom(),t.wheelDelta&&0<t.wheelDelta||t.detail&&t.detail<0?this.network.setZoom(1.1*i,e):this.network.setZoom(i/1.1,e),this._setZoomDivVisible(this.network.isZoomDivVisible(),t,"Zoom : "+parseFloat(this.network.getZoom().toFixed(4)))):this._handleMouseWheelScroll(t))},_handleMouseWheelScroll:function(t){m.preventDefault(t);var e,i=this._getVisibleScrollBar();null!=i&&(e=t.wheelDelta?0<t.wheelDelta:t.detail<0,"v"==i?this.scrollYOffset(e):this.scrollXOffset(e))},handle_mouseup:function(t){this.end(t)},isParenting:function(){return this.pressPoint&&null!=this.currentKeyEvent&&80===this.currentKeyEvent.keyCode},parentProcess:function(t,e){var i=null;this.parent=null;if(!e&&this.isParenting()){var n={},t=this.network.getLogicalPoint2(t);n.x=t.x-1,n.y=t.y-1,n.width=2,n.height=2;var o=this.network.getElementsAtRect(n,!0);if(o&&0<o.size())for(var s=o.size(),a=0;a<s;a++){var r=o.get(a);if(!this.network.getElementBox().getSelectionModel().contains(r)){this.parent=r;break}}}else this.parent=null;null!=this.parent&&(i=this.network.getElementUI(this.parent).getViewRect()),this.parentRect=null==i||e?null:i},getIntersectMode:function(){return"intersect"===this.network.getSelectMode()||"contain"!==this.network.getSelectMode()&&(this.startPoint.x>this.endPoint.x&&this.startPoint.y>this.endPoint.y)},_getVisibleScrollBar:function(){return 0==this.network.isScrollBarVisible()?null:null!=this.vThumbRect?"v":null!=this.hThumbRect?"h":null},paintScroll:function(t){var e,i,n,o,s;0!=this.network.isScrollBarVisible()&&(0==this.scrollBarVisible&&null==this.hBarDownPoint&&null==this.vBarDownPoint||(e=this.getScrollBarWidth(),i=this.network.getViewRect().height,n=this.network.getViewRect().width,t.save(),s=this.getScrollBarColor(),null!=this.hThumbRect&&((o=t.createLinearGradient(this.hThumbRect.x,this.hThumbRect.y,this.hThumbRect.x,this.hThumbRect.y+this.hThumbRect.height)).addColorStop(0,s),o.addColorStop(1,"#666666"),this.paintRoundRect(t,this.getScrollBarColor(),.5,0,i-e,n-e,e,e/2),this.paintRoundRect(t,o,.9,this.hThumbRect.x,this.hThumbRect.y+1,this.hThumbRect.width,this.hThumbRect.height-2,e/2)),null!=this.vThumbRect&&((o=t.createLinearGradient(this.vThumbRect.x,this.vThumbRect.y,this.vThumbRect.x+this.vThumbRect.width,this.vThumbRect.y)).addColorStop(0,s),o.addColorStop(1,"#666666"),this.paintRoundRect(t,this.getScrollBarColor(),.5,n-e,0,e,i-e,e/2),this.paintRoundRect(t,o,.9,this.vThumbRect.x+1,this.vThumbRect.y,this.vThumbRect.width-2,this.vThumbRect.height,e/2)),t.restore()))},paintRoundRect:function(t,e,i,n,o,s,a,r){t.beginPath(),t.globalAlpha=i,t.fillStyle=e,R.drawRoundRect(t,n,o,s,a,r),t.fill()},paint:function(t){if(this.paintScroll(t),this.network.isSelectingElement()){var e,i,n,o;null!=this.startPoint&&null!=this.endPoint&&(n=this.convertPointFromView(this.startPoint),o=this.convertPointFromView(this.endPoint),e=n.x,i=n.y,n=o.x,o=o.y,null!=(n=b.getRect([{x:e,y:i},{x:n,y:o}]))&&(t.beginPath(),u=this.network.getSelectOutlineWidth(),o=this.getIntersectMode()?this.network.getSelectFillColor():null,t.strokeStyle=this.network.getSelectOutlineColor(),t.lineWidth=u,ke.rect(t,n.x,n.y,n.width,n.height,o,this.network.getSelectOutlineColor()),t.closePath()))}else{if(this.lazyMode){if(null==this.pressPoint||null==this.dragPoint)return;t.beginPath();var s=this.getOffset(this.dragPoint,this.pressPoint),a=s.x,r=s.y,h=this.network.getMovableSelectedElements(),l=h.size(),c=this.network.isLazyMoveFill()?this.network.getLazyMoveFillColor():null,u=this.network.getLazyMoveOutlineWidth(),s=this.network.getLazyMoveOutlineColor();t.strokeStyle=s,t.lineWidth=u,t.fillStyle=c;for(var d=0;d<l;d++){var _=h.get(d),_=this.network.getElementUI(_);_&&(g=this.convertFromUIToMarkerRect(_.getViewRect(),a,r),ke.rect(t,g.x,g.y,g.width,g.height))}t.fill(),t.stroke()}var g;this.parentRect&&(t.beginPath(),c=this.network.isLazyMoveFill()?this.network.getLazyMoveFillColor():null,u=this.network.getLazyMoveOutlineWidth(),s=this.network.getLazyMoveOutlineColor(),t.strokeStyle=s,t.lineWidth=u,t.fillStyle=c,g=this.parentRect,ke.rect(t,g.x,g.y,g.width,g.height),t.fill(),t.stroke())}},handleClicked:function(t,e){dt.handleClicked(this.network,t,e)},handleDoubleClicked:function(t){var e=this.network.getElementAt(t);dt.handleDoubleClicked(this.network,t,e)},handle_blur:function(t){this.end()}}),x.vector.interaction.CreateElementInteraction=function(t,i){i=i||x.Node,x.Util.isTypeOf(i,x.Node)?this.elementFunction=function(t){var e=new i;return e instanceof x.Node&&e.setCenterLocation(t),e}:this.elementFunction=i,x.vector.interaction.CreateElementInteraction.superClass.constructor.call(this,t)},Y.ext("twaver.vector.interaction.CreateElementInteraction",x.vector.interaction.BaseInteraction,{setUp:function(){this.addListener("mousedown")},tearDown:function(){this.removeListener("mousedown")},handle_mousedown:function(t){t=this.network.getLogicalPoint2(t);!t||(t=this.elementFunction(t))&&this.network.addElementByInteraction(t)}}),x.vector.interaction.EditInteraction=function(t,e){this.lazyMode=e,this.pointIndex=-1,this.linkPointsType=null,x.vector.interaction.EditInteraction.superClass.constructor.call(this,t)},Y.ext("twaver.vector.interaction.EditInteraction",x.vector.interaction.BaseInteraction,{setUp:function(){this.addListener("mousedown","mouseup","mousemove"),this.oldCursor=this.network.getView().style.cursor,this.network.setHasEditInteraction(!0),this.network.addMarker(this)},tearDown:function(){this.removeListener("mousedown","mouseup","mousemove"),this.network.getView().style.cursor=this.oldCursor,this.network.setHasEditInteraction(!1),this.clear(),this.network.removeMarker(this)},paint:function(t){var e;1==this.lazyMode&&null!=this.resizingRect&&(t.lineWidth=this.network.getResizeLineWidth(),e=this.convertFromUIToMarkerRect(this.resizingRect,0,0,this.node),t.save(),x.Util.rotateCanvas(t,e,this.node.getAngle()),t.beginPath(),ke.rect(t,e.x,e.y,e.width,e.height,null,this.network.getResizeLineColor()),t.restore()),this.isStartRotate&&this.showRotateScale(t)},clear:function(){this.network.setEditingElement(!1),this.network.setRotatingElement(!1),this.isStart=!1,this.isStartRotate=!1,this.node=null,this.shapeNode=null,this.shapeLink=null,this.linkUI=null,this.resizingRect=null,this.resizeDirection=null,this.pointIndex=-1,this._removeCursor(),this.oldCursor=null,this.network.repaintTopCanvas()},_removeCursor:function(){this.cursorID&&(this.network.getView().style.cursor=this.oldCursor||"default",this.cursorID=null),this.resizeDirection=null,this.isCrossCursor=!1},_setCrossCursor:function(){this.isCrossCursor||(this._removeCursor(),this._setCursor("crosshair"),this.isCrossCursor=!0)},_setCursor:function(t){this.cursorID=t,this.network.getView().style.cursor!==this.cursorID&&(this.network.getView().style.cursor=this.cursorID)},isKeyDown:function(t){return Y.isAltDown(t)},handle_mousedown:function(t){if(0===t.button){if(this.isKeyDown(t)&&!this.network.isEditingElement()){var e,i,n,o=this.network.getElementAt(t),s=this.network.getLogicalPoint2(t);return o instanceof x.ShapeNode&&0<(n=this.getPointIndex(this.network.getShapeNodeZoomPoints(o),s,!0))&&(this._handle_mousedown(t),this.pointIndex=n,(this.shapeNode=o).addPoint(s,n),this._setCrossCursor(),this.network.setEditingElement(!0),this.isStart=!0,this.network.fireInteractionEvent({kind:"addPoint",event:t,element:o,pointIndex:n}),this.network.fireInteractionEvent({kind:"liveMovePointStart",event:t,element:o,pointIndex:n})),void(o instanceof x.ShapeLink&&(e=new x.List(o.getPoints()),i=this.network.getElementUI(o),e.add(i.getFromPoint(),0),e.add(i.getToPoint()),0<(n=this.getPointIndex(e,s)-1)&&(this._handle_mousedown(t),this.pointIndex=n,(this.shapeLink=o).addPoint(s,n),this._setCrossCursor(),this.network.setEditingElement(!0),this.isStart=!0,this.network.fireInteractionEvent({kind:"addPoint",event:t,element:o,pointIndex:n}),this.network.fireInteractionEvent({kind:"liveMovePointStart",event:t,element:o,pointIndex:n}))))}!this.network.isEditingElement()||this.isStart||this.isStartRotate||(this.node&&this.resizeDirection?(this.isStart=!0,this._handle_mousedown(t),this.network.fireInteractionEvent({kind:this.lazyMode?"lazyResizeStart":"liveResizeStart",event:t,element:this.node,resizeDirection:this.resizeDirection})):this.shapeNode&&0<=this.pointIndex?this.isKeyDown(t)?(this.shapeNode.removeAt(this.pointIndex),this.network.fireInteractionEvent({kind:"removePoint",event:t,element:this.shapeNode})):(this.isStart=!0,this._handle_mousedown(t),this.network.fireInteractionEvent({kind:"liveMovePointStart",event:t,element:this.shapeNode,pointIndex:this.pointIndex})):this.shapeLink?this.isKeyDown(t)?0<=this.pointIndex&&(this.shapeLink.removeAt(this.pointIndex),this.network.fireInteractionEvent({kind:"removePoint",event:t,element:this.shapeLink})):(this.isStart=!0,this._handle_mousedown(t),this.network.fireInteractionEvent({kind:"liveMovePointStart",event:t,element:this.shapeLink,pointIndex:this.pointIndex})):this.linkUI?(this.isStart=!0,this.network.fireInteractionEvent({kind:"liveMovePointStart",event:t,element:this.linkUI._element})):this.node&&(this.isStartRotate=!0,this._handle_mousedown(t)))}},handle_mouseup:function(t){var e,i,n;this.isStart&&(e=this.network.getLogicalPoint2(t),this.resizingRect?this.lazyMode?this.network.isResizeAnimate()?(n=new x.animate.AnimateBounds((i=this).node,this.resizingRect,function(){i.network.fireInteractionEvent({kind:"lazyResizeEnd",event:t,element:i.node,resizeDirection:i.resizeDirection}),i.clear()}),x.animate.AnimateManager.start(n)):(this.node.setLocation(this.resizingRect.x,this.resizingRect.y),this.node.setSize(this.resizingRect.width,this.resizingRect.height),this.network.fireInteractionEvent({kind:"lazyResizeEnd",event:t,element:this.node,resizeDirection:this.resizeDirection})):(this.node.setLocation(this.resizingRect.x,this.resizingRect.y),this.node.setSize(this.resizingRect.width,this.resizingRect.height),this.network.fireInteractionEvent({kind:"liveResizeEnd",event:t,element:this.node,resizeDirection:this.resizeDirection})):this.shapeNode&&0<=this.pointIndex&&e?(this._resetShapeNodePoints(e),this.network.fireInteractionEvent({kind:"liveMovePointEnd",event:t,element:this.shapeNode,pointIndex:this.pointIndex})):e&&(this.shapeLink||this.linkUI)&&("from"===this.linkPointsType?this._setFromPoint(e):"to"===this.linkPointsType?this._setToPoint(e):"shapeControl"===this.linkPointsType?(this._resetShapeLinkPoints(e),this.network.fireInteractionEvent({kind:"liveMovePointEnd",event:t,element:this.shapeLink,pointIndex:this.pointIndex})):"control"===this.linkPointsType&&rt.isOrthogonalLink(this.linkUI._element)&&this.linkUI.getControlPoint()&&(this._setLinkControlPoint(e),this.network.fireInteractionEvent({kind:"liveMovePointEnd",event:t,element:this.linkUI._element})))),this._handle_mouseup(t),this.clear()},handle_mousemove:function(t){var e=this.network.getEditPointSize();if(this.network.isValidEvent(t)){if(this.isStartRotate&&this.node)return this._handleRotateElement(t,this.node),void(this.network.isShowRotateScale()&&this.repaint());if(this.isStart){if(this.shapeNode&&0<=this.pointIndex)return void this._handleMovingShapeNodePoint(t);if(this.node&&this.resizeDirection)return void this._handleResizing(t);if((this.shapeLink||this.linkUI)&&this.linkPointsType){if("from"===this.linkPointsType)return void this._handleMovingFromPoint(t);if("to"===this.linkPointsType)return void this._handleMovingToPoint(t);if("shapeControl"===this.linkPointsType)return void this._handleMovingShapeLinkPoint(t);if("control"===this.linkPointsType&&rt.isOrthogonalLink(this.linkUI._element)&&this.linkUI.getControlPoint())return void this._handleMovingLinkControlPoint(t)}}if(this.network.isSelectingElement()||this.network.isMovingElement()||0===this.network.getSelectionModel().size())this.clear();else{var i=this.network.getElementAt(t),n=this.network.getElementUI(i);if(n&&n.getEditAttachment()){var o=this.network.getLogicalPoint2(t);if(i instanceof x.Node){if(this.node=i,this._isEditingShapeNode(o)||this._isResizingNode(o))return void this.network.setEditingElement(!0);if(this._isRotatingElement(o))return this.network.setRotatingElement(!0),void this.network.setEditingElement(!0)}else if(i instanceof x.Link){i instanceof x.ShapeLink?this.shapeLink=i:n instanceof x.vector.LinkUI&&(this.linkUI=n);var s=i.getFromAgent()?i.getFromAgent():i.getFromNode(),a=i.getStyle("link.from.xoffset"),r=i.getStyle("link.from.yoffset"),t=this.network.getElementUI(s).getZoomBodyRect(),s={x:t.x+t.width/2+a,y:t.y+t.height/2+r},a=i.getToAgent()?i.getToAgent():i.getToNode(),t=i.getStyle("link.to.xoffset"),r=i.getStyle("link.to.yoffset"),a=this.network.getElementUI(a).getZoomBodyRect(),r={x:a.x+a.width/2+t,y:a.y+a.height/2+r};if(this._contains(o,s,e))return this.linkPointsType="from",this._setCrossCursor(),void this.network.setEditingElement(!0);if(this._contains(o,r,e))return this.linkPointsType="to",this._setCrossCursor(),void this.network.setEditingElement(!0);if(i instanceof x.ShapeLink){if(this._isEditingShapeLink(o))return this.linkPointsType="shapeControl",void this.network.setEditingElement(!0)}else if(n instanceof x.vector.LinkUI){if(rt.isOrthogonalLink(n._element)){n=this.linkUI.getControlPoint();if(n&&this._contains(o,n,e))return this.linkPointsType="control",this._setCrossCursor(),void this.network.setEditingElement(!0)}return void(this.linkPointsType=null)}this.linkPointsType=null}this.clear()}else this.clear()}}},_isRotatingElement:function(t){if(this.network.getRotatePointSize()<=0)return!1;var e=this.network.zoomManager,i=this.network.getElementUI(this.node),n=e.getSizeZoom(i),e=e._getElementZoomRect(i,this.node.getOriginalRect()),i=this.node.getAngle();return this._isRotating(t,"crosshair",e,i,n)},_isRotating:function(t,e,i,n,o){var s=this.network.getRotatePointSize()/this.network.getGraphicsZoom(),a={x:i.x+i.width/2,y:i.y-this.network.getRotatePointOffset()/this.network.getGraphicsZoom()-s},i=this._rotatePoint(a,n,i),s={x:i.x-s,y:i.y-s,width:2*s,height:2*s};return!!b.containsPoint(s,t)&&(this._removeCursor(),this._setCursor(e),!0)},_handleRotateElement:function(t,e){this._handle_mousemove(t);t=this._calculateAngle(this.network.getLogicalPoint2(t),e);e.setAngle(t)},_calculateAngle:function(t,e){e=this.network.getZoomBodyRect(e),e=b.getCenterPoint(e);return Math.round(180*Math.atan2(e.x-t.x,t.y-e.y)/Math.PI+180)},_resetShapeNodePoints:function(t){var e=this.network.getShapeNodeZoomPoints(this.shapeNode);e.set(this.pointIndex,t);t=this.network.getElementUI(this.shapeNode),e=this.network.zoomManager._getShapeNodeZoomPoints(t,e,!0);this.shapeNode.setPoints(e)},_handleMovingShapeNodePoint:function(t){var e=this.network.getLogicalPoint2(t);this._resetShapeNodePoints(e),this.network.fireInteractionEvent({kind:"liveMovePointBetween",e:t,element:this.shapeNode,pointIndex:this.pointIndex})},_resetShapeLinkPoints:function(t){var e=this.network.zoomManager._getShapeLinkZoomPoints(this.shapeLink._points);e.set(this.pointIndex,t);e=this.network.zoomManager._getShapeLinkZoomPoints(e,!0);this.shapeLink.setPoints(e)},_handleMovingShapeLinkPoint:function(t){var e=this.network.getLogicalPoint2(t);this._resetShapeLinkPoints(e),this.network.fireInteractionEvent({kind:"liveMovePointBetween",e:t,element:this.shapeLink,pointIndex:this.pointIndex})},_setLinkControlPoint:function(t){var e=this.linkUI.getControlPoint(),i=this.linkUI.getControlPoint(),n=(this.network.zoomManager,t.x-i.x),i=t.y-i.y;e.x+=n,e.y+=i,this.linkUI.setControlPoint(e)},_handleMovingLinkControlPoint:function(t){var e=this.network.getLogicalPoint2(t);this._setLinkControlPoint(e),this.network.fireInteractionEvent({kind:"liveMovePointBetween",e:t,element:this.linkUI._element})},_setFromPoint:function(t){var e;if(this.linkUI)e=this.linkUI._element;else{if(!this.shapeLink)return;e=this.shapeLink}var i=e.getFromAgent()?e.getFromAgent():e.getFromNode(),n=this.network.getElementUI(i).getZoomBodyRect(),i=n.x+n.width/2,n=n.y+n.height/2,n={x:t.x-i,y:t.y-n};e.setStyle("link.from.xoffset",n.x),e.setStyle("link.from.yoffset",n.y)},_handleMovingFromPoint:function(t){t=this.network.getLogicalPoint2(t);this._setFromPoint(t)},_setToPoint:function(t){var e;if(this.linkUI)e=this.linkUI._element;else{if(!this.shapeLink)return;e=this.shapeLink}var i=e.getToAgent()?e.getToAgent():e.getToNode(),n=this.network.getElementUI(i).getZoomBodyRect(),i=n.x+n.width/2,n=n.y+n.height/2,n={x:t.x-i,y:t.y-n};e.setStyle("link.to.xoffset",n.x),e.setStyle("link.to.yoffset",n.y)},_handleMovingToPoint:function(t){t=this.network.getLogicalPoint2(t);this._setToPoint(t)},convertFromUIToMarkerRect:function(t,e,i,n){var o=this.network.zoomManager,s=o.getLocationZoom(),a=o.getGraphicsZoom(),r=this.network.getElementUI(n),h=o.getSizeZoom(r),l=t.x+t.width/2,n=t.y+t.height/2,o=l-t.x,r=n-t.y;return{x:l*s*a-this.network.getViewRect().x+e*s*a-o*h*a,y:n*s*a-this.network.getViewRect().y+i*s*a-r*h*a,width:t.width*h*a,height:t.height*h*a}},_getReverseZoomPoint:function(t,e,i){var n=this.network.zoomManager,o=n.getLocationZoom(),t=n.getSizeZoom(this.network.getElementUI(t));return e.x*=o,e.y*=o,{x:e.x/o+(i.x-e.x)/t,y:e.y/o+(i.y-e.y)/t}},_getReverseZoomRect:function(t,e){var i=this.network.zoomManager,n=i.getLocationZoom(),o=i.getSizeZoom(s);if(n==o)return t;var s=this.network.getElementUI(e),a=s.getBodyRect(),i=a.x+a.width/2,e=a.y+a.height/2,s=i*n+(t.x-i)*o,a=e*n+(t.y-e)*o;return{x:(i=s+t.width*o/2)/n+(s-i)*o,y:(e=a+t.height*o/2)/n+(a-e)*o,width:t.width,height:t.height}},_handleResizing:function(t){this._handle_mousemove(t);var e,i=this.node.getAngle(),n=this.node.getLocation(),o=this.node.getWidth()/2,s=this.node.getHeight()/2,a={x:n.x+o,y:n.y+s},r={x:-o,y:-s},h={x:-o,y:s},l={x:o,y:s},c={x:o,y:-s},u={x:0,y:-s},d={x:o,y:0},n={x:0,y:s},s={x:-o,y:0},o=this._getReverseZoomPoint(this.node,Y.clone(a),this._endLogical);"northwest"===this.resizeDirection&&(this._transformPoint(l,a,i),r.x=o.x,r.y=o.y,a.x=(r.x+l.x)/2,a.y=(r.y+l.y)/2,this._reversPoint(r,a,i),this._reversPoint(l,a,i),this.resizingRect={x:r.x,y:r.y,width:l.x-r.x,height:l.y-r.y},Y.isShiftDown(t)&&this._revertResizeRect(this.node,this.resizingRect,1)),"north"===this.resizeDirection&&(e={x:o.x,y:o.y},this._reversPoint(e,a,i),u.y=e.y-a.y,this._transformPoint(u,a,i),this._transformPoint(n,a,i),a.x=(u.x+n.x)/2,a.y=(u.y+n.y)/2,this._reversPoint(u,a,i),this._reversPoint(n,a,i),this.resizingRect={x:a.x-this.node.getWidth()/2,y:a.y-(n.y-u.y)/2,width:this.node.getWidth(),height:n.y-u.y}),"northeast"===this.resizeDirection&&(this._transformPoint(h,a,i),c.x=o.x,c.y=o.y,a.x=(h.x+c.x)/2,a.y=(h.y+c.y)/2,this._reversPoint(h,a,i),this._reversPoint(c,a,i),this.resizingRect={x:h.x,y:c.y,width:c.x-h.x,height:h.y-c.y},Y.isShiftDown(t)&&this._revertResizeRect(this.node,this.resizingRect,2)),"west"===this.resizeDirection&&(e={x:o.x,y:o.y},this._reversPoint(e,a,i),s.x=e.x-a.x,this._transformPoint(d,a,i),this._transformPoint(s,a,i),a.x=(d.x+s.x)/2,a.y=(d.y+s.y)/2,this._reversPoint(d,a,i),this._reversPoint(s,a,i),this.resizingRect={x:a.x-(d.x-s.x)/2,y:a.y-this.node.getHeight()/2,width:d.x-s.x,height:this.node.getHeight()}),"east"===this.resizeDirection&&(e={x:o.x,y:o.y},this._reversPoint(e,a,i),d.x=e.x-a.x,this._transformPoint(d,a,i),this._transformPoint(s,a,i),a.x=(d.x+s.x)/2,a.y=(d.y+s.y)/2,this._reversPoint(d,a,i),this._reversPoint(s,a,i),this.resizingRect={x:a.x-(d.x-s.x)/2,y:a.y-this.node.getHeight()/2,width:d.x-s.x,height:this.node.getHeight()}),"southwest"===this.resizeDirection&&(this._transformPoint(c,a,i),h.x=o.x,h.y=o.y,a.x=(h.x+c.x)/2,a.y=(h.y+c.y)/2,this._reversPoint(h,a,i),this._reversPoint(c,a,i),this.resizingRect={x:h.x,y:c.y,width:c.x-h.x,height:h.y-c.y},Y.isShiftDown(t)&&this._revertResizeRect(this.node,this.resizingRect,4)),"south"===this.resizeDirection&&(e={x:o.x,y:o.y},this._reversPoint(e,a,i),n.y=e.y-a.y,this._transformPoint(u,a,i),this._transformPoint(n,a,i),a.x=(u.x+n.x)/2,a.y=(u.y+n.y)/2,this._reversPoint(u,a,i),this._reversPoint(n,a,i),this.resizingRect={x:a.x-this.node.getWidth()/2,y:a.y-(n.y-u.y)/2,width:this.node.getWidth(),height:n.y-u.y}),"southeast"===this.resizeDirection&&(this._transformPoint(r,a,i),l.x=o.x,l.y=o.y,a.x=(r.x+l.x)/2,a.y=(r.y+l.y)/2,this._reversPoint(r,a,i),this._reversPoint(l,a,i),this.resizingRect={x:r.x,y:r.y,width:l.x-r.x,height:l.y-r.y},Y.isShiftDown(t)&&this._revertResizeRect(this.node,this.resizingRect,3)),this.resizingRect=this._getReverseZoomRect(this.resizingRect,this.node),this.lazyMode?(this.repaint(),this.network.fireInteractionEvent({kind:"lazyResizeBetween",event:t,element:this.node,resizeDirection:this.resizeDirection})):(this.node.setLocation(this.resizingRect.x,this.resizingRect.y),this.node.setSize(this.resizingRect.width,this.resizingRect.height),this.network.fireInteractionEvent({kind:"liveResizeBetween",event:t,element:this.node,resizeDirection:this.resizeDirection}))},_revertResizeRect:function(t,e,i){var n=t.getOriginalRect(),o=Math.max(e.width/n.width,e.height/n.height),s=n.width*o,t=n.height*o,n=e.x,o=e.y;1==i?(n+=e.width-s,o+=e.height-t):2==i?o+=e.height-t:3==i||4==i&&(n+=e.width-s),e.x=n,e.y=o,e.width=s,e.height=t},_isEditingShapeNode:function(t){var e=this.network.getEditPointSize();if(this.node instanceof x.ShapeNode){this.shapeNode=this.node;for(var i=this.network.getShapeNodeZoomPoints(this.node),n=0,o=i.size();n<o;n++){var s=i.get(n);if(this._contains(t,s,e))return this._setCrossCursor(),this.pointIndex=n,!0}}return!(this.pointIndex=-1)},_isEditingShapeLink:function(t){for(var e=this.network.getEditPointSize(),i=this.network.zoomManager._getShapeLinkZoomPoints(this.shapeLink.getPoints()),n=0,o=i.size();n<o;n++){var s=i.get(n);if(this._contains(t,s,e))return this._setCrossCursor(),this.pointIndex=n,!0}return!(this.pointIndex=-1)},_isResizingNode:function(t){if(this.network.getResizePointSize()<=0)return!1;var e=this.network.zoomManager,i=this.network.getElementUI(this.node),n=e._getElementZoomRect(i,this.node.getOriginalRect()),o=this.node.getAngle(),e={x:n.x,y:n.y},i=this._rotatePoint(e,o,n);return!!this._isResizing(t,i.x,i.y,"northwest","nwse-resize")||(e={x:n.x+n.width/2,y:n.y},i=this._rotatePoint(e,o,n),!!this._isResizing(t,i.x,i.y,"north","ns-resize")||(e={x:n.x+n.width,y:n.y},i=this._rotatePoint(e,o,n),!!this._isResizing(t,i.x,i.y,"northeast","nesw-resize")||(e={x:n.x,y:n.y+n.height/2},i=this._rotatePoint(e,o,n),!!this._isResizing(t,i.x,i.y,"west","ew-resize")||(e={x:n.x+n.width,y:n.y+n.height/2},i=this._rotatePoint(e,o,n),!!this._isResizing(t,i.x,i.y,"east","ew-resize")||(e={x:n.x,y:n.y+n.height},i=this._rotatePoint(e,o,n),!!this._isResizing(t,i.x,i.y,"southwest","nesw-resize")||(e={x:n.x+n.width/2,y:n.y+n.height},i=this._rotatePoint(e,o,n),!!this._isResizing(t,i.x,i.y,"south","ns-resize")||(e={x:n.x+n.width,y:n.y+n.height},i=this._rotatePoint(e,o,n),!!this._isResizing(t,i.x,i.y,"southeast","nwse-resize"))))))))},_rotatePoint:function(t,e,i){return b.createMatrix(e*Math.PI/180,i.x+i.width/2,i.y+i.height/2).transform(t)},_isResizing:function(t,e,i,n,o){var s=this.network.getGraphicsZoom(),s=this.network.getResizePointSize()/s;return!!this._contains(t,{x:e,y:i},s)&&(this.resizeDirection!==n&&(this._removeCursor(),o=this._changeCursorWithAngle(n,this.node.getAngle()),this._setCursor(o),this.resizeDirection=n),!0)},_getRect:function(t,e,i,n){return{x:t<i?t:i,y:e<n?e:n,width:Math.abs(t-i),height:Math.abs(e-n)}},_contains:function(t,e,i){i={x:e.x-i,y:e.y-i,width:2*i,height:2*i};return b.containsPoint(i,t)},getPointIndex:function(t,e,i){if(t.size()<2)return 0;for(var n,o=t.get(0),s=1;s<t.size();s++){if(n=t.get(s),this.isPointOnLine(e,o,n,6))return s;o=n}return o=t.get(0),i&&this.isPointOnLine(e,o,n,6)?t.size():0},showRotateScale:function(t){new x.List;var e,i,n,o=this.network.getRotateScaleWidth(),s=this.network.getRotateScaleHeight(),a=this.network.getRotatePointSize(),r=this.node.getAngle(),h=this.network.zoomManager,l=this.network.getElementUI(this.node),c=h._getElementZoomRect(l,this.node.getOriginalRect()),l={x:c.x+c.width/2,y:c.y-this.network.getRotatePointOffset()-a},l=this._rotatePoint(l,r,c),c=r+"°",r=this.network.getViewRect();1===h.getLocationZoom()&&(t.translate(-r.x,-r.y),t.scale(this.network.getZoom(),this.network.getZoom())),0<=this.node.getAngle()&&this.node.getAngle()<=180?(n={x:(i={x:(e={x:l.x+a,y:l.y}).x+o,y:e.y}).x,y:i.y-s},u={x:e.x,y:n.y}):180<this.node.getAngle()&&this.node.getAngle()<=360&&(n={x:(i={x:(e={x:l.x-a,y:l.y}).x-o,y:e.y}).x,y:i.y-s},u={x:e.x,y:n.y});var u=new x.List([e,i,n,u]),u=Y.math.getRect(u);1!==h.getLocationZoom()&&(u.x-=r.x,u.y-=r.y),t.fillStyle=this.network.getRotateScaleFillColor(),t.fillRect(u.x,u.y,u.width,u.height),t.fillStyle=this.network.getRotateScaleFontColor(),t.textBaseline="middle",t.textAlign="center",t.font="13px Arial",t.fillText(c,u.x+u.width/2,u.y+u.height/2),1===h.getLocationZoom()&&(t.scale(1/this.network.getZoom(),1/this.network.getZoom()),t.translate(r.x,r.y))},isPointOnLine:function(t,e,i,n){return n<0&&(n=0),this.getDistanceFromPointToLine(t,e,i)<=n&&t.x>=Math.min(e.x,i.x)-n&&t.x<=Math.max(e.x,i.x)+n&&t.y>=Math.min(e.y,i.y)-n&&t.y<=Math.max(e.y,i.y)+n},getDistanceFromPointToLine:function(t,e,i){if(e.x===i.x)return Math.abs(t.x-e.x);var n=(i.y-e.y)/(i.x-e.x),e=(i.x*e.y-e.x*i.y)/(i.x-e.x);return Math.abs(n*t.x-t.y+e)/Math.sqrt(n*n+1)},_transformPoint:function(t,e,i){var n=Math.cos(i*Math.PI/180),o=Math.sin(i*Math.PI/180),s=t.x,a=t.y,i=s*o+a*n;t.x=s*n-a*o+e.x,t.y=i+e.y},_reversPoint:function(t,e,i){i*=-1;var n=Math.cos(i*Math.PI/180),o=Math.sin(i*Math.PI/180),s=t.x-e.x,a=t.y-e.y,i=s*o+a*n;t.x=s*n-a*o+e.x,t.y=i+e.y},_changeCursorWithAngle:function(t,e){var i;switch(t){case"northwest":i=1;break;case"north":i=2;break;case"northeast":i=3;break;case"east":i=4;break;case"southeast":i=5;break;case"south":i=6;break;case"southwest":i=7;break;case"west":i=8;break;default:i=0}return(360<=e||e<=-360)&&(e%=360),22.5<e&&e<=67.5&&(i+=1),e<-22.5&&-67.5<=e&&(i-=1),67.5<e&&e<=112.5&&(i+=2),e<-67.5&&-112.5<=e&&(i-=2),112.5<e&&e<=157.5&&(i+=3),e<-112.5&&-157.5<=e&&(i-=3),157.5<e&&e<=202.5&&(i+=4),e<-157.5&&-202.5<=e&&(i-=4),202.5<e&&e<=247.5&&(i+=5),e<-202.5&&-247.5<=e&&(i-=5),247.5<e&&e<=292.5&&(i+=6),e<-247.5&&-292.5<=e&&(i-=6),292.5<e&&e<=337.5&&(i+=7),e<-292.5&&-337.5<=e&&(i-=7),8<i&&(i-=8),i<=0&&(i+=8),["auto","nwse-resize","ns-resize","nesw-resize","ew-resize","nwse-resize","ns-resize","nesw-resize","ew-resize"][i]}}),x.vector.interaction.MoveLinkInteraction=function(t,e){x.vector.interaction.MoveLinkInteraction.superClass.constructor.call(this,t),this.xoffset=0,this.yoffset=0},Y.ext("twaver.vector.interaction.MoveLinkInteraction",x.vector.interaction.BaseInteraction,{setUp:function(){this.addListener("mousedown"),this.oldCursor=this.network.getView().style.cursor},tearDown:function(){this.removeListener("mousedown"),this.network.getView().style.cursor=this.oldCursor,this.end()},handle_mousedown:function(t){var e;0===t.button&&(this.network.isSelectingElement()||this.network.isEditingElement()||(e=this.network.getElementAt(t))instanceof x.Link&&(this.element=e,this.end(t),this._handle_mousedown(t)))},handle_mouseup:function(t){this.end(t)},handle_mousemove:function(t){var e,i;!this._startLogical||this.network.isSelectingElement()||this.network.isEditingElement()?this.end(t):(this._handle_mousemove(t),this.xoffset=this._endLogical.x-this._startLogical.x,this.yoffset=this._endLogical.y-this._startLogical.y,this.lazyMode?(this.mark?this.network.fireInteractionEvent({kind:"lazyMoveBetween",event:t,element:this.element}):(this.mark=m.createCanvas(),this.network.getMovableSelectedElements().forEach(function(t){t=this.getElementUI(t);t&&(e=b.unionRect(e,t.getViewRect()))},this.network),this.network.getTopDiv().appendChild(this.mark),this.network.setMovingElement(!0),m.setDiv(this.mark,e,this.network.isLazyMoveFill()?this.network.getLazyMoveFillColor():null,this.network.getLazyMoveOutlineWidth(),this.network.getLazyMoveOutlineColor()),this.network.fireInteractionEvent({kind:"lazyMoveStart",event:t,element:this.element})),this.mark.style.left=this.xoffset+this.mark._viewRect.x+"px",this.mark.style.top=this.yoffset+this.mark._viewRect.y+"px"):(i=new x.List([this.element.getFromNode(),this.element.getToNode()]),x.Util.moveElements(i,this.xoffset,this.yoffset),this._startLogical=this._endLogical,this._startClient=m.getClientPoint(t),this.network.isMovingElement()?this.network.fireInteractionEvent({kind:"liveMoveBetween",event:t,element:this.element}):(this.network.setMovingElement(!0),this.network.fireInteractionEvent({kind:"liveMoveStart",event:t,element:this.element}))))},end:function(t){var e,i;this._startLogical&&(this.lazyMode?this.mark&&(i=new x.List([(e=this).element.getFromNode(),this.element.getToNode()]),x.Util.moveElements(i,this.xoffset,this.yoffset,this.network.isLazyMoveAnimate(),function(){e.network.fireInteractionEvent({kind:"lazyMoveEnd",event:t,element:this.element}),e.mark&&(e.network.getTopDiv().removeChild(e.mark),e.mark=null,e.network.setMovingElement(!1))})):this.network.isMovingElement()&&(this.network.setMovingElement(!1),this.network.fireInteractionEvent({kind:"liveMoveEnd",event:t,element:this.element})),this._handle_mouseup(t),delete this.element)}}),x.vector.interaction.CreateLinkInteraction=function(t,n){n=n||x.Link,x.Util.isTypeOf(n,x.Link)?this.linkFunction=function(t,e){var i=new n;return i instanceof x.Link&&(i.setFromNode(t),i.setToNode(e)),i}:this.linkFunction=n,x.vector.interaction.CreateLinkInteraction.superClass.constructor.call(this,t)},Y.ext("twaver.vector.interaction.CreateLinkInteraction",x.vector.interaction.BaseInteraction,{setUp:function(){this.addListener("mousedown","mousemove"),this.network.addMarker(this)},tearDown:function(){this.removeListener("mousedown","mousemove"),this.clear(),this.network.removeMarker(this)},paint:function(t){var e,i;t.beginPath(),t.lineWidth=this.network.getEditLineWidth();var n=this.network.getEditLineColor();this.currentNode&&this.currentNode!==this.fromNode&&(e=this.network.getElementUI(this.currentNode).getZoomViewRect(!0),i=this.convertFromUIToMarkerRect(e,0,0),ke.rect(t,i.x,i.y,i.width,i.height,null,n)),this.fromNode&&(e=this.network.getElementUI(this.fromNode).getZoomViewRect(!0),i=this.convertFromUIToMarkerRect(e,0,0),ke.rect(t,i.x,i.y,i.width,i.height,null,n)),this.currentPoint&&this.paintLine(t),t.closePath()},convertFromUIToMarkerRect:function(t,e,i){var n=this.network.zoomManager.getGraphicsZoom();return{x:t.x*n-this.network.getViewRect().x+e*n,y:t.y*n-this.network.getViewRect().y+i*n,width:t.width*n,height:t.height*n}},getZoomNodeRectOrPoint:function(t,e){t=this.network.getElementUI(t).getZoomBodyRect();return e?{x:t.x+t.width/2,y:t.y+t.height/2}:t},paintLine:function(t){var e=this.network.getEditLineColor(),i=this.network.getElementUI(this.fromNode).getZoomBodyRect(),n=this.convertPointFromView({x:i.x+i.width/2,y:i.y+i.height/2}),o=n.x,s=n.y,i=this.currentPoint.x,n=this.currentPoint.y;t.strokeStyle=e,t.beginPath(),t.moveTo(o,s),t.lineTo(i,n),t.stroke()},clear:function(){this.currentPoint=null,this.currentNode=null,this.fromNode=null,this.toNode=null},createLink:function(){return this.linkFunction(this.fromNode,this.toNode)},handle_mousedown:function(t){this.network.isValidEvent(t)&&(this.fromNode?(this.toNode=this.currentNode,!this.toNode||(t=this.createLink())&&this.network.addElementByInteraction(t),this.clear()):(this.fromNode=this.currentNode,this.currentNode=null,this.currentPoint=null,this.repaint()))},handle_mousemove:function(t){var e,i=this.getMarkerPoint(t);i&&(this.network.isMovingElement()||this.network.isEditingElement()?this.clear():(e=null,this.fromNode?(this.currentNode=this.getToNode(t,this.fromNode),this.currentPoint=i,this.repaint()):(e=this.getFromNode(t),this.currentNode!==e&&(this.currentNode=e,this.repaint()))))},getFromNode:function(t){return this.getNode(t)},getToNode:function(t,e){return this.getNode(t,e)},getNode:function(t,e){t=this.network.getElementAt(t);return t instanceof Re&&this.network.isLinkable(t,e)&&this.network.getElementBox().getSelectionModel().isSelectable(t)?t:null}}),x.vector.interaction.CreateShapeLinkInteraction=function(t,o){x.vector.interaction.CreateShapeLinkInteraction.superClass.constructor.call(this,t),o=o||x.ShapeLink,x.Util.isTypeOf(o,x.ShapeLink)?this.linkFunction=function(t,e,i){var n=new o;return n instanceof x.ShapeLink&&(n.setFromNode(t),n.setToNode(e),i&&(e=this.network.zoomManager,n.setPoints(e._getShapeLinkZoomPoints(i,!0)))),n}:this.linkFunction=o},Y.ext("twaver.vector.interaction.CreateShapeLinkInteraction",x.vector.interaction.CreateLinkInteraction,{clear:function(){this.points=null,x.vector.interaction.CreateShapeLinkInteraction.superClass.clear.call(this)},createLink:function(){return this.linkFunction(this.fromNode,this.toNode,this.points)},handle_mousedown:function(t){if(0===t.button){t=this.network.getLogicalPoint2(t);if(t){if(this.fromNode)if(this.toNode=this.currentNode,this.toNode){var e=this.createLink();e&&this.network.addElementByInteraction(e),this.clear()}else{if(this.points||(this.points=new x.List),0<this.points.size()){e=this.points.get(this.points.size()-1);if(e.x===t.x&&e.y===t.y)return}this.points.add(t)}else this.fromNode=this.currentNode,this.points=null,this.currentNode=null,this.currentPoint=null;this.repaint()}}},paintLine:function(t){if(this.currentPoint){var e=new x.List,i=this.convertPointFromView(this.getZoomNodeRectOrPoint(this.fromNode,!0));if(e.add(i,0),this.points&&0<this.points.size())for(var n=this.points.size(),o=0;o<n;o++)i=this.convertPointFromView(this.points.get(o)),e.add(i);i=this.currentPoint,e.add(i),t.lineWidth=this.network.getEditLineWidth(),t.strokeStyle=this.network.getEditLineColor(),t.beginPath(),R.drawLinePoints(t,e),t.stroke()}}}),x.vector.interaction.CreateShapeNodeInteraction=function(t,o){o=o||x.ShapeNode,x.Util.isTypeOf(o,x.ShapeNode)?this.shapeNodeFunction=function(t){var e,i,n=new o;return n instanceof x.ShapeNode&&(e=this.network.zoomManager,i=this.network.createElementUI(n),t&&(t=e._getShapeNodeZoomPoints(i,t,!0),i.invalidateZoom(),n.setPoints(t))),n}:this.shapeNodeFunction=o,x.vector.interaction.CreateShapeNodeInteraction.superClass.constructor.call(this,t),this.timeStamp=-1},Y.ext("twaver.vector.interaction.CreateShapeNodeInteraction",x.vector.interaction.BaseInteraction,{setUp:function(){this.addListener("mousedown","mousemove"),this.network.addMarker(this)},tearDown:function(){this.removeListener("mousedown","mousemove"),this.clear(),this.network.removeMarker(this),this.network.setEditingElement(!1)},clear:function(){this.points=null,this.currentPoint=null},paint:function(t){if(this.points&&0<this.points.size()&&this.currentPoint){for(var e,i=new x.List,n=this.points.size(),o=0;o<n;o++)e=this.convertPointFromView(this.points.get(o)),i.add(e);e=this.convertPointFromView(this.currentPoint),i.add(e),t.lineWidth=this.network.getEditLineWidth(),t.strokeStyle=this.network.getEditLineColor(),t.beginPath(),R.drawLinePoints(t,i),t.stroke()}},handle_mousedown:function(t){if(0===t.button){var e,i=this.network.getLogicalPoint2(t);if(i){if(2===t.detail||t.timeStamp-this.timeStamp<300)this.points&&(n=this.shapeNodeFunction(this.points),this.network.addElementByInteraction(n),this.clear(),e=this,setTimeout(function(){e.network.setEditingElement(!1)},0));else{if(this.network.isEditingElement()||this.network.setEditingElement(!0),this.points||(this.points=new x.List),0<this.points.size()){var n=this.points.get(this.points.size()-1);if(n.x===i.x&&n.y===i.y)return}this.points.add(i)}this.timeStamp=t.timeStamp,this.repaint()}}},handle_mousemove:function(t){this.points&&(this.currentPoint=this.network.getLogicalPoint2(t),this.repaint())}}),x.vector.interaction.MagnifyInteraction=function(t,e,i,n,o){x.vector.interaction.MagnifyInteraction.superClass.constructor.call(this,t),this.scale=e||2,this.xRadius=i||100,this.yRadius=n||100,this.shape=o||"circle",this.borderColor="black",this.borderWidth=1,this.backgroundColor="white",this.markCanvas=m.createCanvas()},Y.ext("twaver.vector.interaction.MagnifyInteraction",x.vector.interaction.BaseInteraction,{setUp:function(){this.addListener("mousemove"),this.addListener("mousewheel"),this.network.addMarker(this)},tearDown:function(){this.removeListener("mousemove"),this.removeListener("mousewheel"),this.network.removeMarker(this)},paint:function(t){var e,i,n,o,s;this.point&&(s=(n=this.network.zoomManager).getLocationZoom(),e=n.getGraphicsZoom(),n.getSizeZoom(),this.network.getZoom(),i=this.xRadius/this.scale/e,n=this.yRadius/this.scale/e,s="mousewheel"===this.mouseFlag?(o={x:this.zoomPoint.x-i,y:this.zoomPoint.y-n,width:2*i,height:2*n},this.network.toCanvasByRegion(o,this.scale*e,this.markCanvas,"white"),{x:this.zoomPoint.x-this.xRadius-this.network.viewRect.x,y:this.zoomPoint.y-this.yRadius-this.network.viewRect.y,width:this.markCanvas.width,height:this.markCanvas.height}):(o={x:this.point.x*s-i,y:this.point.y*s-n,width:2*i,height:2*n},this.network.toCanvasByRegion(o,this.scale*e,this.markCanvas,"white"),{x:this.point.x*s*e-this.xRadius-this.network.viewRect.x,y:this.point.y*s*e-this.yRadius-this.network.viewRect.y,width:this.markCanvas.width,height:this.markCanvas.height}),t.save(),t.beginPath(),R.drawVector(t,this.shape,null,s.x,s.y,2*o.width*e,2*o.height*e),t.clip(),t.fillStyle=this.backgroundColor,t.beginPath(),t.rect(s.x,s.y,s.width,s.height),t.fill(),t.drawImage(this.markCanvas,s.x,s.y),t.restore(),t.beginPath(),t.lineWidth=this.borderWidth,R.drawVector(t,this.shape,null,s.x+this.borderWidth/2,s.y+this.borderWidth/2,2*o.width*e-this.borderWidth,2*o.height*e-this.borderWidth),t.strokeStyle=this.borderColor,t.stroke(),this.mouseFlag=null)},handle_mousemove:function(t){this.point=this.network.getLogicalPoint(t),this.point&&(this.mouseFlag="mousemove",this.repaint())},handle_mousewheel:function(t){1!==this.network.zoomManager.getLocationZoom()&&(this.zoomPoint=this.network.getLogicalPoint2(t)),this.zoomPoint&&(this.mouseFlag="mousewheel",this.repaint())},getScale:function(){return this.scale},setScale:function(t){this.scale=t,this.network.repaintTopCanvas()},getShape:function(){return this.shape},setShape:function(t){this.shape=t,this.network.repaintTopCanvas()},getXRadius:function(){return this.xRadius},setXRadius:function(t){this.xRadius=t,this.network.repaintTopCanvas()},getYRadius:function(){return this.yRadius},setYRadius:function(t){this.yRadius=t,this.network.repaintTopCanvas()},getBorderColor:function(){return this.borderColor},setBorderColor:function(t){this.borderColor=t,this.network.repaintTopCanvas()},getBorderWidth:function(){return this.borderWidth},setBorderWidth:function(t){this.borderWidth=t,this.network.repaintTopCanvas()},getBackgroundColor:function(){return this.backgroundColor},setBackgroundColor:function(t){this.backgroundColor=t,this.network.repaintTopCanvas()}}),x.vector.interaction.TouchInteraction=function(t){x.vector.interaction.TouchInteraction.superClass.constructor.call(this,t)},Y.ext("twaver.vector.interaction.TouchInteraction",x.vector.interaction.BaseInteraction,{setUp:function(){var t=this.network.getView();m.addEventListener("touchstart","handleTouchstart",t,this),m.addEventListener("touchmove","handleTouchmove",t,this),m.addEventListener("touchend","handleTouchend",t,this),m.addEventListener("touchcancel","handleTouchend",t,this)},tearDown:function(){var t=this.network.getView();m.removeEventListener("touchstart",t,this),m.removeEventListener("touchmove",t,this),m.removeEventListener("touchend",t,this),m.removeEventListener("touchcancel",t,this)},_isDragToSelect:function(t){return!this.network._dragToPan},handleTouchstart:function(t){var e,i;m.preventDefault(t),this.isMoving=!1,this.isSelecting=!1,1==t.touches.length?(e=this.network.getLogicalPoint2(t),i=this._element=this.network.getElementAt(e),this._startTouchTime=new Date,this._currentTouchPoint=e,this._startTouchClient=this._currentTouchClient=this.getMarkerPoint(t),i?this.network.getSelectionModel().contains(i)?this.isSelecting=!0:(this.network.getSelectionModel().setSelection(i),this.network.getSelectionModel().contains(i)&&(this.isSelecting=!0)):(this.isSelecting=!1,this.network.getSelectionModel().clearSelection()),dt.handleClicked(this.network,t,i),this._endTouchTime&&this._startTouchTime.getTime()-this._endTouchTime.getTime()<=500&&b.getDistance(this._endTouchClient,this._startTouchClient)<=20?(delete this._endTouchTime,delete this._endTouchClient,dt.handleDoubleClicked(this.network,t,i)):(this._endTouchTime=this._startTouchTime,this._endTouchClient=this._startTouchClient)):(this._distance=lt.getDistance(t),this._zoom=this.network.getZoom())},handleTouchmove:function(t){var e,i,n,o;m.preventDefault(t),1<t.touches.length?(e=lt.getDistance(t),Math.abs(e-this._distance)<20||(i=e/this._distance,this.network.setZoom(this._zoom*i,!1))):null==this._zoom&&(e=this.getMarkerPoint(t),b.getDistance(this._startTouchClient,e)<20||(this._element&&(this.isSelecting||this._isDragToSelect(t))?(i=this.network.getLogicalPoint2(t),n=(o=this.getOffset(i,this._currentTouchPoint)).x,o=o.y,this._currentTouchPoint=i,this.network.moveSelectedElements(n,o),this.network.isMovingElement()?this.network.fireInteractionEvent({kind:"liveMoveBetween",event:t}):(this.network.setMovingElement(!0),this.network.fireInteractionEvent({kind:"liveMoveStart",event:t}))):(n=this._currentTouchClient.x-e.x,o=this._currentTouchClient.y-e.y,this.network.panByOffset(n,o),this._currentTouchClient=e)))},handleTouchend:function(t){m.preventDefault(t),this.network.isMovingElement()&&(this.network.setMovingElement(!1),this.network.fireInteractionEvent({kind:"liveMoveEnd",event:t})),0===t.touches.length&&(this._distance=null,this._zoom=null,this._element=null,this._startTouchTime=null,this._currentTouchPoint=null,this._startTouchClient=this._currentTouchClient=null)}}),x.vector.interaction.MSTouchInteraction=function(t){x.vector.interaction.MSTouchInteraction.superClass.constructor.call(this,t),this._pointerMap={},this._pointerIdArray=[]},Y.ext("twaver.vector.interaction.MSTouchInteraction",x.vector.interaction.BaseInteraction,{setUp:function(){var t=this.network.getView();m.addEventListener("MSPointerDown","handleTouchstart",t,this),m.addEventListener("MSPointerMove","handleTouchmove",t,this),m.addEventListener("MSPointerUp","handleTouchend",t,this),m.addEventListener("MSPointerCancel","handleTouchend",t,this),this.network.addMarker(this)},tearDown:function(){var t=this.network.getView();m.removeEventListener("MSPointerDown",t,this),m.removeEventListener("MSPointerMove",t,this),m.removeEventListener("MSPointerUp",t,this),m.removeEventListener("MSPointerCancel",t,this),this.network.removeMarker(this)},handleTouchstart:function(t){var e,i,n,o;this.network.isFocusOnClick()&&x.Util.setFocus(this.network._view),this.network.isSelectingElement()&&t.pointerType==t.MSPOINTER_TYPE_MOUSE||(e=this.network.getLogicalPoint2(t),i=new Date,t.isPrimary&&0<this._pointerIdArray.length&&this.handle_mouseup(t),this._pointerMap[t.pointerId]||(this._pointerIdArray.push(t.pointerId),this._pointerMap[t.pointerId]=t),1==this._pointerIdArray.length?(n=this.network.getElementAt(e),this._startTouchElement=n,this._startClientPoint={x:t.clientX,y:t.clientY},o=this.network.getSelectionModel(),n?Y.isCtrlDown(t)?o.contains(n)?o.removeSelection(n):o.appendSelection(n):o.contains(n)||o.setSelection(n):Y.isCtrlDown(t)||o.clearSelection(),dt.handleClicked(this.network,t,n),this._startTouchTime&&this._startTouchPoint&&i.getTime()-this._startTouchTime.getTime()<=500&&b.getDistance(this._startTouchPoint,e)<=20?(dt.handleDoubleClicked(this.network,t,n),this._doubleClick=!0):(m.handle_mousedown(this,t),this._startTouchPoint=e,this._startTouchTime=i)):2==this._pointerIdArray.length&&(this._distance=this._getDistance(),this._zoom=this.network.getZoom()))},handleTouchmove:function(t){null==this._startTouchPoint||0==this._pointerIdArray.length||!this._pointerMap[t.pointerId]||b.getDistance({x:this._pointerMap[t.pointerId].pageX,y:this._pointerMap[t.pointerId].pageY},{x:t.pageX,y:t.pageY})<=10||(this._pointerMap[t.pointerId]=t,2==this._pointerIdArray.length&&(t=this._getDistance()/this._distance,this.network.setZoom(this._zoom*t,!1)))},handleTouchend:function(t){var e,i,n;this.network.isMovingElement()&&(this.network.setMovingElement(!1),this.network.fireInteractionEvent({kind:"liveMoveEnd",event:t})),this.network.isSelectingElement()&&(e=b.getRect([this._startTouchPoint,this._moveTouchPoint]),(e=this.network.getElementsAtRect(e,this.getIntersectMode(),this.network.getRectSelectFilter()))&&0<e.size()&&(i=this.network.getSelectionModel(),n=i.toSelection(),e.forEach(function(t){i.contains(t)?n.remove(t):n.add(t)},this),i.setSelection(n)),this.network.fireInteractionEvent({kind:"selectEnd",event:t}),this._moveTouchPoint=null,this.network.setSelectingElement(!1),this.repaint()),this._doubleClick&&(delete this._doubleClick,delete this._startTouchPoint,delete this._startTouchTime);for(var o=-1,s=0;s<this._pointerIdArray.length;s++)if(this._pointerIdArray[s]==t.pointerId){o=s;break}0<=o&&this._pointerIdArray.splice(o,1),delete this._pointerMap[t.pointerId],this._moveTouchPoint=null},_getDistance:function(){return b.getDistance({x:this._pointerMap[this._pointerIdArray[0]].pageX,y:this._pointerMap[this._pointerIdArray[0]].pageY},{x:this._pointerMap[this._pointerIdArray[1]].pageX,y:this._pointerMap[this._pointerIdArray[1]].pageY})},getIntersectMode:function(){return"intersect"===this.network.getSelectMode()||"contain"!==this.network.getSelectMode()&&(this._startTouchPoint.x>this._moveTouchPoint.x&&this._startTouchPoint.y>this._moveTouchPoint.y)},handle_mousemove:function(t){var e,i,n,o={x:t.clientX,y:t.clientY};b.getDistance(this._startClientPoint,o)<3||this._startTouchPoint&&1==this._pointerIdArray.length&&(this._moveTouchPoint={x:this._startTouchPoint.x+(o.x-this._startClientPoint.x)/this.network.getZoom(),y:this._startTouchPoint.y+(o.y-this._startClientPoint.y)/this.network.getZoom()},null==this._startTouchElement&&this.network.isRectSelectEnabled()?this.network.getLogicalPoint2(t)&&(this.network.setSelectingElement(!0),this._moveTouchPoint?this.network.fireInteractionEvent({kind:"selectBetween",event:t}):this.network.fireInteractionEvent({kind:"selectStart",event:t}),this.repaint()):(e=this.network.getElementAt(this._moveTouchPoint),null!=this._startTouchElement||this.network.isRectSelectEnabled()?(this.network.isMovingElement()||null!=this._startTouchElement&&e==this._startTouchElement&&this.network.getMovableSelectedElements().contains(e))&&(i=this._moveTouchPoint.x-this._startTouchPoint.x,n=this._moveTouchPoint.y-this._startTouchPoint.y,this.network.moveSelectedElements(i,n),this.network.isMovingElement()?this.network.fireInteractionEvent({kind:"liveMoveBetween",event:t}):(this.network.setMovingElement(!0),this.network.fireInteractionEvent({kind:"liveMoveStart",event:t}))):(i=this._startClientPoint.x-o.x,n=this._startClientPoint.y-o.y,this.network.panByOffset(i,n)),this._startClientPoint=o))},handle_mouseup:function(t){this.handleTouchend(t),this._pointerIdArray=[],this._pointerMap={}},paint:function(t){var e,i,n,o;this._startTouchPoint&&this._moveTouchPoint&&!this._startTouchElement&&this.network.isRectSelectEnabled()&&(n=this.convertPointFromView(this._startTouchPoint),o=this.convertPointFromView(this._moveTouchPoint),e=n.x,i=n.y,n=o.x,o=o.y,null!=(i=b.getRect([{x:e,y:i},{x:n,y:o}]))&&(t.beginPath(),n=this.network.getSelectOutlineWidth(),o=this.getIntersectMode()?this.network.getSelectFillColor():null,t.strokeStyle=this.network.getSelectOutlineColor(),t.lineWidth=n,ke.rect(t,i.x,i.y,i.width,i.height,o,this.network.getSelectOutlineColor()),t.closePath()))}}),x.XmlSerializer=function(t,e,i){this.dataBox=t,this.settings=e||new x.SerializationSettings,this.filterFunction=i,this.ref=0,this.refMap={},this.idMap={},this.xmlString=""},Y.ext("twaver.XmlSerializer",Object,{serialize:function(){return this.xmlString="<twaver version='"+x.Util.getVersion()+"' platform='html5'>\n",this.serializeBody(),this.xmlString+="</twaver>\n",this.xmlString},serializeBody:function(){this.ref=0,this.dataBox.getRoots().forEach(this.initRefs,this),this.settings.isDataBoxSerializable&&(this.xmlString+="<dataBox class='"+this.dataBox.getClassName()+"'>\n",this.dataBox.serializeXml(this,this.dataBox.newInstance()),this.xmlString+="</dataBox>\n"),this.dataBox.getRoots().forEach(this.serializeData,this)},initRefs:function(t){this.refMap[t.getId()]=this.ref++,t.getChildren().forEach(this.initRefs,this)},isSerializable:function(t){return!!this.dataBox.contains(t)&&!(this.filterFunction&&!this.filterFunction(t))},serializeData:function(t){var e,i;this.isSerializable(t)&&(e=t.newInstance(),i=this.refMap[t.getId()],this.xmlString+="<data class='"+t.getClassName()+"' ref='"+i+"'",null!=this.settings.getPropertyType("id")&&(this.xmlString+=" id='"+t.getId()+"'"),this.xmlString+=">\n",t.serializeXml(this,e),this.xmlString+="</data>\n"),t.getChildren().forEach(this.serializeData,this)},serializePropertyXml:function(t,e,i){var n=this.settings.getPropertyType(e);!n||(t=Y.getValue(t,e,n))!==(i=Y.getValue(i,e,n))&&this.serializeValue("p",e,t,i,n)},serializeStyleXml:function(t,e,i){var n=this.settings.getStyleType(e);!n||(t=t.getStyle(e))!=(i=i.getStyle(e))&&this.serializeValue("s",e,t,i,n)},serializeClientXml:function(t,e,i){var n=this.settings.getClientType(e);null==n||(t=t.getClient(e))!=(i=i.getClient(e))&&this.serializeValue("c",e,t,i,n)},serializeValue:function(t,e,i,n,o){var s;null==i?this.xmlString+="\t<"+t+" n='"+e+"' none=''/>\n":"cdata"===o?this.xmlString+="\t<"+t+" n='"+e+"'><![CDATA["+i+"]]></"+t+">\n":"data"===o?null!=(s=this.refMap[i.getId()])&&(this.xmlString+="\t<"+t+" n='"+e+"' ref='"+s+"'/>\n"):"point"===o?n&&i.x===n.x&&i.y===n.y||(this.xmlString+="\t<"+t+" n='"+e+"' x='"+i.x+"' y='"+i.y+"'/>\n"):"list.point"===o?(this.xmlString+="\t<"+t+" n='"+e+"'>\n",i.forEach(function(t){this.xmlString+="\t\t<p x='"+t.x+"' y='"+t.y+"'/>\n"},this),this.xmlString+="\t</"+t+">\n"):"list.string"===o||"list.number"===o?(this.xmlString+="\t<"+t+" n='"+e+"'>\n",i.forEach(function(t){this.xmlString+="\t\t<s>"+t+"</s>\n"},this),this.xmlString+="\t</"+t+">\n"):this.xmlString+="rectangle"===o?"\t<"+t+" n='"+e+"' x='"+i.x+"' y='"+i.y+"' w='"+i.width+"' h='"+i.height+"'/>\n":"\t<"+t+" n='"+e+"'>"+i+"</"+t+">\n"},deserialize:function(t,e){Y.isDeserializing=!0,this.xmlString=t;t=Y.xml(t).documentElement;this.refMap={},this.idMap={};for(var i,n=new ie,o=new ie,s=t.getElementsByTagName("data"),a=s.length,r=0;r<a;r++){var h,l=(h=s[r]).getAttribute("class"),c=this.settings.getPropertyType("id");if(c&&h.hasAttribute("id")){var u=null;if("string"===c)u=h.getAttribute("id");else if("int"===c)u=parseInt(h.getAttribute("id"));else{if("number"!==c)throw"Unsupported id type '"+c+"'";u=parseFloat(h.getAttribute("id"))}if("remove"===h.getAttribute("action")){this.dataBox.removeById(u);continue}i=(i=this.dataBox.getDataById(u))||Y.newInstance(l,u)}else i=Y.newInstance(l);h.hasAttribute("ref")&&(l=h.getAttribute("ref"),this.refMap[l]=i),n.add(i),o.add(h),this.idMap[i.getId()]=i}for(this.dataBox.forEach(function(t){this.idMap[t.getId()]=t},this),a=n.size(),r=0;r<a;r++)i=n.get(r),h=o.get(r),i.deserializeXml(this,h);for(r=0;r<a;r++)i=n.get(r),this.dataBox.containsById(i.getId())||(e&&!i.getParent()&&i.setParent(e),this.dataBox.add(i));this.settings.isDataBoxSerializable&&1===t.getElementsByTagName("dataBox").length&&this.dataBox.deserializeXml(this,t.getElementsByTagName("dataBox")[0]),Y.isDeserializing=!1},deserializePropertyXml:function(t,e,i){var n=this.settings.getPropertyType(i);n&&Y.setValue(t,i,this.deserializeValue(e,n))},deserializeStyleXml:function(t,e,i){var n=this.settings.getStyleType(i);n&&t.setStyle(i,this.deserializeValue(e,n))},deserializeClientXml:function(t,e,i){var n=this.settings.getClientType(i);n&&t.setClient(i,this.deserializeValue(e,n))},deserializeValue:function(t,e){if(t.hasAttribute("@none"))return null;if("string"===e)return t.textContent;if("number"===e)return parseFloat(t.textContent);if("boolean"===e)return"true"===t.textContent;if("int"===e)return parseInt(t.textContent);if("point"===e)return{x:parseFloat(t.getAttribute("x")),y:parseFloat(t.getAttribute("y"))};if("data"===e){var i=t.getAttribute("ref"),n=this.refMap[i];return n||this.idMap[i]}var o;if("list.point"===e){for(var s=new ie,a=t.getElementsByTagName("p"),r=a.length,h=0;h<r;h++){var l=a[h];s.add({x:parseFloat(l.getAttribute("x")),y:parseFloat(l.getAttribute("y"))})}return s}if("list.string"===e){var c,u=new ie;for(r=(c=t.getElementsByTagName("s")).length,h=0;h<r;h++)u.add(c[h].textContent);return u}if("list.number"===e){for(o=new ie,r=(c=t.getElementsByTagName("s")).length,h=0;h<r;h++)o.add(parseFloat(c[h].textContent));return o}if("array.string"===e)return t.textContent.split(",");if("array.number"!==e)return"rectangle"===e?{x:parseFloat(t.getAttribute("x")),y:parseFloat(t.getAttribute("y")),width:parseFloat(t.getAttribute("w")),height:parseFloat(t.getAttribute("h"))}:t.textContent;for(r=(o=t.textContent.split(",")).length,h=0;h<r;h++)o[h]=parseFloat(o[h]);return o}}),Y.addMethod(x.Data,{serializeXml:function(t,e){if(t.settings.isClientSerializable&&this._clientMap)for(var i in this._clientMap)this.serializeClientXml(t,i,e);this.serializePropertyXml(t,"name",e),this.serializePropertyXml(t,"icon",e),this.serializePropertyXml(t,"toolTip",e),this.serializePropertyXml(t,"parent",e)},serializePropertyXml:function(t,e,i){t.serializePropertyXml(this,e,i)},serializeClientXml:function(t,e,i){t.serializeClientXml(this,e,i)},deserializeXml:function(t,e){for(var i,n,o,s=e.getElementsByTagName("p"),a=s.length,r=0;r<a;r++)(i=s[r]).hasAttribute("n")&&this.deserializePropertyXml(t,i,i.getAttribute("n"));if(t.settings.isClientSerializable)for(a=(n=e.getElementsByTagName("c")).length,r=0;r<a;r++)(o=n[r]).hasAttribute("n")&&this.deserializeClientXml(t,o,o.getAttribute("n"))},deserializePropertyXml:function(t,e,i){t.deserializePropertyXml(this,e,i)},deserializeClientXml:function(t,e,i){t.deserializeClientXml(this,e,i)}}),Y.addMethod(x.Element,{serializeXml:function(i,t){if(i.settings.isStyleSerializable&&this._styleMap)for(var e in this._styleMap)this.serializeStyleXml(i,e,t);x.Element.superClass.serializeXml.call(this,i,t),this.serializePropertyXml(i,"layerId",t),this._alarmState.getHighestNativeAlarmSeverity()&&"alarmstate"===i.settings.getPropertyType("alarmState")&&(i.xmlString+="\t<p n='alarmState'>\n",x.AlarmSeverity.forEach(function(t){var e=this.getNewAlarmCount(t);0<e&&(i.xmlString+="\t\t<n n='"+t.name+"' c='"+e+"'/>\n")},this._alarmState),x.AlarmSeverity.forEach(function(t){var e=this.getAcknowledgedAlarmCount(t);0<e&&(i.xmlString+="\t\t<a n='"+t.name+"' c='"+e+"'/>\n")},this._alarmState),i.xmlString+="\t</p>\n")},serializeStyleXml:function(t,e,i){t.serializeStyleXml(this,e,i)},deserializeXml:function(t,e){if(x.Element.superClass.deserializeXml.call(this,t,e),t.settings.isStyleSerializable)for(var i,n=e.getElementsByTagName("s"),o=n.length,s=0;s<o;s++)(i=n[s]).hasAttribute("n")&&this.deserializeStyleXml(t,i,i.getAttribute("n"))},deserializeStyleXml:function(t,e,i){t.deserializeStyleXml(this,e,i)},deserializePropertyXml:function(t,e,i){if("alarmState"===i){if("alarmstate"===t.settings.getPropertyType("alarmState")){for(var n,o,s=e.getElementsByTagName("n"),a=0;a<s.length;a++)o=s[a],n=x.AlarmSeverity.getByName(o.getAttribute("n")),this._alarmState.setNewAlarmCount(n,parseInt(o.getAttribute("c")));for(s=e.getElementsByTagName("a"),a=0;a<s.length;a++)o=s[a],n=x.AlarmSeverity.getByName(o.getAttribute("n")),this._alarmState.setAcknowledgedAlarmCount(n,parseInt(o.getAttribute("c")))}}else x.Element.superClass.deserializePropertyXml.call(this,t,e,i)}}),Y.addMethod(Re,{serializeXml:function(t,e){Re.superClass.serializeXml.call(this,t,e),this.serializePropertyXml(t,"image",e),this.serializePropertyXml(t,"location",e),Y.num(this._width)&&0<=this._width&&this.serializePropertyXml(t,"width",e),Y.num(this._height)&&0<=this._height&&this.serializePropertyXml(t,"height",e)}}),Y.addMethod(x.Link,{serializeXml:function(t,e){x.Link.superClass.serializeXml.call(this,t,e),this.serializePropertyXml(t,"fromNode",e),this.serializePropertyXml(t,"toNode",e)}}),Y.addMethod(x.Follower,{serializeXml:function(t,e){x.Follower.superClass.serializeXml.call(this,t,e),this.serializePropertyXml(t,"host",e)}}),Y.addMethod(Me,{serializeXml:function(t,e){Me.superClass.serializeXml.call(this,t,e),this.serializePropertyXml(t,"expanded",e)}}),Y.addMethod(x.ShapeNode,{serializeXml:function(t,e){x.ShapeNode.superClass.serializeXml.call(this,t,e),this.serializePropertyXml(t,"points",e),this.serializePropertyXml(t,"segments",e)}}),Y.addMethod(x.ShapeLink,{serializeXml:function(t,e){x.ShapeLink.superClass.serializeXml.call(this,t,e),this.serializePropertyXml(t,"points",e)}}),Y.addMethod(x.RotatableNode,{serializeXml:function(t,e){x.RotatableNode.superClass.serializeXml.call(this,t,e),this.serializePropertyXml(t,"angle",e)}}),Y.addMethod(x.DataBox,{serializeXml:function(t,e){if(t.settings.isClientSerializable&&this._clientMap)for(var i in this._clientMap)this.serializeClientXml(t,i,e);this.serializePropertyXml(t,"name",e),this.serializePropertyXml(t,"icon",e),this.serializePropertyXml(t,"toolTip",e)},serializePropertyXml:function(t,e,i){t.serializePropertyXml(this,e,i)},serializeClientXml:function(t,e,i){t.serializeClientXml(this,e,i)},deserializeXml:function(t,e){for(var i,n,o,s=e.getElementsByTagName("p"),a=s.length,r=0;r<a;r++)(i=s[r]).hasAttribute("n")&&this.deserializePropertyXml(t,i,i.getAttribute("n"));if(t.settings.isClientSerializable)for(a=(n=e.getElementsByTagName("c")).length,r=0;r<a;r++)(o=n[r]).hasAttribute("n")&&this.deserializeClientXml(t,o,o.getAttribute("n"))},deserializePropertyXml:function(t,e,i){t.deserializePropertyXml(this,e,i)},deserializeClientXml:function(t,e,i){t.deserializeClientXml(this,e,i)}}),Y.addMethod(x.ElementBox,{serializeXml:function(e,t){if(e.settings.isLayerBoxSerializable&&(e.xmlString+="\t<layerBox>\n",this._layerBox.forEachByDepthFirst(function(t){this._layerBox.getDefaultLayer()===t?e.xmlString+="\t\t<layer ":e.xmlString+="\t\t<layer id='"+t.getId()+"' ",t.getName()&&(e.xmlString+="name='"+t.getName()+"' "),e.xmlString+="visible='"+t.isVisible()+"' editable='"+t.isEditable()+"' movable='"+t.isMovable()+"'/>\n"},null,this),e.xmlString+="\t</layerBox>\n"),e.settings.isStyleSerializable&&this._styleMap)for(var i in this._styleMap)this.serializeStyleXml(e,i,t);x.ElementBox.superClass.serializeXml.call(this,e,t)},serializeStyleXml:function(t,e,i){t.serializeStyleXml(this,e,i)},deserializeStyleXml:function(t,e,i){t.deserializeStyleXml(this,e,i)},deserializeXml:function(t,e){if(x.ElementBox.superClass.deserializeXml.call(this,t,e),t.settings.isLayerBoxSerializable&&1==e.getElementsByTagName("layerBox").length)for(var i=e.getElementsByTagName("layerBox")[0].getElementsByTagName("layer"),n=0;n<i.length;n++){var o,s=i[n];if(s.hasAttribute("id")){var a=t.settings.getPropertyType("layerId");if("string"===a)o=new x.Layer(s.getAttribute("id"));else if("int"===a)o=new x.Layer(parseInt(s.getAttribute("id")));else{if("number"!==a)throw"Unsupported layer id type '"+a+"'";o=new x.Layer(parseFloat(s.getAttribute("id")))}this._layerBox.getDataById(o.getId())?o=this._layerBox.getDataById(o.getId()):this._layerBox.add(o)}else o=this._layerBox.getDefaultLayer(),this._layerBox.moveToBottom(o);s.hasAttribute("name")&&o.setName(s.getAttribute("name")),s.hasAttribute("visible")&&o.setVisible("true"===s.getAttribute("visible")),s.hasAttribute("editable")&&o.setEditable("true"===s.getAttribute("editable")),s.hasAttribute("movable")&&o.setMovable("true"===s.getAttribute("movable"))}if(t.settings.isStyleSerializable)for(var r=e.getElementsByTagName("s"),h=r.length,n=0;n<h;n++){var l=r[n];l.hasAttribute("n")&&this.deserializeStyleXml(t,l,l.getAttribute("n"))}}}),x.JsonSerializer=function(t,e,i){this.dataBox=t,this.settings=e||new x.SerializationSettings,this.filterFunction=i,this.ref=0,this.refMap={},this.idMap={},this.jsonObject={}},Y.ext("twaver.JsonSerializer",Object,{serialize:function(){return this.jsonObject={version:x.Util.getVersion(),platform:"html5"},this.settings.isImageSerializable&&(this.jsonObject.images={}),this.serializeBody(),JSON.stringify(this.jsonObject)},serializeBody:function(){var t;this.ref=0,this.dataBox.getRoots().forEach(this.initRefs,this),this.settings.isDataBoxSerializable&&(t={class:this.dataBox.getClassName(),p:{},s:{},c:{}},this.jsonObject.dataBox=t,this.dataBox.serializeJson(this,this.dataBox.newInstance(),t),Y.isEmptyObject(t.p)&&delete t.p,Y.isEmptyObject(t.s)&&delete t.s,Y.isEmptyObject(t.c)&&delete t.c),this.jsonObject.datas=[],this.dataBox.getRoots().forEach(this.serializeData,this)},initRefs:function(t){this.refMap[t.getId()]=this.ref++,t.getChildren().forEach(this.initRefs,this)},isSerializable:function(t){return!!this.dataBox.contains(t)&&!(this.filterFunction&&!this.filterFunction(t))},serializeData:function(t){var e,i;this.isSerializable(t)&&(e=t.newInstance(),i=this.refMap[t.getId()],i={class:t.getClassName(),ref:i,p:{},s:{},c:{}},this.settings.getPropertyType("id")&&(i.id=t.getId()),this.jsonObject.datas.push(i),t.serializeJson(this,e,i),Y.isEmptyObject(i.p)&&delete i.p,Y.isEmptyObject(i.s)&&delete i.s,Y.isEmptyObject(i.c)&&delete i.c,this.settings.isImageSerializable&&t.getImage&&("string"!=typeof(e=t.getImage())||De[e]||this.jsonObject.images[e]||(i=(i=Y.getImageAsset(e))&&i.getImage())&&!Nt(i)&&(this.jsonObject.images[e]=i))),t.getChildren().forEach(this.serializeData,this)},serializePropertyJson:function(t,e,i,n){var o=this.settings.getPropertyType(e);!o||(t=Y.getValue(t,e,o))!==(i=Y.getValue(i,e,o))&&this.serializeValue(e,t,i,o,n.p)},serializeStyleJson:function(t,e,i,n){var o=this.settings.getStyleType(e);!o||(t=t.getStyle(e))!=(i=i.getStyle(e))&&this.serializeValue(e,t,i,o,n.s)},serializeClientJson:function(t,e,i,n){var o=this.settings.getClientType(e);null==o||(t=t.getClient(e))!=(i=i.getClient(e))&&this.serializeValue(e,t,i,o,n.c)},serializeValue:function(t,e,i,n,o){null==e?o[t]=null:e instanceof ie?o[t]=e._as:"data"===n?null!=(n=this.refMap[e.getId()])&&(o[t]=n):o[t]=e},deserialize:function(t,e){Y.isDeserializing=!0,this.jsonObject=JSON.parse(t);var i=this.jsonObject.images;this.settings.isImageSerializable&&i&&Object.keys(i).forEach(function(t){Y.registerImage(t,i[t])}),this.refMap={},this.idMap={};for(var n,o=new ie,s=new ie,a=this.jsonObject.datas.length,r=0;r<a;r++){var h=this.jsonObject.datas[r],l=h.class;if(this.settings.getPropertyType("id")&&null!=h.id){if("remove"===h.action){this.dataBox.removeById(h.id);continue}n=(n=this.dataBox.getDataById(h.id))||Y.newInstance(l,h.id)}else n=Y.newInstance(l);null!=h.ref&&(this.refMap[h.ref]=n),o.add(n),s.add(h),this.idMap[n.getId()]=n}for(this.dataBox.forEach(function(t){this.idMap[t.getId()]=t},this),a=o.size(),r=0;r<a;r++)(n=o.get(r)).deserializeJson(this,s.get(r));for(r=0;r<a;r++)n=o.get(r),this.dataBox.containsById(n.getId())||(e&&!n.getParent()&&n.setParent(e),this.dataBox.add(n));this.settings.isDataBoxSerializable&&this.jsonObject.dataBox&&this.dataBox.deserializeJson(this,this.jsonObject.dataBox),Y.isDeserializing=!1},deserializePropertyJson:function(t,e,i){var n=this.settings.getPropertyType(i);n&&Y.setValue(t,i,this.deserializeValue(e,n))},deserializeStyleJson:function(t,e,i){var n=this.settings.getStyleType(i);n&&t.setStyle(i,this.deserializeValue(e,n))},deserializeClientJson:function(t,e,i){var n=this.settings.getClientType(i);n&&t.setClient(i,this.deserializeValue(e,n))},deserializeValue:function(t,e){if("data"!==e)return"array.number"!==e&&t instanceof Array?new ie(t):t;e=this.refMap[t];return e||this.idMap[t]}}),Y.addMethod(x.Data,{serializeJson:function(t,e,i){if(t.settings.isClientSerializable&&this._clientMap)for(var n in this._clientMap)this.serializeClientJson(t,n,e,i);this.serializePropertyJson(t,"name",e,i),this.serializePropertyJson(t,"icon",e,i),this.serializePropertyJson(t,"toolTip",e,i),this.serializePropertyJson(t,"parent",e,i)},serializePropertyJson:function(t,e,i,n){t.serializePropertyJson(this,e,i,n)},serializeClientJson:function(t,e,i,n){t.serializeClientJson(this,e,i,n)},deserializeJson:function(t,e){for(var i in e.p)this.deserializePropertyJson(t,e.p[i],i);if(t.settings.isClientSerializable)for(i in e.c)this.deserializeClientJson(t,e.c[i],i)},deserializePropertyJson:function(t,e,i){t.deserializePropertyJson(this,e,i)},deserializeClientJson:function(t,e,i){t.deserializeClientJson(this,e,i)}}),Y.addMethod(x.Element,{serializeJson:function(t,e,i){if(t.settings.isStyleSerializable&&this._styleMap)for(var n in this._styleMap)this.serializeStyleJson(t,n,e,i);var o;x.Element.superClass.serializeJson.call(this,t,e,i),this.serializePropertyJson(t,"layerId",e,i),this._alarmState.getHighestNativeAlarmSeverity()&&"alarmstate"===t.settings.getPropertyType("alarmState")&&(i.p.alarmState=o={n:{},a:{}},x.AlarmSeverity.forEach(function(t){var e=this.getNewAlarmCount(t);0<e&&(o.n[t.name]=e)},this._alarmState),x.AlarmSeverity.forEach(function(t){var e=this.getAcknowledgedAlarmCount(t);0<e&&(o.a[t.name]=e)},this._alarmState),Y.isEmptyObject(o.n)&&delete o.n,Y.isEmptyObject(o.a)&&delete o.a,Y.isEmptyObject(o)&&delete i.p.alarmState)},serializeStyleJson:function(t,e,i,n){t.serializeStyleJson(this,e,i,n)},deserializeJson:function(t,e){if(x.Element.superClass.deserializeJson.call(this,t,e),t.settings.isStyleSerializable)for(var i in e.s)this.deserializeStyleJson(t,e.s[i],i)},deserializeStyleJson:function(t,e,i){t.deserializeStyleJson(this,e,i)},deserializePropertyJson:function(t,e,i){if("alarmState"===i){if("alarmstate"===t.settings.getPropertyType("alarmState")){for(var n in e.n)this._alarmState.setNewAlarmCount(x.AlarmSeverity.getByName(n),e.n[n]);for(n in e.a)this._alarmState.setAcknowledgedAlarmCount(x.AlarmSeverity.getByName(n),e.a[n])}}else x.Element.superClass.deserializePropertyJson.call(this,t,e,i)}}),Y.addMethod(Re,{serializeJson:function(t,e,i){Re.superClass.serializeJson.call(this,t,e,i),this.serializePropertyJson(t,"image",e,i),this.serializePropertyJson(t,"location",e,i),Y.num(this._width)&&0<=this._width&&this.serializePropertyJson(t,"width",e,i),Y.num(this._height)&&0<=this._height&&this.serializePropertyJson(t,"height",e,i)}}),Y.addMethod(x.Link,{serializeJson:function(t,e,i){x.Link.superClass.serializeJson.call(this,t,e,i),this.serializePropertyJson(t,"fromNode",e,i),this.serializePropertyJson(t,"toNode",e,i)}}),Y.addMethod(x.Follower,{serializeJson:function(t,e,i){x.Follower.superClass.serializeJson.call(this,t,e,i),this.serializePropertyJson(t,"host",e,i)}}),Y.addMethod(Me,{serializeJson:function(t,e,i){Me.superClass.serializeJson.call(this,t,e,i),this.serializePropertyJson(t,"expanded",e,i)}}),Y.addMethod(x.ShapeNode,{serializeJson:function(t,e,i){x.ShapeNode.superClass.serializeJson.call(this,t,e,i),this.serializePropertyJson(t,"points",e,i),this.serializePropertyJson(t,"segments",e,i)}}),Y.addMethod(x.ShapeLink,{serializeJson:function(t,e,i){x.ShapeLink.superClass.serializeJson.call(this,t,e,i),this.serializePropertyJson(t,"points",e,i)}}),Y.addMethod(x.RotatableNode,{serializeJson:function(t,e,i){x.RotatableNode.superClass.serializeJson.call(this,t,e,i),this.serializePropertyJson(t,"angle",e,i)}}),Y.addMethod(x.DataBox,{serializeJson:function(t,e,i){if(t.settings.isClientSerializable&&this._clientMap)for(var n in this._clientMap)this.serializeClientJson(t,n,e,i);this.serializePropertyJson(t,"name",e,i),this.serializePropertyJson(t,"icon",e,i),this.serializePropertyJson(t,"toolTip",e,i)},serializePropertyJson:function(t,e,i,n){t.serializePropertyJson(this,e,i,n)},serializeClientJson:function(t,e,i,n){t.serializeClientJson(this,e,i,n)},deserializeJson:function(t,e){for(var i in e.p)this.deserializePropertyJson(t,e.p[i],i);if(t.settings.isClientSerializable)for(i in e.c)this.deserializeClientJson(t,e.c[i],i)},deserializePropertyJson:function(t,e,i){t.deserializePropertyJson(this,e,i)},deserializeClientJson:function(t,e,i){t.deserializeClientJson(this,e,i)}}),Y.addMethod(x.ElementBox,{serializeJson:function(t,e,i){if(t.settings.isLayerBoxSerializable&&(i.layers=[],this._layerBox.forEachByDepthFirst(function(t){var e={};i.layers.push(e),this._layerBox.getDefaultLayer()!==t&&(e.id=t.getId()),t.getName()&&(e.name=t.getName()),e.visible=t.isVisible(),e.editable=t.isEditable(),e.movable=t.isMovable()},null,this)),t.settings.isStyleSerializable&&this._styleMap)for(var n in this._styleMap)this.serializeStyleJson(t,n,e,i);x.ElementBox.superClass.serializeJson.call(this,t,e,i)},serializeStyleJson:function(t,e,i,n){t.serializeStyleJson(this,e,i,n)},deserializeStyleJson:function(t,e,i){t.deserializeStyleJson(this,e,i)},deserializeJson:function(t,e){if(x.ElementBox.superClass.deserializeJson.call(this,t,e),t.settings.isLayerBoxSerializable&&e.layers&&e.layers)for(var i=e.layers.length,n=0;n<i;n++){var o,s=e.layers[n];null!=s.id?(o=new x.Layer(s.id),this._layerBox.getDataById(o.getId())?o=this._layerBox.getDataById(o.getId()):this._layerBox.add(o)):(o=this._layerBox.getDefaultLayer(),this._layerBox.moveToBottom(o)),s.name&&o.setName(s.name),null!=s.visible&&o.setVisible(s.visible),null!=s.editable&&o.setEditable(s.editable),null!=s.movable&&o.setMovable(s.movable)}if(t.settings.isStyleSerializable)for(var a in e.s)this.deserializeStyleJson(t,e.s[a],a)}}),x.layout.SpringLayouter=function(t){this._network=t,this._damper=1,this._maxMotion=0,this._motionRatio=0,this._isAdjusting=!1,this._timer=null,this._snodeMap={},this._snodes=new ie,this._slinks=new ie,this._network.getElementBox().addDataBoxChangeListener(this._handleDataBoxChange,this),this._network.getElementBox().addDataPropertyChangeListener(this._handleDataPropertyChange,this),this._network.addPropertyChangeListener(this._handleNetworkPropertyChange,this)},Y.ext("twaver.layout.SpringLayouter",Object,{_nodeRepulsionFactor:.6,_linkRepulsionFactor:.6,_limitBounds:null,_interval:50,_stepCount:10,_motionLimit:.01,start:function(){var t;this._timer||((t=this)._timer=window.setInterval(function(){t.relax.call(t)},this._interval),this._damper=1)},stop:function(){this._timer&&(window.clearInterval(this._timer),this._timer=null)},relax:function(){if(!(this._damper<.1&&this._maxMotion<this._motionLimit)){this._rebuild();for(var t=this._snodes.size(),e=0;e<this._stepCount;e++){this._slinks.forEach(this._relaxLink,this);for(var i=0;i<t;i++)for(var n=0;n<t;n++){var o=this._snodes.get(i),s=this._snodes.get(n);o!=s&&this._relaxNodePair(o,s)}this._moveNodes()}this._isAdjusting=!0;for(e=0;e<t;e++){var a=this._snodes.get(e);a.fix||a.element.setLocation(a.x,a.y)}this._isAdjusting=!1}},isRunning:function(){return!!this._timer},getNetwork:function(){return this._network},isVisible:function(t){return this._network.isVisible(t)},isMovable:function(t){return!!this._network.isMovable(t)&&(!this._network.getSelectionModel().contains(t)&&!(t instanceof Me))},getNodeRepulsionFactor:function(){return this._nodeRepulsionFactor},setNodeRepulsionFactor:function(t){this._nodeRepulsionFactor=t=t<.02?.02:t,this._damper=1},getLinkRepulsionFactor:function(){return this._linkRepulsionFactor},setLinkRepulsionFactor:function(t){this._linkRepulsionFactor=t=t<.02?.02:t,this._damper=1},getStepCount:function(){return this._stepCount},setStepCount:function(t){this._stepCount=t,this._damper=1},getInterval:function(){return this._interval},setInterval:function(t){var e;this._interval!==t&&(this._interval=t,this._timer&&(window.clearInterval(this._timer),(e=this)._timer=window.setInterval(function(){e.relax.call(e)},this._interval)))},getLimitBounds:function(){return this._limitBounds},setLimitBounds:function(t){this._limitBounds=t,this._damper=1},_handleDataPropertyChange:function(t){this._isAdjusting||(this._damper=1)},_handleDataBoxChange:function(t){0===this._network.getElementBox().size()?this._damper=0:this._damper=1},_handleNetworkPropertyChange:function(t){"elementBox"===t.property&&(null!=(t=t.oldValue)&&(t.removeDataBoxChangeListener(this._handleDataBoxChange,this),t.removeDataPropertyChangeListener(this._handleDataPropertyChange,this)),this._network.getElementBox().addDataBoxChangeListener(this._handleDataBoxChange,this),this._network.getElementBox().addDataPropertyChangeListener(this._handleDataPropertyChange,this))},_relaxLink:function(t){var e=t.toNode.x-t.fromNode.x,i=t.toNode.y-t.fromNode.y,n=Math.sqrt(e*e+i*i),o=.25*e,e=.25*i;o/=100*t.length;e/=100*t.length,t.length,t.toNode.dx=t.toNode.dx-o*n,t.toNode.dy=t.toNode.dy-e*n,t.fromNode.dx=t.fromNode.dx+o*n,t.fromNode.dy=t.fromNode.dy+e*n},_relaxNodePair:function(t,e){var i=0,n=0,o=t.x-e.x,s=t.y-e.y,a=o*o+s*s;0==a?(i=x.Util.random(),n=x.Util.random()):a<36e4&&(i=o/a,n=s/a);a=.25*(t.repulsion*e.repulsion/100);t.dx+=i*a,t.dy+=n*a,e.dx-=i*a,e.dy-=n*a},_moveNodes:function(){for(var t=this._maxMotion,e=0,i=0,n=this._snodes.size();i<n;i++){var o=this._snodes.get(i),s=o.dx,a=o.dy;s*=this._damper,a*=this._damper,o.dx=s/2,o.dy=a/2;var r=Math.sqrt(s*s+a*a);o.fix||(o.x=o.x+Math.max(-30,Math.min(30,s)),o.y=o.y+Math.max(-30,Math.min(30,a)),this._limitBounds?(o.x<this._limitBounds.x&&(o.x=this._limitBounds.x,this._adjustLocation(1,0)),o.y<this._limitBounds.y&&(o.y=this._limitBounds.y,this._adjustLocation(0,1)),(a=(a=this._network.getElementUI(o.element))?a._viewRect:o.element.getRect())&&(o.x+a.width>this._limitBounds.x+this._limitBounds.width&&(o.x=this._limitBounds.x+this._limitBounds.width-a.width,this._adjustLocation(-1,0)),o.y+a.height>this._limitBounds.y+this._limitBounds.height&&(o.y=this._limitBounds.y+this._limitBounds.height-a.height,this._adjustLocation(0,-1)))):(o.x<1&&this._adjustLocation(1,0),o.y<1&&this._adjustLocation(0,1))),e=Math.max(r,e)}this._maxMotion=e,0<this._maxMotion?this._motionRatio=t/this._maxMotion-1:this._motionRatio=0,this._damp()},_damp:function(){this._motionRatio<=.001&&((this._maxMotion<.2||1<this._maxMotion&&this._damper<.9)&&.01<this._damper?this._damper-=.01:this._maxMotion<.4&&.003<this._damper?this._damper-=.003:1e-4<this._damper&&(this._damper-=1e-4)),this._maxMotion<this._motionLimit&&(this._damper=0)},_rebuild:function(){this._snodeMap={},this._snodes.clear(),this._slinks.clear(),this._network.getElementBox().forEach(function(t){this.isVisible(t)&&(t instanceof x.Link?this._addLink(t):t instanceof Re&&this._addNode(t))},this)},_addNode:function(t){var e=this._snodeMap[t.getId()];return e||((e={}).element=t,e.repulsion=this._getRepulsion(t),e.x=t.getX(),e.y=t.getY(),e.dx=0,e.dy=0,e.fix=!this.isMovable(t),this._snodeMap[t.getId()]=e,this._snodes.add(e),e)},_addLink:function(t){var e={};e.fromNode=this._addNode(t.getFromNode()),e.toNode=this._addNode(t.getToNode()),e.element=t;var i,n=this._network.getElementUI(t.getToNode()),o=this._network.getElementUI(t.getFromNode()),t=n&&n._viewRect&&o&&o._viewRect?(i=n._viewRect.width+o._viewRect.width,n._viewRect.height+o._viewRect.height):(i=t.getToNode().getWidth()+t.getFromNode().getWidth(),t.getToNode().getHeight()+t.getFromNode().getHeight());e.length=Math.floor(Math.sqrt(i*i+t*t)*this._linkRepulsionFactor),e.length<=0&&(e.length=100),this._slinks.add(e)},_getRepulsion:function(t){var e,t=this._network.getElementUI(t);return e=(e=t&&t._viewRect?(e=t._viewRect,Math.floor(Math.sqrt(e.width*e.width+e.height*e.height)*this._nodeRepulsionFactor)):100)<=0?100:e},_adjustLocation:function(t,e){for(var i=0,n=this._snodes.size();i<n;i++){var o=this._snodes.get(i),s=this._network.getElementUI(o.element),s=s?s._viewRect:o.element.getRect();if(!s)return;0<t?(!this._limitBounds||o.x+s.width+t<this._limitBounds.x+this._limitBounds.width)&&(o.x+=t):(!this._limitBounds||o.x+t>this._limitBounds.x)&&(o.x+=t),0<e?(!this._limitBounds||o.y+s.height+e<this._limitBounds.y+this._limitBounds.height)&&(o.y+=e):(!this._limitBounds||o.y+e>this._limitBounds.y)&&(o.y+=e)}}}),x.layout.CloudLayouter=function(t){x.layout.CloudLayouter.superClass.constructor.apply(this,arguments),this._network=t,this._centerX=0,this._centerY=0,this._radius=1,this._rect=null,this._localPoint=null,this._lastWidth=-1e3,this._lastHeight=-1e3,this._nodes=new ie,this._sa=0,this._ca=0,this._sb=0,this._cb=0,this._sc=0,this._cc=0,this._lasta=0,this._lastb=0,this._active=!1,this._horizontalElliptical=1,this._verticalElliptical=1,this._timer=null,this._centering=!1,this._centeringNode=null,this._freeze=!1,"twaver.network.Network"===this._network.getClassName()?this._network.setInteractions([new x.network.interaction.SelectInteraction(this._network)]):this._network.setInteractions([new x.canvas.interaction.SelectInteraction(this._network)])},Y.ext("twaver.layout.CloudLayouter",x.PropertyChangeDispatcher,{__accessor:["updateNodeFunction","mouseMoveFunction","mouseOverFunction","percentPadding","ceaseRate","ceaseLimit"],__bool:["elliptical","active","updateLayoutRectOnResized","reloadOnDataBoxChanged"],_moveSpeed:2,_ceaseRate:.9,_ceaseLimit:.01,_percentPadding:.2,_elliptical:!0,_interval:50,_reloadOnDataBoxChanged:!0,_updateLayoutRectOnResized:!0,getNetwork:function(){return this._network},isLayoutable:function(t){return this._network.isVisible(t)&&this._network.isMovable(t)},start:function(t){var e;0===arguments.length&&(t=!0),this._timer||(this._installListeners(),t&&this.updateLayoutRect(!0),(e=this)._timer=window.setInterval(function(){e._update.call(e)},this._interval),this._update())},stop:function(){this._timer&&(window.clearInterval(this._timer),this._timer=null)},isRunning:function(){return!!this._timer},getInterval:function(){return this._interval},setInterval:function(t){var e,i;this._interval!==t&&(e=this._interval,this._interval=t,this._timer&&(window.clearInterval(this._timer),(i=this)._timer=window.setInterval(function(){i._update.call(i)},this._interval)),this.firePropertyChange("interval",e,t))},getMoveSpeed:function(){return this._moveSpeed},setMoveSpeed:function(t){var e=this._moveSpeed;this._moveSpeed=t,this.firePropertyChange("moveSpeed",e,t)},getLayoutRect:function(){var t=this._network.getView().offsetWidth/this._network.getZoom(),e=this._network.getView().offsetHeight/this._network.getZoom(),i=t*this._percentPadding,n=e*this._percentPadding;return{x:i,y:n,width:t-2*i,height:e-2*n}},getCount:function(){return this._nodes.size()},updateLayoutRect:function(t){var e=this._radius;if(this._rect=this.getLayoutRect(),this._rect.width<=2&&(this._rect.width=2),this._rect.height<=2&&(this._rect.height=2),this._radius=Math.min(this._rect.width/2,this._rect.height/2),this.isElliptical()?(this._horizontalElliptical=this._rect.width/2/this._radius,this._verticalElliptical=this._rect.height/2/this._radius):(this._horizontalElliptical=1,this._verticalElliptical=1),this._centerX=this._rect.x+this._rect.width/2,this._centerY=this._rect.y+this._rect.height/2,t)this.reload();else{this._lasta=1,this._lastb=1;for(var i=this._nodes.size(),n=0;n<i;n++){var o=this._nodes.get(n);o.cx*=this._radius/e,o.cy*=this._radius/e,o.cz*=this._radius/e}this._freeze?this._updateNodes(0,0,0):this._update()}this._lastWidth=this._network.getView().offsetWidth,this._lastHeight=this._network.getView().offsetHeight},reload:function(){this._freeze=!1,this._centeringNode=null,this._localPoint=null,this._centering=!1,this._nodes=new ie,this._box.forEach(function(t){var e;t&&this.isLayoutable(t)&&((e={}).node=t,this._nodes.add(e))},this),this._sineCosine(0,0,0),this._active=!1,this._lasta=1,this._lastb=1;for(var t=this._nodes.size(),e=0;e<t;e++){var i=Math.acos((2*(e+1)-1)/t-1),n=Math.sqrt(t*Math.PI)*i,o=this._nodes.get(e);o.cx=this._radius*Math.cos(n)*Math.sin(i),o.cy=this._radius*Math.sin(n)*Math.sin(i),o.cz=this._radius*Math.cos(i)}},_sineCosine:function(t,e,i){var n=Math.PI/180;this._sa=Math.sin(t*n),this._ca=Math.cos(t*n),this._sb=Math.sin(e*n),this._cb=Math.cos(e*n),this._sc=Math.sin(i*n),this._cc=Math.cos(i*n)},handleSelectionChange:function(t){this.centerNode(this._network.getSelectionModel().getLastData())},handleDataBoxChange:function(t){!this._reloadOnDataBoxChanged&&"clear"!==t.kind||this.reload()},handleMouseMove:function(t){this._centering||this._updateLogicalPoint(t),this._mouseMoveFunction?this._active=this._mouseMoveFunction(t):this._active=!0},handleMouseOver:function(t){this._centering||this._updateLogicalPoint(t),this._mouseOverFunction?this._active=this._mouseOverFunction(t):this._active=!0},_updateLogicalPoint:function(t){this._localPoint=this._network.getLogicalPoint(t)},handleRollOut:function(t){this._active=!1},handleResize:function(t){"validateEnd"===t.kind&&this._updateLayoutRectOnResized&&(Math.abs(this._network.getView().offsetWidth-this._lastWidth)<=2&&Math.abs(this._network.getView().offsetHeight-this._lastHeight)<=2||this.updateLayoutRect())},handleNetworkPropertyChange:function(t){"elementBox"===t.property&&(this._box.removeDataBoxChangeListener(this.handleDataBoxChange,this),this._box=this._network.getElementBox(),this._box.addDataBoxChangeListener(this.handleDataBoxChange,this),this.reload()),"zoom"===t.property&&(this._localPoint=null,this.updateLayoutRect())},_adjustIndex:function(){this._nodes.sort(this._sortFunction);for(var t=this._nodes.size(),e=0;e<t;e++){var i=this._nodes.get(e).node,n=this._box.getDatas().indexOf(i);this._box.getDatas().removeAt(n),this._box.getDatas().add(i,e),this._box.fireIndexChange(i,n,e),this.updateNode(i,e,t,this._nodes.get(e).alpha)}},_sortFunction:function(t,e){return e.cz>t.cz?1:e.cz<t.cz?-1:0},updateNode:function(t,e,i,n){this._updateNodeFunction&&this._updateNodeFunction(t,e,i,n)},_update:function(){if(!this._freeze){var t,e;if(this._centering)if(this._centeringNode)if(this.isAtCenter(this._centeringNode.node,this._centeringNode.perspective,this._centeringNode.cx,this._centeringNode.cy,this._centeringNode.cz))return this._freeze=!0,this._centering=!1,void(this._centeringNode=null);if(e=!this._freeze&&(this._active||this._centering)&&this._localPoint?this.isElliptical()?(t=(this._centerY-this._localPoint.y)/(this._rect.height/2)*this._moveSpeed,(this._localPoint.x-this._centerX)/(this._rect.width/2)*this._moveSpeed):(t=(this._centerY-this._localPoint.y)/this._radius*this._moveSpeed,(this._localPoint.x-this._centerX)/this._radius*this._moveSpeed):(t=this._lasta*this._ceaseRate,this._lastb*this._ceaseRate),this._lasta=t,this._lastb=e,Math.abs(t)>this._ceaseLimit||Math.abs(e)>this._ceaseLimit){this._sineCosine(t,e,0);for(var i=0,n=this._nodes.size();i<n;i++){var o=this._nodes.get(i),s=o.cx,a=o.cy*this._ca+o.cz*-this._sa,r=o.cy*this._sa+o.cz*this._ca,h=s*this._cb+r*this._sb,s=s*-this._sb+r*this._cb,r=h*this._cc+a*-this._sc,h=h*this._sc+a*this._cc,a=s;o.cx=r,o.cy=h,o.cz=a;s=2*this._radius;s/=s+a,o.perspective=s,o.alpha=(this._radius-a)/(2*this._radius);r=this._horizontalElliptical*r*s-2*this._horizontalElliptical+this._centerX,s=h*s*this._verticalElliptical+this._centerY;o.node.setCenterLocation(r,s)}this._adjustIndex()}}},centerNode:function(t){if(t&&this.isLayoutable(t)){if(!this._centeringNode||t!==this._centeringNode.node||!this._freeze)for(var e=0,i=this._nodes.size();e<i;e++){var n=this._nodes.get(e);if(n&&t===n.node){this._centering=!0,this._freeze=!1,this._active=!0,this._centeringNode=n,this._localPoint=this.createControlPoint(this._centeringNode.node);break}}}else this._centering=!1,this._freeze=!1,this._active=!1,this._localPoint=null},createControlPoint:function(t){var e=t.getCenterLocation(),i=this.getLayoutRect(),n=i.x+i.width/2,t=i.y+i.height/2,e=Math.atan2(e.y-t,e.x-n),i=i.width+i.height;return{x:n+i*Math.cos(e),y:t+i*Math.sin(e)}},isAtCenter:function(t,e,i,n,o){if(this._moveSpeed<=0)return!0;var s=16/this._moveSpeed;return 20<s?s=20:s<2&&(s=2),-o/Math.sqrt(i*i+n*n)>s},_updateNodes:function(t,e,i){this._sineCosine(t,e,i);for(var n=0,o=this._nodes.size();n<o;n++){var s=this._nodes.get(n),a=s.cx,r=s.cy*this._ca+s.cz*-this._sa,h=s.cy*this._sa+s.cz*this._ca,l=a*this._cb+h*this._sb,a=a*-this._sb+h*this._cb,h=l*this._cc+r*-this._sc,l=l*this._sc+r*this._cc,r=a;s.cx=h,s.cy=l,s.cz=r;a=2*this._radius;a/=a+r,s.perspective=a;h=this._horizontalElliptical*h*a-2*this._horizontalElliptical+this._centerX,a=l*a*this._verticalElliptical+this._centerY;s.node.setCenterLocation(h,a)}this._adjustIndex()},_installListeners:function(){this._box=this._network.getElementBox(),this._box.addDataBoxChangeListener(this.handleDataBoxChange,this),this._network.getSelectionModel().addSelectionChangeListener(this.handleSelectionChange,this),this._network.addViewListener(this.handleResize,this),m.addEventListener("mouseout","handleRollOut",this._network.getView(),this),m.addEventListener("mousemove","handleMouseMove",this._network.getView(),this),m.addEventListener("mouseover","handleMouseOver",this._network.getView(),this),this._network.addPropertyChangeListener(this.handleNetworkPropertyChange,this)},_uninstallListeners:function(){this._box.removeDataBoxChangeListener(this.handleDataBoxChange,this),this._network.getSelectionModel().removeSelectionChangeListener(this.handleSelectionChange,this),this._network.removeViewListener(this.handleResize,this),m.removeEventListener("mouseout",this._network.getView(),this),m.removeEventListener("mousemove",this._network.getView(),this),m.removeEventListener("mouseover",this._network.getView(),this),this._network.removePropertyChangeListener(this.handleNetworkPropertyChange,this)}}),x.layout.AutoLayouter=function(t,e){this._box=t,this._network=e},Y.ext("twaver.layout.AutoLayouter",Object,{_expandGroup:!1,_repulsion:1,_type:null,_animate:!0,_explicitXOffset:Number.NaN,_explicitYOffset:Number.NaN,_xOffset:0,_yOffset:0,isExpandGroup:function(){return this._expandGroup},setExpandGroup:function(t){this._expandGroup=t},getRepulsion:function(){return this._repulsion},setRepulsion:function(t){this._repulsion=t},getType:function(){return this._type},isAnimate:function(){return this._animate},setAnimate:function(t){this._animate=t},getElementBox:function(){return this._box},getExplicitXOffset:function(){return this._explicitXOffset},setExplicitXOffset:function(t){this._explicitXOffset=t},getExplicitYOffset:function(){return this._explicitYOffset},setExplicitYOffset:function(t){this._explicitYOffset=t},getNodeRect:function(t){if(t instanceof x.Group&&t.isExpanded()&&0<t.getChildrenSize()){for(var e=null,i=0,n=t.getChildrenSize();i<n;i++){var o=t.getChildAt(i);o instanceof x.Node&&(e=x.Util.unionRect(e,this.getNodeRect(o)))}var s=t.s("group.padding"),a=t.s("group.padding.top"),r=t.s("group.padding.bottom"),h=t.s("group.padding.left"),l=t.s("group.padding.right");return s&&x.Util.grow(e,s,s),a&&(e.y-=a,e.height+=a),r&&(e.height+=a),h&&(e.x-=h,e.width+=h),l&&(e.width+=l),e}if(this._network){l=this._network.getElementUI(t);return l.invalidate(),l.validate(),l.getViewRect()}return null},getDimension:function(t){var e=this.getNodeRect(t);return e?{width:e.width,height:e.height}:{width:t.getWidth(),height:t.getHeight()}},isVisible:function(t){return!0},isMovable:function(t){return!0},getGroupLayoutType:function(t){return this._type},getElements:function(){var t,e=this._box,i=1<e.getSelectionModel().size();i?t=e.getSelectionModel().getSelection():(t=new ie,e.forEachByBreadthFirst(t.add,null,t)),this._xOffset=-1,this._yOffset=-1;for(var n=new ie,o=0,s=t.size();o<s;o++){var a=t.get(o);this.isVisible(a)&&(a instanceof x.Link?n.add(a):this.isMovable(a)&&a instanceof Re&&(n.add(a),i&&((this._xOffset<0||a.getX()<this._xOffset)&&(this._xOffset=a.getX()),(this._yOffset<0||a.getY()<this._yOffset)&&(this._yOffset=a.getY()))))}return i||(isNaN(this._explicitXOffset)?this._xOffset=50/this._repulsion:this._xOffset=this._explicitXOffset,isNaN(this._explicitYOffset)?this._yOffset=50/this._repulsion:this._yOffset=this._explicitYOffset),n},getLayoutResult:function(t){var e={};return this.doLayoutImpl(t,null,e),e},doLayout:function(t,e){return this.doLayoutImpl(t,e)},doLayoutImpl:function(t,e,i){var n=this,o=e;e=function(t){n._box._layoutMovingElements=!1,o&&o(t)};var s=null;if("round"===(this._type=t)?s=new Wi:"symmetry"===t?s=new on:"hierarchic"===t?s=new _n:"topbottom"!==t&&"bottomtop"!==t&&"rightleft"!==t&&"leftright"!==t||(s=new Pi),null==s)return!1;n._box._layoutMovingElements=!0;var a,r={},h=this.getElements(),l=new sn(this,h,!0,null),h=l.process(),c=new Ji(this,h,t,!0,null);try{s.i2(c)}catch(t){return l.resetGroup(),null!=e&&e(!1),!1}for(a in c._a){var u=c._a[a],d=c.g4(u);r[a]={x:d.x+this._xOffset,y:d.y+this._yOffset}}if("rightleft"===t||"leftright"===t||"bottomtop"===t){var _=sn.createMatrix(t),g=Number.MAX_VALUE,f=Number.MAX_VALUE;for(a in r){u=c._a[a];var A,p=r[a],m=_.transform(p);p.x=m.x,p.y=m.y,"rightleft"===t||"leftright"===t?((A=m.x-c.g9(u)/2/this._repulsion)<g&&(g=A),(A=m.y-c.gj(u)/2/this._repulsion)<f&&(f=A)):((A=m.x-c.gj(u)/2/this._repulsion)<g&&(g=A),(A=m.y-c.g9(u)/2/this._repulsion)<f&&(f=A))}for(a in r)u=c._a[a],(p=r[a]).x=p.x-g+this._xOffset,p.y=p.y-f+this._yOffset}if(null==i&&this._animate){var v=new ie,y=new ie;for(a in r)v.add(c._a[a].node),y.add(r[a]);x.animate.AnimateManager.endAnimate(),n._box._dataBoxChangeDispatcher.fire({kind:"layouting"}),x.animate.AnimateManager.start(new x.animate.AnimateCenterLocation(v,y,function(){l.resetGroup(),n._box._dataBoxChangeDispatcher.fire({kind:"layoutEnd"}),null!=e&&Y.callLater(e,null,[!0])}))}else{for(a in n._box._dataBoxChangeDispatcher.fire({kind:"layouting"}),r)u=c._a[a],p=r[a],null==i?u.node.setCenterLocation(p.x,p.y):i[u.node.getId()]=p;l.resetGroup(),n._box._dataBoxChangeDispatcher.fire({kind:"layoutEnd"}),null!=e&&Y.callLater(e,null,[!0])}return!0}});function Be(t,e){this.x=t,this.y=e}Y.ext(Be,Object,{equals:function(t){return this===t||t instanceof Be&&(t.x==this.x&&t.y==this.y)}});function Ne(t,e){this.width=t,this.height=e}Y.ext(Ne,Object,{});function Ue(t,e){this.x=t,this.y=e}Y.ext(Ue,Object,{});var ze=function(){2===arguments.length?(ze.superClass.constructor.call(this,arguments[1].width,arguments[1].height),this.x=arguments[0].x,this.y=arguments[0].y):(ze.superClass.constructor.call(this,arguments[2],arguments[3]),this.x=arguments[0],this.y=arguments[1])};Y.ext(ze,Ne,{});var Fe=function(t,e){Fe.a2(t.x,e.x)?(this._a=1,this._b=0,this._c=-t.x):(this._b=-1,e=(e.y-t.y)/(e.x-t.x),t=t.y-t.x*e,this._a=e,this._c=t)};Y.ext(Fe,Object,{a3:function(){return this._a},a4:function(){return this._b},a5:function(){return this._c}}),Fe.a6=function(t,e){if(Fe.a1(t.a3())&&Fe.a1(e.a3()))return null;if(Fe.a1(t.a4())&&Fe.a1(e.a4()))return null;Fe.a1(e.a4())&&(o=t,t=e,e=o);var i=t.a3(),n=t.a4(),o=-t.a5(),t=Fe.a1(t.a3())?(s=e.a4(),-e.a5()):(s=e.a4()-e.a3()/t.a3()*t.a4(),-e.a5()-e.a3()/t.a3()*-t.a5()),s=t/s;return new Be((o-s*n)/i,s)},Fe.a1=function(t){return Fe.a2(t,0)},Fe.a2=function(t,e){return Math.abs(t-e)<1e-5};function Ve(t){if(this._a=new ai,t)for(var e=0;e<t.size();e++)this._a.aa(t.get(e))}Y.ext(Ve,Object,{c:function(){return this._a.ah()},d:function(){return this._a.ah()},a:function(){for(var t=new ie,e=this.c();e.i1();e.i2())t.add(e.i6(),0);return new Ve(t)},b:function(){return this._a.ay()}});function Ge(t,e){this.x=t,this.y=e}Y.ext(Ge,Object,{a:function(t,e){this.x=t,this.y=e}});function He(t,e){this.x=t||0,this.y=e||0}Y.ext(He,Object,{b:function(){return new He(this.x,this.y)},a:function(t){this.z=t},c:function(){return this.x},d:function(){return this.y},f:function(t,e){this.x=t,this.y=e}});se=function(t){this._c=new ai,t?(this.ac(t.a8().b()),this.ad(t.a9().b())):(this.ac(new He),this.ad(new He))};Y.ext(se,Object,{a6:function(){return this.a5(this)},ac:function(t){t.a(this),this._a=t},ad:function(t){t.a(this),this._b=t},a8:function(){return this._a},a9:function(){return this._b},a1:function(t,e){return this.a4(t,e,this.aa())},a2:function(){return this._c.ay()},a7:function(t){return this._c.ak(t)},aa:function(){return 0===this._c.ay()?null:this._c.as()},a3:function(){this._c.af()},i2:function(t){t=this.a7(t);return null!=t?new Be(t.x,t.y):null},i1:function(){return this.a2()},i6:function(){var t=this.a8();return new Be(t.c(),t.d())},i7:function(){var t=this.a9();return new Be(t.c(),t.d())},i8:function(t){this.a8().f(t.x,t.y)},i9:function(t){this.a9().f(t.x,t.y)},i3:function(t,e,i){t=this.a7(t);null!=t&&t.a(e,i)},i4:function(t,e){this.a1(t,e)},i5:function(){this.a3()}});var We=function(t){We.superClass.constructor.call(this,t)};Y.ext(We,se,{a5:function(t){return new We(t)},a4:function(t,e,i){e=new Ge(t,e);return this.ab(e,i),e},ab:function(t,e){this._c.an(t,this._c.al(e))}});Ot=function(){var t,e;2===arguments.length?(t=arguments[0],e=arguments[1],this._s=!1,this._w=30,this._h=30,this._x=t-this._w/2,this._y=e-this._h/2):(this._s=(e=arguments[0])._s,this._w=e._w,this._h=e._h,this._x=e._x,this._y=e._y)};Y.ext(Ot,Object,{m3:function(){return this.m2(this)},m4:function(){return this._x+this._w/2},m5:function(){return this._y+this._h/2},m6:function(t,e){this._x=t-this._w/2,this._y=e-this._h/2},i1:function(){return this._x},i2:function(){return this._y},i5:function(t,e){this._x=t,this._y=e},i3:function(){return this._w},i4:function(){return this._h},i6:function(t,e){var i=(this._w-t)/2,n=(this._h-e)/2;this._x+=i,this._y+=n,this._w=t,this._h=e},m1:function(t){var e,i,n,o=t.width<=0?(e=this._x,i=this._x+this._w,n=this._y,this._y+this._h):(e=Math.min(this._x,t.x),i=Math.max(this._x+this._w,t.x+t.width),n=Math.min(this._y,t.y),Math.max(this._y+this._h,t.y+t.height));t.x=e,t.y=n,t.width=i-e,t.height=o-n}});var Ze=function(t){t?Ze.superClass.constructor.call(this,t):Ze.superClass.constructor.call(this,0,0)};Y.ext(Ze,Ot,{m2:function(t){return new Ze(t)}});function Ye(){this._c=0,this._d=0,this._e=0,this._b=!0,this._f=!1}var Xe={a2:function(t){var e=bi.a2(xn.a(t.xa()));return Xe.a4(t,e,Xe.a3(t,e))},a3:function(t,e){for(var i=t.x9();i.i1();i.i2())e.i7(i.i9(),-1);for(var n=0,o=new di(t.xa()),s=t.x9();s.i1();s.i2()){var a=s.i9();-1===e.i2(a)&&Xe.a(a,o,e,n++)}return n},a6:function(t){for(var e=new ri,i=Xe.a2(t),n=0;n<i.length-1;n++){var o=t.xo(i[n].x2(),i[n+1].x3());e.aa(o)}return e},a4:function(t,e,i){for(var n=[],o=0;o<i;o++)n[o]=new Ci;for(var s=t.x9();s.i1();s.i2())n[e.i2(s.i9())].ae(s.i9());return n},a:function(t,e,i,n){for(e.c(t),i.i7(t,n);!e.a();){for(var o=(t=e.b()).ag();null!=o;o=o.a8()){var s=o.a3();-1===i.i2(s)&&(i.i7(s,n),e.c(s))}for(var a=t.ae();null!=a;a=a.a7()){var r=a.a2();-1===i.i2(r)&&(i.i7(r,n),e.c(r))}}},a1:function(t,e,i){i=new ei(e,i);return i.a8(t),i._i},a5:function(t,e,i){for(var n=[],o=0;o<i;o++)n[o]=new ri;for(var s=t.xf();s.i1();s.i2())n[e.i2(s.i8())].aa(s.i8());return n},a7:function(t){var e=new ri,i=bi.a3(xn.b(t.xa())),n=bi.a4(xn.a(t.xh())),o=Xe.a1(t,n,i),s=Xe.a5(t,n,o);if(1<s.length){for(var a,r=new Ci,h=0;h<s.length;h++){var l=s[h],c=null;if(1===l.ay()){var u=l.c2();1===u.a2().ad()?c=u.a2():1===u.a3().ad()&&(c=u.a3())}else{for(var d=l.c1();d.i1();d.i2()){var _=d.i8();if(i.i4(_.a2()))if(null==c)c=_.a2();else if(c!==_.a2()){c=null;break}if(i.i4(_.a3()))if(null!=c){if(c!==_.a3()){c=null;break}}else c=_.a3()}null!=c&&(c=(l=l.c2()).a2()!==c?l.a2():l.a3())}null!=c&&r.aa(c)}for(var g=r.x4();!r.ar();g=a)a=r.x4(),e.ac(t.xo(g,a))}return e}};Y.ext(Ye,Object,{a6:function(t){this._f=t},a7:function(t){this._b=t},a8:function(t){0!==t.x0()&&this.a9(t,t.x9().i9())},a9:function(t,e){if(this._xx=t.xk(),this._c=t.xl(),this._d=0,this._e=0,this.a0(e),this._b)for(var i=t.x9();i.i1();i.i2()){var n=i.i9();null==this._xx.i1(n)&&(this.a1(n),this.a0(n))}t.xi(this._xx),t.xj(this._c)},a0:function(t){var e=++this._d;this._xx.z1(t,Ye._B),this.a5(t,e);for(var i=this._f?t.ap():t.af();i.i1();i.i2()){var n,o=i.i8();this._c.i4(o)||(this._c.i7(o,!0),n=o.a1(t),null==this._xx.i1(n)?(this.a3(o,n,!0),this.a0(n),this.a2(o,n)):this.a3(o,n,!1))}this.a4(t,e,++this._e),this._xx.z1(t,Ye._C)},a5:function(t,e){},a4:function(t,e,i){},a3:function(t,e,i){},a2:function(t,e){},a1:function(t){}}),Ye._B={},Ye._C={};function je(t){this._a=t}Y.ext(je,Ye,{a5:function(t,e){var i=this._a._ah.i2(t);this._a._ad[i].ae(t)}});function Qe(t){this._a=t}Y.ext(Qe,Ye,{a2:function(t,e){var i=t.a1(e),i=this._a[i.al()],e=this._a[e.al()];e._a+1>i._a?(i._c=i._a,i._b=i._d,i._a=e._a+1,i._d=t):e._a+1>i._c&&(i._c=e._a+1,i._b=t)}});function Ke(t){this._a=t}Y.ext(Ke,Ye,{a3:function(t,e,i){i&&t.a2()===e&&this._a.ac(t)}});function qe(){this._a=0,this._c=0}Y.ext(qe,Object,{});function Je(){this._a=0}Y.ext(Je,Object,{a1:function(t,e){this._a=0;for(var i=e.length-1;0<=i;i--)e[i]=-1;for(var n=t.x9();n.i1();n.i2()){var o=n.i9();if(0===o.ak()){this.a2(o,o.al(),e);break}}for(var s=t.x9();s.i1();s.i2()){var a=s.i9(),r=a.al();-1===e[r]&&this.a2(a,r,e)}},a2:function(t,e,i){i[e]=-2;for(var n=t.ag();null!=n;){var o=n.a3(),s=o.al();-1===i[s]&&this.a2(o,s,i),n=n.a8()}i[e]=this._a++}});var $e={a1:function(t){var e=new ti;return e.a8(t),e._n},a2:function(t){var e=t.x9(),i=null,n=0;for(e.i4();e.i1();e.i2())0===e.i9().ak()&&(i=e.i9(),n++);if(1===n)return i;for(n=0,e.i4();e.i1();e.i2())0===e.i9().ao()&&(i=e.i9(),n++);return 1===n?i:$e.a8(t)},a8:function(t){var e=xn.a(t.x0()),e=bi.a2(e);return $e.a6(t,e)},a6:function(t,e){var i=t.xd(),n=xn.d(1),o=xn.a(t.x0(),-1),s=$e.a4(t,i);$e.a7(i,e,n,o,-1);for(var a=s.c1();a.i1();a.i2())t.x3(a.i8());return n[0]},a7:function(t,e,i,n,o){for(var s=0,a=t.ag();null!=a;a=a.a8()){var r=a.a3(),h=$e.a7(r,e,i,n,o);o<h&&(o=h),s+=n[r.al()]}for(var l=s*(t._g.xa()-1-s),c=t.ag();null!=c;c=c.a8())for(var u=c.a3(),d=c.a8();null!=d;d=d.a8()){var _=d.a3();l+=n[u.al()]*n[_.al()]}return e.i7(t,l),n[t.al()]=s+1,o<l&&(o=l,i[0]=t),o},a4:function(t,e){var i=new ri,n=new Ke(i);n.a6(!1),n.a9(t,e);for(var o=i.c1();o.i1();o.i2())t.x3(o.i8());return i},a3:function(t){return $e.a4(t,$e.a2(t))}},ti=function(){this._n=!0,this.a6(!1)};Y.ext(ti,Ye,{a3:function(t,e,i){i||(this._n=!1)},a1:function(t){this._n=!1}});var ei=function(t,e){this._i=0,this._m=e,this._j=t,this._l=!1};Y.ext(ei,Ye,{a8:function(t){this._h=xn.a(t.x0()),this._k=xn.a(t.x0()),this._g=new di(t.xh()),ei.superClass.a8.call(this,t)},a5:function(t,e){this._k[t.al()]=this._h[t.al()]=e},a3:function(t,e,i){this._g.c(t),i||(t=t.a1(e),this._h[t.al()]=Math.min(this._h[t.al()],this._k[e.al()]))},a1:function(t){this._l=!1},a2:function(t,e){var i=t.a1(e);if(this._h[e.al()]>=this._k[i.al()]){for(;this._g.d()!==t;this._j.i5(this._g.b(),this._i));this._j.i5(this._g.b(),this._i),this._i++,!this._g.a()||this._l?this._m.i5(i,!0):this._l=!0}this._h[i.al()]=Math.min(this._h[i.al()],this._h[e.al()])}});function ii(t,e){this._h=!1,this._i=t,this._g=e}Y.ext(ii,Object,{z1:function(t,e){t._c[this._i]=e},i1:function(t){return t._c[this._i]},i5:function(t,e){t._c[this._i]=e},i4:function(t){return t._c[this._i]},i7:function(t,e){t._c[this._i]=e},i2:function(t){t=t._c[this._i];return null==t?0:t},i6:function(t,e){t._c[this._i]=e},i3:function(t){t=t._c[this._i];return null==t?0:t},c:function(){return this._h},d:function(){this._h=!0}});function ni(t,e){this._c=!1,this._d=t,this._b=e}Y.ext(ni,Object,{i8:function(t,e){t._c[this._d]=e},i1:function(t){return t._c[this._d]},i7:function(t,e){t._c[this._d]=e},i4:function(t){t=t._c[this._d];return null!=t&&t},i5:function(t,e){t._c[this._d]=e},i2:function(t){t=t._c[this._d];return null==t?0:t},i6:function(t,e){t._c[this._d]=e},i3:function(t){t=t._c[this._d];return null==t?0:t},a:function(){return this._c},b:function(){this._c=!0}});function oi(t){this._bb=t,this.i4()}Y.ext(oi,Object,{i1:function(){return null!=this._aa},i2:function(){this._aa=this._aa._a},i3:function(){this._aa=this._aa._b},i4:function(){this._aa=this._bb._b},i5:function(){this._aa=this._bb._c},i7:function(){return this._bb.ay()},i6:function(){return this._aa._c}});var si=function(t){si.superClass.constructor.call(this,t)};Y.ext(si,oi,{i8:function(){return this.i6()}});var ai=function(t){if(this._id=Y.id(),this._a=0,t)for(t.i4();t.i1();t.i2())this.ae(t.i6())};Y.ext(ai,Object,{ac:function(t){t=this.ag(t);return null==this._b?this._b=this._c=t:((this._b._b=t)._a=this._b,this._b=t),this._a++,t},ae:function(t){t=this.ag(t);return null==this._c?this._b=this._c=t:((this._c._a=t)._b=this._c,this._c=t),this._a++,t},z1:function(t){t._b=null,(t._a=null)==this._c?this._b=this._c=t:((this._c._a=t)._b=this._c,this._c=t),this._a++},ad:function(t){t._b=null,(t._a=null)==this._b?this._b=this._c=t:((this._b._b=t)._a=this._b,this._b=t),this._a++},aa:function(t){return this.ae(t),!0},ab:function(t){for(;t.i1();t.i2())this.ae(t.i6())},ao:function(t,e){if(e===this._b)return this.ac(t);if(null==e)return this.ae(t);t=this.ag(t);return this.aq(t,e),t},aq:function(t,e){var i;null==e||e===this._b?this.ad(t):(null==this._c?(t._b=null,t._a=null,this._b=this._c=t):(i=e._b,(e._b=t)._a=e,(i._a=t)._b=i),this._a++)},ap:function(t,e){var i;null==e||e===this._c?this.z1(t):(null==this._b?(t._b=null,t._a=null,this._b=this._c=t):(i=e._a,(((e._a=t)._a=i)._b=t)._b=e),this._a++)},an:function(t,e){if(e===this._c)return this.ae(t);if(null==e)return this.ac(t);t=this.ag(t);return this.ap(t,e),t},ay:function(){return this._a},ar:function(){return 0===this._a},af:function(){this._b=this._c=null,this._a=0},am:function(){return this._b._c},at:function(){var t=this.am();return this.aw(this._b),t},as:function(){return this._c._c},au:function(){return this.aw(this._c)},ak:function(t){for(var e=0,i=this._b;null!=i;){if(t===e)return i._c;i=i._a,e++}return null},aj:function(t){return null==t._a?this._b:t._a},ai:function(t){return null==t._b?this._c:t._b},aw:function(t){return t!==this._b?t._b._a=t._a:this._b=t._a,t!==this._c?t._a._b=t._b:this._c=t._b,this._a--,t._c},av:function(t){return this.aw(t._aa)},ah:function(){return new oi(this)},al:function(t){for(var e=this._b;null!=e;){if(null==e._c&&null==t)return e;if(e._c===t)return e;e=e._a}return null},a0:function(){for(var t=xn.d(this._a),e=0,i=this._b;null!=i;)t[e]=i._c,i=i._a,e++;return t},ax:function(){for(var t=this._b;null!=t;t=t._b){var e=t._a;t._a=t._b,t._b=e}var i=this._b;this._b=this._c,this._c=i},a1:function(t){var e=this.a0();e.sort(t);for(var i=0,n=this._b;null!=n;)n._c=e[i],n=n._a,i++},a2:function(){var t=this.a0();t.sort(xn.c);for(var e=0,i=this._b;null!=i;)i._c=t[e],i=i._a,e++},az:function(t){null==this._b?(this._b=t._b,this._c=t._c):null!=t._b&&(this._c._a=t._b,t._b._b=this._c,this._c=t._c),this._a+=t._a,t._b=t._c=null,t._a=0},ag:function(t){return new ci(t)}});var ri=function(t){ri.superClass.constructor.call(this,t)};Y.ext(ri,ai,{c1:function(){return new si(this)},c2:function(){return this.am()},c3:function(){return this.at()}});function hi(){this._c=0}Y.ext(hi,Object,{a:function(t){this._c++,t._b=this._b,(t._a=null)!=this._b?(this._b._a=t,this._b=t):this._b=this._a=t},b:function(t,e){var i;null!=e?(null!=(i=e._b)?i._a=t:this._a=t,t._b=i,(t._a=e)._b=t,this._c++):this.a(t)},c:function(t){var e=t._a,t=t._b;this._c--,null!=e?e._b=t:this._b=t,null!=t?t._a=e:this._a=e}});function li(t,e){this._p=t,this._j=e,this._o=t._o[e]}Y.ext(li,Object,{i1:function(){return null!=this._o},i2:function(){this._o=this._o._k[this._j]},i3:function(){this._o=this._o._f[this._j]},i4:function(){this._o=this._p._o[this._j]},i5:function(){this._o=this._p._q[this._j]},i7:function(){return this._p._n[this._j]},i6:function(){return this._o},i8:function(){return this._o}});var ci=function(t){this._c=t};Y.ext(ci,Object,{a:function(){return this._a},b:function(){return this._b},c:function(t){this._c=t},d:function(){return this._c}});function ui(t,e,i,n){this._r=t,this._s=e,this._q=i,this._p=n}Y.ext(ui,Object,{i1:function(t){return this._p[t.a5()]},i3:function(t){return this._r[t.a5()]},i2:function(t){return this._s[t.a5()]},i4:function(t){return this._q[t.a5()]},i8:function(t,e){this._p[t.a5()]=e},i6:function(t,e){this._r[t.a5()]=e},i5:function(t,e){this._s[t.a5()]=e},i7:function(t,e){this._q[t.a5()]=e}});var di=function(t){this._a=xn.d(t),this._b=-1};Y.ext(di,Object,{d:function(){return this._a[this._b]},b:function(){return this._a[this._b--]},c:function(t){this._a[++this._b]=t},a:function(){return this._b<0}});se=function(){};Y.ext(se,Object,{a0:function(t){this._c=xn.d(t)}});function _i(t,e,i,n,o,s,a){this._g=0,t.xt(this,e,i,n,o,s,a)}Y.ext(_i,se,{a5:function(){return this._h._u&&this._h.b1(),this._g},a2:function(){return this._d},a3:function(){return this._e},a1:function(t){return this._d!==t?this._d:this._e},a4:function(){for(var t=0;t<=1;t++)this._k[t]=null,this._f[t]=null},a8:function(){return this._k[0]},a7:function(){return this._k[1]},a6:function(t,e,i,n){this.a0(n),this._h=t,this._k=xn.d(2),this._f=xn.d(2),this._d=e,this._e=i}});function gi(t){this._j=0,this._h=t,this.i4()}Y.ext(gi,Object,{i2:function(){this._k=this._k._k[this._j],null==this._k&&0===this._j&&(this._k=this._h._o[1],this._j=1)},i3:function(){this._k=this._k._f[this._j],null==this._k&&1===this._j&&(this._k=this._h._q[0],this._j=0)},i4:function(){this._k=this._h._o[0],null==this._k?(this._k=this._h._o[1],this._j=1):this._j=0},i5:function(){this._k=this._h._q[1],null==this._k?(this._k=this._h._q[0],this._j=0):this._j=1},i1:function(){return null!=this._k},i6:function(){return this._k},i8:function(){return this._k},i7:function(){return this._h.ad()}});function fi(){this._a=Yi._A,this._b=Yi._A,this._c=new ie}Y.ext(fi,Object,{i1:function(){return this._c.size()},i2:function(t){return this._c.get(t)},i3:function(t,e,i){this._c.set(t,new Be(e,i))},i4:function(t,e){this._c.add(new Be(t,e))},i5:function(){this._c.clear()},i6:function(){return this._a},i7:function(){return this._b},i8:function(t){this._a=t},i9:function(t){this._b=t}});function Ai(){this._x=0,this._y=0,this._w=0,this._h=0}Y.ext(Ai,Object,{i5:function(t,e){this._x=t,this._y=e},i6:function(t,e){this._w=t,this._h=e},i4:function(){return this._h},i3:function(){return this._w},i1:function(){return this._x},i2:function(){return this._y}});function pi(t,e,i,n){this._m=t,this._n=e,this._l=i,this._k=n}Y.ext(pi,Object,{i1:function(t){return this._k[t.al()]},i3:function(t){return this._m[t.al()]},i2:function(t){return this._n[t.al()]},i4:function(t){return this._l[t.al()]},z1:function(t,e){this._k[t.al()]=e},i6:function(t,e){this._m[t.al()]=e},i7:function(t,e){this._n[t.al()]=e},i5:function(t,e){this._l[t.al()]=e}});function mi(t,e){this._b=t,this._r=e,this._a=[];for(var i=this._b-1;0<=i;i--)this._a.push(i);this._c=new ie}Y.ext(mi,Object,{a1:function(t){var e;if(0===this._a.length){this.a2(t,this._b,this._b+this._r);for(var i=this._b+this._r-1;i>this._b;i--)this._a.push(i);e=this._b,this._b+=this._r}else e=this._a.pop();return e},b:function(t){var e=this.a1(t),i=new ii(e,this);return this._c.add(i),this.a4(t,e),i},c:function(t){var e=this.a1(t),i=new ni(e,this);return this._c.add(i),this.a4(t,e),i},a2:function(t,e,i){for(var n=t._a;null!=n;n=n._a){var o=xn.d(i);xn.f(n._c,o,e),n._c=o}},a3:function(t,e,i){i=xn.d(i);xn.f(t._c,i,e),t._c=i},a4:function(t,e){for(var i=t._a;null!=i;i=i._a)i._c[e]=null},a5:function(t,e){if(t instanceof ii){var i=t;if(i.c())throw"Error";i.d();i=t._i;this._a.indexOf(i)<0&&(this.a4(e,i),this._a.push(i),this._c.remove(t))}},a6:function(t,e){if(t instanceof ni){var i=t;if(i.a())throw"Error";i.b();i=i._d;this._a.indexOf(i)<0&&(this.a4(e,i),this._a.push(i),this._c.remove(t))}}});function vi(t){this._id=Y.id(),this._p=0,t.xs(this)}Y.ext(vi,se,{ad:function(){return this._n[0]+this._n[1]},ak:function(){return this._n[1]},ao:function(){return this._n[0]},al:function(){return this._g._y&&this._g.c(),this._p},ag:function(){return this._o[0]},ae:function(){return this._o[1]},af:function(){return new gi(this)},am:function(){return new li(this,1)},ap:function(){return new li(this,0)},an:function(){return new wi(this)},aq:function(){return new yi(this,1)},aw:function(){return new yi(this,0)},ah:function(t){for(var e=this._o[0];null!=e;e=e._k[0])if(e.a3()===t)return e;return null},ai:function(t){for(var e=this._o[1];null!=e;e=e._k[1])if(e.a2()===t)return e;return null},aj:function(t){var e=this.ah(t);return e=null==e?this.ai(t):e},au:function(t){this.at(t,1,xn.d(this.ak()))},av:function(t){this.at(t,0,xn.d(this.ao()))},as:function(t,e){this.a0(e),this._g=t,this._o=xn.d(2),this._q=xn.d(2),this._n=xn.a(2)},ab:function(t,e,i,n,o){var s,a;null!=e?(a=e._d===e._e?n:this!==e._d?1:0,0===o?(s=e._k[a],t._f[n]=e,t._k[n]=s,e._k[a]=t,null==s?this._q[i]=t:s._d===s._e?s._f[n]=t:s._f[this!==s._d?1:0]=t):(s=e._f[a],t._k[n]=e,t._f[n]=s,e._f[a]=t,null==s?this._o[i]=t:s._d===s._e?s._k[n]=t:s._k[this!==s._d?1:0]=t),this._n[i]++):this.aa(t,i,n)},aa:function(t,e,i){var n=this._q[e];(t._k[i]=null)==n?(this._o[e]=t)._f[i]=null:(t._f[i]=n)._d===n._e?n._k[i]=t:n._k[this!==n._d?1:0]=t,this._q[e]=t,this._n[e]++},ar:function(t,e,i){var n=t._k[i],i=t._f[i];null==n?this._q[e]=i:n._f[n._d!==this?1:0]=i,null==i?this._o[e]=n:i._k[i._d!==this?1:0]=n,this._n[e]--},ac:function(){for(var t=0;t<=1;t++)this._o[t]=null,this._q[t]=null,this._n[t]=0},at:function(t,e,i){if(!(this._n[e]<2)){for(var n=this._n[e],o=0,s=this._o[e];null!=s;s=s._k[e])i[o]=s,o++;xn.s(i,n,t);var a=this._o[e]=i[0];a._f[e]=null;for(var r=1;r<n;)((s=i[r])._f[e]=a)._k[e]=s,r++,a=s;(this._q[e]=s)._k[e]=null}}});var yi=function(t,e){yi.superClass.constructor.call(this,t,e),this._h=1!==e?1:0};Y.ext(yi,li,{i6:function(){return this.i9()},i9:function(){return 0!==this._h?this._o._e:this._o._d}});var wi=function(t){wi.superClass.constructor.call(this,t)};Y.ext(wi,gi,{i6:function(){return this._k.a1(this._h)},i9:function(){return this._k.a1(this._h)}});var xi=function(t){xi.superClass.constructor.call(this,t)};Y.ext(xi,oi,{i9:function(){return this.i6()}});function Ei(t){this._o=t,this._c=t._a}Y.ext(Ei,Object,{i1:function(){return null!=this._c},i2:function(){this._c=this._c._a},i3:function(){this._c=this._c._b},i5:function(){this._c=this._o._b},i4:function(){this._c=this._o._a},i7:function(){return this._o._c},i6:function(){return this._c},i9:function(){return this._c},i8:function(){return this._c}});var Ci=function(t){if(t&&t.length){Ci.superClass.constructor.call(this);for(var e=0;e<t.length;e++)this.ae(t[e])}else Ci.superClass.constructor.call(this,t)};Y.ext(Ci,ai,{x1:function(){return new xi(this)},x2:function(){return this.am()},x3:function(){return this.as()},x4:function(){return this.at()}});var Ti=function(t){this._d=t,Ti.superClass.constructor.call(this)};Y.ext(Ti,Ci,{});function Ii(t){this._a=t,this._b=new ri,this._c=new Ci}Y.ext(Ii,Object,{a:function(){for(var t=this._a.x9();t.i1();t.i2())this.e(t.i9())},b:function(){this.c(),this.d()},c:function(){for(;!this._c.ar();){var t=this._c.x4();this._a.xq(t)||this.g(t)}},d:function(){for(;!this._b.ar();){var t=this._b.c3();this._a.xp(t)||this.f(t)}},e:function(t){for(var e=t.af();e.i1();e.i2())this._b.ac(e.i8()),this._a.h1(e.i8());this._c.ac(t),this._a.h2(t)},f:function(t){this._a.u1(t)},g:function(t){this._a.h3(t)}}),Ii.h=function(t,e){for(e.i4();e.i1();e.i2()){var i=e.i8();t.xq(i.a2())||t.h3(i.a2()),t.xq(i.a3())||t.h3(i.a3()),t.xp(i)||t.u1(i)}},Ii.i=function(t,e){for(e.i4();e.i1();e.i2()){var i=e.i8();t.xp(i)&&t.h1(i),0===i.a2().ad()&&t.h2(i.a2()),0===i.a3().ad()&&t.h2(i.a3())}};function Li(){this._g=arguments[0],this._f=this._g.xk(),this._h=this._g.xk(),this._d=new ai,this._e=0,1!==arguments.length&&this.a(arguments[1],arguments[2],arguments[3],arguments[4])}Y.ext(Li,Object,{a:function(t,e,i,n){for(var o=xn.d(i-e+1),s=e;s<=i;s++)o[s]=new Ti(s);for(var a=this._g.x9();a.i1();a.i2()){var r=a.i9();null!=n&&!n.i4(r)||(this._f.z1(r,o[t.i2(r)-e].ac(r)),this._e++)}for(var h=0;h<o.length;h++)for(var l=o[h],c=this._d.ae(l),u=l.x1();u.i1();u.i2())this._h.z1(u.i9(),c)},c:function(){this._g.xi(this._h),this._g.xi(this._f)},e:function(){return 0===this._e},g:function(){for(;this._d.am().ar();this._d.at());this._e--;var t=this._d.am().x4();return this._h.z1(t,null),this._f.z1(t,null),t},f:function(){for(;this._d.as().ar();this._d.au());this._e--;var t=this._d.as().x4();return this._h.z1(t,null),this._f.z1(t,null),t},d:function(t){var e=this._f.i1(t),i=this._h.i1(t),n=i.d(),o=null,i=i.a();null!=i?(o=i.d(),this._h.z1(t,i)):(o=new Ti(n._d+1),this._h.z1(t,this._d.ae(o))),n.aw(e),this._f.z1(t,o.ac(t))},b:function(t){var e=this._f.i1(t),i=this._h.i1(t),n=i.d(),o=null,i=i.b();null!=i?(o=i.d(),this._h.z1(t,i)):(o=new Ti(n._d-1),this._h.z1(t,this._d.ac(o))),n.aw(e),this._f.z1(t,o.ac(t))}});function Si(){var t,e,i;2===arguments.length?(this._a=new ai,this._b=new ai,t=arguments[this._c=0],i=new Ri(t._j2.gj(e=arguments[1])/2,0),this._a.ac(i),i=new Ri(t._j2.gj(e)/2,0),this._b.ac(i)):(this._a=arguments[1],this._b=arguments[2],this._c=arguments[3])}var bi={a1:function(t){return new pi(t,null,null,null)},a2:function(t){return new pi(null,t,null,null)},a3:function(t){return new pi(null,null,t,null)},a4:function(t){return new ui(null,t,null,null)},a5:function(t){return new ui(null,null,t,null)},a6:function(t){return new ui(null,null,null,t)}};Y.ext(Si,Object,{});var Ri=function(t,e){this._b=t,this._a=e};Y.ext(Ri,Object,{});Ot=function(){this._cx=!0,this._cs=new Vi,this._ct=new zi,this._cw=new Fi};Y.ext(Ot,Object,{i5:function(t){this._cx=t},k:function(){var t=new Gi(this);return this._cx&&(this._cs.w1(t),t=this._cs),this._cw.w1(t),t=this._cw,this._ct.w1(t),t=this._ct},i2:function(t){this.k().i2(t)},i1:function(t){return this.k().i1(t)}});var Pi=function(){Pi.superClass.constructor.call(this),this._jv=20,this._jw=40,this._jx=function(t,e){var i=t.a3(),t=e.a3(),e=i._g;return Math.floor(100*(e.g5(i)-e.g5(t)))}};Y.ext(Pi,Ot,{i4:function(t){return $e.a1(t)},i3:function(t){if(!this.i4(t))throw"Error";var e,i,n=$e.a3(t);for(this._j2=t,this._j3=new Mi(t),$i.c(t),this._jy=t.xk(),t.xb()||(this.bu(),e=this._j3.c1(),this.f(e),this.b(this._j3),this.c(this._j3));!n.ar();t.x3(i))i=n.c3(),$i.b(t.g2(i))},bu:function(){if(null!=this._jx)for(var t=this._j2.x9();t.i1();t.i2())t.i9().av(this._jx)},c:function(t){for(var e=this.a2(t),i=xn.a(e.length),n=0;n<e.length;n++){for(var o=0,s=e[n].ah();s.i1();s.i2())var a=s.i6(),o=Math.max(o,this._j2.g9(a));i[n]=o}for(var r=-this._jw,h=0;h<e.length;h++){r+=this._jw+i[h];for(var l=e[h].ah();l.i1();l.i2()){var c=l.i6();this._j2.s2(c,this._j2.g5(c),r-i[h]/2)}}},a2:function(t){for(var e=xn.d(t.b()),i=0,n=t.b();i<n;i++)e[i]=new ai;return t.c1(),this.a1(t.c1(),0,e),e},a1:function(t,e,i){i[e].ae(t);for(var n=t.aw();n.i1();n.i2())this.a1(n.i9(),e+1,i)},b:function(t){t=t.c1();this._j2.s2(t,0,this._j2.g6(t)),this.g(t)},g:function(t){for(var e=t.aw();e.i1();e.i2()){var i=e.i9(),n=this._jy.i1(i);this._j2.s2(i,this._j2.g5(t)+n._c,this._j2.g6(i)),this.g(i)}},f:function(t){if(this._j3.c2(t))this._jy.z1(t,new Si(this,t));else{var e=t.aw(),i=e.i9();e.i2(),this.f(i);var n=this._jy.i1(i),o=new Si(this,n._a,n._b,0);if(!e.i1())return o._a.ac(new Ri(this._j2.gj(t)/2,0)),o._b.ac(new Ri(this._j2.gj(t)/2,0)),void this._jy.z1(t,o);for(;e.i1();){i=e.i9(),e.i2(),this.f(i);for(var n=this._jy.i1(i),s=o._b.ah(),a=n._a.ah(),r=2147483647,h=0,l=0;s.i1()&&a.i1();){var c=s.i6();s.i2();var u=a.i6();a.i2(),l+=c._a,h+=u._a,r=Math.min(r,h-l-c._b-u._b)}if(n._c=this._jv-r,h+=n._c,n._b.am()._a=n._c,s.i1()&&!a.i1())for(var d=l-this.a3(n._b);s.i1();d=0){var _=s.i6();s.i2(),n._b.ae(new Ri(_._b,_._a+d))}else if(!s.i1()&&a.i1())for(var g=h-(g=this.a3(o._a));a.i1();g=0){var f=a.i6();a.i2(),o._a.ae(new Ri(f._b,f._a+g))}o._b=n._b}this._jy.z1(t,o);for(var A=-n._c/2,p=t.aw();p.i1();){var m=p.i9();p.i2();var v=this._jy.i1(m);v._c+=A;m=v._b.am();m._a+=A,(m=v._a.am())._a+=A}o._a.ac(new Ri(this._j2.gj(t)/2,0)),o._b.ac(new Ri(this._j2.gj(t)/2,0))}},a3:function(t){for(var e=0,i=t.ah();i.i1();i.i2())e+=i.i6()._a;return e}});var Mi=function(t){this._b=t,this.a()};Y.ext(Mi,Object,{c1:function(){return null==this._a&&this.a(),this._a},b:function(){return null==this._a?-1:this.d(this._a)},d:function(t){for(var e=0,i=t.aw();i.i1();i.i2())e=Math.max(e,this.d(i.i9()));return e+1},c2:function(t){return 0===t.ao()},a:function(){for(var t=this._b.x9();t.i1();t.i2())if(0===t.i9().ak())return void(this._a=t.i9())}});function Di(t){this._d=0,this._e=0,this._f=0,this._a=0,this._b=0,this._g=t,this._c=new ai}Y.ext(Di,Object,{a:function(){return this._d+this._e+this._f}});var ki=function(){ki.superClass.constructor.call(this),this._kl=340,this._km=360,this._kk=40,this._ko=.5};Y.ext(ki,Ot,{ic:function(){return this._km},ia:function(){return this._kl},i9:function(){return this._ko},i3:function(t){if(!$e.a1(t))throw"Error";this._a=t;var e=this.i8(),i=$e.a4(t,e);$i.c(t),this._kn=xn.d(t.x0());for(var n,o=t.x9();o.i1();o.i2()){var s=o.i9();s!==e?this.aa(s,new Di(this._kk+this.q(s.aq().i9()))):this.aa(s,new Di(this._kk))}for(this.s(e),t.s2(e,0,0),this.t(e);!i.ar();t.x3(n))n=i.c3()},i4:function(t){return $e.a1(t)},i0:function(t){return this._kn[t.al()]},i8:function(){return $e.a2(this._a)},i7:function(t){for(var e=this.ib(t);;){if((s=this.i6(t))<=e)break;for(var i=t.aw();i.i1();i.i2()){var n=i.i9();this.i0(n)._g*=1+this._ko}}for(var o=(e-s)/(2*t.ao()),s=0,a=t.aw();a.i1();a.i2()){var r=this.i0(a.i9());r._d+=o,r._e+=o,s+=r._d+r._e}this.id(t)},id:function(t){for(var e=xn.d(t.ao()),i=0,n=t.ap();n.i1();)e[i]=n.i8(),n.i2(),i++;var o=this;e.sort(function(t,e){t=t.a3(),e=e.a3(),e=o.i0(t).a()-o.i0(e).a();return 0<e?1:0<=e?0:-1});for(var s=0;s<e.length;s++)this._a.h1(e[s]);for(var a=0;a<e.length;a+=2)this._a.u1(e[a]);for((i=e.length-1)%2==0&&i--;0<i;i-=2)this._a.u1(e[i])},ib:function(t){return 0===t.ak()?this._km:2===t.ao()?Math.min(180,this._kl):this._kl},i6:function(t){for(var e=0,i=t.ap();i.i1();i.i2()){for(var n,o,s=i.i8().a3(),s=this.i0(s),a=-s._g,r=s._b,h=s._c,l=0,c=l+1,u=h._b,d=u.d();l<c;c=(n.y-r)/(n.x-a))n=d,l=((d=(u=h.ai(u)).d()).y-n.y)/(d.x-n.x);for(s._d=180*-Math.atan(c)/Math.PI,c=(l=0)-1,d=(u=h._b).d();u.a().d().x===d.x;d=u.d())u=u.a();for(;c<l;c=(o.y-r)/(o.x-a))o=d,l=((d=(u=h.aj(u)).d()).y-o.y)/(d.x-o.x);s._e=180*Math.atan(c)/Math.PI,e+=s._d+s._e}return e},aa:function(t,e){this._kn[t.al()]=e},p:function(t){var e=this.i0(t),i=new ai,t=2*this.q(t);i.aa(new Be(0,0)),i.aa(new Be(0,t)),i.aa(new Be(t,t)),i.aa(new Be(t,0)),e._c=i,e._a=t/2,e._b=t/2},r:function(t){if(0===t.ao())this.p(t);else{var e=this.i0(t),i=this.q(t),n=new ai;n.aa(new Be(-i,-i)),n.aa(new Be(-i,i)),n.aa(new Be(i,-i)),n.aa(new Be(i,i));for(var o=t.aw();o.i1();o.i2()){var s=this.i0(o.i9());n.az(s._c)}for(var t=Yi.h(n),a=Number.MAX_VALUE,r=Number.MAX_VALUE,h=Number.MIN_VALUE,l=Number.MIN_VALUE,c=t.ah();c.i1();c.i2()){var u=c.i6();u.x<a&&(a=u.x),u.x>h&&(h=u.x),u.y<r&&(r=u.y),u.y>l&&(l=u.y)}for(var d=new ai,_=t.ah();_.i1();_.i2()){var g=_.i6();d.aa(new Be(g.x-a,g.y-r))}e._c=d,e._a=-a,e._b=-r}},s:function(t){if(0===t.ao())this.r(t);else{for(var e=t.aw();e.i1();e.i2())this.s(e.i9());this.i7(t);for(var i=0,n=t.aw();n.i1();n.i2()){var o=n.i9(),s=this.i0(o),o=180-(360-this.ib(t))/2-i-(s._e+s._f);i+=s.a();for(var o=o/180*Math.PI,a=Math.sin(o),r=Math.cos(o),h=s._c._b;null!=h;h=h.a()){var l=h.d(),c=l.x+s._g,l=l.y-s._b,l=new Be(c*r-a*l,c*a+r*l);h.c(l)}o=s._a+s._g;s._a=o*r,s._b=o*a}this.r(t)}},t:function(t){var e,i=this._a.g4(t),n=0;0<t.ak()&&(e=t.aq().i9(),e=this._a.g4(e),n=Math.PI+Math.atan2(e.y-i.y,e.x-i.x));for(var o=t.aw();o.i1();o.i2()){var s,a,r,h=o.i9(),l=this.i0(h);0!==n&&(r=Math.cos(n),s=Math.sin(n),a=l._a*r-s*l._b,r=l._a*s+r*l._b,l._a=a,l._b=r),this._a.s2(h,i.x+l._a,i.y+l._b),this.t(h)}},q:function(t){return Math.max(this._a.gj(t),this._a.g9(t))/2*1.41}});function Oi(){}Y.ext(Oi,Object,{i2:function(t){return t.ad()},i1:function(t){throw"Error"},i3:function(t){throw"Error"},i4:function(t){throw"Error"}});function Bi(t){this._a=t}Y.ext(Bi,Object,{i2:function(t){for(var e=0,i=t.an();i.i1();i.i2())null!=this._a.i1(i.i9())&&e++;return e},i4:function(t){return null==this._a.i1(t)},i1:function(t){throw"Error"},i3:function(t){throw"Error"}});var Ni=function(){Ni.superClass.constructor.call(this),this._kq=!1,this._kp=90};Y.ext(Ni,ki,{a:function(t,e){this._kr=e,this._ks=t,this._kq=!0},i7:function(t){if(this.u(t))for(var e=this.i9(),i=this.ib(t),n=(360-i)/2+i,o=new ri(t.ap());;){for(var s=this.i6(t),s=(360-i)/2,a=null,r=null,h=o._b;null!=h;h=h.a()){var l=h.d(),c=l.a3(),c=this.i0(c),l=this._ks.i3(l),u=l-(s+c._e);if(0<=u&&l+c._d>=n&&(u=s+c.a()<=n?n-s-c.a():2*(n-(l+c._d))),(c._f=0)<=u)c._f=u,a=h,r=c;else{for(-u>c._d+c._e?u=(c._d+c._e)/2:u/=-2,(s-=u)<=n&&s+c.a()>n&&(s+=u,s-=u=s+c.a()-n);null!=a&&u>r._f;r=this.i0(a.d().a3()))if(u-=r._f,r._f=0,null==(a=a.b())){r=null;break}null!=a?r._f-=u:s+=u}s+=c.a()}if(s<=n){for(var d=0,_=(360-i)/2,g=t.ap();g.i1();g.i2()){var f=g.i8(),A=f.a3(),p=this._ks.i3(f),f=this.i0(A),A=_+f._f+f._e;d<Math.abs(A-p)&&(d=Math.abs(A-p)),_+=f.a()}if(d<=this._kp)break}for(var m=t.aw();m.i1();m.i2()){var v=m.i9();this.i0(v)._g*=1+e}}else Ni.superClass.i7.call(this,t)},ib:function(t){return this.u(t)?0===t.ak()?this.ic():this.ia():Ni.superClass.ib.call(this,t)},u:function(t){return!(!this._kq||0===t.ao())&&null!=this._ks.i1(t.ag())}});function Ui(t){this._a=t}Y.ext(Ui,Object,{i1:function(t){return this._a.i1(t)},i2:function(t){throw"Error"},i3:function(t){throw"Error"},i4:function(t){throw"Error"}});se=function(){};Y.ext(se,Object,{w1:function(t){this._bb=t},w2:function(){return this._bb},w4:function(t){null!=this._bb&&this._bb.i2(t)},w3:function(t){return null==this._bb||this._bb.i1(t)}});var zi=function(){this._cg=45,this._ce=400,this._ch=400,this._cf=0};Y.ext(zi,se,{i1:function(t){if(null==this.w2())return!0;for(var e=!0,i=t.xk(),n=Xe.a3(t,i),o=xn.d(n),s=xn.d(n),a=0;a<n;a++)o[a]=new Ci,s[a]=new ri;for(var r=t.xf();r.i1();r.i2()){var h=r.i8();s[i.i2(h.a2())].aa(h),t.h1(h)}for(var l=t.x9();l.i1();l.i2()){var c=l.i9();o[i.i2(c)].aa(c),t.h2(l.i9())}for(var u=0;u<n;u++){for(var d=o[u].x1();d.i1();d.i2())t.h3(d.i9());for(var _=s[u].c1();_.i1();_.i2())t.u1(_.i8());for(var e=this.w3(t),g=s[u].c1();g.i1();g.i2())t.h1(g.i8());for(var f=o[u].x1();f.i1();f.i2())t.h2(f.i9());if(!e)break}for(var A=0;A<n;A++)for(var p=o[A].x1();p.i1();p.i2())t.h3(p.i9());for(var m=0;m<n;m++)for(var v=s[m].c1();v.i1();v.i2())t.u1(v.i8());return t.xi(i),e},i2:function(t){if(!t.xb()){for(var e=t.xk(),i=Xe.a3(t,e),n=xn.d(i),o=xn.d(i),s=xn.d(i),a=xn.d(i),r=0;r<i;r++)n[r]=new Ci,o[r]=new ri;for(var h=t.xf();h.i1();h.i2()){var l=h.i8();o[e.i2(l.a2())].aa(l),t.h1(l)}for(var c=t.x9();c.i1();c.i2()){var u=c.i9();n[e.i2(u)].aa(u),t.h2(c.i9())}for(var d=0;d<i;d++){for(var _=n[d].x1();_.i1();_.i2())t.h3(_.i9());for(var g=o[d].c1();g.i1();g.i2())t.u1(g.i8());this.w4(t);var f=t.g3();s[d]=new ze(f.x,f.y,f.width,f.height);var A,p,m={};a[d]=m,0<this._cf?(A=this._cg+Math.ceil((f.width+1)/this._cf)*this._cf,p=this._cg+Math.ceil((f.height+1)/this._cf)*this._cf,m.x=f.x,m.y=f.y,m.width=A,m.height=p):(m.x=f.x,m.y=f.y,m.width=f.width+this._cg,m.height=f.height+this._cg);for(var v=o[d].c1();v.i1();v.i2())t.h1(v.i8());for(var y=n[d].x1();y.i1();y.i2())t.h2(y.i9())}for(var w=0;w<i;w++)for(var x=n[w].x1();x.i1();x.i2())t.h3(x.i9());for(var E=0;E<i;E++)for(var C=o[E].c1();C.i1();C.i2())t.u1(C.i8());if($i.a(a,null,this._ce/this._ch),this._cf<=0)for(var T=0;T<a.length;T++)this.w5(t,n[T],o[T],new Be(a[T].x,a[T].y),s[T]);else for(var I=0;I<a.length;I++){var L=Math.floor((a[I].x-s[I].x)/this._cf)*this._cf,S=Math.floor((a[I].y-s[I].y)/this._cf)*this._cf,L=s[I].x+L,S=s[I].y+S;this.w5(t,n[I],o[I],new Be(L,S),s[I])}t.xi(e)}},w5:function(t,e,i,n,o){for(var s=-o.x+n.x,a=-o.y+n.y,r=e.x1();r.i1();r.i2()){var h=t.ga(r.i9());t.s4(r.i9(),new Be(h.x+s,h.y+a))}for(var l=i.c1();l.i1();l.i2()){for(var c=l.i8(),u=new ie,d=t.gp(c).c();d.i1();d.i2()){var _=d.i6();u.add(new Be(_.x+s,_.y+a))}t.s5(c,new Ve(u))}}});var Fi=function(){};Y.ext(Fi,se,{i1:function(t){return this.w3(t)},i2:function(t){this.w7(t),null!=this.w2()&&this.w4(t),this.w6(t)},w7:function(t){this.e(t),this.k(t),this.i(t)},e:function(t){for(var e=t.x9();e.i1();e.i2()){var i=t.g4(e.i9());t.s1(e.i9(),i)}},w6:function(t){this.l(t),this.j(t),this.f(t)},l:function(t){for(var e=t.x9();e.i1();e.i2()){var i=t.g4(e.i9());t.s1(e.i9(),i)}},j:function(t){for(var e=t.xf();e.i1();e.i2()){var i=t.g7(e.i8()),n=i.i6();i.i8(n),n=i.i7(),i.i9(n);for(var o=0;o<i.i1();o++){var s=i.i2(o);i.i3(o,s.x,s.y)}}},k:function(t){for(var e=t.xf();e.i1();e.i2()){var i=t.g7(e.i8()),n=i.i6();i.i8(n),n=i.i7(),i.i9(n);for(var o=0;o<i.i1();o++){var s=i.i2(o);i.i3(o,s.x,s.y)}}},f:function(t){null!=this._ca&&(t.x1("A",this._ca),this._ca=null,this._b6=null),null!=this._b8&&(t.x1("B",this._b8),this._b8=null,this._b9=null)},i:function(t){this._ca=t.xc("A"),null!=this._ca&&(this._b6=new Ui(this._ca),t.x1("A",this._b6)),this._b8=t.xc("B"),null!=this._b8&&(this._b9=new Ui(this._b8),t.x1("B",this._b9))}});var Vi=function(){this._a=new ri,this._c=10};Y.ext(Vi,se,{i2:function(t){this._b=t.xl(),this.w9(t),this.w4(t),this.c(t),this.w8(t,this._b),t.xj(this._b)},i1:function(t){if(null==this.w2())return!0;this._b=t.xl(),this.w9(t);var e=this.w3(t);return this.c(t),t.xj(this._b),e},w8:function(t,e){for(var i=t.xf();i.i1();i.i2()){var n,o=i.i8();null!=e.i1(o)&&(n=e.i1(o),$i.g(t,o,n,this._c))}},w9:function(t){for(var e=t.xk(),i=t.x9();i.i1();i.i2()){for(var n=i.i9(),o=n.af();o.i1();o.i2()){var s=o.i8(),a=s.a1(n),r=e.i1(a);r!==s&&(null==r?e.z1(a,s):(null==this._b.i1(r)&&this._b.i8(r,new ri),this._b.i1(r).aa(s),this._a.ac(s),t.h1(s)))}for(var h=n.af();h.i1();h.i2()){var l=h.i8().a1(n);e.z1(l,null)}}t.xi(e)},c:function(t){for(;!this._a.ar();t.u1(this._a.c3()));}});var Gi=function(t){this._a=t};Y.ext(Gi,Object,{i2:function(t){this._a.i3(t)},i1:function(t){return this._a.i4(t)}});var Hi=function(){Hi.superClass.constructor.call(this),this._jo=30,this._jp=new Xi,this._jt=5};Y.ext(Hi,Ot,{i4:function(t){return!0},i3:function(t){this._ju=t,$i.c(t);for(var e=this._jp.i1(t),i=0,n=t.x9();n.i1();n.i2())i=Math.max(i,this.e(n.i9()));i<this._jt&&(i=this._jt),this.a(e,i)},a:function(t,e){var i=t.i7(),n=2*Math.PI/i,o=0,s=xn.a(i);t.i4();for(var a=0;a<i;)s[a]=this.e(t.i9())+this._jo,o+=s[a],a++,t.i2();var r=o/i,h=o/(2*Math.PI);h<e&&(h=e),t.i4();for(var l=0,c=0;c<i;){var u=n/r*s[c];l+=u/2;var d=Math.cos(l)*h,_=Math.sin(l)*h;l+=u/2,this._ju.s2(t.i9(),d,_),c++,t.i2()}return h},e:function(t){var e=this._ju.gj(t),t=this._ju.g9(t);return e<=t?t:e}});var Wi=function(){Wi.superClass.constructor.call(this),this._jm=new Hi,this._jk=new Ni};Y.ext(Wi,Ot,{i4:function(t){return!0},i3:function(t){if(!(t.x0()<2)){this._jn=t,$i.c(this._jn),$i.e(this._jn);var e=new qi(this._jn);e.a1(),e.h();var i=new Ii(this._jn);i.a();for(var n=e.x9();n.i1();n.i2()){var o,s=n.i9(),a=e.c2(s);1<a.ay()?(o=e.d1(s),Ii.h(this._jn,o.c1()),this._jm.i3(this._jn),o=this._jn.g3(),e.s7(s,o.width,o.height)):1===a.ay()?(a=a.x2(),e.s8(s,this._jn.gm(a)),this._jn.s2(a,0,0)):e.s7(s,1,1),Ii.i(this._jn,this._jn.xf())}i.b();var r=this.a7(e);$e.a4(e,r);t=e.xk(),i=e.xl();this.a2(e,i,t),this.a1(e,i),this.a3(e,r,i),this._jk.a(i,t),this._jk.i3(e),this.a5(e,r,t);for(var h=e.x9();h.i1();h.i2())for(var l=h.i9(),c=e.g4(l),u=e.c2(l).x1();u.i1();u.i2()){var d=u.i9();this._jn.s2(d,c.x+this._jn.g5(d),c.y+this._jn.g6(d))}}},a7:function(t){for(var e=-1,i=null,n=t.x9();n.i1();n.i2()){var o=n.i9();t.c2(o).ay()>e&&(e=t.c2(i=o).ay())}return i},a1:function(t,i){function e(t,e){return 0<(e=i.i3(t)-i.i3(e))?1:0<=e?0:-1}for(var n=t.x9();n.i1();n.i2())n.i9().av(e)},a2:function(t,e,i){for(var n=xn.a(this._jn.x0()),o=t.x9();o.i1();o.i2())for(var s=o.i9(),a=t.c2(s).x1();a.i1();a.i2())n[a.i9().al()]=s.al();var r=$e.a2(t);this.a4(t,r,n,e,i)},a3:function(t,e,i){if(1<t.c2(e).ay()){for(var n=0,o=0,s=0,a=e.ap();a.i1();a.i2()){var r=a.i8(),r=i.i3(r);o<r-n&&(o=r-n,s=(n+r)/2),n=r}this.a6(t,e,s=o<360-n?(360+n)/2:s);for(var h=e.ap();h.i1();h.i2()){var l=h.i8(),c=i.i3(l);for(c-=s;c<0;c+=360);i.i6(l,c)}e.av(function(t,e){e=i.i3(t)-i.i3(e);return 0<e?1:0<=e?0:-1})}},a4:function(t,e,i,n,o){for(var s=e.al(),a=o.i3(e),r=e.ap();r.i1();r.i2()){for(var h,l=r.i8(),c=0,u=0,d=0,_=0,g=t.b(l).c1();g.i1();g.i2()){var f=g.i8(),A=null,p=null,p=i[f.a2().al()]===s?(A=f.a2(),f.a3()):(A=f.a3(),f.a2());d-=this._jn.g5(A),_+=this._jn.g6(A),c-=this._jn.g5(p),u+=this._jn.g6(p)}if(0!==d||0!==_){for(var m=180*Math.atan2(_,d)/Math.PI-a;m<0;m+=360);n.i6(l,m)}0!==c&&0!==u&&((h=180*Math.atan2(u,c)/Math.PI)<0&&(h+=360),o.i6(l.a3(),h)),this.a4(t,l.a3(),i,n,o)}},a5:function(t,e,i){for(var n=t.g4(e),o=e.ap();o.i1();o.i2()){var s=o.i8().a3(),a=t.g4(s),r=a.x-n.x,a=a.y-n.y,r=180*Math.atan2(a,r)/Math.PI;null!=i.i1(s)&&(r+=i.i3(s)),this.a6(t,s,r),this.a5(t,s,i)}},a6:function(t,e,i){i=i/180*Math.PI;e=t.c2(e);if(!(e.ay()<=1))for(var n=e.x1();n.i1();n.i2()){var o=n.i9(),s=this._jn.g5(o),a=this._jn.g6(o),r=Math.cos(i),h=Math.sin(i);this._jn.s2(o,s*r-h*a,s*h+r*a)}}});function Zi(){this._a=(new Date).getTime()}Y.ext(Zi,Object,{b:function(){return(new Date).getTime()-this._a}});var Yi={};Yi._A=new Be(0,0),Yi.b=function(t,e,i){return Yi.c(t.x,t.y,e.x,e.y,i.x,i.y)},Yi.c=function(t,e,i,n,o,s){i=(o-=t)*(n-=e)-(s-=e)*(i-=t);return Math.abs(i)<1e-5?0:0<=i?i<=0?0:-1:1},Yi.d=function(t,e,i){return 0<Yi.b(t,e,i)},Yi.f=function(t,e,i){return Yi.b(t,e,i)<0},Yi.g=function(t,e,i){return 0===Yi.b(t,e,i)},Yi.h=function(t){return Yi.i(t)},Yi.i=function(t){var e=new ai(t.ah()),i=new ai;if(e.a2(),e.ar())return i;var n=e.at();for(i.ae(n);!e.ar()&&n.equals(e.am());e.at());if(e.ar())return i;for(var n=e.at(),o=i.ae(n),s=e.ah();s.i1();s.i2()){var a=s.i6();if(!a.equals(n))if(n=a,2===i.ay()&&Yi.g(i.am(),i.as(),a))o.c(a);else{for(var r,h=o;!Yi.f(i.ai(h).d(),h.d(),a);h=i.ai(h));for(r=o;!Yi.d(i.aj(r).d(),r.d(),a);r=i.aj(r));for(;r!==i.aj(h);i.aw(i.aj(h)));o=i.an(a,h)}}return i},Yi.j=function(){return Yi.k(Number.MAX_VALUE)},Yi.k=function(t){return Math.floor(x.Util.random()*t)},Yi.l=function(t,e){return x.Util.random()*(e-t)+t};var Xi=function(){};Y.ext(Xi,Object,{i1:function(t){this._b=t;var e=new ri;(e=Xe.a6(t)).az(Xe.a7(t));for(var i=this.a1();!e.ar();t.x5(e.c3()));return i.x1()},a1:function(){if(this._b.x0()<3)return new Ci(this._b.x9());for(var t=this._b.xk(),e=this._b.xk(),i=this._b.xl(),n=new Li(this._b,new Oi,0,this.a3(this._b)),o=this._b.x0(),s=new ri,a=new ri,r=new Ii(this._b);3<o;o--){for(var h=n.g(),l=h.an();l.i1();l.i2())t.z1(l.i9(),o),e.i5(l.i9(),!1);for(var c=h.an();c.i1();c.i2())for(var u=c.i9().ap();u.i1();u.i2()){var d=u.i8();t.i2(d.a3())===o&&(a.aa(d),e.i5(d.a2(),!0),e.i5(d.a3(),!0))}if(a.ay()<h.ad()-1){for(var _=null,g=h.an();g.i1();g.i2()){var f=g.i9();t.i2(f)!==o||e.i4(f)||(_=null==_?f:(f=this._b.xo(_,f),i.i7(f,!0),a.aa(f),null))}if(null!=_)for(var A=h.an();A.i1();A.i2()){var p=A.i9();if(p!==_&&null==p.aj(_)){p=this._b.xo(_,p);i.i7(p,!0),a.aa(p);break}}if(a.ay()<h.ad()-1){for(var m=2147483647,v=null,y=h.an();y.i1();y.i2()){var w=y.i9();w.ad()<m&&(m=(v=w).ad())}for(var x=h.an();x.i1();x.i2()){var E=x.i9();if(null==v.aj(E)&&v!==E){E=this._b.xo(v,E);if(i.i7(E,!0),a.aa(E),a.ay()>=h.ad()-1)break}}}}for(var C=h.an();C.i1();C.i2())n.b(C.i9());for(var T=a.c1();T.i1();T.i2()){var I=T.i8();i.i4(I)&&(n.d(I.a2()),n.d(I.a3()))}s.az(a),r.e(h)}r.b(),n.c();for(var L=s.c1();L.i1();L.i2()){var S=L.i8();null!=S._h&&(i.i4(S)?this._b.x5(S):this._b.h1(S))}var b=this.a4(this._b),R=new Ci,P=b.ak(0),M=b.ak(1),D=null;D=P.a2()===M.a2()||P.a2()===M.a3()?P.a3():P.a2(),R.aa(D);for(var k=b.c1();k.i1();k.i2()){D=k.i8().a1(D);R.aa(D)}for(var O=s.c1();O.i1();O.i2()){var B=O.i8();i.i4(B)||null!=B._h||this._b.u1(B)}return this._b.xi(e),this._b.xj(i),this._b.xi(t),this.a2(R),R},a2:function(t){if(t.ay()<this._b.x0()){for(var e,i=this._b.xk(),n=t._b;null!=n;n=n.a()){var o=n.d();i.z1(o,n)}for(e=new Li(this._b,new Bi(i),0,t.ay(),new Bi(i));!e.e();){for(var s=e.f(),a=s.an();a.i1();a.i2()){var r=a.i9();if(null!=i.i1(r)){var h=i.i1(r),l=t.ai(h).d(),r=null,r=null!=s.aj(l)?t.ao(s,h):t.an(s,h);i.z1(s,r);break}}for(var c=s.an();c.i1();c.i2()){var u=c.i9();null==i.i1(u)&&e.d(u)}}this._b.xi(i),e.c()}},a3:function(t){for(var e=0,i=t.x9();i.i1();i.i2())e=Math.max(e,i.i9().ad());return e},a4:function(t){for(var e=[],i=0,n=t.x0();i<n;i++)e[i]=new qe;var o=new Qe(e);o.a6(!1),o.a8(t);for(var s=-1,a=null,r=t.x9();r.i1();r.i2()){var h=r.i9(),l=e[h.al()];l._a+l._c>s&&(s=l._a+l._c,a=h)}for(var c=new ri,u=a,d=e[u.al()]._d;null!=d;d=e[u.al()]._d)c.ac(d),u=d.a1(u);for(var _=e[(u=a).al()]._b;null!=_;_=e[u.al()]._d)c.ae(_),u=_.a1(u);return c}});se=function(){this._v=new hi,this._x=new hi,this._z=new mi(3,5),this._w=new mi(3,5),this._y=!1,this._u=!1,this._t={}};Y.ext(se,Object,{xm:function(){return new vi(this)},xo:function(t,e){return this.xn(t,null,e,null,0,0)},xn:function(t,e,i,n,o,s){return new _i(this,t,e,i,n,o,s)},x4:function(t){this.b3(t)},b3:function(t){for(var e;null!=(e=t._o[0]);)this.x5(e);for(;null!=(e=t._o[1]);)this.x5(e);this._v.c(t),t._g=null,this._y=!0},x5:function(t){this.a11(t)},a11:function(t){if(t._h!==this)throw"Error";var e=t.a2(),i=t.a3();this.a12(t,e,i),this._x.c(t),t._h=null,this._u=!0},x7:function(t){t._p=this._v._c,t._g=this,t.ac(),t._c.length<this._z._b&&this._z.a3(t,t._c.length,this._z._b),this._v.a(t),this._y=!0},x8:function(t){if(null!=t._h)throw"Error";t._c.length<this._w._b&&this._w.a3(t,t._c.length,this._w._b),null==t._a||t._a._h!==this?this._x.a(t):this._x.b(t,t._a),t._h=this,t.a4(),this.b2(t,t.a2(),null,t.a3(),null,0,0),this._u=!0},xr:function(t,e,i){var n=t.a2(),o=t.a3();null==t._h?(t._d=e,t._e=i):(n!==e&&(n.ar(t,0,0),(t._d=e).ab(t,null,0,0,0)),o!==i&&(o.ar(t,1,1),(t._e=i).ab(t,null,1,1,0)))},x3:function(t){this.xr(t,t.a3(),t.a2())},h1:function(t){this.a11(t)},u1:function(t){this.x8(t)},h2:function(t){this.x4(t)},h3:function(t){this.x7(t)},xa:function(){return this._v._c},x0:function(){return this._v._c},xh:function(){return this._x._c},xg:function(){return this._x._c},xb:function(){return 0===this._v._c},xq:function(t){return t._g===this},xp:function(t){return t._h===this},xd:function(){return this._v._a},x9:function(){return new Ei(this._v)},xf:function(){return new Ei(this._x)},x2:function(t,e){var i=xn.d(this.xh());if(null!=t&&null!=e)for(var n=this.x9();n.i1();n.i2())n.i9().at(t,1,i),n.i9().at(e,0,i);else if(null==e&&null!=t)for(var o=this.x9();o.i1();o.i2())o.i9().at(t,1,i);else if(null!=e&&null==t)for(var s=this.x9();s.i1();s.i2())s.i9().at(e,0,i)},xk:function(){return this._z.b(this._v)},xl:function(){return this._w.c(this._x)},xi:function(t){this._z.a5(t,this._v)},xj:function(t){this._w.a6(t,this._x)},xc:function(t){return this._t[t]},x1:function(t,e){this._t[t]=e},x6:function(t){delete this._t[t]},b2:function(t,e,i,n,o,s,a){e.ab(t,i,0,0,s),n.ab(t,o,1,1,a)},a12:function(t,e,i){e.ar(t,0,0),i.ar(t,1,1)},c:function(){for(var t=0,e=this.x9();e.i1();e.i2())e.i9()._p=t++;this._y=!1},b1:function(){for(var t=0,e=this.xf();e.i1();e.i2())e.i8()._g=t++;this._u=!1},xs:function(t){t.as(this,this._z._b),t._p=this._v._c,this._v.a(t)},xt:function(t,e,i,n,o,s,a){t.a6(this,e,n,this._w._b),t._g=this._x._c,this._x.a(t),this.b2(t,t.a2(),i,t.a3(),o,s,a)}});var ji=function(){ji.superClass.constructor.call(this)};Y.ext(ji,se,{gb:function(t){return this.g1(t)},g7:function(t){return this.g2(t)},g5:function(t){t=this.g1(t);return t.i1()+t.i3()/2},g6:function(t){t=this.g1(t);return t.i2()+t.i4()/2},g4:function(t){return new Be(this.g5(t),this.g6(t))},gi:function(t){return this.g1(t).i1()},gh:function(t){return this.g1(t).i2()},ga:function(t){t=this.g1(t);return new Be(t.i1(),t.i2())},gj:function(t){return this.g1(t).i3()},g9:function(t){return this.g1(t).i4()},gm:function(t){return new Ne(this.gj(t),this.g9(t))},s1:function(t,e){this.s2(t,e.x,e.y)},s2:function(t,e,i){t=this.g1(t);t.i5(e-t.i3()/2,i-t.i4()/2)},s7:function(t,e,i){this.g1(t).i6(e,i)},s8:function(t,e){this.s7(t,e.width,e.height)},s3:function(t,e,i){this.g1(t).i5(e,i)},s4:function(t,e){this.s3(t,e.x,e.y)},gp:function(t){for(var e=this.g2(t),i=new ie,n=0;n<e.i1();n++)i.add(e.i2(n));return new Ve(i)},gf:function(t){for(var e=this.g2(t),i=new ai,n=0;n<e.i1();n++)i.aa(e.i2(n));return i},gc:function(t){var e=new ie;e.add(this.gs(t));for(var i=this.gp(t).d();i.i1();i.i2())e.add(i.i6());return e.add(this.gl(t)),new Ve(e)},gd:function(t){var e=new ai;e.aa(this.gs(t));for(var i=this.gp(t).d();i.i1();i.i2())e.aa(i.i6());return e.aa(this.gl(t)),e},m1:function(t,e){var i=this.g2(t);i.i5();var n=e.ah(),o=n.i6();this.gx(t,o);var s=e.as();for(n.i2();n.i6()!==s;n.i2()){var a=n.i6();i.i4(a.x,a.y)}this.gy(t,s)},s5:function(t,e){var i=this.g2(t);i.i5();for(var n=e.d();n.i1();n.i2()){var o=n.i6();i.i4(o.x,o.y)}},s6:function(t,e){var i=this.g2(t);i.i5();for(var n=e.ah();n.i1();n.i2()){var o=n.i6();i.i4(o.x,o.y)}},m2:function(t,e,i){this.gx(t,e),this.gy(t,i)},gn:function(t){return this.g2(t).i6()},gk:function(t){return this.g2(t).i7()},gt:function(t,e){this.g2(t).i8(e)},gz:function(t,e){this.g2(t).i9(e)},gs:function(t){var e=this.g2(t).i6();return null==e?this.g4(t.a2()):new Be(this.g5(t.a2())+e.x,this.g6(t.a2())+e.y)},gl:function(t){var e=this.g2(t).i7();return null==e?this.g4(t.a3()):new Be(this.g5(t.a3())+e.x,this.g6(t.a3())+e.y)},gx:function(t,e){e=new Be(e.x-this.g5(t.a2()),e.y-this.g6(t.a2()));this.g2(t).i8(e)},gy:function(t,e){e=new Be(e.x-this.g5(t.a3()),e.y-this.g6(t.a3()));this.g2(t).i9(e)},g8:function(){for(var t=new ri,e=this.xf();e.i1();e.i2())t.aa(e.i8());return t},g3:function(){for(var t=s=Number.MAX_VALUE,e=a=Number.MIN_VALUE,i=this.x9();i.i1();i.i2())var n=this.ga(i.i9()),o=this.gm(i.i9()),t=Math.min(n.x,t),s=Math.min(n.y,s),e=Math.max(n.x+o.width,e),a=Math.max(n.y+o.height,a);for(var r=this.xf();r.i1();r.i2())for(var h=this.gp(r.i8()).c();h.i1();h.i2()){var l=h.i6();t=Math.min(l.x,t),s=Math.min(l.y,s),e=Math.max(l.x,e),a=Math.max(l.y,a)}return{x:Math.floor(t),y:Math.floor(s),width:Math.floor(e-t),height:Math.floor(a-s)}}});var Qi=function(){Qi.superClass.constructor.call(this),this.a(new Ze,new We)};Y.ext(Qi,ji,{a:function(t,e){this._a3=t,this._a4=e},xo:function(t,e){return this.l2(t,e,this._a4.a6())},l2:function(t,e,i){return this.l1(t,null,e,null,0,0,i)},xn:function(t,e,i,n,o,s){return this.l1(t,e,i,n,o,s,this._a4.a6())},l1:function(t,e,i,n,o,s,a){s=new _i(this,t,e,i,n,o,s);return s._l=a,s},xm:function(){var t=new vi(this);return t._r=this._a3.m3(),t},g3:function(){for(var t={x:0,y:0,width:-1,height:-1},e=this.x9();e.i1();e.i2())e.i9()._r.m1(t);return t},g1:function(t){return t._r},g2:function(t){return t._l},g5:function(t){return t._r.m4()},g6:function(t){return t._r.m5()},gi:function(t){return t._r.i1()},gh:function(t){return t._r.i2()},gj:function(t){return t._r.i3()},g9:function(t){return t._r.i4()},s2:function(t,e,i){t._r.m6(e,i)},s7:function(t,e,i){t._r.i6(e,i)},s3:function(t,e,i){t._r.i5(e,i)}});var Ki=function(){Ki.superClass.constructor.call(this),this._ap=this.xk(),this._as=this.xl()};Y.ext(Ki,ji,{g1:function(t){var e=this._ap.i1(t);return null==e&&(e=new Ai,this._ap.z1(t,e)),e},g2:function(t){var e=this._as.i1(t);return null==e&&(e=new fi,this._as.i8(t,e)),e}});var qi=function(t){qi.superClass.constructor.call(this),this._ay=t,this._a0=this.xk(),this._au=this.xl()};Y.ext(qi,Ki,{c2:function(t){return this._a0.i1(t)},a2:function(t,e){this._a0.z1(t,e)},h:function(){null==this._az&&(this._az=this.xk());for(var t=xn.a(this._ay.x0()+1),e=1,i=this.x9();i.i1();){for(var n=this.c2(i.i9()),o=n.x1();o.i1();o.i2())t[o.i9().al()]=e;for(var s=new ri,a=n.x1();a.i1();a.i2())for(var r=a.i9(),h=t[r.al()],l=r.ap();l.i1();l.i2()){var c=l.i8();t[c.a3().al()]===h&&s.ac(c)}this._az.z1(i.i9(),s),i.i2(),e++}},d1:function(t){return this._az.i1(t)},b:function(t){return this._au.i1(t)},a3:function(t,e){this._au.i8(t,e)},a1:function(){var t=this._ay.xk(),e=bi.a4(xn.a(this._ay.xh())),i=Xe.a1(this._ay,e,t),i=Xe.a5(this._ay,e,i);this.d2(t,i),this._ay.xi(t)},c1:function(t){for(var e=null,i=-1,n=0,o=t.length;n<o;n++){var s=t[n];s.ay()>i&&(i=(e=s).ay())}return e},d2:function(t,e){for(var i=this._ay.xl(),n=this._ay.xk(),o=e.length,s=0;s<o;s++)for(var a=e[s],r=a.c1();r.i1();r.i2())i.i8(r.i8(),a);var h=this.c1(e);this.a4(h,t,i,new ie,n);for(var l={},o=e.length,c=0;c<o;c++){var u,d=e[c];1<d.ay()&&(u=this.xm(),l[d._id]=u)}for(var _=this._ay.x9();_.i1();_.i2()){var g,f,A=_.i9();t.i4(A)&&null==n.i1(A)&&(g=this.xm(),l[A._id]=g,(f=new Ci).aa(A),this.a2(g,f))}var p=xn.d(2);o=e.length;for(var m=0;m<o;m++){var v=e[m];if(1===v.ay()){v=v.c2();p[0]=v.a2(),p[1]=v.a3();for(var y=0;y<2;y++){var w,x,E=p[y];1===E.ad()&&(w=this.xm(),l[E._id]=w,(x=new Ci).aa(E),this.a2(w,x))}}}for(var C,T,I=this._ay.x9();I.i1();I.i2()){var L=I.i9();if(null!=n.i1(L))for(var S=n.i1(L),b=l[S._id],R=L.af();R.i1();R.i2()){var P,M,D,k=R.i8();i.i1(k)!==S&&(null==(P=l[i.i1(k)._id])&&(M=k.a1(L),P=null!=(D=n.i1(M))?l[D._id]:l[M._id]),(D=(D=null)==(M=b.aj(P))?(M=this.xo(b,P),new ri):this.b(M)).aa(k),this.a3(M,D))}else if(t.i4(L))for(var O=l[L._id],B=L.af();B.i1();B.i2()){var N,U=B.i8(),z=l[U.a1(L)._id];null!=z&&null==O.aj(z)&&(N=this.xo(O,z),(z=new ri).aa(U),this.a3(N,z))}}2===this._ay.x0()&&1===this._ay.xg()&&(T=l[(C=this._ay.xf().i8()).a2()._id],null!=(h=l[C.a3()._id])&&null!=T&&null==h.aj(T)&&(T=this.xo(T,h),(h=new ri).aa(C),this.a3(T,h)));var F=xn.a(this._ay.x0());o=e.length;for(var V=0;V<o;V++){var G=e[V],H=l[G._id];if(null!=H){var W=this.c2(H);null==W&&(W=new Ci,this.a2(H,W));for(var Z=G.c1();Z.i1();Z.i2()){var Y=Z.i8(),X=Y.a2();1===F[X.al()]||t.i4(X)&&n.i1(X)!==G||(F[X.al()]=1,W.aa(X)),1===F[(X=Y.a3()).al()]||t.i4(X)&&n.i1(X)!==G||(F[X.al()]=1,W.aa(X))}}}this._ay.xj(i),this._ay.xi(n)},a4:function(t,e,i,n,o){if(!n.contains(t)){n.add(t);for(var s=[],a=t.c1();a.i1();a.i2()){var r=a.i8();s[0]=r.a2(),s[1]=r.a3();for(var h=0;h<2;h++){var l=s[h];if(e.i4(l)&&null==o.i1(l)){1<t.ay()&&o.z1(l,t);for(var c=l.af();c.i1();c.i2()){var u=i.i1(c.i8());this.a4(u,e,i,n,o)}}}}}}});var Ji=function(t,e,i,n,o){this._a={},Ji.superClass.constructor.call(this);for(var s=new ie,a=0,r=e.size();a<r;a++){var h,l,c,u=e.get(a);u instanceof x.Link?s.add(u):((c=n&&null==o&&u instanceof Me)&&u.setExpanded(!0),h=t.getDimension(u),c&&u.setExpanded(!1),null!=h&&(l=this.xm(),c=t._repulsion,"rightleft"===i||"leftright"===i?this.s7(l,h.height*c,h.width*c):this.s7(l,h.width*c,h.height*c),l.node=u,this._a[u.getId()]=l))}for(a=0,r=s.size();a<r;a++){var d=s.get(a),_=d.getFromAgent(),d=d.getToAgent(),_=this._a[_.getId()],d=this._a[d.getId()];null!=_&&null!=d&&_!==d&&this.xo(_,d)}};Y.ext(Ji,Qi,{});var $i={};$i._D=new Ve,$i._E=new Be(0,0),$i.b=function(t){if(0<t.i1()){for(var e=new ie,i=t.i1()-1;0<=i;i--)e.add(t.i2(i));t.i5();for(var n=0,o=e.size();n<o;n++){var s=e.get(n);t.i4(s.x,s.y)}}var a=t.i6();t.i8(t.i7()),t.i9(a)},$i.c=function(t){$i.d(t,!0)},$i.d=function(t,e){if(e)for(var i=t.xf();i.i1();i.i2()){var n=i.i8();t.gt(n,$i._E),t.gz(n,$i._E),t.s5(n,$i._D)}else for(var o=t.xf();o.i1();o.i2())t.s5(o.i8(),$i._D)},$i.e=function(t){for(var e=new Be(0,0),i=t.xf();i.i1();i.i2()){var n=i.i8();t.gt(n,e),t.gz(n,e)}},$i.f=function(t,e,i,n){for(var o=t.gc(e).b(),s=xn.d(o),a=0,r=t.gc(e).c();r.i1();r.i2()){var h=r.i6();(a<=0||!h.equals(s[a-1]))&&(s[a]=new Be(h.x,h.y),a++)}if(!((o=a)<2)){var l=new ie,c=new Ue(s[1].x-s[0].x,s[1].y-s[0].y),u=$i.i(c);u.x*=n,u.y*=n;for(var d=$i.h(s[0],u),c=$i.h(s[1],u),_=new Fe(d,c),g=1;g<o-1;g++){var f=_,A=$i.i(new Ue(s[g+1].x-s[g].x,s[g+1].y-s[g].y));A.x*=n,A.y*=n;var p=$i.h(s[g],A),A=$i.h(s[g+1],A),_=new Fe(p,A),f=Fe.a6(f,_);null!=f&&l.add(new Be(f.x,f.y))}u=new Ue(s[o-1].x-s[o-2].x,s[o-1].y-s[o-2].y);(u=$i.i(u)).x*=n,u.y*=n;c=$i.h(s[o-1],u),u=new Ve(l);e.a2()===i.a2()?(t.s5(i,u),t.m2(i,d,c)):(t.s5(i,u.a()),t.m2(i,c,d))}},$i.g=function(t,e,i,n){for(var o=n,s=i.c1();s.i1();s.i2()){var a=s.i8();$i.f(t,e,a,o),o<0&&(o-=n),o=-o}},$i.a=function(t,e,i){return $i.j(t,e,i,1)},$i.l=function(t,e,i){if(null==t||t.length<1)return null!=e&&(e.x=0,e.y=0,e.width=0,e.height=0),{width:0,height:0};for(var n=0,o=0,s=0;s<t.length;s++)var a=t[s],n=Math.max(n,a.width),o=Math.max(o,a.height);var r,h,l=n*o*t.length,c=l/Math.sqrt(l/i),u=Math.floor(c/n),l=Math.ceil(c/n),i=Math.ceil(t.length/u),c=Math.ceil(t.length/l),d=u*i<l*c?(r=u,i):(r=l,c),_=0,g=0,f=0,A=0;if(o<n)for(var p=0;p<t.length;p++)(h=t[p]).x=g*n,h.y=_*o,f=Math.max(f,h.x+h.width),A=Math.max(A,h.y+h.height),++g>=r&&(_++,g=0);else for(var m=0;m<t.length;m++)(h=t[m]).x=g*n,h.y=_*o,f=Math.max(f,h.x+h.width),A=Math.max(A,h.y+h.height),++_>=d&&(g++,_=0);return null!=e&&(e.x=0,e.y=0,e.width=f,e.height=A),{width:d,height:r}},$i.j=function(t,e,i,n){if(null==t||t.length<1)return null!=e&&(e.x=0,e.y=0,e.width=0,e.height=0),0;for(var o=l=t[0].width,s=c=t[0].height,a=t.length,r=1;r<a;r++)var h=t[r].width,o=Math.min(o,h),l=Math.max(l,h),h=t[r].height,s=Math.min(s,h),c=Math.max(c,h);if(.95<s/c&&.95<o/l)return $i.l(t,e,i).width;for(var u=new ai,d=0,_=0;_<a;_++){var g=t[_];u.aa(t[_]),d=Math.floor(d+g.width*g.height)}u.a1(function(t,e){var i=Math.floor(e.height)-Math.floor(t.height);return 0==i?Math.floor(e.width)-Math.floor(t.width):i});var f=0,A=0,p=Math.floor(i*Math.sqrt(d/i)),m=0,v=new ai;do{var y,w,x=new ai;v.aa(x);for(var E=y=w=0,C=u.ah();C.i1();C.i2()){var T=C.i6(),E=E+T.width>p&&0<x.ay()?(w=Math.max(w,E),(x=new ai).aa(T),v.aa(x),Math.floor(T.width)):(x.aa(T),Math.floor(E+T.width));1===x.ay()&&(y=Math.floor(y+x.am().height))}}while((w=Math.max(w,E))<i*y&&m!==w&&(v.af(),p=Math.floor(1.1*p),m=w),v.ar());for(var I=0,L=v.ah();L.i1();L.i2()){for(var S=0,b=L.i6(),R=b.ah();R.i1();R.i2()){var P=R.i6();P.x=S,P.y=I,S+=P.width}f=Math.max(f,S),I+=$i.k(b),A=Math.max(A,I)}return null!=e&&(e.x=0,e.y=0,e.width=f,e.height=A),v.ay()},$i.k=function(t){for(var e=0,i=t.ah();i.i1();i.i2())e=Math.max(i.i6().height,e);return e},$i.h=function(t,e){return new Be(t.x+e.x,t.y+e.y)},$i.i=function(t){var e=Math.sqrt(t.x*t.x+t.y*t.y);return new Ue(-t.y/e,t.x/e)};function tn(t){this._a=t,this._b=!1}Y.ext(tn,Object,{a:function(){return this._b},b:function(){return this._a},c:function(){return 1===this._a},d:function(){return 2===this._a},e:function(){return 4===this._a},f:function(){return 8===this._a},g:function(){return 0===this._a}}),tn.h=function(t,e){t=t.xc("A");return null==t?null:t.i1(e)},tn.i=function(t,e){t=t.xc("B");return null==t?null:t.i1(e)},tn.j=function(t){switch(t){case 1:return tn.k;case 2:return tn.l}return null},tn.k=new tn(1),tn.l=new tn(2);function en(t,e,i,n,o){this._o=0,this._l=0,this._i=0,this._d=0,this._f=0,this._b=t,this._a=1e-4,this._r=e,this._p=1,this._e=(o.gj(t)+o.g9(t))/4,n=.45*i*Math.sqrt(n),this._k=Yi.l(-n,n),this._h=Yi.l(-n,n),this._g=Yi.l(-n,n)}Y.ext(en,Object,{});function nn(){this._a=0,this._c=0,this._b=0}Y.ext(nn,Object,{});var on=function(){on.superClass.constructor.call(this),this._dj=0,this._dh=0,this._dq=0,this._dp=0,this._dt=0,this._de=0,this._d3=0,this._dr=0,this._ed=0,this._dw=.65,this._ea=1,this._dl=80,this._dx=3,this._d8=!0,this._eb=3e5,this._ee=2,this._di=2,this._df=1e3};Y.ext(on,Ot,{i4:function(t){return!0},i3:function(t){if(null!=t&&(this._d5=t,this.s(t))){var e=new nn,i=0,n=Math.floor(this._dx*(this._dz.length*this._dz.length)+20*this._dz.length),n=Math.max(n,1e4),o=this._ea*this._ea*this._dz.length,s=this._df;try{for(;this._dj>o&&i<n;i++){var a=this.b(2147483647&i);0==s--&&(this._dy.b()>this._eb&&(i=n),s=this._df),this.h(a,e),this.d(a,e),this.i(a,e),this._d8?(this.g(a,e),this.j(a,e)):(this.f(a,e),this.c(a,e));var r=Math.sqrt(e._a*e._a+e._c*e._c+e._b*e._b);this.ac(a,e,r),this.aa(a,e,r)}}catch(t){}finally{this.r()}}},s:function(t){if(null==t||t.xa()<1)return!1;this._d5=t,this._dp=1,this._dy=new Zi,this._dt=t.x0(),this._d2=xn.d(this._dt),this._df=1+1e5/this._dt,this._ed=1/(2*this._di),this._de=this._ed*this._ee/(.05*this._dl),this._d3=Math.pow(this._dl,-1)*this._ed,this._dr=Math.pow(this._dl,3)*this._ed,this._dj=0,this._du=new nn,this._dq=Math.max(20*this._dl,10);var e=Math.max(.1,Math.min(this._dw*this._dl,this._dq)),i=this._dt;$i.c(t),this._dz=xn.d(i);for(var n=t.x9();n.i1();n.i2()){var o=n.i9(),s=new en(o,e,this._dl,this._dt,t);this._dz[--i]=s,this._dj+=s._r,this._dh+=s._r*s._r,this._du._a+=s._k,this._du._c+=s._h,this._du._b+=s._g,this._d2[o.al()]=s}return this._d8=!1,0<this._dz.length},b:function(t){var e=this._dz.length,i=e-t%e-1,t=Yi.k(1+i),e=this._dz[t];return this._dz[t]=this._dz[i],this._dz[i]=e},f:function(t,e){for(var i,n,o=i=n=0,s=t._b.ae();null!=s;s=s.a7()){var a=this._d2[s.a2().al()],r=a._k-t._k,h=a._h-t._h,l=a._g-t._g,c=Math.sqrt(r*r+h*h+l*l),a=c-(a._e+t._e);a<=0||(o+=r*(c=a*a*this._d3/c),i+=h*c,n+=l*c)}for(var u=t._b.ag();null!=u;u=u.a8()){var d=this._d2[u.a3().al()],_=d._k-t._k,g=d._h-t._h,f=d._g-t._g,A=Math.sqrt(_*_+g*g+f*f),d=A-(d._e+t._e);d<=0||(o+=_*(A=d*d*this._d3/A),i+=g*A,n+=f*A)}e._a+=o,e._c+=i,e._b+=n},g:function(t,e){var i,n,o=i=n=0;this._dp++,t._f=this._dp;for(var s=t._b.ae();null!=s;s=s.a7()){var a=this._d2[s.a2().al()];a._f=this._dp;var r,h=a._k-t._k,l=a._h-t._h,c=a._g-t._g,u=Math.sqrt(h*h+l*l+c*c);0!==u&&(r=Math.max(1e-6,u-(t._e+a._e)),a=-this._ef[s.a5()]/(r*r),a+=r*r*this._d1[s.a5()],o+=h*(a/=u),i+=l*a,n+=c*a)}for(var d=t._b.ag();null!=d;d=d.a8()){var _=this._d2[d.a3().al()];_._f=this._dp;var g,f=_._k-t._k,A=_._h-t._h,p=_._g-t._g,m=Math.sqrt(f*f+A*A+p*p);0!==m&&(g=Math.max(1e-6,m-(t._e+_._e)),_=-this._ef[d.a5()]/(g*g),_+=g*g*this._d1[d.a5()],o+=f*(_/=m),i+=A*_,n+=p*_)}e._a+=o,e._c+=i,e._b+=n},j:function(t,e){for(var i,n,o=i=n=0,s=this._dt-1;0<=s;s--){var a,r,h,l,c=this._d2[s];c._f===t._f||0!=(l=(a=t._k-c._k)*a+(r=t._h-c._h)*r+(h=t._g-c._g)*h)&&(l=Math.sqrt(l),c=Math.max(1e-6,l-(t._e+c._e)),o+=a*(l=this._dr/(c*c*l)),i+=r*l,n+=h*l)}e._a+=o,e._c+=i,e._b+=n},c:function(t,e){for(var i,n,o=i=n=0,s=this._dt-1;0<=s;s--){var a=this._d2[s],r=t._k-a._k,h=t._h-a._h,l=t._g-a._g,c=r*r+h*h+l*l;0!=c&&(o+=r*(c=(a=(c=Math.sqrt(c))-(t._e+a._e))<=0?this._dr/(1e-8*c):this._dr/(a*a*c)),i+=h*c,n+=l*c)}e._a+=o,e._c+=i,e._b+=n},i:function(t,e){t=this._du._b/this._dt-t._g;e._b+=t*this._dl*this._dt/this._dh},d:function(t,e){var i,n;0!==this._de&&(i=this._du._a/this._dt-t._k,n=this._du._c/this._dt-t._h,t=this._du._b/this._dt-t._g,e._a+=i*this._de,e._c+=n*this._de,e._b+=t*this._de)},h:function(t,e){t=.05*(t._r+2);0<t&&(e._a=Yi.l(-t,t),e._c=Yi.l(-t,t),e._b=Yi.l(-t,t))},ac:function(t,e,i){0!==i&&0!==t._a&&(i=(e._a*t._o+e._c*t._l+e._b*t._i)/(i*t._a),this._dh-=t._r*t._r,this._dj-=t._r,0<t._p*i?t._r+=.45*i:t._r+=.15*i,t._r>this._dq?t._r=this._dq:t._r<.1&&(t._r=.1),this._dj+=t._r,this._dh+=t._r*t._r,t._p=i)},aa:function(t,e,i){var n,o,s;0<i&&(s=t._r/i,n=e._a*s,o=e._c*s,s=e._b*s,t._k+=n,t._h+=o,t._g+=s,this._du._a+=n,this._du._c+=o,this._du._b+=s,t._a=i,t._o=e._a,t._l=e._c,t._i=e._b)},r:function(){for(var t=this._d2.length-1;0<=t;t--){var e=this._d2[t];this._d5.s2(e._b,e._k,e._h)}}});var sn=function(t,e,i,n){this._e=t,this._f=e,this._a=i,this._b=n,this._c={}};Y.ext(sn,Object,{resetGroup:function(){if(this._a&&null==this._b)for(var t in this._c){t=this._c[t];this._e.isExpandGroup()?t.group.setExpanded(!0):t.group.setExpanded(t.b)}},process:function(){for(var t=new ie,e=0,i=this._f.size();e<i;e++){var n=this._f.get(e);n instanceof x.Link?n.isLooped()||t.add(n):null==this._b&&n.getParent()instanceof Me||((null==this._b||null!=this._b&&this._b!==n)&&t.add(n),null==this._b&&n instanceof Me&&this.layoutGroup(n))}return t},layoutGroup:function(t){if(this._a&&null==this._c[t.getId()]&&null==this._b){this._c[t.getId()]={group:t,b:t.isExpanded()};var e=this._e.getGroupLayoutType(t);if(e){t.setExpanded(!0);for(var i,n=new ie,o=t.getChildren(),s=0,a=o.size();s<a;s++)if((i=o.get(s))instanceof Me&&(this.layoutGroup(i),i.setExpanded(!1)),i instanceof x.Link||n.contains(i)||n.add(i),i instanceof Re){var r=i.getLinks();if(null!=r)for(var h=0,l=r.size();h<l;h++){var c=r.get(h);n.contains(c)||n.add(c)}}var u=new Ji(this._e,n,e,this._a,this._b);try{var d=null;if("round"===e?d=new Wi:"symmetry"===e?d=new on:"hierarchic"===e?d=new _n:"topbottom"!==e&&"bottomtop"!==e&&"rightleft"!==e&&"leftright"!==e||(d=new Pi),null!=d){d.i2(u);var _,g=sn.createMatrix(e),f={},A={};for(_ in u._a){var p,m=u._a[_],v=m.node,y=u.g4(m);f[_]=v.getCenterLocation(),null!=g?(p=g.transform(y),v.setCenterLocation(p.x,p.y)):v.setCenterLocation(y.x,y.y),A[_]=v.getCenterLocation()}}}catch(t){}for(s=0,a=(o=t.getChildren()).size();s<a;s++)(i=o.get(s))instanceof Me&&i.setExpanded(!0)}}}}),sn.createMatrix=function(t){return"rightleft"===t?b.createMatrix(Math.PI/2,0,0):"leftright"===t?b.createMatrix(-Math.PI/2,0,0):"bottomtop"===t?b.createMatrix(Math.PI,0,0):null};function an(){}Y.ext(an,Object,{i1:function(t,e,i){var n=this.a1(t,e);return this.a2(t,e,i),n},a1:function(t,e){t=an.i4(t);t.ax();for(var i=0,n=t.x1();n.i1();n.i2())e.i7(n.i9(),-1);for(var o=t.x1();o.i1();o.i2()){for(var s=o.i9(),a=-1,r=s.aq();r.i1();r.i2())a=Math.max(a,e.i2(r.i9()));e.i7(s,a+1),i=Math.max(i,a+1)}return i+1},a2:function(t,e,i){i.az(an.i3(t,e))}}),an.i3=function(t,e){for(var i=new ri,n=t.xf();n.i1();n.i2()){var o=n.i8();e.i2(o.a2())>e.i2(o.a3())&&(t.x3(o),i.ac(o))}return i},an.i4=function(t){var e=xn.a(t.xa());return(new Je).a1(t,e),an.i2(t,e)},an.i2=function(t,e){for(var i=xn.d(t.x0()),n=t.x9();n.i1();n.i2()){var o=n.i9();i[e[o.al()]]=o}return new Ci(i)};var rn=function(){rn.superClass.constructor.call(this),this.c0()};Y.ext(rn,ri,{c0:function(){this._bc=1,this._bd=0}});se=function(){this._m1=20,this._m2=60,this._m3=5,this._m4=0};Y.ext(se,Object,{i4:function(t){this._m3=t},i5:function(t){this._m4=t},i3:function(t){this._m1=t},i6:function(t){this._m2=t},i2:function(t){this._m5=t},t1:function(){return this._m2},a1:function(t,e){for(var i=xn.d(e.length),n=0;n<e.length;n++)i[n]=e[n].x1();this.a2(t,i)},a2:function(t,e){for(var i=xn.a(e.length),n=0,o=0;o<e.length;o++){var s=0,a=e[o];for(a.i4();a.i1();a.i2())s=Math.max(s,t.g9(a.i9()));for(i[o]=s,a.i4();a.i1();a.i2()){var r=(i[o]-t.g9(a.i9()))/2;t.s4(a.i9(),new Be(t.gi(a.i9()),n+r))}var h=this.t1();n+=i[o]+h,a.i4()}},i1:function(t,e,i){this._m6=t,this.t2(e,i)}});var hn=function(t,e){hn.superClass.constructor.call(this)};Y.ext(hn,se,{t2:function(t,e){var i=this._m6;this._a=i.xc("D"),this._h=i.xc("C"),this.a1(i,t),this.tg(i,t),this.tf(t,bi.a5(this._e),this._m5,this._l),this.tb(i,this._f[0]),this.ta(t),this.th(i,this._f[0],t),this.b(t),this.tb(i,this._f[1]),this.ta(t),this.th(i,this._f[1],t),this.b(t),this.a11(this._f[1]),this.a12(t),this.tb(i,this._f[2]),this.ta(t),this.th(i,this._f[2],t),this.b(t),this.tb(i,this._f[3]),this.ta(t),this.th(i,this._f[3],t),this.b(t),this.a11(this._f[3]),this.a12(t),this.tc(i),this.tj()},a11:function(t){for(var e=0;e<t.length;e++)t[e]=-t[e]},b:function(t){for(var e=0;e<t.length;e++)t[e].ax();for(var i=0;i<t.length;i++)for(var n=0,o=null,s=t[i].x1();s.i1();s.i2()){var a=s.i9(),r=a.al();this._l[r]=n++,this._b[r]=o,(this._k[r]=null)!=o&&(this._k[o.al()]=a),o=a}var h=this._a;this._a=this._h,this._h=h;for(var l=this._m6.xf();l.i1();l.i2()){var c=l.i8(),u=this._m6.gn(c);this._m6.gt(c,new Be(-u.x,u.y));u=this._m6.gk(c);this._m6.gz(c,new Be(-u.x,u.y))}var d=this._l;this._m6.x2(function(t,e){return null==t&&null!=e?1:null!=t&&null==e?-1:null==t&&null==e?0:d[t.a2().al()]-d[e.a2().al()]},function(t,e){return null==t&&null!=e?1:null!=t&&null==e?-1:null==t&&null==e?0:d[t.a3().al()]-d[e.a3().al()]})},a12:function(t){for(var e=this._m6.xf();e.i1();e.i2()){var i=e.i8();this._m6.x3(i);var n=this._m6.gn(i),o=this._m6.gk(i);this._m6.gz(i,n),this._m6.gt(i,o)}for(var s=new ai,a=0;a<t.length;a++)s.ae(t[a]);for(var r=0;r<t.length;r++)t[r]=s.au();var h=this._l;this._m6.x2(function(t,e){return null==t&&null!=e?1:null!=t&&null==e?-1:null==t&&null==e?0:h[t.a2().al()]-h[e.a2().al()]},function(t,e){return null==t&&null!=e?1:null!=t&&null==e?-1:null==t&&null==e?0:h[t.a3().al()]-h[e.a3().al()]})},tg:function(t,e){var i=t.x0(),n=t.xg();this._l=xn.a(i),this._b=xn.d(i),this._k=xn.d(i),this._m=xn.d(i),this._i=xn.d(i),this._o=xn.d(i),this._f=xn.e(4,i),this._c=xn.a(i),this._g=xn.a(i),this._j=xn.a(i),this._d=xn.b(i),this._e=xn.b(n);for(var o=0;o<e.length;o++)for(var s=0,a=null,r=e[o].x1();r.i1();r.i2()){var h=r.i9(),l=h.al();this._l[l]=s++,this._b[l]=a,(this._k[l]=null)!=a&&(this._k[a.al()]=h),a=h}var c=this._l;t.x2(function(t,e){return null==t&&null!=e?1:null!=t&&null==e?-1:null==t&&null==e?0:c[t.a2().al()]-c[e.a2().al()]},function(t,e){return null==t&&null!=e?1:null!=t&&null==e?-1:null==t&&null==e?0:c[t.a3().al()]-c[e.a3().al()]})},tb:function(t,e){for(var i=t.x9();i.i1();i.i2()){var n=i.i9(),o=n.al();this._m[o]=n,this._i[o]=n,e[o]=Number.MAX_VALUE,this._o[o]=n,this._c[o]=Number.MAX_VALUE,this._d[o]=!1,this._j[o]=this._g[o]=0}},ta:function(t){for(var e=1;e<t.length;e++)for(var i=-1,n=t[e]._b;null!=n;n=n.a()){var o=n.d(),s=o.al(),a=o.ak();if(0!==a){for(var r=Math.floor((a+1)/2),h=Math.ceil((a+1)/2),l=1,c=o.ae();l<r;c=c.a7())l++;for(var u=!1;l<=h&&!u;l++){var d=this._m6.g2(c),_=c.a2().al();this._i[s]===o&&!this._e[c.a5()]&&i<this._l[_]&&(i=this._l[_],this._i[_]=o,this._m[s]=this._m[_],this._i[s]=this._m[s],u=!0,this._j[_]=d.i6().x,this._g[s]=d.i7().x),c=c.a7()}}}},th:function(t,e,i){for(var n=t.x9();n.i1();n.i2()){var o=n.i9(),s=o.al();this._m[s]===o&&this.td(t,o,e)}for(var a,r,h=0;h<i.length;h++)i[h].x1().i1()&&(r=(a=i[h].x1().i9()).al(),this._o[this._m[r].al()]===a&&this.tk(t,a,e));for(var l=t.x9();l.i1();l.i2()){var c=l.i9().al(),u=this._c[this._o[this._m[c].al()].al()];u<Number.MAX_VALUE&&(e[c]+=u)}},td:function(t,e,i){var n=e.al();if(i[n]===Number.MAX_VALUE){var o=e,s=i[n]=0;do{var a,r,h,l=o.al()}while(l!==n&&(s-=this._g[l]),0<this._l[l]&&(a=this._b[l],h=(r=this._m[this._b[l].al()]).al(),this.td(t,r,i),this._o[n]===e&&(this._o[n]=this._o[h]),this._o[n]===this._o[h]&&(i[n]=Math.max(i[n],i[a.al()]+this.ti(t,a,o)-s))),s+=this._j[l],(o=this._i[l])!==e);s=0,o=e;do{var c=o.al()}while(c!==n&&(s-=this._g[c]),i[c]=i[n]+s,s+=this._j[c],(o=this._i[c])!==e)}},tk:function(t,e,i){var n=e.al();if(!this._d[n]){this._d[n]=!0;var o=e;do{var s,a,r=o.al(),h=this._k[r]}while(null!=h&&(s=h.al(),(a=this._o[this._m[s].al()])!==this._o[n]?(h=i[s]-i[n]-this.ti(t,o,h),this._c[a.al()]!==Number.MAX_VALUE&&(h+=this._c[a.al()]),this._c[this._o[n].al()]=Math.min(this._c[this._o[n].al()],h)):this.tk(t,this._m[s],i)),(o=this._i[r])!==e)}},tc:function(t){for(var e=xn.a(4),i=xn.a(4),n=t.x9();n.i1();n.i2()){var o=n.i9().al();i[0]+=this._f[0][o],i[1]+=this._f[1][o],i[2]+=this._f[2][o],i[3]+=this._f[3][o]}i[0]/=t.xa(),i[1]/=t.xa(),i[2]/=t.xa(),i[3]/=t.xa();for(var s=t.x9();s.i1();s.i2()){var a=s.i9(),r=a.al(),h=t.g4(a);e[0]=this._f[0][r]-i[0],e[1]=this._f[1][r]-i[1],e[2]=this._f[2][r]-i[2],e[3]=this._f[3][r]-i[3],e.sort(xn.n);r=(e[1]+e[2])/2;t.s1(a,new Be(r,h.y))}},ti:function(t,e,i){var n=t.gj(e),t=t.gj(i),t=1<n&&1<t?this._m1+(n+t)/2:this._m3+(n+t)/2;return this._l[e.al()]<this._l[i.al()]?(null!=this._a&&(t+=this._a.i3(i)),null!=this._h&&(t+=this._h.i3(e))):(null!=this._a&&(t+=this._a.i3(e)),null!=this._h&&(t+=this._h.i3(i))),t},tj:function(){this._l=null,this._b=null,this._k=null,this._e=null,this._m=null,this._i=null,this._f=null,this._c=null,this._o=null,this._d=null,this._j=null,this._g=null},tf:function(t,e,i,n){for(var o=t.length,s=2;s<o-1;s++)for(var a=-1,r=0,h=0,l=t[s].x1(),c=t[s].x1();c.i1();c.i2()){var u=c.i9(),d=null,_=!1;if(1===u.ak()&&(d=u.ae().a2(),null!=i.i1(d)&&null!=i.i1(u)&&(_=!0)),h===t[s].ay()-1||_){for(var g=_?n[d.al()]:t[s-1].ay();r<=h;r++){for(var f=l.i9().am();f.i1();f.i2()){var A=n[f.i8().a2().al()];(A<a||g<A)&&e.i7(f.i8(),!0)}l.i2()}a=g}h++}}});function ln(t,e){this._b=20,this._a=e,this._d=t,this._f={}}Y.ext(ln,Object,{a3:function(t){this._b=t},a4:function(t,e,i,n,o){this.a2(t)&&((t=this.b2(t))._o=e,t._m=o,t._n=n,t._f=i)},b2:function(t){var e=this._f[t._id];return null==e&&(e=new cn,this._f[t._id]=e),e},a2:function(t){return null!=this._f[t._id]},c:function(){for(var t=bi.a1(xn.a(this._d.xa())),e=bi.a1(xn.a(this._d.xa())),i=this._d.x9();i.i1();i.i2()){var n,o=i.i9();this.a2(o)&&(n=this.b2(o),t.i6(o,this._b*(n.c()-1)),e.i6(o,this._b*(n.b()-1)))}this._d.x1("D",t),this._d.x1("C",e)},g:function(){this._d.x6("D"),this._d.x6("C")},f:function(){for(var t=this._d.x9();t.i1();t.i2()){var e=t.i9();if(this.a2(e)){var i=this._d.gi(e),n=this._d.gh(e),o=this._d.gj(e),s=this._d.g9(e),a=this.b2(e),r=a._q.ay()+a._b.ay()+a._f,h=a._d.ay()+a._g.ay()+a._o,l=a._i.ay()+a._l.ay()+a._n,e=a._h.ay()+a._k.ay()+a._m,c=this._a.a7(o,r),u=this._a.a7(o,h),d=this._a.a7(s,e),_=this._a.a7(s,l);a.a2(this._a.a8(o,r,c),this._a.a8(o,h,u),this._a.a8(s,e,d),this._a.a8(s,l,_));for(var g=a._j.c1();g.i1();g.i2()){var f=g.i8(),A=this.a1(f),p=this.b1(f),m=new ai;A.b()===p.b()?(A.c()?(m.aa(new Be(i+a._g._bd*u+a._c,n)),m.aa(new Be(i+a._g._bd*u+a._c,n-this._b)),a._g._bd++,m.aa(new Be(i+a._g._bd*u+a._c,n-this._b)),m.aa(new Be(i+a._g._bd*u+a._c,n)),a._g._bd++,a._g._bc=Math.max(a._g._bc,2)):A.d()?(m.aa(new Be(i+a._b._bd*c+a._p,n+s)),m.aa(new Be(i+a._b._bd*c+a._p,n+s+this._b)),a._b._bd++,m.aa(new Be(i+a._b._bd*c+a._p,n+s+this._b)),m.aa(new Be(i+a._b._bd*c+a._p,n+s)),a._b._bd++,a._b._bc=Math.max(a._b._bc,2)):A.f()?(m.aa(new Be(i,n+a._i._bd*_+a._a)),m.aa(new Be(i-this._b,n+a._i._bd*_+a._a)),a._i._bd++,m.aa(new Be(i-this._b,n+a._i._bd*_+a._a)),m.aa(new Be(i,n+a._i._bd*_+a._a)),a._i._bd++,a._i._bc=Math.max(a._i._bc,2)):A.e()&&(m.aa(new Be(i+o,n+a._h._bd*d+a._e)),m.aa(new Be(i+o+this._b,n+a._h._bd*d+a._e)),a._h._bd++,m.aa(new Be(i+o+this._b,n+a._h._bd*d+a._e)),m.aa(new Be(i+o,n+a._h._bd*d+a._e)),a._h._bd++,a._h._bc=Math.max(a._h._bc,2)),this._d.m1(f,m)):A.c()||p.c()?A.e()||p.e()?(m.aa(new Be(i+o-a._d._bd*u-a._c,n)),m.aa(new Be(i+o-a._d._bd*u-a._c,n-this._b*a._d._bc)),m.aa(new Be(i+o+this._b*a._h._bc,n-this._b*a._d._bc)),m.aa(new Be(i+o+this._b*a._h._bc,n+a._h._bd*d+a._e)),m.aa(new Be(i+o,n+a._h._bd*d+a._e)),a._d._bd++,a._d._bc++,a._h._bd++,a._h._bc++,p.c()&&m.ax(),this._d.m1(f,m)):A.f()||p.f()?(m.aa(new Be(i+a._g._bd*u+a._c,n)),m.aa(new Be(i+a._g._bd*u+a._c,n-this._b*a._g._bc)),m.aa(new Be(i-this._b*a._i._bc,n-this._b*a._g._bc)),m.aa(new Be(i-this._b*a._i._bc,n+a._i._bd*_+a._a)),m.aa(new Be(i,n+a._i._bd*_+a._a)),a._g._bd++,a._g._bc++,a._i._bd++,a._i._bc++,p.c()&&m.ax(),this._d.m1(f,m)):(A.d()||p.d())&&(m.aa(new Be(i+o-a._d._bd*u-a._c,n)),m.aa(new Be(i+o-a._d._bd*u-a._c,n-this._b*a._d._bc)),m.aa(new Be(i+o+this._b*a.b(),n-this._b*a._d._bc)),m.aa(new Be(i+o+this._b*a.b(),n+s+this._b*a._q._bc)),m.aa(new Be(i+o-a._q._bd*c-a._p,n+s+this._b*a._q._bc)),m.aa(new Be(i+o-a._q._bd*c-a._p,n+s)),a._d._bd++,a._d._bc++,a._k._bc++,a._h._bc++,a._q._bc++,a._q._bd++,p.c()&&m.ax(),this._d.m1(f,m)):A.d()||p.d()?A.e()||p.e()?(m.aa(new Be(i+o-a._q._bd*c-a._p,n+s)),m.aa(new Be(i+o-a._q._bd*c-a._p,n+s+this._b*a._q._bc)),m.aa(new Be(i+o+this._b*a._k._bc,n+s+this._b*a._q._bc)),m.aa(new Be(i+o+this._b*a._k._bc,n+s-a._k._bd*d-a._e)),m.aa(new Be(i+o,n+s-a._k._bd*d-a._e)),a._q._bd++,a._q._bc++,a._k._bd++,a._k._bc++,p.d()&&m.ax(),this._d.m1(f,m)):(A.f()||p.f())&&(m.aa(new Be(i+a._b._bd*c+a._p,n+s)),m.aa(new Be(i+a._b._bd*c+a._p,n+s+this._b*a._b._bc)),m.aa(new Be(i-this._b*a._l._bc,n+s+this._b*a._b._bc)),m.aa(new Be(i-this._b*a._l._bc,n+s-a._l._bd*_-a._a)),m.aa(new Be(i,n+s-a._l._bd*_-a._a)),a._b._bd++,a._b._bc++,a._l._bd++,a._l._bc++,p.d()&&m.ax(),this._d.m1(f,m)):(m.aa(new Be(i,n+s-a._l._bd*_-a._a)),m.aa(new Be(i-this._b*a._l._bc,n+s-a._l._bd*_-a._a)),m.aa(new Be(i-this._b*a._l._bc,n+s+this._b*a.a1())),m.aa(new Be(i+o+this._b*a._k._bc,n+s+this._b*a.a1())),m.aa(new Be(i+o+this._b*a._k._bc,n+s-a._k._bd*d-a._e)),m.aa(new Be(i+o,n+s-a._k._bd*d-a._e)),a._l._bd++,a._l._bc++,a._b._bc++,a._q._bc++,a._k._bc++,a._k._bd++,p.f()&&m.ax(),this._d.m1(f,m))}}}},a5:function(t,e){for(var i=0;i<t.length;i++)for(var n=t[i],o=e[i],s=n.x1();s.i1();s.i2()){var a=s.i9();this.a2(a)&&(a=this.b2(a),o._g=Math.max(o._g,this._b*(a.d()-1)),o._j=Math.max(o._j,this._b*(a.a1()-1)))}},a1:function(t){var e=this._d.xc("A"),i=null;if(null==(i=null!=e?e.i1(t):i)||i.g()){e=this._d.xc("B");if(null==e)return tn.j(1);t=e.i1(t);if(null==t||t.g())return tn.j(1);if(t.c())return tn.j(8);if(t.f())return tn.j(1);if(t.d())return tn.j(4);if(t.e())return tn.j(2)}return i},b1:function(t){var e=this._d.xc("B"),i=null;if(null==(i=null!=e?e.i1(t):i)||i.g()){e=this._d.xc("A");if(null==e)return tn.j(8);t=e.i1(t);if(null==t||t.g())return tn.j(8);if(t.c())return tn.j(8);if(t.f())return tn.j(1);if(t.d())return tn.j(4);if(t.e())return tn.j(2)}return i}});var cn=function(){this._o=0,this._f=0,this._n=0,this._m=0,this._c=0,this._p=0,this._e=0,this._a=0,this._j=new ri,this._g=new rn,this._d=new rn,this._b=new rn,this._q=new rn,this._h=new rn,this._k=new rn,this._i=new rn,this._l=new rn};Y.ext(cn,Object,{a1:function(){return Math.max(this._q._bc,this._b._bc)},d:function(){return Math.max(this._d._bc,this._g._bc)},b:function(){return Math.max(this._k._bc,this._h._bc)},c:function(){return Math.max(this._l._bc,this._i._bc)},a2:function(t,e,i,n){this._c=e,this._a=n,this._p=t,this._e=i,this._g.c0(),this._d.c0(),this._b.c0(),this._q.c0(),this._k.c0(),this._h.c0(),this._l.c0(),this._i.c0()}});function un(t,e,i,n){this._k=20,this._r=.5,this._d=t,this._c=e,this._j=i,this._m=n,this._i=null!=t.xc("A")||null!=t.xc("B"),this._t=new gn(t,e,i,n),this._b=new ln(t,this)}Y.ext(un,Object,{a6:function(t){this._k=t,this._t.a1(t),this._b.a3(t)},g1:function(){return this._k},a9:function(t){return this.c1(),t},a5:function(t){return this.a1(),t},b3:function(t){return this.c1(),t=this.c4(t),this._b.c(),t},g2:function(t){return this._b.g(),t},e2:function(t){t=this.f(t),this._b.f()},e1:function(){this._t.d(),null!=this._n&&this._d.xi(this._n),this.a1(),this._d=null},a1:function(){this._i&&(null!=this._q&&(this._d.x1("A",this._q),this._q=null),null!=this._p&&(this._d.x1("B",this._p),this._p=null),null!=this._h&&(this._d.xj(this._h),this._h=null),null!=this._l&&(this._d.xj(this._l),this._l=null))},c1:function(){if(this._i){null==this._h&&(this._h=this._d.xl()),null==this._l&&(this._l=this._d.xl());for(var t=this._d.xf();t.i1();t.i2()){var e,i=t.i8(),n=null!=this._j.i1(i.a2()),o=null!=this._j.i1(i.a3());n&&!o?(e=this._j.i1(i.a2()),this._m.i4(e)?this._l.i8(i,tn.h(this._d,e)):this._l.i8(i,tn.i(this._d,e))):!n&&o?(e=this._j.i1(i.a3()),this._m.i4(e)?this._h.i8(i,tn.i(this._d,e)):this._h.i8(i,tn.h(this._d,e))):n||o||(this._m.i4(i)?(this._h.i8(i,tn.i(this._d,i)),this._l.i8(i,tn.h(this._d,i))):(this._h.i8(i,tn.h(this._d,i)),this._l.i8(i,tn.i(this._d,i))))}this._q=this._d.xc("A"),this._p=this._d.xc("B"),this._d.x1("A",this._h),this._d.x1("B",this._l)}},c4:function(t){this._n=this._d.xk(),this._a=this._d.xl(),this._g=this._d.xl();for(var e=new ri,i=new ri,n=new ri,o=new ri,s=new ri,a=new ri,r=new ri,h=new ri,l=new ri,c=this._d.xk(),u=0;u<t.length;u++)for(var d=0,_=t[u].x1();_.i1();)c.i6(_.i9(),d),_.i2(),d++;function g(t,e){return(e=c.i3(t.a3())-c.i3(e.a3()))<=0?0<=e?0:-1:1}function f(t,e){return(e=c.i3(t.a2())-c.i3(e.a2()))<=0?0<=e?0:-1:1}for(var A=0;A<t.length;A++)for(var p=t[A],m=p._b;null!=m;m=m.a()){var v=m.d();v.av(g),v.au(f);e.af(),i.af(),n.af(),o.af(),s.af(),a.af(),r.af(),h.af(),l.af();for(var y=v.ap();y.i1();){var w=y.i8(),x=this.b1(w);null==x||x.d()||x.g()?n.aa(w):x.e()?e.aa(w):x.f()?(i.aa(w),l.aa(w)):x.c()&&(h.aa(w),l.aa(w)),y.i2(),0}for(var E=v.am();E.i1();){var C=E.i8(),T=this.a2(C);null==T||T.c()||T.g()?o.aa(C):T.e()?e.aa(C):T.f()?(i.aa(C),l.aa(C)):T.d()&&(a.aa(C),l.aa(C)),E.i2(),0}var I=c.i3(v);if(!l.ar())for(var L=.1/l.ay(),S=I-.4;!l.ar();S+=L){var b,R=l.c3();R.a2()===v?(b=this._d.xm(),this._n.z1(b,R.a2()),this._d.s7(b,1,1),this._c.z1(b,this._c.i1(v)),c.i6(b,S),this._a.i8(R,this._d.gn(R)),this._d.gt(R,Yi._A),this._d.xr(R,b,R.a3()),p.ao(b,m)):(b=this._d.xm(),this._n.z1(b,R.a3()),this._d.s7(b,1,1),this._c.z1(b,this._c.i1(v)),c.i6(b,S),this._g.i8(R,this._d.gk(R)),this._d.gz(R,Yi._A),this._d.xr(R,R.a2(),b),p.ao(b,m))}if(!e.ar())for(var P=.1/e.ay(),M=I+.1;!e.ar();M+=P)var D,k=e.c3(),m=k.a2()===v?(D=this._d.xm(),this._n.z1(D,k.a2()),this._d.s7(D,1,1),this._c.z1(D,this._c.i1(v)),c.i6(D,M),this._a.i8(k,this._d.gn(k)),this._d.gt(k,Yi._A),this._d.xr(k,D,k.a3()),p.an(D,m)):(D=this._d.xm(),this._n.z1(D,k.a3()),this._d.s7(D,1,1),this._c.z1(D,this._c.i1(v)),c.i6(D,M),this._g.i8(k,this._d.gk(k)),this._d.gz(k,Yi._A),this._d.xr(k,k.a2(),D),p.an(D,m));var O=un._z,B=(O=this._b.a2(v)?this._b.b2(v):O)._b.ay()+a.ay()+v.ao()+s.ay()+O._q.ay();if(0<B)for(var N=this._d.g9(v)/2,U=this._d.gj(v),z=this.a7(U,B),F=-.5*U+this.a8(this._d.gj(v),B,z)+z*(O._b.ay()+a.ay()),V=v.ap();V.i1();V.i2()){var G=V.i8();this.c2(G)||null!=this._j.i1(G.a2())||(this._d.g2(G).i8(new Be(F,N)),F+=z)}var H=this._t.a3(v),W=0,Z=0,Y=0,I=0;if(null!=H&&(W=H._e.ay(),Z=H._c.ay(),Y=H._b.ay(),I=H._d.ay()),0<(B=O._g.ay()+W+h.ay()+v.ak()+r.ay()+Z+O._d.ay())){for(var U=this._d.gj(v),X=this.a7(U,B),B=this.a8(U,B,X),j=-.5*U+B+X*(O._g.ay()+W+h.ay()),Q=-this._d.g9(v)/2,K=v.am();K.i1();K.i2()){var q=K.i8();this.d1(q)||null!=this._j.i1(q.a3())||(this._d.g2(q).i9(new Be(j,Q)),j+=X)}if(null!=H){for(var J=-.5*U+B+X*(O._g.ay()+h.ay()+H._e.ay()-1),$=H._e.c1();$.i1();$.i2()){var tt=$.i8();this._d.u1(tt),tt.a2()!==v||this.c2(tt)?this.d1(tt)||(this._d.g2($.i8()).i9(new Be(J,Q)),J-=X):(this._d.g2($.i8()).i8(new Be(J,Q)),J-=X),this._d.h1(tt)}for(var J=.5*U-B-X*(O._d.ay()+r.ay()),et=H._c.c1();et.i1();et.i2()){var it=et.i8();this._d.u1(it),it.a2()!==v||this.c2(it)?this.d1(it)||(this._d.g2(et.i8()).i9(new Be(J,Q)),J-=X):(this._d.g2(et.i8()).i8(new Be(J,Q)),J-=X),this._d.h1(it)}}}this._b.a2(v)&&this._b.a4(v,W+h.ay()+v.ak()+r.ay()+Z,a.ay()+v.ao()+s.ay(),Y+i.ay(),I+e.ay())}return this._d.xi(c),t},a7:function(t,e){return e<=1?0:t/(e-1+2*this._r)},a8:function(t,e,i){return e<=1?.5*t:.5*(t-i*(e-1))},f:function(t){var e=this.g1();this._f=this._d.xk();for(var i=0;i<t.length;i++)for(var n=t[i]._b;null!=n;){var o=n.d();if(null!=this._n.i1(o)||this._t.b2(o))n=n.a();else{var s=new Ci,a=new Ci,r=new Ci,h=new Ci,l=new Ci,c=new Ci,u=new ri,d=new ri,_=new An(s,a,r,h,l,c,u,d);this._f.z1(o,_),u.ab(o.am()),d.ab(o.ap());for(var g,f=n.b();null!=f&&this._n.i1(f.d())===o;f=f.b()){var A=f.d(),p=this.c3(A);p.f()?a.ac(A):p.c()?h.ac(A):p.d()&&c.ac(A)}for(g=n.a();null!=g&&this._n.i1(g.d())===o;g=g.a()){var m=g.d(),v=this.c3(m);v.e()?s.aa(m):v.c()?r.aa(m):v.d()&&l.aa(m)}n=g}}for(var y=this.d2(t),w=0,x=0;x<t.length;x++){var E=y[x];0<x&&(w+=y[x-1]._j+y[x-1]._h+y[x-1]._b),w+=E._g+E._f+E._a+E._d;for(var C=t[x].x1();C.i1();C.i2()){var T=C.i9();this._d.s3(T,this._d.gi(T),this._d.gh(T)+w)}E._c+=w,E._i+=w}for(var I=0;I<t.length;I++)for(var L=t[I],S=L.x1();S.i1();S.i2()){var b=S.i9();null!=this._n.i1(b)&&L.av(S)}function R(t,e){return M.a3(t)?M.a3(e)&&M._d.gi(t)>=M._d.gi(e)?-1:1:!M.a3(e)&&M._d.gi(t)>=M._d.gi(e)?1:-1}function P(t,e){return M.a3(t)?!M.a3(e)||M._d.gi(t)>=M._d.gi(e)?1:-1:M.a3(e)||M._d.gi(t)>=M._d.gi(e)?-1:1}for(var M=this,D=0;D<t.length;D++)for(var k=y[D],O=t[D].x1();O.i1();O.i2()){var B=O.i9();if(!this._t.b2(B)){var N=this._f.i1(B),U=N._d,z=N._a,F=N._b,V=N._h,G=N._f,H=N._c,W=N._g,Z=N._e,Y=0,X=0,j=0,Q=0,K=B.ao(),q=B.ak(),J=this._d.gi(B),$=this._d.gh(B),tt=this._d.gj(B),et=this._d.g9(B),it=this._t.a3(B),N=un._z;if(this._b.a2(B)&&(N=this._b.b2(B)),null!=it){if(Y=it._d.ay(),X=it._b.ay(),j=it._e.ay(),Q=it._c.ay(),0<Y)for(var nt=N._h.ay()+U.ay()+Y+N._k.ay(),ot=this.a7(et,nt),st=$+this.a8(et,nt,ot)+ot*(N._h.ay()+this.a4(U)),at=it._d.c1();at.i1();at.i2()){var rt=at.i8();this._d.u1(rt),rt.a2()===B?this.c2(rt)||this._d.gx(rt,new Be(J+tt,st)):(this.d1(rt),this._d.gy(rt,new Be(J+tt,st))),st+=ot,this._d.h1(rt)}if(0<X)for(var nt=N._i.ay()+z.ay()+X+N._l.ay(),ht=this.a7(et,nt),lt=$+this.a8(et,nt,ht)+ht*(N._i.ay()+this.a4(z)),ct=it._b.c1();ct.i1();ct.i2()){var ut=ct.i8();this._d.u1(ut),ut.a2()===B?this.c2(ut)||this._d.gx(ut,new Be(J,lt)):this.d1(ut)||this._d.gy(ut,new Be(J,lt)),lt+=ht,this._d.h1(ut)}}if(0<U.ay()){U.a1(R);for(var dt=N._h.ay()+U.ay()+Y+N._k.ay(),_t=this.a7(et,dt),gt=$+this.a8(et,dt,_t)+_t*N._h.ay(),ft=!0;!U.ar();){var At,pt,mt,vt,yt=U.x4();this.a3(yt)?(ft&&(ft=!1,gt+=_t*Y),mt=yt.ag(),pt=(vt=this._d.gd(mt)).at(),vt.ac(new Be(pt.x,k.b())),this.c2(mt)?(At=this._a.i1(mt),vt.ac(new Be(pt.x,At.y+this._d.g6(B))),vt.ac(new Be(At.x+this._d.g5(B),At.y+this._d.g6(B)))):(vt.ac(new Be(pt.x,gt)),vt.ac(new Be(J+tt,gt))),this._d.xr(mt,B,mt.a3()),this._d.m1(mt,vt)):(At=yt.ae(),mt=(pt=this._d.gd(At)).au(),pt.ae(new Be(mt.x,k.a())),this.d1(At)?(vt=this._g.i1(At),pt.ae(new Be(mt.x,vt.y+this._d.g6(B))),pt.ae(new Be(vt.x+this._d.g5(B),vt.y+this._d.g6(B)))):(pt.ae(new Be(mt.x,gt)),pt.ae(new Be(J+tt,gt))),this._d.xr(At,At.a2(),B),this._d.m1(At,pt)),this._d.x4(yt),gt+=_t}}if(0<z.ay()){z.a1(P);for(var dt=N._i.ay()+z.ay()+X+N._l.ay(),wt=this.a7(et,dt),xt=$+this.a8(et,dt,wt)+wt*N._i.ay(),Et=!0;!z.ar();){var Ct,Tt,It,Lt,St=z.x4();this.a3(St)?(Et&&(Et=!1,xt+=wt*X),It=St.ag(),Tt=(Lt=this._d.gd(It)).at(),Lt.ac(new Be(Tt.x,k.b())),this.c2(It)?(Ct=this._a.i1(It),Lt.ac(new Be(Tt.x,Ct.y+this._d.g6(B))),Lt.ac(new Be(Ct.x+this._d.g5(B),Ct.y+this._d.g6(B)))):(Lt.ac(new Be(Tt.x,xt)),Lt.ac(new Be(J,xt))),this._d.xr(It,B,It.a3()),this._d.m1(It,Lt)):(Ct=St.ae(),It=(Tt=this._d.gd(Ct)).au(),Tt.ae(new Be(It.x,k.a())),this.d1(Ct)?(Lt=this._g.i1(Ct),Tt.ae(new Be(It.x,Lt.y+this._d.g6(B))),Tt.ae(new Be(Lt.x+this._d.g5(B),Lt.y+this._d.g6(B)))):(Tt.ae(new Be(It.x,xt)),Tt.ae(new Be(J,xt))),this._d.xr(Ct,Ct.a2(),B),this._d.m1(Ct,Tt)),this._d.x4(St),xt+=wt}}q=N._g.ay()+N._d.ay()+q+V.ay()+F.ay()+j+Q,tt=this._d.gj(B),j=this.a7(tt,q),Q=this.a8(tt,q,j),q=N._b.ay()+N._q.ay()+K+H.ay()+G.ay(),K=this.a7(tt,q),q=this.a8(tt,q,K);if(0<V.ay())for(var bt=j,Rt=e,Pt=this._d.gi(B)+Q+bt*(N._g.ay()+V.ay()-1),Mt=this._d.gh(B),Dt=k._c-k._g-V.ay()*Rt;!V.ar();this._d.x4(kt)){var kt,Ot=(kt=V.x4()).ag(),Bt=this._d.gd(Ot),Nt=Bt.at();Bt.ac(new Be(Nt.x,k.b())),Bt.ac(new Be(Nt.x,Dt)),this.c2(Ot)?(Nt=this._a.i1(Ot),Bt.ac(new Be(Nt.x+this._d.g5(B),Dt)),Bt.ac(new Be(Nt.x+this._d.g5(B),Nt.y+this._d.g6(B)))):(Bt.ac(new Be(Pt,Dt)),Bt.ac(new Be(Pt,Mt)),Pt-=bt),Dt+=Rt,this._d.xr(Ot,B,Ot.a3()),this._d.m1(Ot,Bt)}if(0<F.ay())for(var Ut=j,zt=e,Ft=this._d.gi(B)+this._d.gj(B)-Q-Ut*N._d.ay(),Vt=this._d.gh(B),Gt=k._c-k._g-zt;!F.ar();this._d.x4(Ht)){var Ht,Wt=(Ht=F.x4()).ag(),Zt=this._d.gd(Wt),Yt=Zt.at();Zt.ac(new Be(Yt.x,k.b())),Zt.ac(new Be(Yt.x,Gt)),this.c2(Wt)?(Yt=this._a.i1(Wt),Zt.ac(new Be(Yt.x+this._d.g5(B),Gt)),Zt.ac(new Be(Yt.x+this._d.g5(B),Yt.y+this._d.g6(B)))):(Zt.ac(new Be(Ft,Gt)),Zt.ac(new Be(Ft,Vt)),Ft-=Ut),Gt-=zt,this._d.xr(Wt,B,Wt.a3()),this._d.m1(Wt,Zt)}if(0<H.ay())for(var Xt=K,jt=e,Qt=this._d.gi(B)+q+Xt*(N._b.ay()+H.ay()-1),Kt=this._d.gh(B)+this._d.g9(B),qt=Kt+H.ay()*jt;!H.ar();this._d.x4(Jt)){var Jt,$t=(Jt=H.x4()).ae(),te=this._d.gd($t),ee=te.au();te.ae(new Be(ee.x,k.a())),te.ae(new Be(ee.x,qt)),this.d1($t)?(ee=this._g.i1($t),te.ae(new Be(ee.x+this._d.g5(B),qt)),te.ae(new Be(ee.x+this._d.g5(B),ee.y+this._d.g6(B)))):(te.ae(new Be(Qt,qt)),te.ae(new Be(Qt,Kt)),Qt-=Xt),qt-=jt,this._d.xr($t,$t.a2(),B),this._d.m1($t,te)}if(0<G.ay())for(var ie=K,ne=e,oe=this._d.gi(B)+this._d.gj(B)-q-K*N._q.ay(),se=this._d.gh(B)+this._d.g9(B),ae=se+ne;!G.ar();this._d.x4(re)){var re,he=(re=G.x4()).ae(),le=this._d.gd(he),ce=le.au();le.ae(new Be(ce.x,k.a())),le.ae(new Be(ce.x,ae)),this.d1(he)?(ce=this._g.i1(he),le.ae(new Be(ce.x+this._d.g5(B),ae)),le.ae(new Be(ce.x+this._d.g5(B),ce.y+this._d.g6(B)))):(le.ae(new Be(oe,ae)),le.ae(new Be(oe,se)),oe-=ie),ae+=ne,this._d.xr(he,he.a2(),B),this._d.m1(he,le)}for(;!Z.ar();){var ue=Z.c3(),de=this._d.gl(ue);k.a()+12<de.y&&this._d.g7(ue).i4(de.x,k.a())}for(;!W.ar();){var _e,ge=W.c3(),fe=this._d.gs(ge);k.b()-12>fe.y&&((_e=this._d.gf(ge)).ac(new Be(fe.x,k.b())),this._d.s6(ge,_e))}}}for(var Ae=0;Ae<t.length;Ae++)for(var pe=t[Ae],me=pe._b;null!=me;me=me.a()){var ve=me.d(),ve=this._t.a3(ve);null!=ve&&null!=ve._a&&(this._d.x4(ve._a),pe.aw(me.b()))}return this._d.xi(this._f),this._d.xj(this._a),this._d.xj(this._g),t},c3:function(t){return this.a3(t)?this.b1(t.ag()):this.a2(t.ae())},b1:function(t){return null==this._h?un.s:this._h.i1(t)},a2:function(t){return null==this._l?un.u:this._l.i1(t)},c2:function(t){if(null==t)return!1;t=this.b1(t);return null!=t&&t.a()},d1:function(t){if(null==t)return!1;t=this.a2(t);return null!=t&&t.a()},a3:function(t){return 1===t.ao()},b2:function(t){return 1===t.ak()},a4:function(t){for(var e=0,i=t._b;null!=i;i=i.a())this.b2(i.d())&&e++;return e},d2:function(t){for(var e=this._k,i=xn.d(t.length+1),n=0;n<t.length;n++){var o=t[n],s=new fn;(i[n]=s)._c=Number.MAX_VALUE,s._i=Number.MIN_VALUE;for(var a=o.x1();a.i1();a.i2()){var r=a.i9(),r=this._d.gb(r);s._c=Math.min(s._c,r.i2()),s._i=Math.max(s._i,r.i2()+r.i4())}}this._b.a5(t,i);for(var h=0;h<t.length;h++)for(var l=i[h],c=t[h].x1();c.i1();c.i2()){var u=c.i9(),u=this._f.i1(u);null!=u&&(l._h=Math.max(l._h,Math.max(u._f.ay()*e,u._c.ay()*e)),l._f=Math.max(l._f,Math.max(u._b.ay()*e,u._h.ay()*e)))}return i}}),un.s=tn.j(2),un.u=tn.j(1),un._z=new cn;function dn(){this._af=0,this._b=0}Y.ext(dn,Object,{ib:function(t){this._af=t},ia:function(t,e,i){this.a6(t,e,i),this.b2(!1);var n=this.g();if(this.o()&&0<n){for(var o=this.r(),s=0;s<20&&0<n&&this.o();s++){this.b2(!0);var a=this.g();a<n&&(this.a7(o),n=a)}this.b3(o),this.b1()}return this.c()},a6:function(t,e,i){this._b=(new Date).getTime(),this._ac=t,this._ah=e;var n=this;this._p=function(t,e){e=n._n[t.al()]-n._n[e.al()];return 0<e?1:0<=e?0:-1},this._ad=xn.d(i);for(var o=0;o<this._ad.length;o++)this._ad[o]=new Ci;this._ab=xn.a(this._ac.x0()),this._f=xn.d(this._ac.x0()),this._n=xn.a(this._ac.x0()+1);var s=this._ab;this._o=function(t,e){if(null==t&&null!=e)return 1;if(null!=t&&null==e)return-1;if(null==t&&null==e)return 0;var i=t,n=e,o=i._h,t=i.a2(),e=n.a2(),e=s[t.al()]-s[e.al()];if(0!=e)return e;e=dn.b(tn.h(o,i),o.gn(i))-dn.b(tn.h(o,n),o.gn(n));if(0!=e)return e;e=s[i.a3().al()]-s[n.a3().al()];return 0!=e?e:dn.a(tn.i(o,i),o.gk(i))-dn.a(tn.i(o,n),o.gk(n))},this._l=function(t,e){if(null==t&&null!=e)return 1;if(null!=t&&null==e)return-1;if(null==t&&null==e)return 0;var i=t,n=e,o=i._h,t=i.a3(),e=n.a3(),e=s[t.al()]-s[e.al()];if(0!=e)return e;e=dn.a(tn.i(o,i),o.gk(i))-dn.a(tn.i(o,n),o.gk(n));if(0!=e)return e;e=s[i.a2().al()]-s[n.a2().al()];return 0!=e?e:dn.b(tn.h(o,i),o.gn(i))-dn.b(tn.h(o,n),o.gn(n))},this._z=function(t,e){if(null==t&&null!=e)return 1;if(null!=t&&null==e)return-1;if(null==t&&null==e)return 0;var i=t,t=e,e=i._h;return dn.b(tn.h(e,i),e.gn(i))-dn.b(tn.h(e,t),e.gn(t))},this._e=function(t,e){if(null==t&&null!=e)return 1;if(null!=t&&null==e)return-1;if(null==t&&null==e)return 0;var i=t,t=e,e=i._h;return dn.a(tn.i(e,i),e.gk(i))-dn.a(tn.i(e,t),e.gk(t))},this._ac.x2(this._e,this._z)},c:function(){this._ah=null,this._aa=null,this._f=null,this._n=null,this._p=null,this._o=null,this._l=null,this._ac=null;var t=this._ad;return this._ad=null,t},o:function(){return(new Date).getTime()-this._b<=this._af},m:function(){function t(t,e){return Math.ceil(i._n[t.a3().al()])-Math.ceil(i._n[e.a3().al()])}for(var i=this,e=this._ac.x9();e.i1();e.i2()){for(var n=e.i9().aw();n.i1();n.i2())this._n[n.i9().al()]=Yi.j();e.i9().av(t)}},b2:function(t){for(var e=0;e<this._ad.length;e++)this._ad[e].af();if(t){this.m();for(var i=0,n=this._ab.length;i<n;i++)this._ab[i]=0;this._ac.x2(null,this._z)}var o=this._ac.xm();this._ah.i7(o,0);for(var s=this._ac.x9();s.i1();s.i2())0===s.i9().ak()&&s.i9()!==o&&this._ac.xo(o,s.i9());t=new je(this);t.a6(!0),t.a9(this._ac,o),this._ad[0].at(),this._ac.x4(o),this.d()},a1:function(){this._ac.x2(this._o,this._l);for(var t=0,e=1;e<this._ad.length;e++)t+=this.a2(this._ad[e-1],this._ad[e]);return t+=0},a2:function(t,e){var i=t.ah(),n=e.ah(),o=new ai,s=new ai;this._aa=xn.d(this._ac.x0());for(var a=0;i.i1()&&n.i1();n.i2())a+=this.a8(i.i6(),o,s,!0),a+=this.a8(n.i6(),s,o,!1),i.i2();for(;i.i1();i.i2())a+=this.a8(i.i6(),o,s,!0);for(;n.i1();n.i2())a+=this.a8(n.i6(),s,o,!1);return a},a8:function(t,e,i,n){var o=0,s=0,a=0;if(null!=this._aa[t.al()])for(var r=this._aa[t.al()].a(),h=e._b;h!==r;h=h.a())h._c===t?(o++,a+=s,e.aw(h)):s++;var l=o*i.ay()+a;if(n)for(var c=t.ag();null!=c;c=c.a8()){var u=c.a3();this._ab[u.al()]>=this._ab[t.al()]&&(this._aa[u.al()]=i.ae(u))}else for(var d=t.ae();null!=d;d=d.a7()){var _=d.a2();this._ab[_.al()]>this._ab[t.al()]&&(this._aa[_.al()]=i.ae(_))}return l},g:function(){for(var t=this.r(),e=this.a1(),i=0;i<3&&this.o()&&0<e;){var n=this.k();n<e?(this.a7(t),e=n):i++,0}if(this.b3(t),this.b1(),0<e){for(var o=1;1===o&&0<e;0){this.e(),this.i();var s=this.a1();s<e?(o=1,this.a7(t)):o=-1,e=s}this.b3(t),this.b1()}return e},e:function(){for(var t=this.l(),e=this.r(),i=xn.d(this._ac.x0()),n=this._ad.length-1;0<=n;n--)for(var o=this._ad[n].ah();o.i1();o.i2()){var s=o.i6();if(1===s.ak()&&1===s.ao()){var a=t.i1(s.ag());if(null!=a&&null==i[a.al()])for(var s=this.a4(s,a),r=i[a.al()]=xn.d(s+1),h=r.length-1;0<=h;h--)r[h]=new ai}}for(var l=0;l<this._ad.length;l++)for(var c=this._ad[l].ah();c.i1();c.i2()){var u=c.i6();if(1===u.ak()&&1===u.ao()){var d,_=t.i1(u.ag());null!=_&&(d=_.al(),_=this.a4(u,_)-1,i[d][_].ae(u.ae()))}else for(var g=u.ae();null!=g;g=g.a7()){var f,A=t.i1(g);null!=A&&(f=A.al(),A=this.a4(u,A)-1,i[f][A].ae(g))}}for(var p=this._ac.x9();p.i1();p.i2()){var m=p.i9();if(null!=i[m.al()])for(var v=m.ag();null!=v;v=v.a8()){var y=t.i1(v);if(null!=y)for(var w=i[y.al()];0<w[0].ay();){for(var x=0;;){var E,C=(E=w[x].am()).a3();if(1!==C.ak()||1!==C.ao())break;x++}var T=w[x].at().a3();x--;for(var T=E.a2(),I=(E=w[x].at()).a3();0<=x;)e[T.al()]!==e[I.al()]&&(this._ab[T.al()]=e[I.al()]),T=T.ae().a2(),0<=--x&&(I=w[x].at().a3())}}}this.b1(),this._ac.xj(t)},i:function(){for(var t=this.f(),e=this.r(),i=xn.d(this._ac.x0()),n=0;n<this._ad.length;n++)for(var o=this._ad[n].ah();o.i1();o.i2()){var s=o.i6();if(1===s.ak()&&1===s.ao()){var a=t.i1(s.ae());if(null!=a&&null==i[a.al()])for(var s=this.a4(a,s),r=i[a.al()]=xn.d(s+1),h=r.length-1;0<=h;h--)r[h]=new ai}}for(var l=this._ad.length-1;0<=l;l--)for(var c=this._ad[l].ah();c.i1();c.i2()){var u=c.i6();if(1===u.ak()&&1===u.ao()){var d,_=t.i1(u.ae());null!=_&&(d=_.al(),_=this.a4(_,u)-1,i[d][_].ae(u.ag()))}else for(var g=u.ag();null!=g;g=g.a8()){var f,A=t.i1(g);null!=A&&(f=A.al(),A=this.a4(A,u)-1,i[f][A].ae(g))}}for(var p=this._ac.x9();p.i1();p.i2()){var m=p.i9();if(null!=i[m.al()])for(var v=m.ae();null!=v;v=v.a7()){var y=t.i1(v);if(null!=y)for(var w=i[y.al()];0<w[0].ay();){for(var x=0;;){var E,C=(E=w[x].am()).a2();if(1!==C.ak()||1!==C.ao())break;x++}var T=w[x].at().a2();x--;for(var T=E.a3(),I=(E=w[x].at()).a2();0<=x;)e[T.al()]!==e[I.al()]&&(this._ab[T.al()]=e[I.al()]),T=T.ag().a3(),0<=--x&&(I=w[x].at().a2())}}}this.b1(),this._ac.xj(t)},a4:function(t,e){return this._ah.i2(t)-this._ah.i2(e)},l:function(){for(var t=bi.a6(xn.d(this._ac.xg())),e=this._ac.x9();e.i1();e.i2()){var i=e.i9();if(1<i.ao()){for(var n=0,o=i.ag();null!=o;o=o.a8()){var s=o.a3();1===s.ak()&&1===s.ao()&&n++}if(1<n)for(var a=i.ag();null!=a;a=a.a8()){var r=a,h=r.a3();if(1===h.ak()&&1===h.ao()){for(;1===h.ak()&&1===h.ao();h=r.a3())t.i8(r,i),r=h.ag();t.i8(r,i)}}}}return t},f:function(){for(var t=bi.a6(xn.d(this._ac.xg())),e=this._ac.x9();e.i1();e.i2()){var i=e.i9();if(1<i.ak()){for(var n=0,o=i.ae();null!=o;o=o.a7()){var s=o.a2();1===s.ak()&&1===s.ao()&&n++}if(1<n)for(var a=i.ae();null!=a;a=a.a7()){var r=a,h=r.a2();if(1===h.ak()&&1===h.ao()){for(;1===h.ak()&&1===h.ao();h=r.a2())t.i8(r,i),r=h.ae();t.i8(r,i)}}}}return t},k:function(){for(var t=1;t<this._ad.length;t++){for(var e=this._ad[t],i=e.ah();i.i1();i.i2()){var n=i.i6();this._n[n.al()]=this.a5(n,e.ay(),n.am(),this._ad[t-1].ay()),this._n[n.al()]+=this._ab[n.al()]/(3*this._ad[t-1].ay())}this.a3(e,this._p)}return this.a1()},a5:function(t,e,i,n){var o=0;if(0===i.i7())o=n*this._ab[t.al()]/e;else{for(;i.i1();i.i2()){var s=i.i8();s.a2()===t?o+=this._ab[s.a3().al()]:o+=this._ab[s.a2().al()]}o/=i.i7()}return o},a7:function(t){xn.f(this._ab,t,t.length)},b3:function(t){xn.f(t,this._ab,t.length)},r:function(){var t=xn.a(this._ab.length);return this.a7(t),t},d:function(){for(var t=0;t<this._ad.length;t++)for(var e=0,i=this._ad[t].ah();i.i1();)this._ab[i.i6().al()]=e,i.i2(),e++},b1:function(){for(var t=0;t<this._ad.length;t++){for(var e=this._ad[t],i=e._b;null!=i;i=i.a()){var n=i.d();this._f[this._ab[n.al()]]=n}for(var o=0,s=e._b;null!=s;)s.c(this._f[o]),s=s.a(),o++}},a3:function(t,e){for(var i=t.ah(),n=0;n<t.ay();i.i2())this._f[n]=i.i6(),n++;xn.s(this._f,t.ay(),e);for(var o=0,s=t._b;null!=s;)s.c(this._f[o]),this._ab[this._f[o].al()]=o,s=s.a(),o++}}),dn.b=function(t,e){if(null==t)return 0;var i=t.a()?Math.floor(e.x):0,e=t.a()?Math.floor(e.y):0;return t.e()?1e4-e:t.f()?-1e4+e:t.c()?-2e4-i:i},dn.a=function(t,e){if(null==t)return 0;var i=t.a()?Math.floor(e.x):0,e=t.a()?Math.floor(e.y):0;return t.e()?1e4+e:t.f()?-1e4-e:t.d()?-2e4-i:i};var _n=function(){_n.superClass.constructor.call(this),this._i6=0,this._i3=2147483647,this._i0=60,this._iz=20,this._i2=20,this._i4=20,this.i5(!1),this._i7=new an,this._i1=new dn,this._i8=new hn};Y.ext(_n,Ot,{j2:function(){return this._i2},i4:function(t){return!0},i3:function(t){this._i6=(new Date).getTime(),$i.d(t,!1);var e=t.xk(),i=t.xk(),n=t.xl(),o=new ri,s=new un(t,e,i,n);s.a6(this.j2()),this._i8.i3(this._iz),this._i8.i6(this._i0),this._i8.i4(this._i2),this._i8.i5(this._i4),this._i8.i2(i);for(var a=this._i7.i1(t,e,o),r=o.c1();r.i1();r.i2()){var h=r.i8();n.i7(h,!0);var l=t.gn(h);t.gt(h,t.gk(h)),t.gz(h,l)}this.a2(t,e,i);a=s.a9(a),a=this.j1(t,e,a),a=s.a5(a);a=s.b3(a),this._i8.i1(t,a,e),a=s.g2(a),s.e2(a),this.b(t,i),this.w(t),this.a1(t,o),s.e1(),t.xj(n),t.xi(i),t.xi(e)},j1:function(t,e,i){var n,o;return this._i1 instanceof dn&&(n=this._i1,o=(new Date).getTime()-this._i6,n.ib(this._i3-o)),this._i1.ia(t,e,i)},a1:function(t,e){for(var i=e.c1();i.i1();i.i2()){var n=i.i8(),o=t.gs(n),s=t.gl(n);t.x3(n);var a=t.gp(n);t.s5(n,a.a()),t.gy(n,o),t.gx(n,s)}},b:function(t,e){for(var i=t.x9();i.i1();i.i2()){var n=i.i9(),o=e.i1(n);if(null!=o&&!t.xp(o)){for(var s=n.am().i8().a2();null!=e.i1(s);s=n.am().i8().a2())n=s;t.u1(o);for(var a=n.ae(),r=new ai;null!=e.i1(a.a3());a=a.a3().ag()){var h=t.gs(a);r.aa(h),r.az(t.gf(a));var l=t.gl(a);l.equals(h)||r.aa(l)}var c=t.gs(a);r.aa(c),r.az(t.gf(a));var u=t.gl(a);u.equals(c)||r.aa(u),t.m1(o,r)}}for(var d=t.x9();d.i1();d.i2())null!=e.i1(d.i9())&&t.x4(d.i9())},w:function(t){for(var e=t.xf();e.i1();e.i2()){var i=e.i8(),n=t.g2(i);if(0<n.i1()){var o=new ie,s=t.gc(i).c(),a=s.i6();s.i2();var r=a.x,h=a.y;if(s.i1()){var l=s.i6(),c=l.x,u=l.y;for(s.i2();s.i1();s.i2()){var d=s.i6(),_=d.x,g=d.y;1<=Math.abs((r-_)*(u-g)/(h-g)+_-c)&&(o.add(l),r=c,h=u),l=d,c=_,u=g}}o.size()<n.i1()&&t.s5(i,new Ve(o))}}},a2:function(t,e,i){var n=t.g8().c1();for(n.i5();n.i1();n.i3()){var o=n.i8().a2(),s=n.i8().a3(),a=e.i2(s)-e.i2(o);if(1<a){for(var r=null,h=null,l=o;1<a;a--)r=t.xm(),t.s7(r,1,1),t.s4(r,Yi._A),h=t.xo(l,r),l===o&&t.gt(h,t.gn(n.i8())),e.i7(r,e.i2(l)+1),i.z1(r,n.i8()),l=r;h=t.xo(r,s),t.gz(h,t.gk(n.i8())),t.h1(n.i8())}}}});var gn=function(t,e,i,n){this._i=20,this._j=t,this._g=e,this._a=i,this._h=n};Y.ext(gn,Object,{a1:function(t){this._i=t},b2:function(t){return null!=this._e&&this._e.i4(t)},a3:function(t){return null==this._f?null:this._f.i1(t)},d:function(){this._j.xi(this._f),this._j.xi(this._e)}});var fn=function(){this._c=0,this._i=0,this._g=0,this._j=0,this._f=0,this._h=0,this._d=0,this._e=0,this._a=0,this._b=0};Y.ext(fn,Object,{a:function(){return this._c-this._g-this._f-this._a},b:function(){return this._i+this._j+this._h+this._b}});Y.ext(function(){this._d=new ri,this._b=new ri,this._c=new ri,this._e=new ri},Object,{});var An=function(t,e,i,n,o,s,a,r){this._d=t,this._a=e,this._b=i,this._h=n,this._f=o,this._c=s,this._e=a,this._g=r};Y.ext(An,Object,{});var pn,mn,vn,yn,wn,xn={a:function(t,e){for(var i=[],n=0;n<t;n++)i[n]=e||0;return i},b:function(t){for(var e=[],i=0;i<t;i++)e[i]=!1;return e},c:function(t,e){if(t instanceof Be)return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y<=e.y?0:1;if(t instanceof Ne)return e.width>t.width?-1:e.width<t.width?1:e.height>t.height?-1:e.height>=t.height?0:1;if(t instanceof ze)return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:e.width>t.width?-1:e.width<t.width?1:e.height>t.height?-1:e.height>=t.height?0:1;throw"Unkown Type: "+t},d:function(t){for(var e=[],i=0;i<t;i++)e[i]=null;return e},e:function(t,e){for(var i=[],n=0;n<t;n++)i[n]=xn.a(e);return i},f:function(t,e,i){for(var n=0;n<i;n++)e[n]=t[n]},s:function(t,e,i){var n=[];xn.f(t,n,e),n.sort(i),xn.f(n,t,e)},n:function(t,e){return t-e}};for(et in window.make?pn=window.make:(pn=window.make={},mn={},vn={},yn=[],wn={},pn.Default={path:"./",resPath:"",getImagePath:function(t){return this.path+this.resPath+"res/images/"+(t||"")},register:function(t,e,i){(i=i||{}).name=i.name||t,i.modelDefaultParameters=i.modelDefaultParameters||{},i.description=i.description||i.name,mn[t]&&console.log(t," already exist"),mn[t]=e;var n=i.category||"",o=vn[n]||{};o[t]=e,vn[n]=o,wn[t]=i,-1==yn.indexOf(n)&&yn.push(n),this.checkModelDefaultParameters(i.modelDefaultParameters)},checkModelDefaultParameters:function(t){if(t)for(var e in t){var i=t[e];i instanceof Object||(t[e]=i={value:i}),i.propertyName=e,i.hidden=!!i.hidden,i.propertyType=i.propertyType||pn.Default.PARAMETER_PROPERTY_TYPE_FIELD,i.type=i.type||pn.Default.PARAMETER_TYPE_STRING,i.category=i.category||pn.Default.PARAMETER_CATEGORY_DETAIL,i.editable=void 0===i.editable||!!i.editable,i.index=void 0===i.index?100:parseInt(i.index)}},remove:function(t){if(mn[t]){mn[t]=void 0,delete mn[t];var e=pn.Default.getCategory(t),i=vn[e];delete i[t];var n=0;for(o in i)o&&n++;if(0==n)for(var o=0;o<yn.length;o++){var s=yn.indexOf(e);0<=s&&yn.splice(s,1)}delete wn[t]}else console.log(t," not exist")},getCategories:function(){return yn},getCreatorsForCategory:function(t){return vn[t]},getCreator:function(t){return mn[t]},getIds:function(t){var e,i=[];for(e in mn)(!t||t&&t(this.getParameters(e)))&&i.push(e);return i},getModelDefaultParameters:function(t){return this.getParameters(t).modelDefaultParameters},getDescription:function(t){return this.getParameters(t).description},getName:function(t){return this.getParameters(t).name},getIcon:function(t){t=this.getParameters(t);return this.path+t.icon},isAsync:function(t){return this.getParameters(t).async},isCombo:function(t){return this.getParameters(t).combo},getCategory:function(t){return this.getParameters(t).category},getOrder:function(t){return this.getParameters(t).order||0},getType:function(t){return this.getParameters(t).type},getOtherParameter:function(t,e){return this.getParameters(t)[e]},registerIcon:function(t,e){t=this.getParameters(t);if(t)return t.icon=e,t.icon},registerDescription:function(t,e){t=this.getParameters(t);return t.description=e,t.description},registerName:function(t,e){t=this.getParameters(t);return t.name=e,t.name},registerOther:function(t,e,i){var n=o[e],o=this.getParameters(t);return o[e]=i,"modelDefaultParameters"===e&&(console.warn("rewrite modelDefaultParameters: id={0}, oldValue={}, newValue={}",t,n,i),this.checkModelDefaultParameters(i)),n},appendModelDefaultParameter:function(t,e,i,n,o,s,a){},getParameters:function(t){return wn[t]||{}},load:function(o,s,t){var e,i=(t=t||{}).isRelation;if(s&&(e=s,s=function(t){i&&o instanceof Array&&1<o.length&&t instanceof Array&&1<t.length&&this._relation(o,t),e(t)}),o instanceof Array){var a={};if(s){for(var n=a._total=0;n<o.length;n++){var r=o[n];this.load(r,function(t){var e,i,n;a._total++,e=a,i=t,n=o.length,i=t,e.datas=e.datas||[],e.datas.push(i),e._total===n&&s(e.datas)})}return null}for(var h=[],n=0;n<o.length;n++){var r=o[n],l=this.load(r);l&&h.push(l)}}else{t={};"string"==typeof o?t.id=o:t=o,t=this.filterJson(t),s?this._load(t,s):h=this._load(t)}return i&&h instanceof Array&&1<h.length&&this._relation(o,h),h},_relation:function(t,e){var i={};e.forEach(function(t){t.getId&&(i[t.getId()]=t)}),t.forEach(function(t){t.objectId&&t.parentId&&i[t.objectId]&&i[t.parentId]&&i[t.objectId].setParent&&i[t.objectId].setParent(i[t.parentId])})},_load:function(t,e){var i=t.id,n=this.getCreator(i);if(!n)return console.log("unknown id: ",i),null;if(!e){var o=n(t);return pn.Default._setObjectClientId(o,i),o}n(t,function(t){pn.Default._setObjectClientId(t,i),e&&e(t)})},_setObjectClientId:function(t,e){t&&t.setClient&&t.setClient("id",e)},copyArray:function(t,e,i){if(e=[],t)for(var n,o=0,s=t.length;o<s;o++)this.copyProperties(t[o],n={}),e.push(n);return e},copyProperties:function(t,e,i){if(t&&e)for(var n in t)i&&0<=i.indexOf(n)||0==n.indexOf("_")||(void 0===e[n]&&(t[n]instanceof Array?e[n]=[]:!(t[n]instanceof Function)&&t[n]instanceof Object?e[n]={}:e[n]=t[n]),!(t[n]instanceof Function)&&t[n]instanceof Object&&e[n]instanceof Object&&pn.Default.copyProperties(t[n],e[n]))},getModelDefaultParametersValues:function(t,e){var i,n=this.getModelDefaultParameters(t),o={};for(i in n){var s=n[i];e&&e(s)||(s.propertyType==pn.Default.PARAMETER_PROPERTY_TYPE_CLIENT?(o.client=o.client||{},o.client[i]=s.value):s.propertyType==pn.Default.PARAMETER_PROPERTY_TYPE_STYLE?(o.style=o.style||{},o.style[i]=s.value):o[i]=s.value)}return o},getModelDefaultParameterProperties:function(t,e){var i,n=this,o=[],s=this.getModelDefaultParameters(t);if(!s)return o;for(i in e&&!s.id&&(s.id={propertyName:"id",name:"模型ID",category:pn.Default.PARAMETER_CATEGORY_BASIC,editable:!1,propertyType:pn.Default.PARAMETER_PROPERTY_TYPE_FIELD,type:pn.Default.PARAMETER_TYPE_STRING,exportable:!1,index:-2}),e&&!s.objectId&&(s.objectId={propertyName:"objectId",name:"实例ID",category:pn.Default.PARAMETER_CATEGORY_BASIC,editable:!1,propertyType:pn.Default.PARAMETER_PROPERTY_TYPE_FIELD,type:pn.Default.PARAMETER_TYPE_STRING,exportable:!1,index:-1}),s)o.push(s[i]);return o.sort(function(t,e){return t.index-e.index}),o=o.map(function(t){return n.modelParameterToProperty(t)})},_getNameFromPropertyName:function(t){for(var e=t.split("."),i="",n=0;n<e.length;n++)0<e[n].length&&(i+=e[n].substring(0,1).toUpperCase()+e[n].substring(1,e[n].length)),n<e.length-1&&(i+=" ");return i},modelParameterToProperty:function(t){var e=new x.Property;return e.setCategoryName(t.category),t.name||(t.name=this._getNameFromPropertyName(t.propertyName)),e.setName(t.name),e.setEditable(t.editable),e.setPropertyType(t.propertyType),e.setPropertyName(t.propertyName),e.setValueType(t.type),e.setEnumInfo(t.enumInfo),e.isVisible=function(){return!t.hidden},e},filterJson:function(t){var e,i=this.getModelDefaultParameters(t.id);for(e in i){var n=i[e].propertyType||"client",o=i[e].value;n==pn.Default.PARAMETER_PROPERTY_TYPE_STYLE?t.style&&void 0!==t.style[e]||(t.style=t.style||{},t.style[e]=o):n==pn.Default.PARAMETER_PROPERTY_TYPE_CLIENT?t.client&&void 0!==t.client[e]||(t.client=t.client||{},t.client[e]=o):void 0===t[e]&&(t[e]=o)}return t},UNIT_HEIGHT:4.445,EQUIPMENT_WIDTH:45.5,RACK_OFFSET_X:7.25,RACK_OFFSET_Y:6.655,RACK_WIDTH:60,getUnitHeight:function(){return this.UNIT_HEIGHT},getEquipmentWidth:function(){return this.EQUIPMENT_WIDTH},getEquipmentHeight:function(t){return 0<parseInt(t)||console.error("method getEquipmentHeight's first argument scale value is zero"),this.UNIT_HEIGHT*t},getRackWidth:function(){return this.RACK_WIDTH},getRackHeight:function(t){return 0<parseInt(t)||console.error("method getRackHeight's first argument scale value is zero"),this.RACK_OFFSET_Y+this.UNIT_HEIGHT*parseInt(t)+this.RACK_OFFSET_Y}},pn.Default.toJson=function(t,e){if(t&&t.getClient){var i,n,o=t.getClient("id"),s=pn.Default.getModelDefaultParameters(o),a={},r=null,h=null;for(i in s)!1!==s[i].exportable&&(n=s[i].propertyType,h=s[i].value,n==pn.Default.PARAMETER_PROPERTY_TYPE_ACCESSOR?(r=t[Y.getter(i)](),pn.Default.equals(r,h)||(a[i]=r)):n==pn.Default.PARAMETER_PROPERTY_TYPE_FIELD?(r=t[i],pn.Default.equals(r,h)||(a[i]=r)):n==pn.Default.PARAMETER_PROPERTY_TYPE_STYLE?(r=t.getStyle(i),pn.Default.equals(r,h)||(a.style=a.style||{},a.style[i]=r)):n==pn.Default.PARAMETER_PROPERTY_TYPE_CLIENT&&(r=t.getClient(i),pn.Default.equals(r,h)||(a.client=a.client||{},a.client[i]=r)));return a.id=o,pn.Default.EXPORT_OBJECT_ID&&(a.objectId=t.getId()),a=e?e(a):a}return t=e?e(t):t},pn.Default.copy=function(t,e,i,n,o){!function(t,n,o,e,i){i=i||{};var s={},a={},r=pn.Default.getParameters(n),r=pn.Default.clone(r);if(pn.Default.copyProperties(r,a),e instanceof Function?s=e(a)||{}:pn.Default.copyProperties(e,s),i.copyDefaultParamCoverage&&delete a.modelDefaultParameters,i.copyParamCoverage||pn.Default.copyProperties(a,s),i.defaultValue&&s.modelDefaultParameters)for(var h in i.defaultValue)void 0!==s.modelDefaultParameters[h]&&(s.modelDefaultParameters[h]instanceof Object?s.modelDefaultParameters[h].value=i.defaultValue[h]:s.modelDefaultParameters[h]=i.defaultValue[h]);pn.Default.register(t,function(t,e){var i={id:n};return o instanceof Function?o(t):pn.Default.copyProperties(o,i),pn.Default.copyProperties(t,i),pn.Default.load(i,e)},s)}(t,e,i,n,o)},pn.Default.PARAMETER_CATEGORY_BASIC="BASIC",pn.Default.PARAMETER_CATEGORY_DETAIL="Detail",pn.Default.PARAMETER_TYPE_STRING="string",pn.Default.PARAMETER_TYPE_BOOLEAN="boolean",pn.Default.PARAMETER_TYPE_COLOR="color",pn.Default.PARAMETER_TYPE_INT="int",pn.Default.PARAMETER_TYPE_NUMBER="number",pn.Default.PARAMETER_TYPE_IMAGE="image",pn.Default.PARAMETER_TYPE_ARRAY_STRING="array.string",pn.Default.PARAMETER_TYPE_ARRAY_NUMBER="array.number",pn.Default.PARAMETER_TYPE_ARRAY_INT="array.int",pn.Default.PARAMETER_PROPERTY_TYPE_FIELD="field",pn.Default.PARAMETER_PROPERTY_TYPE_ACCESSOR="accessor",pn.Default.PARAMETER_PROPERTY_TYPE_STYLE="style",pn.Default.PARAMETER_PROPERTY_TYPE_CLIENT="client",String.prototype.replaceAll=function(t,e,i){return RegExp.prototype.isPrototypeOf(t)?this.replace(t,e):this.replace(new RegExp(t,i?"gi":"g"),e)},String.prototype.format=function(t){var i=this;if(1<arguments.length){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n]);t=e}if(t)if(t instanceof Array)t.forEach(function(t,e){t instanceof Object&&(t=JSON.stringify(t)),i=i.replaceAll("{"+e+"}",t)});else{if(!(t instanceof Object))return i.replaceAll("{}",t);for(var o in t){var s=t[o];s instanceof Object&&(s=JSON.stringify(s)),i=i.replaceAll("{"+o+"}",s)}}return i},pn.Default.getId=function(t){return t.getClient("id")},pn.Default.objectWrapper=function(i,n,e,o){Object.defineProperty(i,n,{get:function(){var t=i["___"+n];return t=e?e.call(i,t,i,n):t},set:function(t){var e=i[n];e!==(t=o?o.call(i,t,i,n):t)&&(i["___"+n]=t,this.firePropertyChange&&this.firePropertyChange(n,e,t))}})},pn.Default.equals=function(t,e){return t instanceof Object&&e instanceof Object?JSON.stringify(t)==JSON.stringify(e):t==e},pn.Default.clone=function(e){try{return JSON.parse(JSON.stringify(e))}catch(t){throw console.error(t,e),t}},pn.Default.EXPORT_OBJECT_ID=!0),pn.Utils2D={create2dShapeNode:function(t){var e=t.position||[0,0,0],i=t.data,n=t.image,o=(t.objType,t.objectId),s=t.closed,a=new pn.Default.WallShapeNode(o);"innerWall"==t.objType?a=new pn.Default.InnerWallShapeNode(o):"floor"==t.objType?a=new pn.Default.FloorShapeNode(o):"cable"==t.objType&&(a=new pn.Default.LineWidthShapeNode(o));e=pn.Default.create2dShapePath(i,e);return pn.Default.objectWrapper(a,"id",function(){return this.getClient("id")}),pn.Default.objectWrapper(a,"objectId",function(){return this.getId()}),a.setSegments(e.segments),a.setPoints(e.points),s&&a.setClient("closed",!0),n&&a.setClient("imageSrc",n),pn.Default.setObject2dCSProps(a,t),a},create2dShapePath:function(t,e){var i=new x.List,n=new x.List;if(0<t.length)if(i.add("moveto"),t[0]instanceof Array){n.add({x:parseFloat(t[0][0])+parseFloat(e[0]),y:parseFloat(t[0][1])+parseFloat(e[2])});for(var o=1;o<t.length;o++){var s=t[o];"c"==s[0]?(i.add("quadto"),n.add({x:parseFloat(s[1])+parseFloat(e[0]),y:parseFloat(s[2])+parseFloat(e[2])}),n.add({x:parseFloat(s[3])+parseFloat(e[0]),y:parseFloat(s[4])+parseFloat(e[2])})):(i.add("lineto"),n.add({x:parseFloat(s[0])+parseFloat(e[0]),y:parseFloat(s[1])+parseFloat(e[2])}))}}else{n.add({x:parseFloat(t[0])+parseFloat(e[0]),y:parseFloat(t[1])+parseFloat(e[2])});for(o=2;o<t.length;o+=2)i.add("lineto"),n.add({x:parseFloat(t[o])+parseFloat(e[0]),y:parseFloat(t[o+1])+parseFloat(e[2])})}return{segments:i,points:n}},setObject2dCSProps:function(t,e){var i=e.style,n=e.client;if(i)for(var o in i)t.setStyle(o,i[o]);if(n)for(var o in n)t.setClient(o,n[o])},createBlockObject:function(t,e){var i=t.objectId,n=new pn.Default.Block(i);"door"==e?n=new pn.Default.Door(i):"window"==e&&(n=new pn.Default.Window(i)),t.width&&n.setClient("length",t.width);i=t.client||{};return n.setClient("edgeIndex",i.edgeIndex||1),n.setClient("offset",i.offset||0),pn.Default.setObject2dCSProps(n,t),n},createNode:function(t){var e=t.position||[0,0,0],i=t.rotation||[0,0,0],n=t.width||50,o=t.depth||50,s=t.image,a=t.objectId,r=new x.Follower(a),a=t.color||"#CCCCFF";return pn.Default.objectWrapper(r,"id",function(){return this.getClient("id")}),pn.Default.objectWrapper(r,"objectId",function(){return this.getId()}),r.setSize(parseFloat(n),parseFloat(o)),r.setCenterLocation({x:parseFloat(e[0]),y:parseFloat(e[2])}),r.setAngle(i[1]),r.setClient("positionY",e[1]),"string"==typeof s?r.setImageUrl(s):"object"==typeof s?r.setImage(s):(r.setStyle("body.type","vector"),r.setStyle("vector.shape","rectangle"),r.setStyle("vector.fill.color",a)),r.setStyle("select.style","border"),r.setStyle("select.color","#F07819"),r.setStyle("select.width",.7),r.setStyle("vector.outline.width",1),r.setStyle("vector.outline.color","#BEC9BE"),20<r.getWidth()&&r.setStyle("label.maxlength",Math.min(r.getWidth(),r.getHeight())),r.setStyle("label.position","center"),pn.Default.setObject2dCSProps(r,t),r},createFollower:function(t){var e=t,t={};pn.Default.copyProperties(e,t),t.id=t.objectId||Y.id(),t.scale=t.scale||1,t.depth=t.depth||5,t.position=t.position||[0,0,0],t.rotation=t.rotation||[0,0,0];var i=new x.Follower(t);return pn.Default.objectWrapper(i,"id",function(){return i.getClient("id")}),pn.Default.objectWrapper(i,"objectId",function(){return i.getId()}),pn.Default.objectWrapper(i,"depth"),pn.Default.objectWrapper(i,"position",null,function(t){return this.setLocation({x:t[0],y:t[1]}),t}),pn.Default.objectWrapper(i,"rotation",null,function(t){return this.setAngle(t[2]),t}),pn.Default.objectWrapper(i,"scale",null,function(t){var e=this.getSize();e.width=e.width*t,e.height=e.height*t,this.setSize(e);e=this.getLocation();return e.x=e.x*t,e.y=e.y*t,i.setLocation(e),t}),i.depth=t.depth,i.position=t.position,i.rotation=t.rotation,i.scale=t.scale,i.addPropertyChangeListener(function(t){var e=t.property,i=t.source;"location"==e?(i.position[0]=t.newValue.x,i.position[1]=t.newValue.y):"angle"==e&&(i.rotation[2]=t.newValue)},i),t.x&&i.setX(t.x),t.y&&i.setY(t.y),i.z=t.z,t.location&&(t.location instanceof Array?i.setLocation({x:t.location[0],y:t.location[1]}):i.setLocation(t.location)),t.centerLocation&&(t.centerLocation instanceof Array?i.setCenterLocation({x:t.centerLocation[0],y:t.centerLocation[1]}):i.setCenterLocation(t.centerLocation)),t.size&&i.setSize(t.size),t.angle&&i.setAngle(t.angle),i.setStyle("select.style","border"),i.setStyle("select.color","#F07819"),i.setStyle("select.width",.7),i.setStyle("vector.outline.color","#BEC9BE"),pn.Default.setObject2dCSProps(i,t),i},align:function(t,e){e&&(!t||t.size()<2||(e=this["_align_"+e])&&e.call(this,t))},_align_up:function(t){for(var e=t.get(0).getLocation().y,i=1;i<t.size();i++)e=Math.min(e,t.get(i).getLocation().y);t.forEach(function(t){t.setY(e)})},_align_down:function(t){for(var e=t.get(0).getLocation().y+t.get(0).getSize().height,i=1;i<t.size();i++)e=Math.max(e,t.get(i).getLocation().y+t.get(i).getSize().height);t.forEach(function(t){t.setY(e-t.getSize().height)})},_align_left:function(t){for(var e=t.get(0).getLocation().x,i=1;i<t.size();i++)e=Math.min(e,t.get(i).getLocation().x);t.forEach(function(t){t.setX(e)})},_align_right:function(t){for(var e=t.get(0).getLocation().x+t.get(0).getSize().width,i=1;i<t.size();i++)e=Math.max(e,t.get(i).getLocation().x+t.get(i).getSize().width);t.forEach(function(t){t.setX(e-t.getSize().width)})},_align_center:function(t){for(var e=0,i=0;i<t.size();i++)e+=t.get(i).getCenterLocation().y;var n=e/t.size();t.forEach(function(t){t.setY(n-t.getSize().height/2)})},_align_middle:function(t){for(var e=0,i=0;i<t.size();i++)e+=t.get(i).getCenterLocation().x;var n=e/t.size();t.forEach(function(t){t.setX(n-t.getSize().width/2)})},flow:function(t,e,i){e&&(!t||t.size()<2||(e=this["_flow_"+e])&&e.call(this,t,i))},_flow_hor:function(t,e){this.sort(t,function(t,e){return t.getLocation().y-e.getLocation().y}),this.sort(t,function(t,e){return t.getLocation().x-e.getLocation().x});for(var i=t.get(0),n=1;n<t.size();n++){var o=t.get(n),s=i.getLocation().x;o.setX(s+e),i=o}},_flow_ver:function(t,e){this.sort(t,function(t,e){return t.getLocation().x-e.getLocation().x}),this.sort(t,function(t,e){return t.getLocation().y-e.getLocation().y});for(var i=t.get(0),n=1;n<t.size();n++){var o=t.get(n),s=i.getLocation().y;o.setY(s+e),i=o}},sort:function(t,e){for(var i,n,o=t.size(),s=0;s<o;s++)for(var a=t.get(s),r=s+1;r<o;r++)i=t.get(r),0<(e?e(a,i):0)&&(n=i,i=a,t.set(s,a=n),t.set(r,i))},wrapper:function(e,t){pn.Default.objectWrapper(e,"id",function(){return this.getClient("id")}),pn.Default.objectWrapper(e,"objectId",function(){return this.getId()}),pn.Default.objectWrapper(e,"width"),pn.Default.objectWrapper(e,"height"),pn.Default.objectWrapper(e,"depth"),pn.Default.objectWrapper(e,"px"),pn.Default.objectWrapper(e,"py"),pn.Default.objectWrapper(e,"pz"),pn.Default.objectWrapper(e,"rx"),pn.Default.objectWrapper(e,"ry"),pn.Default.objectWrapper(e,"rz"),pn.Default.objectWrapper(e,"position"),pn.Default.objectWrapper(e,"rotation"),t&&t.forEach(function(t){pn.Default.objectWrapper(e,t)})}},pn.Default.register("twaver.cube.top",function(t,e){t=pn.Utils2D.createNode(t);return e&&e(t),t}),pn.Utils2D)pn.Default[et]=pn.Utils2D[et];x.gis={},x.gis.util={},x.gis.core={},x.gis.event={},x.gis.gadgets={},x.gis.gadget={},x.gis.geometry={},x.gis.core.map={},x.gis.core.executor={},x.gis.ogc={},x.gis.ogc.util={},x.gis.ogc.actions={},x.gis.ogc.geoms={},x.gis.ogc.conditions={},x.gis.interactions={};m=Y.html,g=Y.ua;x.gis.geometry.Bounds=function(o,s,a,r){this.setBounds=function(t,e,i,n){this.minx=null==t?0:t,this.maxx=null==e?0:e,this.miny=null==i?0:i,this.maxy=null==n?0:n,this.width=this.maxx-this.minx,this.height=this.maxy-this.miny},this.toString=function(){return"bounds is ["+o+","+a+","+s+","+r+"]"},this.setBounds(o,s,a,r),this.createIntersect=function(t){var e=Math.max(o,t.minx),i=Math.max(a,t.miny),n=Math.min(s,t.maxx),t=Math.min(r,t.maxy);return new x.gis.geometry.Bounds(e,n,i,t)}},x.gis.geometry.Dimensize=function(t,e){this.width=t,this.height=e},x.gis.geometry.GeoCoordinate=function(t,e){this.latitude=null==t?0:t,this.longitude=null==e?0:e},x.gis.geometry.GridBbox=function(t,e,i,n){this.minLat=null==t?-90:t,this.minLng=null==e?-180:e,this.maxLat=null==i?90:i,this.maxLng=null==n?180:n,this.containsCoordinate=function(t){var e=t.longitude,t=t.latitude;return e>=this.minLng&&e<=this.maxLng&&t>=this.minLat&&t<=this.maxLat},this.intersects=function(t){if(null==t)return!0;var e=this.getWidth(),i=this.getHeight(),n=t.width,o=t.height;if(n<=0||o<=0||e<=0||i<=0)return!1;var s=this.minLng,a=this.minLat,r=t.minLng,t=t.minLat;return o+=t,e+=s,i+=a,((n+=r)<r||s<n)&&(o<t||a<o)&&(e<s||r<e)&&(i<a||t<i)},this.containsGridBbox=function(t){return!!t&&(this.maxLng>=t.maxLng&&this.minLng<=t.minLng&&this.minLat<=t.minLat&&this.maxLat>=t.maxLat)},this.contains=function(t){return t instanceof x.gis.geometry.GeoCoordinate?this.containsCoordinate(t):t instanceof x.gis.geometry.GridBbox&&this.containsGridBbox(t)},this.getWidth=function(){return this.maxLng-this.minLng},this.getHeight=function(){return this.maxLat-this.minLat},this.toString=function(){return"GridBbox minlat:"+this.minLat+", minLng:"+this.minLng+",maxLat:"+this.maxLat+",minLat:"+this.minLat},this.union=function(t){var e=this.width,i=this.height;if((e|i)<0)return this;var n=t.width,o=t.height;if((n|o)<0)return this;var s=minLng,a=minLat;e+=s,i+=a;var r=t.minLng,t=t.minLat;return r<s&&(s=r),t<a&&(a=t),180<(e=e<(n+=r)?n:e)&&(e=180),180<(i=i<(o+=t)?o:i)&&(i=180),new GridBbox(a,s,i,e)}},GISConsts={MAPTYPE_ORIGINAL:0,MAPTYPE_EMBEDED:1,LAYER_BASE_ZINDEX:100,GADGET_BASE_ZINDEX:1e3,EXECUTOR_TYPE_GEOSERVER_WMS:0,EXECUTOR_TYPE_GEOSERVER_WMS_CACHE:1,EXECUTOR_TYPE_MAPINFO_WMS:2,EXECUTOR_TYPE_ARCGIS_WMS:3,EXECUTOR_TYPE_TIANDITU:4,EXECUTOR_TYPE_OSM:7,EXECUTOR_TYPE_GOOGLEMAP:8,EXECUTOR_TYPE_GOOGLESTSTELLITE:9,EXECUTOR_TYPE_GOOGLETERRAIN:10,EXECUTOR_TYPE_MAPABC:11,EXECUTOR_TYPE_YAHOO:12,EXECUTOR_TYPE_GEOSERVER_WMS_NOTILE:13,EXECUTOR_TYPE_BINGMAP:14,EXECUTOR_TYPE_TIANDITUSATELLITE:15,EXECUTOR_TYPE_BAIDUWEBMAP:16,EXECUTOR_TYPE_BAIDUSATELLITE:17,EXECUTOR_TYPE_EDUSHI:20,EXECUTOR_TYPE_GOOGLELABEL:21,MAGNIFIER_EFFECT_PLAIN:"MAGNIFIER.EFFECT.PLAIN",MAGNIFIER_EFFECT_CURVATURE:"MAGNIFIER.EFFECT.CURVATURE",VIEWPORT_TYPE_FILLVIEW:0,VIEWPORT_TYPE_CENTER:1,VIEWPORT_TYPE_UPPERLEFT:2,PROJECTION_4326:0,PROJECTION_MERCATOR:1,PROJECTION_EDUSHI:2,ORIGINAL_GEO:new x.gis.geometry.GeoCoordinate(0,0),WORLD_GRIDBBOX:new x.gis.geometry.GridBbox,LOCALE_EN:"en",LOCALE_CH:"ch",LONGITUDE:"longitude",LATITUDE:"latitude",SCALE:"GisScale",ZOOMLEVEL:"ZoomLevel",GEOMETRY_TYPE_POINT:"Point",GEOMETRY_TYPE_MULTILINE:"MultiLineString",GEOMETRY_TYPE_MULTIPOLYGON:"MultiPolygon",ZEROBounds:new x.gis.geometry.Bounds,MAP_MODE_DONOTHING:-1,MAP_MODE_PAN:0,MAP_MODE_SELECTFEATURES:1,MAP_MODE_EDIT:2,MAP_MODE_QUERY:3,GOOGLE_COLOR:"#99B3CC",WORLD_MERCATOR_BBOX:new x.gis.geometry.GridBbox(-85.0511,-180,85.0511,180),LOCALE:"locale",MARK_ICON_SRC:"data:image/png;base64,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%3D",REQUIRE_GEO_TYPE_SHOT:0,REQUIRE_GEO_TYPE_REPEAT:1},x.gis.util.MapContent=function(t){},x.Util.ext(x.gis.util.MapContent,Object,{content:function(){return this._content}}),x.gis.util.MapUtils={localeCache:{},loadAsync:function(t){var e=E.getElementsByTagName("head")[0],i=E.createElement("script");i.src=t,e.appendChild(i)},insertDOMElementAt:function(t,e,i){if(i<0||i>t.childNodes.length)throw new Error("Invalid index in inserting DOM Element at "+i);i==t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[i])},getScrollOffsets:function(){var t=window;if(null!=t.pageXOffset)return{x:t.pageXOffset,y:t.pageYOffset};t=t.document;return"CSS1Compat"===E.compatMode?{x:t.documentElement.scrollLeft,y:t.documentElement.scrollTop}:{x:t.body.scrollLeft,y:t.body.scrollTop}},getViewPortSize:function(t){if(null!=(t=t||window).innerWidth)return{w:t.innerWidth,h:t.innerHeight};t=t.document;return"CSS1Compat"==E.compatMode?{w:t.documentElement.clientWidth,h:t.documentElement.clientHeight}:{w:t.body.clientWidth,h:t.body.clientWidth}},strip:function(t){var e=E.createElement("div");return e.innerHTML=t,e.textContent||e.innerText},getElementAtPoint:function(t){return E.elementFromPoint(t.x,t.y)},getElementPos:function(t){for(var e=0,i=0,n=t;null!=n;n=n.offsetParent)e+=n.offsetLeft,i+=n.offsetTop;for(n=t.parentNode;null!=n&&1==n.nodeType;n=n.parentNode)e-=n.scrollLeft,i-=n.scrollTop;return{x:e,y:i}},installMap:function(t,e){t&&e&&(t=t.getView?t.getView():t).appendChild(e.content)},equals:function(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var i in t)if(t.hasOwnProperty(i)&&t[i]!=e[i])return!1;return!0},setZIndex:function(t,e){t.style["z-index"]=e},setDOMSize:function(t,e){t.style.width=e.width+"px",t.style.height=e.height+"px"},getFloat:function(t){return parseFloat(t)||0},getDOMStyle:function(t){return window.getComputedStyle(t,null)},getDOMOutborder:function(t){var e=window.getComputedStyle(t,null);if(!e)return{left:0,top:0,right:0,bottom:0};var i=MapUtils.getFloat(e["border-left-width"])+MapUtils.getFloat(e["padding-left"]),t=MapUtils.getFloat(e["border-right-width"])+MapUtils.getFloat(e["padding-right"]);return{left:i,top:MapUtils.getFloat(e["border-top-width"])+MapUtils.getFloat(e["padding-top"]),right:t,bottom:MapUtils.getFloat(e["border-bottom-width"])+MapUtils.getFloat(e["padding-bottom"])}},setDOMPosition:function(t,e,i,n,o){t.style.left=e+"px",n&&(t.style.right=n+"px"),t.style.top=i+"px",o&&(t.style.bottom=o+"px")},trancateInteger:function(t){return Math.ceil(t)-1},isValidateGeo:function(t){return GISUtils.DEFAULT_GEOCOORDINATE_INVALIDATE_FUNCTION(t)},translateDOM:function(t,e,i){var n=MapUtils.getDOMPosition(t);MapUtils.setDOMPosition(t,n.x+e,n.y+i)},getDOMPosition:function(t){var e=t.style.left,t=t.style.top;return{x:parseInt(e),y:parseInt(t)}},setBackgroundColor:function(t,e){t.style["background-color"]=e},setDOMBounds:function(t,e){t&&((t=t.style).position="absolute",t.left=e.x+"px",t.top=e.y+"px",t.width=e.width+"px",t.height=e.height+"px")},getDOMSize:function(t){return{width:t.offsetWidth,height:t.offsetHeight}},parseBounds:function(t){if(!t)return{x:0,y:0,width:0,height:0};t=t.style;return{x:parseInt(t.left),y:parseInt(t.top),width:t.clientWidth?parseInt(t.clientWidth):parseInt(t.width),height:t.clientHeight?parseInt(t.clientHeight):parseInt(t.height)}},getDistanceBetweenLineAndPoint:function(t,e){var i=t.from.x<=t.to.x?t.from:t.to,n=t.from.x<=t.to.x?t.to:t.from,t=n.x-i.x;if(0==t)return Math.abs(e.x-i.x);t=(n.y-i.y)/t,n.y,n.x,n=i.y-t*i.x;return Math.abs(t*e.x-e.y+n)/Math.sqrt(t*t+1)},isIntesects:function(t,e){var i=t.center,n=e.from,o=e.to;return!(i.x<Math.min(n.x,o.x)||i.x>Math.max(n.x,o.x))&&MapUtils.getDistanceBetweenLineAndPoint(e,i)<=t.radius},rotateVectorAboutPoint:function(t,e,i){var n=e.x-i.x,o=e.y-i.y,e=Math.sin(t),t=Math.cos(t);return{x:t*n-e*o+i.x,y:e*n+t*o+i.y}},rotateVector:function(t,e){return MapUtils.rotateVectorAboutPoint(t,e,{x:0,y:0})},projectionOn:function(t,e){e=MapUtils.nomalise(e);return MapUtils.dotProduct(t,e)},dotProduct:function(t,e){return t.x*e.x+t.y*e.y},nomalise:function(t){var e=MapUtils.magnitude(t);return{x:t.x/e,y:t.y/e}},magnitude:function(t){return Math.sqrt(MapUtils.magnitudeSquare(t))},magnitudeSquare:function(t){return t.x*t.x+t.y*t.y},isIntersectsWithRect:function(t,e){var i=t.from,n=t.to,o={x:e.x+e.width/2,y:e.y+e.height/2},o=MapUtils.getDistanceBetweenLineAndPoint(t,o);return i.x===n.x?o<=e.width/2:i.y===n.y?o<=e.height/2:o*o<(e.width*e.width+e.height*e.height)/4},getIntersectPointsForLineAndRect:function(t,e){var i=[],n=t.from.x<=t.to.x?t.from:t.to,t=t.from.x<=t.to.x?t.to:t.from;return t.x<=e.x||n.x>=e.x+e.width||Math.max(n.y,t.y)<=e.y||Math.min(n.y,t.y)>=e.y+e.height||(n.x<=e.x?n.y<=e.y||(n.y,e.y,e.height):(n.x,e.x,e.width)),i},getSlope:function(t,e){if(t.from.x===t.to.x)return t.to.y<t.from.y?Math.PI/2:t.to.y>t.from.y?-Math.PI/2:void 0;if(e)return Math.atan((t.to.y-t.from.y)/(t.to.x-t.from.x));e=t.from.x<=t.to.x?t.from:t.to,t=t.from.x<=t.to.x?t.to:t.from;return Math.atan((t.y-e.y)/(t.x-e.x))},TimeToFade:1e3,fadeElement:function(t){var e=E.getElementById(t);null!=e&&(null==e.FadeState&&(null==e.style.opacity||""==e.style.opacity||"1"==e.style.opacity?e.FadeState=2:e.FadeState=-2),1==e.FadeState||-1==e.FadeState?(e.FadeState=1==e.FadeState?-1:1,e.FadeTimeLeft=MapUtils.TimeToFade-e.FadeTimeLeft):(e.FadeState=2==e.FadeState?-1:1,e.FadeTimeLeft=MapUtils.TimeToFade,setTimeout("animateFade("+(new Date).getTime()+",'"+t+"')",33)))},animateFade:function(t,e){var i=(new Date).getTime(),n=i-t,t=E.getElementById(e);if(t.FadeTimeLeft<=n)return t.style.opacity=1==t.FadeState?"1":"0",t.style.filter="alpha(opacity = "+(1==t.FadeState?"100":"0")+")",void(t.FadeState=1==t.FadeState?2:-2);t.FadeTimeLeft-=n;n=t.FadeTimeLeft/TimeToFade;1==t.FadeState&&(n=1-n),t.style.opacity=n,t.style.filter="alpha(opacity = "+100*n+")",setTimeout("animateFade("+i+",'"+e+"')",33)},getDOMLocation:function(t){var e=0,i=0,n=t;if(t.offsetParent)do{e+=t.offsetLeft,i+=t.offsetTop;var o=window.getComputedStyle(t,null)}while(e+=MapUtils.getFloat(o.getPropertyValue("border-left-width")),i+=MapUtils.getFloat(o.getPropertyValue("border-top-width")),t=t.offsetParent);return n.x&&(e+=n.x),n.y&&(i+=n.y),{x:e,y:i}},createButton:function(t,e,i,n){var o=E.createElement("button"),s=E.createElement("image");return o.appendChild(s),s.src=n,x.gis.util.EventUtils.addEventListener(o,"click",e,i,!1),o},addLocaleResource:function(t,e){var i;t&&(MapUtils._localeCache||(MapUtils._localeCache={}),(i=E.createElement("script")).setAttribute("type","text/javascript"),i.setAttribute("src",t),E.getElementsByTagName("head")[0].appendChild(i),MapUtils._localeCallback=e)},getString:function(t){return MapUtils._localeCache||(MapUtils._localeCache={}),MapUtils._localeCache[t]||t},importLocaleResource:function(t){if(t){for(var e=0;e<t.length;e++)for(var i in t[e])MapUtils._localeCache[i]=t[e][i];var n=MapUtils._localeCallback;n&&n.method.call(n.scope)}}},MapUtils=x.gis.util.MapUtils,GISSettings={ENABLE_WHELL:"enable.wheel",MAGNIFIER_WIDTH:"MAGNIFIER.WIDHT",MAGNIFIER_HEIGHT:"MAGNIFIER.HEIGHT",MAGNIFIER_EFFECT:"MAGNIFIER.EFFECT",MAGNIFIER_ZOOMOFFSET:"MAGNIFIER.ZOOMOFFSET",SELECTED_POINT_COLOR:"SELECTED.POINT.COLOR",SELECTED_POLYGON_FILL_COLOR:"SELECTED.POLYGON.FILL.COLOR",SELECTED_POLYGON_BORDER_COLOR:"SELECTE.POLYGON.BORDER.COLOR",SELECTED_LINE_COLOR:"SELECTED.LINE.COLOR",POLYGON_BORDER_WIDTH:"POLYGON.BORDER.WIDTH",CACHE_HORIZONTAL_EXTENDS:"horizontal.extends",CACHE_VERTICAL_EXTENDS:"vertical.extends",ONLY_LOACTE_VISIBLE_ELEMENT:"locate.only.visible",DEFAULT_DATABOX_OUTPUTSETTING:"default.outputsetting",DECIMAL_PRECISION:"decimal.precision",GRID_VISIBLE_PRECISION:"grid.visible.precision",TILE_CACHE_UPLIMIT:"tile_cache_uplimit",WFSQUERY_SERVER_URL:"wfs.url",WFSQUERY_LAYER_NAME:"wfs.layername",BINGMAP_LOCALE:"bingmap.locale",OUTPUTIMAGE_PATH_DEFAULT:"outputimage_path_default",TCACHE_UPLIMIT:"tchace.uplimit",TILEMAP_GRID_COLOR:"tile.grid.color",TILEMAP_GRID_VISIBLE:"tile.grid.visible",TILEMAP_GRID_TILETIPS_VISIBLE:"tile.grid.tiletips.visible",TILEMAP_GRID_TILETIPS_COLOR:"tile.grid.tiletips.color",TILEMAP_VAMPIRE_DELAY:"vampire.delay",TILEMAP_LOCALECACHE_FLAG:"localecache",GOOGLEMAP_VERSION:"googlemap.version",GOOGLEMAP_STATELITE_VERSION:"googlemap.statelite.version",GOOGLEMAP_TERRAIN_VERSION:"googlemap.terrain.version",GOOGLEMAP_LOCALE:"googlemap.locale",OPTIMIZE_GEOMETRY_DISTANCE:"optimize.geometry.distance",IMAGE_LOAD_ERROR_HANDLER:"image.load.error.handler",WHEELZOOM_DELAY:"wheel.zoom.delay",FAKE_3D_ZOOM_STARTLEVEL:"fake.3d.zoom.startlevel",FAKE_3D_MAP_URLS:"fake.3d.map.urls",FAKE_3D_MAP_INITGRID:"fake.3d.map.initgrid",MAPDRIVER_GEOSERVER:"GeoServer",MAPDRIVER_GEOSERVER_CACHE:"GeoServer.cache",MAPDRIVER_MAPABC:"MapAbc",MAPDRIVER_TIANDITU:"Tianditu",MAPDRIVER_GEOSERVER_POSTFIX:"/geoserver/wms?",MAPDRIVER_GEOSERVER_CACHE_POSTFIX:"/geoserver/gwc/service/wms?",MAPDRIVER_ARCGIS:"ArcGis",MAPDRIVER_MAPINFO:"MapInfo",MAPDRIVER_GOOGLE_MAP:"GoogleMap",MAPDRIVER_BING_MAP:"BingMap",MAPDRIVER_GOOGLE_LABEL:"GoogleMap.Label",MAPDRIVER_GOOGLE_MAP_TERRAIN:"GoogleMap.Terrain",MAPDRIVER_GOOGLE_STATELLITE:"Google.Statellite",MAPDRIVER_OSM:"OpenStreetMap",MAPDRIVER_YAHOOMAP:"Yahoo!Map",NO_IMAGE_PATH:"no-image-path",ONLY_LOCATE_VISIBLE_ELEMENT:"only.locate.visible.element",SHAPENODE_GEOM_TYPE:"shapenode.geom.type",SHAPE_POINTS:"shape.points",GEOCOORDINATE:"geocoordinates",MAPIMAGE_FORMAT:"map.image.format",COMMONSEQUENCE:"commonsequence"},GISUtils={SERVER_URL_GEOSERVER:"http://test:8080/geoserver/wms?",SERVER_URL_GEOSERVER_TILE:"http://test:8080/geoserver/gwc/service/wms?",SERVER_URL_MAPINFO:"http://servasoft:8080/wmsserver111/servlet/wms?",SERVER_URL_ARCGIS:"http://sampleserver1.arcgisonline.com/ArcGIS/services/Specialty/ESRI_StateCityHighway_USA/MapServer/WMSServer?",SERVER_URL_GOOGLEMAP_URL:"http://mt.google.com/vt/lyrs=m@174000000",SERVER_URL_GOOGLEMAP_TERRAIN:"http://mt0.google.com/vt/lyrs=t@128,r@174000000",SERVER_URL_GOOGLE_STATELLITE:"http://khm.google.com/kh/v=105",SERVER_URL_GOOGLE_LABEL:"http://mt.google.com/vt/lyrs=h@169000000",SERVER_URL_OSM:"http://a.tile.openstreetmap.org/",SERVER_URL_MAPAC:"http://emap3.mapabc.com/mapabc/maptile?",SERVER_URL_TIANDITU:"http://t0.tianditu.com/DataServer?T=vec_c",SERVER_URL_YAHOO:"http://maps.yimg.com/hx/tl?v=4.2",SERVER_URL_BINGMAP_US:"http://ecn.t4.tiles.virtualearth.net",SERVER_URL_BINGMAP_CH:"http://r3.tiles.ditu.live.com",MAPABC_VERSION:"w2.61",GOOGLEMAP_VERSION:"w2.106",GOOGLEMAP_STATELITE_VERSION:"65",GOOGLEMAP_TERRAIN_VERSION:"w2p.106",manager:{},getDefaultOptimizeDistance:function(){for(var t=[],e=0;e<20;e++)t[e]=e<=3?5:e<=10?4:e<=14?3:2;return t},createInstance:function(t){return new t},registerExecutorClass:function(t,e){executorMap[t]=e},createExecutor:function(t){t=executorMap[t];return null!=t?createInstance(t):createInstance(ho)},registerGlobalSetting:function(t,e){GISUtils.manager[t]=e},getGlobalSetting:function(t){return GISUtils.manager[t]},getBoolean:function(t){return!0===GISUtils.manager[t]},getColor:function(t,e,i){return t<<16|e<<8|i},getNumberValue:function(t){t=GISUtils.getGlobalSetting(t);return"number"==typeof t?t:0},getRegisterImage:function(t){return GISUtils.getGlobalSetting("IMAGE-"+t)},registerImage:function(t,e){var i=new a;i.src=e,GISUtils.registerGlobalSetting("IMAGE-"+t,i)},createLayer:function(t,e,i,n,o,s){return new Co(t,e,i,n=n||null,o=o||256,s=s||256)},calculateBBox:function(t){var e,i=Number.MIN_VALUE,n=Number.MIN_VALUE,o=Number.MAX_VALUE,s=Number.MAX_VALUE;for(e in t)i=Math.max(i,e.longitude),n=Math.max(n,e.latitude),o=Math.min(o,e.longitude),s=Math.min(s,e.latitude);return new GridBbox(s,o,n,i)},getAppropriateZoomLevel:function(t,e){var i=new x.gis.geometry.GeoCoordinate(t.maxLat,t.minLng),n=new x.gis.geometry.GeoCoordinate(t.minLat,t.maxLng);if(!(o=e._levels))for(var o=[],s=e.zoomLowLimit;s<=e.zoomUpLimit;s++)o.push(s);for(var a=0;a<=o.length;a++){var r=o[a],h=Bn(i,r,e.projectionType),l=Bn(n,r,e.projectionType),r=Math.abs(l.x-h.x),h=Math.abs(l.y-h.y);if(r>e.viewport.width||h>e.viewport.height)return o[a-1]}return o[o.length-1]},getGeoPointFromPixelXY:function(t,e,i,n,o,s){return On(t,e,i,n,o=o||256,s=s||256)},DEFAULT_GEOCOORDINATE_INVALIDATE_FUNCTION:function(t){return Math.abs(t.latitude)<=90&&Math.abs(t.longitude)<=180},distance:function(t,e){var i=e.x-t.x,t=e.y-t.y;return Math.sqrt(i*i+t*t)},isIllegal:function(t,e,i){return GISUtils.distance(e,t)>i},getLegalDistanceToLeranceOfTileMap:function(t){t=t.getZoomLevel();return GISUtils.getGlobalSetting(GISSettings.OPTIMIZE_GEOMETRY_DISTANCE)[t]}},GISUtils.registerGlobalSetting(GISSettings.FAKE_3D_ZOOM_STARTLEVEL,2),GISUtils.registerGlobalSetting(GISSettings.MAPDRIVER_GEOSERVER,GISUtils.SERVER_URL_GEOSERVER),GISUtils.registerGlobalSetting(GISSettings.MAPDRIVER_GOOGLE_MAP,GISUtils.SERVER_URL_GOOGLEMAP_URL),GISUtils.registerGlobalSetting(GISSettings.GOOGLEMAP_VERSION,GISUtils.GOOGLEMAP_VERSION),GISUtils.registerGlobalSetting(GISSettings.MAPDRIVER_GOOGLE_LABEL,GISUtils.SERVER_URL_GOOGLE_LABEL),GISUtils.registerGlobalSetting(GISSettings.GOOGLEMAP_TERRAIN_VERSION,GISUtils.GOOGLEMAP_TERRAIN_VERSION),GISUtils.registerGlobalSetting(GISSettings.GOOGLEMAP_STATELITE_VERSION,GISUtils.GOOGLEMAP_STATELITE_VERSION),GISUtils.registerGlobalSetting(GISSettings.GOOGLEMAP_LOCALE,GISConsts.LOCALE_EN),GISUtils.registerGlobalSetting(GISSettings.MAPDRIVER_GOOGLE_MAP_TERRAIN,GISUtils.SERVER_URL_GOOGLEMAP_TERRAIN),GISUtils.registerGlobalSetting(GISSettings.MAPDRIVER_GOOGLE_STATELLITE,GISUtils.SERVER_URL_GOOGLE_STATELLITE),GISUtils.registerGlobalSetting(GISSettings.MAPDRIVER_ARCGIS,GISUtils.SERVER_URL_ARCGIS),GISUtils.registerGlobalSetting(GISSettings.MAPDRIVER_MAPINFO,GISUtils.SERVER_URL_MAPINFO),GISUtils.registerGlobalSetting(GISSettings.MAPDRIVER_OSM,GISUtils.SERVER_URL_OSM),GISUtils.registerGlobalSetting(GISSettings.MAPDRIVER_YAHOOMAP,GISUtils.SERVER_URL_YAHOO),GISUtils.registerGlobalSetting(GISSettings.MAPDRIVER_GEOSERVER_CACHE,GISUtils.SERVER_URL_GEOSERVER_TILE),GISUtils.registerGlobalSetting(GISSettings.MAPDRIVER_MAPABC,GISUtils.SERVER_URL_MAPAC),GISUtils.registerGlobalSetting(GISSettings.MAPDRIVER_TIANDITU,GISUtils.SERVER_URL_TIANDITU),GISUtils.registerGlobalSetting(GISSettings.BINGMAP_LOCALE,GISConsts.LOCALE_EN),GISUtils.registerGlobalSetting(GISSettings.GRID_VISIBLE_PRECISION,.002),GISUtils.registerGlobalSetting(GISSettings.TILEMAP_GRID_VISIBLE,!1),GISUtils.registerGlobalSetting(GISSettings.TILEMAP_GRID_TILETIPS_VISIBLE,!1),GISUtils.registerGlobalSetting(GISSettings.DECIMAL_PRECISION,2),GISUtils.registerGlobalSetting(GISSettings.MAGNIFIER_HEIGHT,150),GISUtils.registerGlobalSetting(GISSettings.MAGNIFIER_WIDTH,150),GISUtils.registerGlobalSetting(GISSettings.MAGNIFIER_ZOOMOFFSET,2),GISUtils.registerGlobalSetting(GISSettings.MAGNIFIER_EFFECT,GISConsts.MAGNIFIER_EFFECT_PLAIN),GISUtils.registerGlobalSetting(GISSettings.SELECTED_LINE_COLOR,65280),GISUtils.registerGlobalSetting(GISSettings.SELECTED_POINT_COLOR,16711680),GISUtils.registerGlobalSetting(GISSettings.SELECTED_POLYGON_BORDER_COLOR,65280),GISUtils.registerGlobalSetting(GISSettings.SELECTED_POLYGON_FILL_COLOR,39168),GISUtils.registerGlobalSetting(GISSettings.POLYGON_BORDER_WIDTH,3),GISUtils.registerGlobalSetting(GISSettings.CACHE_HORIZONTAL_EXTENDS,0),GISUtils.registerGlobalSetting(GISSettings.CACHE_VERTICAL_EXTENDS,0),GISUtils.registerGlobalSetting(GISSettings.ONLY_LOACTE_VISIBLE_ELEMENT,!1),GISUtils.registerGlobalSetting(GISSettings.OPTIMIZE_GEOMETRY_DISTANCE,GISUtils.getDefaultOptimizeDistance()),GISUtils.registerGlobalSetting(GISSettings.ENABLE_WHELL,!0),GISUtils.registerGlobalSetting(GISSettings.IMAGE_LOAD_ERROR_HANDLER,GISUtils.DEFAULT_ERROR_HANDLE_FUNCTION),GISUtils.registerGlobalSetting(GISSettings.WHEELZOOM_DELAY,1e3),GISUtils.registerGlobalSetting(GISSettings.COMMONSEQUENCE,!0),GISUtils.registerGlobalSetting(GISSettings.FAKE_3D_MAP_URLS,["http://cpic2.edushi.com/cn/shanghai/zh-chs/mappic/png3/","http://cpic2.edushi.com/cn/shanghai/zh-chs/mappic/png2/","http://cpic2.edushi.com/cn/shanghai/zh-chs/mappic/png1/","http://cpic2.edushi.com/cn/shanghai/zh-chs/mappic/png0/"]),GISUtils.registerGlobalSetting(GISSettings.FAKE_3D_MAP_INITGRID,[12,19,15,22]),GISUtils.registerGlobalSetting(GISSettings.MAPIMAGE_FORMAT,"png"),GISUtils.registerGlobalSetting(GISSettings.NO_IMAGE_PATH,"data:image/png;base64,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"),GISUtils.registerImage("placemark","data:image/png;base64,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%3D"),GISUtils.registerImage("print-32","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAACMSURBVHja7JVRCsAwCEN19Lw5TK67gfvq3yg6aruB+S7yYjWqmclOHbJZBVAABdC8DwG4A4OkTgfwFo6A1gx8AkBHxyj6n2/mJqUDJNW7Cf/JgYgAnCJi2wAidSuImtdxdzZy2N+n3YJRcQBtyRY8dSDiOK0DJK90gBnRHLoFdY4LoABW6AYAAP//AwD+xTdtrTmyEgAAAABJRU5ErkJggg=="),GISUtils.registerImage("print-48","data:image/png;base64,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"),GISUtils.registerImage("export-32","data:image/png;base64,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"),GISUtils.registerImage("export-48","data:image/png;base64,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"),GISUtils.registerImage("location-32","data:image/png;base64,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"),GISUtils.registerImage("location-48","data:image/png;base64,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"),GISUtils.registerImage("zoomin-32","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAABYSURBVHja7JUxCgAwCMS09L0+xg/buR0cpKBDsguB81QjQjpZ0gwCCLQL7OqgmV39dXclAgQQqKDZN3yrViWrKBHM3gFOMQIIjK4hESCAwC8OAAAA//8DANv6GDMlKO6CAAAAAElFTkSuQmCC"),GISUtils.registerImage("zoomin-48","data:image/png;base64,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"),GISUtils.registerImage("zoomout-32","data:image/png;base64,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"),GISUtils.registerImage("zoomout-48","data:image/png;base64,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"),x.gis.shape={};x.gis.shape.Circle=function(t,e){this.radius=t,this.x=e.x,this.y=e.y,this.fillStyle="#FF0000",this.strokeStyle="#000000"},x.Util.ext("twaver.gis.shape.Circle",Object,{paint:function(t){var e;e=this,(t=t).beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),e.fillStyle&&(t.fillStyle=e.fillStyle,t.fill()),e.strokeStyle&&(t.strokeStyle=e.strokeStyle),t.stroke(),t.closePath()}}),x.gis.shape.Rectangle=function(t,e){this.width=t.width,this.height=t.height,this.x=e.x,this.y=e.y,this.strokeStyle="#000000",this.isFilled=function(){return null!=this.fillStyle||null!=this.fillStyle}},x.Util.ext("twaver.gis.shape.Rectangle",Object,{paint:function(t){var e,i,n;e=t,n=(i=this).x-i.width/2,t=i.y-i.height/2,i.fillStyle&&(e.fillStyle=i.fillStyle,e.fillRect(n,t,i.width,i.height)),i.strokeStyle&&(e.strokeStyle=i.strokeStyle),e.strokeRect(n,t,i.width,i.height)}}),x.gis.shape.Line=function(t,e){this.from=t,this.to=e,this.strokeStyle="#000000"},x.Util.ext("twaver.gis.shape.Line",Object,{paint:function(t){!function(t,e){var i=e.points.length-1;t.lineWidth=e.width,e.strokeStyle&&(t.strokeStyle=e.strokeStyle);for(var n=0;n<=i;n++){var o=e.points[n];0==n&&t.moveTo(o.x,o.y),t.lineTo(o.x,o.y)}t.stroke()}(t,this)}}),CanvasUtils={isSupportCanvas:function(){return null!=CanvasUtils.getGraphic(CanvasUtils.getCanvas(""))},getCanvas:function(t){var e=E.createElement("canvas");return t&&(e.id=t),e},getGraphic:function(t){return t?t.getContext("2d"):null}},x.gis.ogc.util.WMSUtils={GEOSERVER_WMS_ROOT_TAG:"WMT_MS_Capabilities",getURL:function(t,e,i,n,o,s,a,r,h){return s=s||null,a=a||"png",r=r||256,h=h||256,t=En.getRequestTypeParameter(t),t+=En.getVersionParameter(e),t+=En.getFormatParameter(a),t+=En.getLayersParameter(o),t+=s?En.getStylesParameter(s):"&styles=",t+=En.getSrsParameter(i),t+=En.getBBoxParameter(n),t+=En.getWidthParameter(r),t+=En.getHeightParameter(h),t+=En.getTransparentParameter(!0)},getBBoxParameter:function(t){var e=En.getParameterLeftPart(Cn.GETMAP_PARAMETER_BBOX);return t?(e+=t.minLng+","+t.minLat+",",e+=t.maxLng+","+t.maxLat):e+=Cn.GRID_BOUNDS_4326,e.toString()},getParameterLeftPart:function(t){return Cn.SEPERATOR+t+Cn.ASSIGNMENT},getRequestTypeParameter:function(t){return Cn.WMS_PARAMETER_REQUEST+Cn.ASSIGNMENT+t},getVersionParameter:function(t){return En.getParameterLeftPart(Cn.WMS_PARAMETER_VERSION)+t},getLayersParameter:function(t){var e=En.getParameterLeftPart(Cn.GETMAP_PARAMETER_LAYERS);if(null!=t)for(var i=t.length-1,n=0;n<t.length;n++)e+=t[n],n<i&&(e+=",");return e},getStylesParameter:function(t){for(var e=En.getParameterLeftPart(Cn.GETMAP_PARAMETER_STYLES),i=t.length-1,n=0;n<t.length;n++)null!=t[n]&&(e+=t[n],n<i&&(e+=";"));return e},getFormatParameter:function(t){var e=En.getParameterLeftPart(Cn.GETMAP_PARAMETER_FORMAT);return e+=Cn.IMAGE_FORMAT,e+=t},getWidthParameter:function(t){var e=En.getParameterLeftPart(Cn.GETMAP_PARAMETER_TILE_WIDTH);return e+=""+t},getHeightParameter:function(t){var e=En.getParameterLeftPart(Cn.GETMAP_PARAMETER_TILE_HEIGHT);return e+=""+t},getSrsParameter:function(t){var e=En.getParameterLeftPart(Cn.GETMAP_PARAMETER_SRS);return e+=t=Cn.SRS_4326!=t&&Cn.SRS_900913!=t&&Cn.SRS_4230!=t?Cn.SRS_4326:t},getTransparentParameter:function(t){var e=En.getParameterLeftPart(Cn.GETMAP_PARAMETER_TRANSPARENT);return e+=t?"true":"false"},getBBoxParameterByGridBbox:function(t){var e=En.getParameterLeftPart(Cn.GETMAP_PARAMETER_BBOX);return e+=null!=t?t.minLng+","+t.minLat+","+t.maxLng+","+t.maxLat:Cn.GRID_BOUNDS_4326},getBBoxParameterByBoundsArray:function(t){var e=En.getParameterLeftPart(Cn.GETMAP_PARAMETER_BBOX);if(null!=t&&4==t.length)for(var i=0;i<4;i++)e+=t[i],i<3&&(e+=",");else e+=Cn.GRID_BOUNDS_4326;return e}};var En=x.gis.ogc.util.WMSUtils;x.gis.ogc.util.WMSParameters={GET_MAP:"GetMap",GET_CAPABILITY:"GetCapabilities",SEPERATOR:"&",ASSIGNMENT:"=",WMS_VERSION_1_1_1:"1.1.1",WMS_VERSION_1_3_0:"1.3.0",WMS_PARAMETER_REQUEST:"request",WMS_PARAMETER_VERSION:"version",TILED_PARAM:"tiled",GETCAPABILITY_TAG_LAYER_BOUNDINGBOX:"BoundingBox",GETCAPABILITY_TAG_LAYER_STYLE:"Style",GETCAPABILITY_TAG_LAYER_LATLONBOUNDINGBOX:"LatLonBoundingBox",GETCAPABILITY_TAG_LAYER_SRS:"SRS",GETCAPABILITY_TAG_LAYER:"Layer",GETCAPABILITY_TAG_LAYER_SCALEHINT:"ScaleHint",GETCAPABILITY_TAG_NAME:"Name",GETCAPABILITY_TAG_LAYER_CRS:"CRS",GETMAP_PARAMETER_TRANSPARENT:"transparent",GETMAP_PARAMETER_BGCOLOR:"bgcolor",PALETTE_PARAM:"palette",GETMAP_PARAMETER_SRS:"srs",GETMAP_PARAMETER_LAYERS:"layers",GETMAP_PARAMETER_STYLES:"styles",GETMAP_PARAMETER_BBOX:"bbox",GETMAP_PARAMETER_TILE_ORIGIN:"tilesorigin",GETMAP_PARAMETER_TILE_HEIGHT:"height",GETMAP_PARAMETER_TILE_WIDTH:"width",GETMAP_PARAMETER_FORMAT:"format",ERROR_TYPE_PARAM:"exceptions",VENDOR_PARAMS:"vendorparameters",SRS_4326:"EPSG:4326",SRS_4230:"EPSG:4230",SRS_900913:"EPSG:900913",GRID_BOUNDS_4326:"-180,-90,180,90",GRID_BOUNDS_900913:"-20037508.34,-20037508.34,20037508.34,20037508.34",IMAGE_FORMAT:"image/",BBOX_MINX:"minx",BBOX_MINY:"miny",BBOX_MAXX:"maxx",BBOX_MAXY:"maxy"};var Cn=x.gis.ogc.util.WMSParameters;x.gis.ogc.geoms.Geom=function(t){this.isGeom=!0,t||x.gis.ogc.util.WFSUtils.DEFAULT_SRS};Ot=x.gis.ogc.geoms.Geom;Ot.GEOM_POINT="Point",Ot.GEOM_POINT="Point",Ot.GEOM_MULTIPOINT="MultiPoint",Ot.GEOM_LINE="LineString",Ot.GEOM_MULTILINE="MultiLineString",Ot.GEOM_LINERING="LinearRing",Ot.GEOM_POLYGON="Polygon",Ot.GEOM_MULTISURFACE="MultiSurface",Ot.GEOM_SUFACEMEMBER="surfaceMember",Ot.GEOM_MULTIPOLYGON="MultiPolygon",Ot.GEOM_POLYGON_OUTBORDER_110="exterior",Ot.GEOM_POLYGON_OUTBORDER_100="outerBoundaryIs";function Tn(t,e,i,n){switch(i=i||256,n=n||256,e){case GISConsts.PROJECTION_EDUSHI:return Nn(t,i,n);case GISConsts.PROJECTION_MERCATOR:return function(t,e,i){e*=Math.pow(2,t),t=i*Math.pow(2,t);return new x.gis.geometry.Dimensize(e,t)}(t,n,n);default:return jn(t,i,n)}}function In(t,e,i,n){var o,s=(o=e.longitude,Math.floor(Pn(o,t,s)/s)),a=(e=e.latitude,Math.floor(Mn(e,t,a)/a));return new Eo(GISConsts.PROJECTION_MERCATOR,a,s,t,i,n)}function Ln(t,e,i,n,o){return(GISConsts.PROJECTION_4326==i?Yn:In)(e,t,n,o)}function Sn(t,e,i,n,o,s){return o=o||256,e=to(e,n,s=s||256),t=$n(t,o),new Eo(n,e,t,i,o,s)}function bn(t,e,i,n,o,s){switch(o=o||256,s=s||256,n){case GISConsts.PROJECTION_MERCATOR:return function(t,e,i,n,o){n=Pn(t.longitude,i,n),o=Mn(t.latitude,i,o);return{x:n-e.minx,y:o-e.miny}}(t,e,i,o,s);case GISConsts.PROJECTION_EDUSHI:return Fn(t,e,i,o,s);default:return Wn(t,e,i,o,s)}}function Rn(t,e,i,n,o,s,a){var r=t+i.minx,t=e+i.miny;return o==GISConsts.PROJECTION_4326&&(t=i.maxy-e),On(r,t,n,o,s,a)}var Pn=function(t,e,i){t=Dn(t,-180,180);e=i<<e;return Math.floor(Dn((t+180)/360*e+.5,0,e-1))},Mn=function(t,e,i){t=Dn(t,-85.05112878,85.05112878);t=Math.sin(t*Math.PI/180),t=.5-Math.log((1+t)/(1-t))/(4*Math.PI),e=i<<e;return Math.floor(Dn(t*e+.5,0,e-1))},Dn=function(t,e,i){return Math.min(Math.max(t,e),i)},kn=function(t,e){var i,n,o;return null!=t&&(GISConsts.PROJECTION_4326==e?Zn(t):(i=t.width*(t.colIndex-1),n=t.height*(t.rowIndex-1),o=t.width+i,e=t.height+n,t.pixelBounds=new x.gis.geometry.Bounds(i,o,n,e))),t.pixelBounds},On=function(t,e,i,n,o,s){var a=Tn(i,n,o,s);if(t<=0||t>a.width||e<0||e>a.height)return new x.gis.geometry.GeoCoordinate(-200,-200);switch(o=o||256,s=s||256,n){case GISConsts.PROJECTION_MERCATOR:return function(t,e,i,n){i=n<<i,t=Dn(t,0,i-1)/i-.5,i=.5-Dn(e,0,i-1)/i,i=90-360*Math.atan(Math.exp(2*-i*Math.PI))/Math.PI;return new x.gis.geometry.GeoCoordinate(i,360*t)}(t,e,i,o);case GISConsts.PROJECTION_EDUSHI:return Vn(t,e,i,o,s);default:return eo(t,e,i,o,s)}},Bn=function(t,e,i,n,o){switch(n=n||256,o=o||256,i){case GISConsts.PROJECTION_EDUSHI:return function(t,e,i,n,o){o=Nn(i,n,o);return{x:o.width*e/100,y:o.height*t/100}}(t.latitude,t.longitude,e,n,o);case GISConsts.PROJECTION_MERCATOR:return s=t.latitude,a=t.longitude,r=o,{x:Pn(a,a=e,n),y:Mn(s,a,r)};default:return Xn(t,e,n,o)}var s,a,r},Nn=function(t,e,i){GISUtils.getNumberValue(GISSettings.FAKE_3D_ZOOM_STARTLEVEL);var n=zn(),o=n[t][2]-n[t][0],t=n[t][3]-n[t][1];return new x.gis.geometry.Dimensize(o*e,t*i)},Un=null,zn=function(){if(!Un){var t=[],e=GISUtils.getGlobalSetting(GISSettings.FAKE_3D_MAP_INITGRID),i=GISUtils.getGlobalSetting(GISSettings.FAKE_3D_MAP_URLS).length;t[0]=e;for(var n=1;n<i;n++){var o=Math.pow(2,n),o=[o*e[0],o*e[1],o*e[2],o*e[3]];t[n]=o}Un=t}return Un},Fn=function(t,e,i,n,o){n=Nn(i,n,o),o=n.width*t.longitude/100,n=n.height*t.latitude/100,t=(e.maxy+e.miny)/2;return{x:o-e.minx,y:e.height/2+(n-t)}},Vn=function(t,e,i,n,o){o=Nn(i,n,o);return new x.gis.geometry.GeoCoordinate(100*e/o.height,100*t/o.width)},Gn=function(t,e,i){t=Hn(t),e=t*e-180,i=t*i-90;return new x.gis.geometry.GridBbox(i,e,i+t,e+t)},Hn=function(t){return 180/Math.pow(2,t)},Wn=function(t,e,i,n,o){n=Qn(t.longitude,i,n),i=Jn(t.latitude,i,o),o=(e.maxy+e.miny)/2;return{x:n-e.minx,y:e.height/2-(i-o)}},Zn=function(t){var e=t.width*(t.colIndex-1),i=t.height*(t.rowIndex+1),n=t.width+e,o=t.height+i;t.pixelBounds=new x.gis.geometry.Bounds(e,n,i,o)},Yn=function(t,e,i,n){var o=Kn(e.longitude,t,i),e=qn(e.latitude,t,n);return new Eo(GISConsts.PROJECTION_4326,e,o,t,i,n)},Xn=function(t,e,i,n){var o=(t.longitude+180)/360,t=(t.latitude+90)/180,e=Math.pow(2,e);return{x:2*e*i*o,y:e*n*t}},jn=function(t,e,i){t=Math.pow(2,t);return new x.gis.geometry.Dimensize(2*t*e,t*i)},Qn=function(t,e,i){return(t- -180)*i/Hn(e)},Kn=function(t,e,i){e=Qn(t,e,i);return $n(e,i)},qn=function(t,e,i){e=Jn(t,e,i);return to(e,GISConsts.PROJECTION_4326,i)},Jn=function(t,e,i){return i*(t- -90)/Hn(e)},$n=function(t,e){return e=e||256,Math.floor(t/e)},to=function(t,e,i){return e==GISConsts.PROJECTION_MERCATOR?MapUtils.trancateInteger(t/i):Math.floor(t/i)},eo=function(t,e,i,n,o){n=t*Hn(i)/n-180,o=e*Hn(i)/o-90;return new x.gis.geometry.GeoCoordinate(o,n)};defaultValue=function(t,e){};var io=function(t,e,i){var n=e.x-t.upleft.x,o=e.y-t.upleft.y,s=GISUtils.getNumberValue(GISSettings.CACHE_HORIZONTAL_EXTENDS),a=GISUtils.getNumberValue(GISSettings.CACHE_VERTICAL_EXTENDS);s<0&&(s=i.width/t.width),a<0&&(a=i.height/t.height);var r=t.colIndex-Math.ceil(n/t.width),e=t.colIndex+Math.ceil((i.width-t.width-n)/t.width),n=t.rowIndex-Math.ceil(o/t.height),t=t.rowIndex+Math.ceil((i.height-t.height-o)/t.height);return new x.gis.geometry.Bounds(r-s,e+s,n-a,t+a)},no=function(t,e,i){var n=e.x-t.upleft.x,o=e.y-t.upleft.y,s=GISUtils.getNumberValue(GISSettings.CACHE_HORIZONTAL_EXTENDS),a=GISUtils.getNumberValue(GISSettings.CACHE_VERTICAL_EXTENDS);s<0&&(s=i.width/t.width),a<0&&(a=i.height/t.height);var r=t.colIndex-Math.ceil(n/t.width),e=t.colIndex+Math.ceil((i.width-t.width-n)/t.width),n=t.rowIndex-Math.ceil(o/t.height),t=t.rowIndex+Math.ceil((i.height-t.height-o)/t.height);return new x.gis.geometry.Bounds(r-s,e+s,n-a,t+a)},oo=function(t,e,i){var n=e.x-t.upleft.x,o=e.y+t.upleft.y,s=GISUtils.getNumberValue(GISSettings.CACHE_HORIZONTAL_EXTENDS),a=GISUtils.getNumberValue(GISSettings.CACHE_VERTICAL_EXTENDS);-1==s&&(s=i.width/t.width),-1==a&&(a=i.height/t.height);e=t.colIndex-(Math.ceil(n/t.width)+s),s=t.colIndex+Math.ceil((i.width-t.width-n)/t.width+s),i=t.rowIndex-Math.ceil((i.height-t.height-o)/t.height+a),a=t.rowIndex+Math.ceil(o/t.height)+a;return new x.gis.geometry.Bounds(e,s,i,a)},so=function(t,e,i,n){t=Bn(t,e,GISConsts.PROJECTION_4326,i,n),i=Sn(t.x,t.y,e,GISConsts.PROJECTION_4326,i,n);i.pixelBounds=kn(i,GISConsts.PROJECTION_4326);n=t.x-i.pixelBounds.minx,t=t.y-i.pixelBounds.maxy;return i.upleft={x:n,y:t},i},ao=function(t,e,i,n){t=Bn(t,e,GISConsts.PROJECTION_MERCATOR,i,n),i=Sn(t.x,t.y,e,GISConsts.PROJECTION_MERCATOR,i,n);i.pixelBounds=kn(i,GISConsts.PROJECTION_MERCATOR);n=t.x-i.pixelBounds.minx,t=t.y-i.pixelBounds.miny;return i.upleft={x:n,y:t},i},ro=function(t,e,i,n){var o=Tn(e,GISConsts.PROJECTION_EDUSHI,i,n),s=o.width*t.longitude/100,a=o.height*t.latitude/100,r=zn(),o=Math.floor(Math.ceil(s)/i),t=Math.floor(Math.ceil(a)/n),n=new Eo(GISConsts.PROJECTION_EDUSHI,t+r[e][1],o+r[e][0],e,i,n);return n.upleft={x:s%256,y:a%256},n},kn=function(t,e){Tn(t.zoomLevel,e,t.width,t.height);var i,n,o,t=GISConsts.PROJECTION_4326==e?(i=t.width*t.colIndex,n=t.width+i,(o=t.height*t.rowIndex)+t.height):(i=t.width*t.colIndex,o=t.height*t.rowIndex,n=t.width+i,t.height+o);return new x.gis.geometry.Bounds(i,n,o,t)},ho=function(){this.format=GISUtils.getGlobalSetting(GISSettings.MAPIMAGE_FORMAT),this.projectionType=GISConsts.PROJECTION_4326,this.srs="",this.service="",this.style=null};x.Util.ext(ho,Object,{setLayerBounds:function(t){t instanceof x.gis.geometry.GridBbox&&(this._layerBounds=t,this.initGridCache())},acquireTileURL:function(t){var e=0<=this.service.indexOf(GISSettings.TILEMAP_LOCALECACHE_FLAG),i=function(t,e){switch(e){case GISConsts.PROJECTION_MERCATOR:var i=Math.pow(2,t);return new x.gis.geometry.Dimensize(i,i);case GISConsts.PROJECTION_EDUSHI:var n=zn();return void 0===t||null==t?null:new x.gis.geometry.Dimensize(n[t][2]+1,n[t][3]+1);default:n=Math.pow(2,t);return new x.gis.geometry.Dimensize(2*n,n)}}(t.zoomLevel,this.projectionType);if(null==i)return null;if(t.colIndex<0||t.colIndex>=i.width||t.rowIndex<0||t.rowIndex>=i.height)return null;var n;return e?(n=this.service,i=t,e=this.format,GISUtils.getGlobalSetting(GISSettings.COMMONSEQUENCE)?n+"/"+i.zoomLevel+"/"+i.colIndex+"/"+i.rowIndex+"."+e:n+"/"+i.zoomLevel+"/"+i.rowIndex+"/"+i.colIndex+"."+e):this.acquireStandTileURL(t)},isValidate:function(t){var e=this.getCoveredGridOfZoomLevel(t.zoomLevel);return t.colIndex>=e.minx&&t.rowIndex>=e.miny&&t.colIndex<=e.maxx&&t.rowIndex<=e.maxy},getCoveredGridOfZoomLevel:function(t){return this.gridCache[t]},initGridCache:function(){this.gridCache||(this.gridCache=[]);for(var t=0;t<20;t++){var e=this.getGridArea(t,this._layerBounds);this.gridCache[t]={minx:e[0],miny:e[1],maxx:e[2],maxy:e[3]}}},getGridArea:function(t,e){var i=[],t=Hn(t);return i[0]=Math.floor(e.minLng+180)/t,i[1]=Math.floor(e.minLat+90)/t,i[2]=Math.ceil(e.maxLng+180)/t-1,i[3]=Math.ceil(e.maxLat+90)/t-1,i},acquireStandTileURL:function(t){return this.service+x.gis.ogc.util.WMSUtils.getURL(Cn.GET_MAP,Cn.WMS_VERSION_1_1_1,this.srs,t.geoBounds,this.layer.getRelativeLayers(),null,this.format)},calculateTilePixelBounds:function(t){return kn(t,this.projectionType)},locateAnchorTile:function(t,e,i,n){return function(t,e,i,n,o){switch(i){case GISConsts.PROJECTION_MERCATOR:return ao(t,e,n,o);case GISConsts.PROJECTION_EDUSHI:return ro(t,e,n,o);default:return so(t,e,n,o)}}(t,e,this.projectionType,i,n)},getPixelXYFromGeoPoint:function(t,e,i,n){return Bn(t,e,this.projectionType,i,n)},getCoveredTilesBounds:function(t){return function(t,e,i,n){switch(n){case GISConsts.PROJECTION_MERCATOR:return no(t,e,i);case GISConsts.PROJECTION_EDUSHI:return io(t,e,i);default:return oo(t,e,i)}}(t,this.layer.anchorScreenPoint,this.layer.viewrect,this.projectionType)},getScaleInfoByZoomLevel:function(t){return""},correctAnchorTilePosition:function(t,e){e.x=t.x-e.upleft.x,e.y=t.y+e.upleft.y},locateTile:function(t,e){e={x:(t.colIndex-e.colIndex)*t.width+e.x,y:-(t.rowIndex-e.rowIndex)*t.height+e.y};t.x=e.x,t.y=e.y,t.setLocation(e.x,e.y)},locateTiles:function(t,e,i,n,o,s,a){for(var r=0;r<i;r++)for(var h=0;h<e;h++){var l=t[r][h];l.layer=this.layer,l.zoomLevel=a,l.colIndex=n+h,l.rowIndex=o+r,this.locateTile(l,s),l.initGeoBounds(),this.isValidate(l)&&l.loadImage(this.acquireTileURL(l))}},relocateTiles:function(t,e){var i,n,o=this.layer,s=this.locateAnchorTile(t,e,o.tileWidth,o.tileHeight);s&&(this.correctAnchorTilePosition(o.anchorScreenPoint,s),i=this.getCoveredTilesBounds(s),t=(n=new x.gis.geometry.Dimensize(i.maxx-i.minx+1,i.maxy-i.miny+1)).height,n=n.width,o.width=n*o.tileWidth,o.height=t*o.tileHeight,o.recreateTiles(t,n),this.locateTiles(o.tiles,n,t,i.minx,i.miny,s,e),o.installTiles())}});var lo=function(){lo.superClass.constructor.call(this),this.scaleArray=[295829355.45,147914677.73,73957338.86,36978669.43,18489334.72,9244667.36,4622333.68,2311166.84,1155583.42,577791.71,288895.85,144447.93,72223.96,36111.98,18055.99,9028,4514,2257,1128.5,564.25,282.12,141.06,70.53],this.projectionType=GISConsts.PROJECTION_MERCATOR,this.service=GISUtils.getGlobalSetting(GISSettings.MAPDRIVER_OSM),this._layerBounds=GISConsts.WORLD_MERCATOR_BBOX};x.Util.ext(lo,ho,{acquireStandTileURL:function(t){return this.service+t.zoomLevel+"/"+t.colIndex+"/"+t.rowIndex+"."+this.format},setLayerBounds:function(t){t instanceof x.gis.geometry.GridBbox&&(t.contains(this._layerBounds)&&(this._layerBounds.minLat=Math.max(GISConsts.WORLD_MERCATOR_BBOX.minLat,t.minLat),this._layerBounds.minLng=t.minLng,this._layerBounds.maxLat=Math.min(GISConsts.WORLD_MERCATOR_BBOX.maxLat,t.maxLat),this._layerBounds.maxLng=t.maxLng),this.initGridCache())},getScaleInfoByZoomLevel:function(t){return this.scaleArray[t]},correctAnchorTilePosition:function(t,e){var i=t.x-e.upleft.x,t=t.y-e.upleft.y;e.x=i,e.y=t},locateTile:function(t,e){e={x:(t.colIndex-e.colIndex)*t.width+e.x,y:(t.rowIndex-e.rowIndex)*t.height+e.y};t.x=e.x,t.y=e.y,t.setLocation(e.x,e.y)},getGridArea:function(t,e){var i,n=[];return this._layerBounds.minLat===GISConsts.WORLD_MERCATOR_BBOX.minLat&&this._layerBounds.minLng===GISConsts.WORLD_MERCATOR_BBOX.minLng&&this._layerBounds.maxLat===GISConsts.WORLD_MERCATOR_BBOX.maxLat&&this._layerBounds.maxLng===GISConsts.WORLD_MERCATOR_BBOX.maxLng?(n[0]=0,n[1]=0,n[2]=Math.pow(2,t)-1,n[3]=n[2]):(i=Ln(new x.gis.geometry.GeoCoordinate(e.maxLat,e.minLng),t,this.projectionType,this.layer.tileWidth,this.layer.tileHeight),t=Ln(new x.gis.geometry.GeoCoordinate(e.minLat,e.maxLng),t,this.projectionType,this.layer.tileWidth,this.layer.tileHeight),n[0]=i.colIndex,n[1]=i.rowIndex,n[2]=t.colIndex,n[3]=t.rowIndex),n}});var co=function(){co.superClass.constructor.call(this),this.locale=GISUtils.getGlobalSetting(GISSettings.BINGMAP_LOCALE),GISConsts.LOCALE_CH===this.locale?this.service="http://r3.tiles.ditu.live.com":this.service="http://ecn.t4.tiles.virtualearth.net"};x.Util.ext(co,lo,{acquireStandTileURL:function(t){return function(t,e){e=function(t,e,i){for(var n="",o=i;0<o;o--){var s=0,a=1<<o-1;0!=(t&a)&&s++,0!=(e&a)&&(s++,s++),n+=s}return n}(e.colIndex,e.rowIndex,e.zoomLevel);return t+"/tiles/r"+(e=""==e?"0":e)+".png?g=0"}(this.service,t)}});var uo=function(){uo.superClass.constructor.call(this),this.service=GISUtils.getGlobalSetting(GISSettings.MAPDRIVER_MAPABC),this.area=zn(),this.onlineURLs=GISUtils.getGlobalSetting(GISSettings.FAKE_3D_MAP_URLS),this.projectionType=GISConsts.PROJECTION_EDUSHI};x.Util.ext(uo,ho,{acquireStandTileURL:function(t){return null!=this.onlineURLs&&0<this.onlineURLs.length?this.onlineURLs[t.zoomLevel]+t.colIndex+","+t.rowIndex+".png":""},correctAnchorTilePosition:function(t,e){e.x=t.x-e.upleft.x,e.y=t.y-e.upleft.y},locateTile:function(t,e){e={x:(t.colIndex-e.colIndex)*t.width+e.x,y:(t.rowIndex-e.rowIndex)*t.height+e.y};t.x=e.x,t.y=e.y,t.setLocation(e.x,e.y)},initGridCache:function(){var t=this.area.length;this.gridCache=[];for(var e=0;e<t;e++){var i=this.area[e];this.gridCache[e]={minx:i[0],miny:i[1],maxx:i[2],maxy:i[3]}}}});var _o=function(){_o.superClass.constructor.call(this),this.service=GISUtils.getGlobalSetting(GISSettings.MAPDRIVER_GOOGLE_MAP)};x.Util.ext(_o,lo,{acquireStandTileURL:function(t){return e=this.service,t=t,e+"&hl="+GISUtils.getGlobalSetting(GISSettings.GOOGLEMAP_LOCALE)+"&x="+t.colIndex+"&y="+t.rowIndex+"&z="+t.zoomLevel;var e}});var go=function(){go.superClass.constructor.call(this),this.service=GISUtils.getGlobalSetting(GISSettings.MAPDRIVER_GOOGLE_LABEL)};x.Util.ext(go,_o,{acquireStandTileURL:function(t){return this.service,t=t,service+"&hl="+GISUtils.getGlobalSetting(GISSettings.GOOGLEMAP_LOCALE)+"&x="+t.colIndex+"&y="+t.rowIndex+"&z="+t.zoomLevel}});var fo=function(){fo.superClass.constructor.call(this),this.service=GISUtils.getGlobalSetting(GISSettings.MAPDRIVER_GOOGLE_STATELLITE)};x.Util.ext(fo,lo,{acquireStandTileURL:function(t){return e=this.service,t=t,e+"&hl="+GISUtils.getGlobalSetting(GISSettings.GOOGLEMAP_LOCALE)+"&x="+t.colIndex+"&y="+t.rowIndex+"&z="+t.zoomLevel;var e}});var Ao=function(){Ao.superClass.constructor.call(this),this.service=GISUtils.getGlobalSetting(GISSettings.MAPDRIVER_GOOGLE_MAP_TERRAIN)};x.Util.ext(Ao,lo,{acquireStandTileURL:function(t){return e=this.service,t=t,e+"&hl="+GISUtils.getGlobalSetting(GISSettings.GOOGLEMAP_LOCALE)+"&x="+t.colIndex+"&y="+t.rowIndex+"&z="+t.zoomLevel;var e}});var po=function(){po.superClass.constructor.call(this),this.service=GISUtils.getGlobalSetting(GISSettings.MAPDRIVER_MAPABC)};x.Util.ext(po,lo,{acquireStandTileURL:function(t){return this.service+"&x="+t.colIndex+"&y="+t.rowIndex+"&zoom="+(17-t.zoomLevel)}});var mo=function(){mo.superClass.constructor.call(this),this.service=GISUtils.getGlobalSetting(GISSettings.MAPDRIVER_TIANDITU)};x.Util.ext(mo,ho,{acquireStandTileURL:function(t){return e=this.service,n=(i=t).zoomLevel,t=Math.pow(2,n),t=0==n?i.rowIndex:t-i.rowIndex-1,e+"&X="+i.colIndex+"&Y="+t+"&L="+(n+1);var e,i,n}});var vo=function(){vo.superClass.constructor.call(this)};x.Util.ext(vo,mo,{acquireStandTileURL:function(t){return i=(e=t).zoomLevel,n=Math.pow(2,i),t=null,t=i<=10?"sbsm0210":10<i&&i<12?"e12":12==i?"e13":12<i&&i<14?"eastdawnall":14==i?"AP0115_SWHK":"sbsm1518",n=0==i?e.rowIndex:n-e.rowIndex-1,"http://tile5.tianditu.com/DataServer?T="+t+"&X="+e.colIndex+"&Y="+n+"&L="+(i+1);var e,i,n}});var yo=function(){yo.superClass.constructor.call(this)};x.Util.ext(yo,ho,{relocateTiles:function(t,e){var i=this.layer,n=this.getTile(e);i.width=i.viewrect.width,i.height=i.viewrect.height,i.recreateTiles(1,1),i.installTiles(),this.locateTiles(i.tiles,1,1,0,0,n,e)},getTile:function(t){return new Eo(GISConsts.PROJECTION_4326,t,1,1)},initGridCache:function(){},isValidate:function(t){return!0},acquireStandTileURL:function(t){return this.service+x.gis.ogc.util.WMSUtils.getURL(Cn.GET_MAP,Cn.WMS_VERSION_1_1_1,this.srs,t.geoBounds,this.layer.getRelativeLayers(),[this.style],this.format,t.width,t.height)},calculatePixelBounds:function(t){var e=t.geoBounds;if(null==e)return new x.gis.geometry.Bounds;var i=Bn(new x.gis.geometry.GeoCoordinate(e.minLng,e.maxLat),t.zoom,this.projectionType),t=Bn(new x.gis.geometry.GeoCoordinate(e.maxLng,e.minLat),t.zoom,this.projectionType);return new x.gis.geometry.Bounds(i.x,t.x,t.y,i.y)},locateTiles:function(t,e,i,n,o,s,a){for(var r,h,l,c,u,d,_,g,f,A=0;A<i;A++)for(var p=0;p<e;p++){var m=t[A][p];m.layer=this.layer,m.zoom=a,r=m,h=this.layer.viewrect,l=this.layer.center,f=g=_=d=u=c=void 0,null!=h&&(f=GISConsts.PROJECTION_4326,c=r.zoom,u=(g=Bn(l,c,f)).x-h.width/2,d=g.y-h.height/2,_=new x.gis.geometry.Bounds(u,u+h.width,d,d+h.height),l=Tn(c,f),g=new x.gis.geometry.Bounds(0,l.width,0,l.height),null!=(u=_.createIntersect(g))&&(d=u.minx,l=u.miny,_=u.maxx,g=u.maxy,r.width=_-d,r.height=g-l,g=On(d,g,c,f),f=On(_,l,c,f),r.geoBounds=new x.gis.geometry.GridBbox(f.latitude,g.longitude,g.latitude,f.longitude),r.x=h.width/2-u.width/2,r.y=h.height/2-u.height/2,r.setSize({width:r.width,height:r.height}),r.setLocation(r.x,r.y))),m.loadImage(this.acquireTileURL(m))}}});var wo=function(){wo.superClass.constructor.call(this),this.service="http://maps2.yimg.com/hx/tl?b=1&v=4.3&.intl=en&r=3"};x.Util.ext(wo,lo,{acquireStandTileURL:function(t){return this.service+"&x="+t.rowIndex+"&y="+t.colIndex+"&z="+(t.zoomLevel+1)}}),x.gis.gadget.BlockPanel=function(t,e){e=e||x.gis.gadget.BlockPanel.blockList,this.blockList=e,this.shouldBlockEvents="block"===(t=t||"block"),this._panel=E.createElement("div"),this.init()},x.gis.gadget.BlockPanel.blockList=["mousedown","mouseup","click","dblclick","mousewheel","DOMMouseScroll"],x.Util.ext("twaver.gis.gadget.BlockPanel",Object,{getView:function(){return this._panel},initView:function(){},init:function(){this.initView(),this.shouldBlockEvents&&this.blockEvents()},block:function(t){x.gis.util.EventUtils.cancelHandler(t)},blockEvents:function(){for(var t=0;t<this.blockList.length;t++)x.gis.util.EventUtils.addEventListener(this._panel,this.blockList[t],this.block,this,!1)}}),x.gis.gadget.ActionPanel=function(t,e,i){this._actionList=[],this.actionNumber=0,this._actionMap={},this._buttonMap={},this._direction=e||"horizontal",x.gis.gadget.ActionPanel.superClass.constructor.call(this,"type",i)},x.Util.ext("twaver.gis.gadget.ActionPanel",x.gis.gadget.BlockPanel,{addAction:function(t){t&&(this._actionList[this.actionNumber]=t,this._actionMap[t.id]=this.actionNumber,this.actionNumber++,this.invalidate())},invalidate:function(){var t=E.createElement("div");this.size={width:0,height:0};for(var e=0;e<this.actionNumber;e++){var i=this._actionList[e],n=this.createButtonForAction(i);MapUtils.getDOMSize(n);"vertical"==this._direction?(this.size.width=Math.max(this.size.width,i.size.width),this.size.height+=i.size.height):(this.size.width+=i.size.width,this.size.height=Math.max(this.size.height,i.size.height)),t.appendChild(n),this._buttonMap[i.id]=n}var o=MapUtils.getDOMOutborder(this._panel);this.size.width+=o.left+o.right,this.size.height+=o.top+o.bottom,this._content&&this._panel.removeChild(this._content),this._panel.appendChild(t),this._content=t,this._panel.style.cssText="position:absolute;"},createButtonForAction:function(t){var e=E.createElement("a");e.title=t.name,e.className="toobar-button",t.id&&(e.id=t.id);var i=E.createElement("img");return i.className="tb-img",i.src=t.icon.src,e.appendChild(i),e.action=t,e.addEventListener("mousedown",this.onMouseDown),e.addEventListener("mouseup",this.onMouseUp),e.addEventListener("dblclick",this.onMouseDBClick),e.addEventListener("touchstart",this.onMouseDown),e.addEventListener("touchend",this.onMouseUp),e},findActionById:function(t){return this._actionMap[t]},removeAction:function(t){var e;t&&(e=(e=t.id)||t,t=this.findActionById(e),delete this._actionMap[e],delete this._actionList[t],this.actionNumber--,this.invalidate())},onMouseDBClick:function(t){x.gis.util.EventUtils.cancelHandler(t)},onMouseDown:function(t){t.currentTarget.down=!0,x.gis.util.EventUtils.cancelHandler(t)},onMouseUp:function(t){var e,i=t.currentTarget;!i.down||(e=i.action)&&e.command.call(e.scope,t),x.gis.util.EventUtils.cancelHandler(t),i.down=!1},addActions:function(t){t&&t.length&&(this._actionList=this._actionList.concat(t),this.actionNumber+=t.length,this.invalidate())}}),x.gis.gadget.MapToolbar=function(t,e){this._id=t||"map_toolbar",this._map=e,x.gis.gadget.MapToolbar.superClass.constructor.call(this)},x.Util.ext("twaver.gis.gadget.MapToolbar",x.gis.gadget.ActionPanel,{initView:function(){this._panel.setAttribute("class","mp_toolbar"),this._panel.setAttribute("id",this._id),this.initActions(),this._panel.style.top="5px"},initActions:function(){for(var t=["print","location","export"],e=[this.print,this.getLocation,this.toImage],i=[],n=x.Util.isIPad||x.Util.isAndroid||x.Util.isIPhone||x.Util.isIPod?48:32,o=0;o<3;o++){var s={command:e[o],size:{width:32,height:23},icon:GISUtils.getRegisterImage(t[o]+"-"+n),scope:this,name:MapUtils.getString(t[o])};i[o]=s}this.addActions(i)},print:function(){var t,e;this._map.isPermitCrossDomain()?(e=this._map.toImage())&&(t="<!DOCTYPE html>",t+="<html>",t+="<head><title>Show Result:</title></head>",t+="<body>",t+='<img src="'+e+'"/>',t+="</body>",t+="</html>",(e=window.open("","","width=340,height=260")).document.open(),e.document.write(t),e.document.close(),e.focus(),e.print()):alert(MapUtils.getString("Be sure the Cross Domain Policy of the WebSite"))},overview:function(){},getLocation:function(){this._map.getGeoLocation(GISConsts.REQUIRE_GEO_TYPE_SHOT,{method:this.showOnMap,scope:this},{method:this.errorLocation,scope:this})},errorLocation:function(t){alert("error occurs when requesting the GeoLocation, error information is "+t.name+" - "+t.message)},showOnMap:function(t){var e=new x.gis.geometry.GeoCoordinate(t.coords.latitude,t.coords.longitude);this._map.setCenter(e),this._map.setZoomLevel(15);var i=GISUtils.getGlobalSetting("IMAGE-placemark");this._map.setMarks([{image:i,p:e}]);t=t.coords;console.log("lat,lng is "+t.latitude+","+t.longitude+", accuracy is "+t.accuracy)},toImage:function(){var t;this._map.isPermitCrossDomain()?(t=this._map.toImage())&&window.open(t):alert(MapUtils.getString("Please check the Cross-Origin Resource Sharing policy of the website"))},mouseUpHandle:function(t){x.gis.util.EventUtils.getMouseLocation(t,this._panel);t.stopPropagation()},mouseTouchStartHandle:function(t){t.stopPropagation()},mouseTouchEndHandle:function(t){t.stopPropagation()}}),x.gis.gadget.Navigator=function(t,e){this._id=t||"om_navigator",this.map=e,this._commands=[this.zoomin,this.zoomout],x.gis.gadget.Navigator.superClass.constructor.call(this,"block","vertical")},x.Util.ext("twaver.gis.gadget.Navigator",x.gis.gadget.ActionPanel,{initView:function(){this._panel.setAttribute("class","mp_navigator"),this._panel.setAttribute("id",this._id),this.initActions()},initActions:function(){for(var t=["zoomin","zoomout"],e=[],i=x.Util.isIPad||x.Util.isAndroid||x.Util.isIPhone||x.Util.isIPod?48:32,n=0;n<2;n++){var o={command:this._commands[n],size:{width:i,height:i},icon:GISUtils.getRegisterImage(t[n]+"-"+i),scope:this,name:MapUtils.getString(t[n])};e[n]=o}this.addActions(e)},zoomin:function(t){this.map&&(this.map.setZoomLevel(this.map.getZoomLevel()+1),x.gis.util.EventUtils.cancelHandler(t))},zoomout:function(t){this.map&&(this.map.setZoomLevel(this.map.getZoomLevel()-1),x.gis.util.EventUtils.cancelHandler(t))},invalidate:function(){x.gis.gadget.Navigator.superClass.invalidate.call(this),this._panel.style.width=this.size.width+"px"}}),x.gis.gadget.Overview=function(t,e){this._id=null==t?"Overview":t,this._target=e,this.map=new x.gis.Map(e.content,t+"m"),x.gis.gadget.Overview.superClass.constructor.call(this),this._panel.appendChild(this.map.content),this.setBorder("1px solid white"),this.reassignPaintAreaMark(),this._thinkness=1,this._strokeStyle="#0000FF",this._fillStyle="rgba(255,255,255,0.5)"},x.Util.ext("twaver.gis.gadget.Overview",x.gis.gadget.BlockPanel,{initView:function(){this._target.addMapEventListener(this.monitorTarget,this),this.map.setEnableDoubleZoom(!1),this.map.setEnableMouseWheel(!1),this.map.setPanFunction(this.permitPanning,this),this.map.setZoomLevel(this.getRelativeZoom())},setVisibleAreaRectangle:function(t){this._visibleAreaSize=t},setVisibleAreaThinkness:function(t){this._thinknewss=t},setVisibleAreaFillStyle:function(t){this._fillStyle=t},setVisibleAreaStrokeStyle:function(t){this._strokeStyle=t},setBorder:function(t){this.map.content.style.border=t},reassignPaintAreaMark:function(){var d=this;this.map._om.paintArea=function(t){var e,i,n,o,s,a,r,h,l=t.strokeStyle,c=t.lineWidth,u=t.fillStyle;h=d._visibleAreaSize?(s=d.map._om._size.width/2,a=d.map._om._size.height/2,i=d._visibleAreaSize.width/2,n=d._visibleAreaSize.height/2,new x.gis.geometry.Bounds(s-i,s+i,a-n,a+n)):(o=d._target._om._size,o=new x.gis.geometry.Bounds(0,o.width,0,o.height),r=d._target.getGeoPointFromPointOnMap(o.minx,o.miny),e=d._target.getGeoPointFromPointOnMap(o.minx,o.maxy),i=d._target.getGeoPointFromPointOnMap(o.maxx,o.maxy),h=d._target.getGeoPointFromPointOnMap(o.maxx,o.miny),r=this.getScreenPointFromGeoPoint(r),e=this.getScreenPointFromGeoPoint(e),i=this.getScreenPointFromGeoPoint(i),h=this.getScreenPointFromGeoPoint(h),n=d.map._om.viewportBounds.width/d._target._om.viewportBounds.height,o=d.map._om.viewportBounds.height/d._target._om.viewportBounds.height,o=Math.min(n,o),s=(r.x+i.x)/2,a=(e.y+h.y)/2,r=o*(i.x-r.x)/2,h=o*(e.y-h.y)/2,new x.gis.geometry.Bounds(s-r,s+r,a-h,a+h)),t.strokeStyle=d._strokeStyle,t.lineWidth=d._thinkness,t.fillStyle=d._fillStyle,t.fillRect(h.minx,h.miny,h.maxx-h.minx,h.maxy-h.miny),t.strokeRect(h.minx,h.miny,h.maxx-h.minx,h.maxy-h.miny),t.strokeStyle=l,t.lineWidth=c,t.fillStyle=u}},recalSP:function(t,e){var i=(t.x<e.minx?e:t).x,t=t.y>e.maxy?e.maxy:t.y;return{x:i=i>e.maxx?e.maxx:i,y:t=t<e.miny?e.miny:t}},permitPanning:function(){return!1},setSize:function(t){this.map.setSize(t)},monitorTarget:function(t){x.gis.event.MapEvent.ZOOM_CHANGED===t.type?this.map.setZoomLevel(this.getRelativeZoom()):x.gis.event.MapEvent.CENTER_CHANGED===t.type&&this.map.setCenter(this._target.getCenter())},getRelativeZoom:function(){var t=this._target.getZoomLevel();return t<=2?1:t-2}}),x.gis.gadget.Mark=function(){this._ctype="shape",this.src="",this.size={width:10,height:10},this._shapeType="rect",this.pos={x:0,y:0},this.geo={latitdu:0,longitude:0}},x.Util.ext("twaver.gis.gadget.Mark",Object,{setContentType:function(t){this._ctype!=t&&(this._ctype=t)},getContentType:function(){return this._ctype},setSize:function(t){this.size=t},getSize:function(){return this._size},setShapeType:function(t){this._shapeType=t},getShapeType:function(){return this._shapeType},paint:function(t){var e=function(t){var e;switch(t.getShapeType()){case"rect":e=new x.gis.shape.Rectangle(t.size,t.pos);break;case"circle":e=new x.gis.shape.Circle(t.radius,t.pos);break;case"link":e=new x.gis.shape.Line(t.from,t.to)}return e&&(t.fillStyle&&(e.fillStyle=t.fillStyle),t.strokeStyle&&(e.strokeStyle=t.strokeStyle)),e}(this);e&&e.paint(t)}}),x.gis.Map=function(t,e){this._parent=t,this._type=GISConsts.MAPTYPE_ORIGINAL,this.id=e,this._om=x.gis.util.MapFactory.createMap(t,this._type,this.id+"om"),this.content=this._om.content};function xo(e){return function(t){e.method.call(e.scope,t)}}x.Util.ext("twaver.gis.Map",Object,{setWheelGra:function(t){this._om.wheelGra=t},getWheelGra:function(){return this._om.wheelGra},setEnableDoubleZoom:function(t){this._om.setEnableDoubleZoom(t)},isEnableDoubleZoom:function(){return this._om.isEnableDoubleZoom()},setEnableMouseWheel:function(t){this._om.canBeWheeled=t},isEnableMouseWheel:function(){return this._om.canBeWheeled},adjustBounds:function(t){this._om.adjustBounds(t)},getView:function(){return this.content},installListeners:function(t){this._om.installListeners(t)},addLayer:function(t,e,i){this._om.addLayer(t,e,i)},removeAllLayers:function(){this._om.removeAllLayers()},removeLayer:function(t){this._om.removeLayer(t)},setZoomLevel:function(t){this._om.setZoomLevel(t)},setZoomLowLimit:function(t){this._om.setZoomLowLimit(t)},setZoomUpLimit:function(t){this._om.setZoomUpLimit(t)},setCenter:function(t){this._om.setCenter(t)},getCenter:function(){return this._om.center},setSize:function(t){this._om.setSize(t)},setViewport:function(t){this._om.setViewport(t)},setPosition:function(t){this._om.setPosition(t)},addMouseListener:function(t,e,i){this._om.addMouseListener(t,e,i)},setBackgroundColor:function(t){this._om.setBackgroundColor(t)},getGeoPointFromPointOnMap:function(t,e){return this._om.getGeoPointFromPointOnMap(t,e)},getScreenPointFromGeoPoint:function(t){return this._om.getScreenPointFromGeoPoint(t)},addMapEventListener:function(t,e){this._om.addMapEventListener(t,e)},removeMapEventListener:function(t,e){this._om.removeMapEventListener(t,e)},getViewportBounds:function(){return this._om.viewportBounds},setZoomLevels:function(t){this._om.setZoomLevels(t)},getZoomLevel:function(){return this._om.zoomLevel},getProjectionType:function(){return this._om.projectionType},setSynComponent:function(t){this._om.setSynComponent(t)},setPanFunction:function(t,e){this._om.permitPanFunction=t,this._om.permitPanFunction.scope=e},setProjectionType:function(t){this._om.setProjectionType(t)},setPadding:function(){1==arguments.length?this._om.setPadding(arguments[0]):4==arguments.length&&this._om.setPadding(arguments[0],arguments[1],arguments[2],arguments[3])},setMargin:function(){1==arguments.length?this._om.setMargin(arguments[0]):4==arguments.length&&this._om.setMargin(arguments[0],arguments[1],arguments[2],arguments[3])},setBorder:function(){1==arguments.length?this._om.setBorder(arguments[0]):4==arguments.length&&this._om.setBorder(arguments[0],arguments[1],arguments[2],arguments[3])},installGadget:function(t,e){var i=t;t.getView&&(i=t.getView()),e&&(i.style.position="absolute",e.x&&(i.style.left=e.x+"px"),e.y&&(i.style.top=e.y+"px"),e.right&&(i.style.right=e.right+"px"),e.bottom&&(i.style.bottom=e.bottom+"px"),e.top&&(i.style.top=e.top+"px")),this._om.installGadget(i)},toImage:function(t,e){try{return this._om.toImage(t,e)}catch(t){alert("Please refert to CORS settings")}return null},setMarks:function(t){this._om.setMarks(t)},autoResizeByCss:function(){this._om.autoResizeByCss()},stopGetLocation:function(t){s.geolocation&&s.geolocation.clearWatch(t)},getGeoLocation:function(t,e,i){if(!s.geolocation){var n=new Error(MapUtils.getString("Your browser does not support GeoLocation"));throw i&&i.method&&i.scope&&i.method.call(i.scope,n),n}switch(t){case GISConsts.REQUIRE_GEO_TYPE_SHOT:return s.geolocation.getCurrentPosition(xo(e),xo(i)),null;case GISConsts.REQUIRE_GEO_TYPE_REPEAT:return s.geolocation.watchPosition(xo(e),xo(i));default:return null}},setPermitCrossDomain:function(t){this._om.setPermitCrossDomain(t)},isPermitCrossDomain:function(){return this._om.permitCrossDomain},getAppropriateZoomLevel:function(t){return this._om.getAppropriateZoomLevel(t)},finishPan:function(t,e){this._om.finishPan(t,e)},move:function(t,e){this._om.move(t,e)},pan:function(t,e){this._om.pan(t,e)},addMark:function(t){this._om.addMark(t)},enableCombinationInteraction:function(t){this._om.enableDrag=t,this._om.canBeWheeled=t,this._om._enableDoubleZoom=t}}),x.gis.event.MapEvent=function(t,e,i){this.type=t,this.source=e,this.attachment=i},x.gis.event.MapEvent.SIZE_CHANGED=0,x.gis.event.MapEvent.VIEWPORT_CHANGED=1,x.gis.event.MapEvent.CENTER_CHANGED=2,x.gis.event.MapEvent.ZOOM_CHANGED=3,x.gis.event.MapEvent.UPLIMIT_CHANGED=4,x.gis.event.MapEvent.LOWLIMIT_CHANGED=5,x.gis.event.MapEvent.LAYER_ADDED=6,x.gis.event.MapEvent.LAYER_REMOVED=7,x.gis.event.MapEvent.LAYER_EXECUTOR_CHANGED=8,x.gis.event.MapEvent.LAYER_ORDER_CHANGED=9,x.gis.event.MapEvent.LAYER_INDEX_CHANGED=10,x.gis.event.MapEvent.ALL_LAYERS_REMOVED=11,x.gis.event.MapEvent.CROSSDOMAIN_POLICY_CHANGED=12,x.Util.ext(x.gis.event.MapEvent,null,{toString:function(){return"MapEvent, type is "+this._type+(this.source?", source is "+this.source.toString():"")}}),x.gis.core.map.TileUtils={};var Eo=function(t,e,i,n,o,s){this.projectionType=t,this.rowIndex=e,this.colIndex=i,this.zoomLevel=void 0===n?0:n,this.width=o||256,this.height=s||256,this.createContent()};x.Util.ext(Eo,Object,{createContent:function(){this.content=E.createElement("img"),this.content.src=GISUtils.getGlobalSetting(GISSettings.NO_IMAGE_PATH),this.content.setAttribute("style","position:absolute;left:0px;top:0px"),MapUtils.setDOMSize(this.content,{width:this.width,height:this.height})},setLocation:function(t,e){MapUtils.setDOMPosition(this.content,t,e)},setSize:function(t){this.content&&MapUtils.setDOMSize(this.content,t)},loadImage:function(t){this.content||createContent(),this.content.src=t},initGeoBounds:function(){var t,e,i,n,o;this.geoBounds=(t=this.projectionType,e=this.zoomLevel,i=this.colIndex,n=this.rowIndex,o=null,GISConsts.PROJECTION_MERCATOR==t||GISConsts.PROJECTION_4326==t&&(o=Gn(e,i,n)),o)},release:function(){this.content&&this.content.parent&&(this.content.parent.removeChild(this.content),this.content=null,delete this.content)}}),InteractionUtil={installMouseDownListener:function(t,e){},removeMouseDownListener:function(t,e){},installMouseMoveListener:function(t,e){},installMouseUpListener:function(t,e){}},x.gis.interactions.DefaultMapInteraction=function(t){this.map=t,this.wheelGra=0},x.Util.ext("twaver.gis.interactions.DefaultMapInteraction",Object,{onMouseDown:function(t){return t=t||window.event,!!this.map.enableDrag&&(x.gis.util.EventUtils.isLeft(t)?(this.down=!0,this.pressPoint={x:t.clientX,y:t.clientY},this.cachedPress=this.pressPoint,this.map._viewContent.ondragstart=function(){return!1},this.map.startDragging(),this.map.fireEvent({kind:"dragstart",event:t}),!1):void 0)},onMouseMove:function(t){this.down&&!this.dragging&&(this.dragging=!0),this.dragging&&(this.to={x:t.clientX,y:t.clientY},this.map.pan(this.pressPoint,this.to),this.map.fireEvent({kind:"dragging",event:t}))},onMouseWheel:function(t){if(this.map.canBeWheeled){-30*(t=t||window.event).deltaX||t.wheelDeltaX;var e=-30*t.deltaY||t.wheelDeltaY/4||void 0===t.wheelDeltaY&&t.wheelDelta/4||-10*t.detail||0;if(this.wheelGra++,this.wheelGra>this.map.wheelGra&&(this.wheelGra=0,e)){if(this.changedZoom=this.map.zoomLevel+(0<e?1:-1),this.changedZoom<this.map.zoomLowLimit||this.changedZoom>this.map.zoomUpLimit)return;this.map.relocate(x.gis.util.EventUtils.getMouseLocation(t,this.map._viewContent),this.changedZoom)}x.gis.util.EventUtils.cancelHandler(t)}},onMouseUp:function(t){t=t||window.event,this.dragging&&(this.to={x:t.clientX,y:t.clientY},this.map.finishPan(this.cachedPress,this.to),this.map.fireEvent({kind:"dragend",event:t}),E.onmousemove=null,E.onselectstart=null),this.down=!1,this.dragging=!1,this.pressPoint=null},onDBClick:function(t){if(g.isTouchable||0===t.button){var e=this.map.getSynComponent();if(e&&(e instanceof x.network.Network||e instanceof x.canvas.Network||e instanceof x.vector.Network)){var i=e.getElementAt(t);if(i)return void(i instanceof Me&&e.isDoubleClickToGroupExpand()&&(i.reverseExpanded(),e.fireInteractionEvent({kind:"expandGroup",event:tt,element:i})))}this.map.isEnableDoubleZoom()&&this.map.relocate(x.gis.util.EventUtils.getMouseLocation(t,this.map),this.map.zoomLevel+1),x.gis.util.EventUtils.cancelHandler(t)}},getPoint:function(t){return t.clientX?{x:t.clientX,y:t.clientY}:t.pageX?{x:t.pageX,y:t.pageY}:void 0},onTouchStart:function(t){if(1==t.touches.length){var e=t.touches[0];if(this._startTouchTime=new Date,this._startTouchClient=this._currentTouchClient=this.getMarkerPoint(t),this.down=!0,this.pressPoint={x:e.clientX,y:e.clientY},this.cachedPress=this.pressPoint,this.map._viewContent.ondragstart=function(){return!1},this.map.startDragging(),this.oneFingerStart=!0,this._endTouchTime&&this._startTouchTime.getTime()-this._endTouchTime.getTime()<=500&&b.getDistance(this._endTouchClient,this._startTouchClient)<=20){delete this._endTouchTime,delete this._endTouchClient;var i=this.map.getSynComponent();if(i&&(i instanceof x.network.Network||i instanceof x.canvas.Network||i instanceof x.vector.Network)){e=i.getElementAt(t);if(e)return void(e instanceof Me&&i.isDoubleClickToGroupExpand()&&(e.reverseExpanded(),i.fireInteractionEvent({kind:"expandGroup",event:tt,element:e})))}this.map.isEnableDoubleZoom()&&this.map.relocate(x.gis.util.EventUtils.getTouchLocation(t,this.map._viewContent),this.map.zoomLevel+1)}else this._endTouchTime=this._startTouchTime,this._endTouchClient=this._startTouchClient}else this.oneFingerStart=!1,this._distance=lt.getDistance(t)},onTouchMove:function(t){var e;1==t.targetTouches.length?(this.down&&!this.dragging&&(this.dragging=!0),this.dragging&&(e=t.touches[0],this.to={x:e.clientX,y:e.clientY},this.map.pan(this.pressPoint,this.to))):(this.dragging=!1,this._endDistance=lt.getDistance(t)),x.gis.util.EventUtils.cancelHandler(t)},onTouchEnd:function(t){this.dragging?(this.map.finishPan(this.cachedPress,this.to),E.onmousemove=null,E.onselectstart=null):this.dragging||this.oneFingerStart||(lt.getDistance(t),1<(t=this._endDistance/this._distance)?this.map.setZoomLevel(this.map.zoomLevel+parseInt(t)):this.map.setZoomLevel(this.map.zoomLevel-parseInt(1/t))),this.to=null,this.down=!1,this.dragging=!1,this.pressPoint=null},getMarkerPoint:function(t){if(g.isTouchable&&t.changedTouches&&0<t.changedTouches.length){var e=t.changedTouches[0];return{x:e.clientX,y:e.clientY}}return g.isFirefox?{x:t.layerX,y:t.layerY}:{x:t.offsetX,y:t.offsetY}}}),x.gis.interactions.CombineInteraction=function(){x.gis.interactions.CombineInteraction.superClass.constructor.call(this)},x.Util.ext("twaver.gis.interactions.CombineInteraction",x.network.interaction.BaseInteraction,{setUp:function(){},tearDown:function(){},handle_mousedown:function(t){}}),x.gis.interactions.NetworkSelectionInteraction=function(t){x.gis.interactions.NetworkSelectionInteraction.superClass.constructor.call(this,t)},x.Util.ext("twaver.gis.interactions.NetworkSelectionInteraction",x.network.interaction.SelectInteraction,{handle_mousemove:function(t){}}),x.gis.interactions.NonBlockTouchInteraction=function(t){x.gis.interactions.NonBlockTouchInteraction.superClass.constructor.call(this,t)},x.Util.ext("twaver.gis.interactions.NonBlockTouchInteraction",x.network.interaction.TouchInteraction,{handleTouchstart:function(t){var e;Y.touch.isSingleTouch(t)&&(this.lastPoint=this.network.getLogicalPoint(t),e=this.network.getElementAt(this.lastPoint),this.isClickBackground=!e,this.isClickBackground?this.network.getSelectionModel().clearSelection():this.network.getSelectionModel().contains(e)||this.network.getSelectionModel().setSelection(e)),Y.touch.isMultiTouch(t)&&(this.distance=Y.touch.getDistance(t),this.zoom=this.network.getZoom()),m.addEventListener("touchmove","handleTouchmove",this.network.getView(),this),m.addEventListener("touchend","handleTouchend",this.network.getView(),this)},handleTouchmove:function(t){var e,i,n;this.moved||(this.moved=!0),Y.touch.isSingleTouch(t)&&(e=this.network.getLogicalPoint(t),this.network.hasMovableSelectedElements()?(i=(e=this.network.getLogicalPoint(t)).x-this.lastPoint.x,n=e.y-this.lastPoint.y,this.lastPoint=e,this.network.moveSelectedElements(i,n),this.network.setMovingElement(!0)):this.handleTouchend(t))}});x.Util.ext(function(t){this._map=t,this.initMapEventListener()},Object,{initMapEventListener:function(){this._map.addMapEventListneer(this.mapEventListener,this,!0)},mapEventListener:function(t){switch(t.type){case x.gis.event.MapEvent.VIEWPORT_CHANGED:this.onViewportChanged(t);break;case x.gis.event.MapEvent.ZOOM_CHANGED:this.onZoomChanged(t)}},onViewportChanged:function(t){},onZoomChanged:function(t){}});var Co=function(t,e,i,n,o,s){this.name=t||"default",this.servicePath=i,this.tiles=[],this.tileWidth=o||256,this.tileHeight=s||256,this.recreate=!1,this.anchorScreenPoint=null,this.center=GISConsts.ORIGINAL_GEO,this.geoBounds=n,this._relativeLayers=null,this.x=0,this.y=0,this.initContent(),this.zoomLevel=0,this.setExecutorType(e)};x.Util.ext(Co,Object,{setCenter:function(t){MapUtils.equals(this.center,t)||(this.center=t,this.onCenterChanged())},setZoomLevel:function(t){t=Math.floor(t),this.zoomLevel!==t&&(this.zoomLevel=t,this.onZoomLevelChanged())},setViewport:function(t){MapUtils.equals(this.viewrect,t)||(this.viewrect=t,this.onViewportChanged())},onViewportChanged:function(){for(var t=0;t<10;t++)0;var e=this.viewrect.width/2,i=this.viewrect.height/2;this.anchorScreenPoint={x:e,y:i},this.relocateTiles(this.center,this.zoomLevel)},initContent:function(){this.content=E.createElement("div"),this.content.setAttribute("class","tlayer"),this.content.setAttribute("id","ln"+this.name)},setExecutorType:function(t){if(null==t||t<GISConsts.EXECUTOR_TYPE_GEOSERVER_WMS||t>GISConsts.EXECUTOR_TYPE_GOOGLELABEL)throw new Error("Please input validate executor type to create a layer!");this.executorType!==t&&(this.executorType=t,this.onExecutorTypeChanged())},onExecutorTypeChanged:function(){this._executor&&(this._executor=null),this._executor=function(t){switch(t){case GISConsts.EXECUTOR_TYPE_GEOSERVER_WMS:case GISConsts.EXECUTOR_TYPE_GEOSERVER_WMS_CACHE:case GISConsts.EXECUTOR_TYPE_MAPINFO_WMS:case GISConsts.EXECUTOR_TYPE_ARCGIS_WMS:return new ho;case GISConsts.EXECUTOR_TYPE_TIANDITU:return new mo;case GISConsts.EXECUTOR_TYPE_OSM:return new lo;case GISConsts.EXECUTOR_TYPE_GOOGLELABEL:return new go;case GISConsts.EXECUTOR_TYPE_GOOGLEMAP:return new _o;case GISConsts.EXECUTOR_TYPE_GOOGLESTSTELLITE:return new fo;case GISConsts.EXECUTOR_TYPE_GOOGLETERRAIN:return new Ao;case GISConsts.EXECUTOR_TYPE_MAPABC:return new po;case GISConsts.EXECUTOR_TYPE_YAHOO:return new wo;case GISConsts.EXECUTOR_TYPE_EDUSHI:return new uo;case GISConsts.EXECUTOR_TYPE_BINGMAP:return new co;case GISConsts.EXECUTOR_TYPE_TIANDITUSATELLITE:return new vo;case GISConsts.EXECUTOR_TYPE_BAIDUWEBMAP:return new BaiduWebMapExecutor;case GISConsts.EXECUTOR_TYPE_BAIDUSATELLITE:return new BaiduSatelliteMapExecutor;default:return new yo}}(this.executorType),this.servicePath&&(this._executor.service=this.servicePath),this.projectionType=this._executor.projectionType,(this._executor.layer=this)._executor.setLayerBounds(this.geoBounds),this.relocateTiles(this.center,this.zoomLevel)},setServicePath:function(t){this.servicePath!==t&&(this.servicePath=t,this.executor&&(this.executor.service=this.servicePath))},onZoomLevelChanged:function(){this.relocateTiles(this.center,this.zoomLevel)},onServicePathChanged:function(){null!=this._executor&&(this._executor.service=this.servicePath)},onCenterChanged:function(){this.relocateTiles(this.center,this.zoomLevel)},release:function(){this.clearTiles()},reset:function(){this.relocateTiles(this.center,this.zoomLevel)},installTiles:function(){if(null!=this.tiles&&0<this.tiles.length){for(var t=E.createElement("div"),e=0;e<this.tiles.length;e++)for(var i=this.tiles[e],n=0;n<i.length;n++){var o=i[n];t.appendChild(o.content)}this._tilesDOM&&this.content.removeChild(this._tilesDOM),this.content.appendChild(t),this._tilesDOM=t}},pan:function(t,e){if(this.tiles&&null!=this.tiles&&0<this.tiles.length)for(var i=0;i<this.tiles.length;i++)for(var n=this.tiles[i],o=0;o<n.length;o++){var s=n[o];MapUtils.setDOMPosition(s.content,s.x+t,s.y+e)}},recreateTiles:function(t,e){this.tiles=[];for(var i=0;i<t;i++){this.tiles[i]=[];for(var n=0;n<e;n++)this.tiles[i][n]=new Eo(this.projectionType,0,0,this.zoomLevel)}},getCoveredTilesBounds:function(t){return this._executor.getCoveredTilesBounds(t)},relocateTiles:function(t,e){null!=this.viewrect&&null!=this._executor&&(e&&-1!=e||(e=this.zoomLevel),this._executor.relocateTiles(t,e),this.zoomLevel=e)},reloadTile:function(t){if(null!=this.tiles&&0<this.tiles.length)for(var e in this._tiles)for(var i in e){var n;(i.geoBounds.intersects(t)||t.contains(i.geoBounds)||i.geoBounds.contains(t))&&(n=this.executor.acquireTileURL(i),this.releaseImageCache(n),i.release(),i.loadImage(n,!0))}},setPosition:function(t){this.x!==t.x&&this.y!==t.y&&(this.x=t.x,this.y=t.y,this.relocateTiles(this.center,this.zoomLevel))},getRelativeLayers:function(){return this._relativeLayers||(this._relativeLayers=[this.name]),this._relativeLayers},setRelativeLayers:function(t){t&&(this._relativeLayers=t)},printToImage:function(t){for(var e=0;e<this.tiles.length;e++)for(var i=0;i<this.tiles[e].length;i++){var n=this.tiles[e][i];t.drawImage(n.content,n.x,n.y)}},closeOutput:function(){}});function To(t,e){this._parent=t,this.id=e||"t-g-om",this._gadgets={},this._gadgetIDIndex=0,this.content=E.createElement("div"),this.setSelectProperty(this.content),this._marks=[],this.markCanvas=CanvasUtils.getCanvas("mc"),this._viewContent=E.createElement("div"),this._layerContent=E.createElement("div"),this.content.appendChild(this._viewContent),this.content.appendChild(this.markCanvas),this.setSelectProperty(this._viewContent),this.setSelectProperty(this.markCanvas),this.setSelectProperty(this._layerContent),this._dispatcher=new x.EventDispatcher,this._layerList=new x.List,this._layerNamePair=new x.List,this._layerMap={},this.layerNum=0,this.zoomLevel=0,this.zoomUpLimit=17,this.zoomLowLimit=1,this.center=GISConsts.ORIGINAL_GEO,this.pannable=!0,this.permitPanFunction=null,this.canBeWheeled=!0,this.enableDrag=!0,this._enableDoubleZoom=!0,this.init(),this.x=0,this.y=0,this.wheelGra=0,this.addInteraction(new x.gis.interactions.DefaultMapInteraction(this)),this._contextListeners={},MapUtils.installMap(this._parent,this),this.adjustClip(this._size),this.synComponent=null}x.Util.ext(To,Object,{setSelectProperty:function(t){t=t.style;g.isFirefox?t.setProperty("-moz-user-select","none"):g.isChrome||g.isSafari||$us.isOpera?t.setProperty("-webkit-user-select","none"):g.isIE?t.setProperty("-ms-user-select","none"):t.setProperty("user-select","none")},setEnableDoubleZoom:function(t){this._enableDoubleZoom=t},isEnableDoubleZoom:function(){return this._enableDoubleZoom},adjustBounds:function(t){this.setSize({width:t.width,height:t.height}),MapUtils.setDOMPosition(this.content,t.x,t.y)},initViewportStyle:function(){this._viewContent.setAttribute("class","om_viewport"),this._viewContent.setAttribute("style","position:absolute;'"),this._viewContent.appendChild(this._layerContent)},initContentStyle:function(){this.content.setAttribute("class","om"),this.content.setAttribute("id",this.id),this.content.setAttribute("style","position:absolute;left:0px;top:0px"),this.markCanvas.style.cssText="position:absolute",x.gis.util.EventUtils.addEventListener(this.content,"contextmenu",function(t){return t.preventDefault(),!1},this,!0)},init:function(){this.content&&this._parent&&(this.initContentStyle(),this.initViewportStyle(),x.gis.util.EventUtils.addEventListener(this._parent,"resize",this.onParentDOMResized,this,!1),this.initMapChangedListener())},setPermitCrossDomain:function(e){this.permitCrossDomain!=e&&(this.iterateLayersFor(function(t){t.permitCrossDomain=e}),this.permitCrossDomain=e,this.fireEvent(new x.gis.event.MapEvent(x.gis.event.MapEvent.CROSSDOMAIN_POLICY_CHANGED)))},onParentDOMResized:function(t){var e={width:this._parent.clientWidth,height:this._parent.clientHeight};this.setSize(e)},initMapChangedListener:function(){this.addMapEventListener(this.defaultOnMapChanged,this)},defaultOnMapChanged:function(t){switch(t.type){case x.gis.event.MapEvent.SIZE_CHANGED:this.adjustViewport();break;case x.gis.event.MapEvent.LAYER_ADDED:this.onLayerAdded(t);break;case x.gis.event.MapEvent.CENTER_CHANGED:this.setLayersCenter(this.center);break;case x.gis.event.MapEvent.ZOOM_CHANGED:this.setLayersZoom(this.zoomLevel);break;case x.gis.event.MapEvent.UPLIMIT_CHANGED:case x.gis.event.MapEvent.LOWLIMIT_CHANGED:case x.gis.event.MapEvent.LAYER_REMOVED:case x.gis.event.MapEvent.LAYER_EXECUTOR_CHANGED:case x.gis.event.MapEvent.LAYER_ORDER_CHANGED:case x.gis.event.MapEvent.LAYER_INDEX_CHANGED:case x.gis.event.MapEvent.ALL_LAYERS_REMOVED:break;case x.gis.event.MapEvent.VIEWPORT_CHANGED:this.setLayersViewport(this.viewport)}},onLayerAdded:function(t){var e,i,n=t.attachment.layer,o=n.geoBounds,s=this.geoBounds;this.projectionType=n.projectionType,!s&&o?this.setGeoBounds(o):s&&o&&(e=Math.min(s.minLat,o.minLat),i=Math.min(s.minLng,o.minLng),t=Math.max(o.maxLat,s.maxLat),s=Math.max(o.maxLng,s.maxLng),this.setGeoBounds(new x.gis.geometry.GridBbox(e,i,t,s))),n.setPosition({x:this.x,y:this.y}),n.setViewport(this.viewport),n.setZoomLevel(this.zoomLevel),n.setCenter(this.center)},iterateLayersFor:function(t){for(var e=0;e<this.layerNum;e++)t(this._layerList.get(e))},setLayersPosition:function(){this.iterateLayersFor(function(t){t.setPosition({x:this.x,y:this.y})})},covertStagePointToGeoCoordinate:function(t){var e=t.x,t=t.y;return Rn(e,t,this.viewportBounds,this.zoomLevel,this.projectionType)},relocate:function(t,e){var i=this.covertStagePointToGeoCoordinate(t),n=this.viewport.width/2,o=this.viewport.height/2;this.setZoomLevel(e);n-=t.x,o-=t.y,t=Bn(i,this.zoomLevel,this.projectionType),i=this.projectionType==GISConsts.PROJECTION_4326?-1:1;this.setCenter(On(t.x+n,t.y+i*o,this.zoomLevel,this.projectionType))},setGeoBounds:function(t){MapUtils.equals(this.geoBounds,t)||(this.geoBounds=t,this.center||this.setCenter(new x.gis.geometry.GeoCoordinate((t.maxLat+t.minLat)/2,(t.maxLng+t.minLng)/2)))},calculateViewportBounds:function(){if(this.viewport&&this.center){var t=Bn(this.center,this.zoomLevel,this.projectionType),e=t.x-this.viewport.width/2,t=t.y-this.viewport.height/2;return new x.gis.geometry.Bounds(e,e+this.viewport.width,t,t+this.viewport.height)}return new x.gis.geometry.Bounds},setZoomLowLimit:function(t){this.zoomLowLimit=t=t<0?0:t,this._levels&&this._levels[0]<t&&(this._levels[0]=t,this.setZoomLevel(this.zoomLevel))},setZoomUpLimit:function(t){var e;this.zoomUpLimit=t,this._levels&&(e=this._levels.length-1,this._levels[e]>t&&(this._levels[e]=t,this.setZoomLevel(this.zoomLevel)))},setZoomLevels:function(t){this._levels=t,this.setZoomLevel(this.zoomLevel)},setZoomLevel:function(t){var e,i,n;t=(t=t>this.zoomUpLimit?this.zoomUpLimit:t)<this.zoomLowLimit?this.zoomLowLimit:t,e=this._levels,n=t,i=this.zoomLevel,t=e?e[function(t,e,i){if(i<=e){for(var n=0;n<t.length;n++)if(t[n]>=e)return n}else for(n=t.length-1;0<=n;n--)if(t[n]<=e)return n;return 0}(e,n,i)]:n,this.zoomLevel!=t&&(n=this.zoomLevel,this.zoomLevel=t,this.viewportBounds=this.calculateViewportBounds(),this.fireEvent(new x.gis.event.MapEvent(x.gis.event.MapEvent.ZOOM_CHANGED,this,{oldValue:n,newValue:t})),this.paintMarks())},setLayersZoom:function(e){this.iterateLayersFor(function(t){t.setZoomLevel(e)})},setPosition:function(t){this.x!==t.x&&this.y!==t.y&&(this.x=t.x,this.y=t.y,this.setLayersPosition())},setCenter:function(t){var e;nt()&&(MapUtils.isValidateGeo(t)?MapUtils.equals(this.center,t)||(e=this.center,this.center=t,this.viewportBounds=this.calculateViewportBounds(),this.fireEvent(new x.gis.event.MapEvent(x.gis.event.MapEvent.CENTER_CHANGED,this,{oldValue:e,newValue:this.center})),this.paintMarks()):this.reloadLayers())},reloadLayers:function(){this.iterateLayersFor(function(t){t.onCenterChanged()})},setLayersCenter:function(e){this.iterateLayersFor(function(t){t.setCenter(e)})},appendChild:function(t){this._viewContent.appendChild(t)},adjustClip:function(t){var e;(t=t||this._size)&&(e="rect("+(e=MapUtils.getDOMOutborder(this._viewContent)).top+"px,"+(t.width+e.left)+"px,"+(t.height+e.top)+"px,"+e.left+"px)",this.content.style&&(this._viewContent.style.clip=e))},setSize:function(t){MapUtils.equals(this._size,t)||(this._size,this._size=t,this.content&&(MapUtils.setDOMSize(this.content,t),this.markCanvas.width=t.width,this.markCanvas.height=t.height,this.setViewport(t),this.adjustClip(t),this.synchronizeSizeChanged()))},setViewport:function(t){var e;MapUtils.equals(this.viewport,t)||(e=this.viewport,this.viewport=t,this.viewportBounds=this.calculateViewportBounds(),this.adjustViewport(),this.fireEvent(new x.gis.event.MapEvent(x.gis.event.MapEvent.VIEWPORT_CHANGED,this,{oldValue:e,newValue:t})))},adjustViewport:function(){},setLayersViewport:function(e){this.iterateLayersFor(function(t){t.setViewport(e)})},addLayer:function(t,e,i,n,o){var s;this.contains(t)?(s=this.getLayer(t)).setExecutorType(e):(n=n||GISConsts.WORLD_GRIDBBOX,(s=new Co(t,e,i,n)).permitCrossDomain=this.permitCrossDomain,this.addLayerInstance(t,s))},addLayerInstance:function(t,e){this._layerList.add(e),this.layerNum++,this._layerMap[t]=e,this._layerNamePair.add(t,e),this._layerContent.appendChild(e.content),MapUtils.setZIndex(e.content,GISConsts.LAYER_BASE_ZINDEX+this.layerNum),this.fireEvent(new x.gis.event.MapEvent(x.gis.event.MapEvent.LAYER_ADDED,this,{layer:e}))},indexOfLayer:function(t){t=this.getLayer(t);return this._layerList.indexOf(t)},moveLayerTo:function(t,e){if(e>this.layerNum||e<0)throw new Error("Invalid index in moving layer to specified index: "+e);var i=this.getLayer(t);if(i){t=this.indexOf(i);if(-1<t&&t!==e){this._layerList.set(e,i);for(var n=e;n<this._layerNum;n++){var o=this._layerList.get(n);MapUtils.setZIndex(o.content,GISConsts.LAYER_BASE_ZINDEX+n)}this.fireEvent(new x.gis.event.MapEvent(x.gis.event.MapEvent.LAYER_INDEX_CHANGED,this,{layer:i,oldValue:t,newValue:e}))}}},moveLayerToBottom:function(t){this.moveLayerTo(t,0)},moveLayerToTop:function(t){this.moveLayerTo(t,this.layerNum)},removeLayer:function(t){t=this.getLayer(t);t&&(this._layerMap[t.name]=null,delete this._layerMap[t.name],this.removeLayerInstance(t))},removeLayerInstance:function(t){this._layerList.remove(t),this.layerNum--,this._layerContent.removeChild(t.content),this.fireEvent(new x.gis.event.MapEvent(x.gis.event.MapEvent.LAYER_REMOVED,this,{layer:t}))},removeAllLayers:function(){for(var t=this.layerNum,e=0;e<t;e++){var i=this._layerList.get(e);this._layerContent.removeChild(i.content)}this._layerList=new x.List,this._layerMap=new Object,this.layerNum=0,this.fireEvent(new x.gis.event.MapEvent(x.gis.event.MapEvent.ALL_LAYERS_REMOVED,this,{}))},contains:function(t){return!!this.getLayer(t)},getLayer:function(t){var e=typeof t;if("string"==e)return this._layerMap[t];if("number"==e)return this._layerList.get(t);throw new Error("The flag "+t+" is invalidate.")},addMapEventListener:function(t,e){this._dispatcher.add(t,e)},fireEvent:function(t){this._dispatcher.fire(t)},removeMapEventListener:function(t,e){this._dispatcher.add(t,e)},getGeoPointFromPointOnMap:function(t,e){return t-=this.x,e-=this.y,Rn(t,e,this.viewportBounds,this.zoomLevel,this.projectionType)},getScreenPointFromGeoPoint:function(t){t=bn(t,this.viewportBounds,this.zoomLevel,this.projectionType);return{x:t.x+this.x,y:t.y+this.y}},repaint:function(t){if(this._layerList){t=t||this.geoBounds;for(var e=0;e<this.layerNum;e++)this._layerList.get(e).reloadTile(t);this.paintMarks()}},addInteraction:function(t){t.onKeyDown&&x.gis.util.EventUtils.addEventListener(this.content,"onkeydown",t.onKeyDown,t,!1),t.onMouseDown&&x.gis.util.EventUtils.addEventListener(this.content,"mousedown",t.onMouseDown,t,!1),t.onMouseMove&&x.gis.util.EventUtils.addEventListener(this.content,"mousemove",t.onMouseMove,t,!1),t.onMouseUp&&x.gis.util.EventUtils.addEventListener(this.content,"mouseup",t.onMouseUp,t,!1),t.onMouseWheel&&(x.Util.isFirefox?x.gis.util.EventUtils.addEventListener(this.content,"DOMMouseScroll",t.onMouseWheel,t,!1):x.gis.util.EventUtils.addEventListener(this.content,"mousewheel",t.onMouseWheel,t,!1)),t.onDBClick&&x.gis.util.EventUtils.addEventListener(this.content,"dblclick",t.onDBClick,t,!1),t.onTouchStart&&x.gis.util.EventUtils.addEventListener(this.content,"touchstart",t.onTouchStart,t,!1),t.onTouchEnd&&x.gis.util.EventUtils.addEventListener(this.content,"touchend",t.onTouchEnd,t,!1),t.onTouchMove&&x.gis.util.EventUtils.addEventListener(this.content,"touchmove",t.onTouchMove,t,!1)},canBePanned:function(){var t=null==this.permitPanFunction||this.permitPanFunction.call(this.permitPanFunction.scope);return this.pannable&&t},setSynComponent:function(t){var e,i=this;i.synComponent!==t&&((e=(e=i.synComponent)&&e.getView?e.getView():e)&&(i._viewContent.removeChild(e),e.removeChild(i.markCanvas)),(e=i.synComponent=t)&&t.getView&&(e=t.getView()),t?(i.appendChild(e),e.appendChild(i.markCanvas),i.adjustClip(),i.synchronizeSizeChanged()):i.content.appendChild(i.markCanvas))},getSynComponent:function(){return this.synComponent},finishPan:function(t,e){var i,n;this.panning&&(this.panning=!1,n=Bn(this.center,this.zoomLevel,this.projectionType),i=e.x-t.x,e=e.y-t.y,t=this.projectionType==GISConsts.PROJECTION_4326?-1:1,n={x:n.x-i,y:n.y-t*e},e=On(n.x,n.y,this.zoomLevel,this.projectionType),MapUtils.setDOMPosition(this.markCanvas,0,0),this.setCenter(e),this.synComponent&&((e=!(n=this.synComponent.getView()))&&(n=this.synComponent),e?MapUtils.setDOMPosition(n,0,0):this.finishPanningNetwork()))},panNetwork:function(t,e){var i,n=this.synComponent;n&&(n.pan?n.pan(t,e):(n.original||(n.original=MapUtils.getDOMPosition(n.getView())),t=(i=n.original).x+t,e=i.y+e,MapUtils.setDOMPosition(n.getView(),t,e),n.moving=!0))},finishPanningNetwork:function(){var t=this.synComponent;t&&(t.validate(),t.finishPan?this.synComponent.finishPan():(MapUtils.setDOMPosition(t.getView(),0,0),t.moving=!1))},pan:function(t,e){if(this.canBePanned()){this.panning=!0;for(var i=e.x-t.x,n=e.y-t.y,o=(this.x,this.y,0);o<this.layerNum;o++)this._layerList.get(o).pan(i,n);this.synComponent&&((t=!(e=this.synComponent.getView()))&&(e=this.synComponent),t?(this.synComponent.original||(this.synComponent.original=MapUtils.getDOMPosition(e)),e=(t=this.synComponent.original).x+i,t=t.y+n,MapUtils.setDOMPosition(this.synComponent,e,t),MapUtils.setDOMPosition(this.markCanvas,e,t)):this.panNetwork(i,n))}},startDragging:function(){var t,e;this.synComponent&&(!this.synComponent.getView()||this.synComponent._linkCanvas&&(t=this.synComponent._linkCanvas.getContext("2d"),(e=this.synComponent._offscreenCanvas.getContext("2d")).save(),e.drawImage(this.synComponent._linkCanvas,0,0),e.restore(),e=MapUtils.parseBounds(this.synComponent._offscreenCanvas),t.clearRect(e.x,e.y,e.width,e.height)))},addMouseListener:function(t,e,i){m.addEventListener(t,e,this.content,i)},setBackgroundColor:function(t){MapUtils.setBackgroundColor(this.content,t)},setProjectionType:function(t){0==this.layerNum&&(this.projectionType=t)},setBorder:function(){1==arguments.length?(this.content.style["border-width"]=arguments[0]+"px",this._borderWidth=arguments[0]):4==arguments.length&&(this.content.style["border-left-width"]=arguments[3]+"px",this.content.style["border-top-width"]=arguments[0]+"px",this.content.style["border-right-width"]=arguments[1]+"px",this.content.style["border-bottom-width"]=arguments[2]+"px",this._borderTopWidth=arguments[0],this._borderRightWidth=arguments[1],this._borderBottomWidth=arguments[2],this._borderLeftWidth=arguments[3])},setPadding:function(){1==arguments.length?(this.content.style.padding=arguments[0]+"px",this._padding=arguments[0]):4==arguments.length&&(this.content.style.padding=arguments[0]+"px "+arguments[1]+"px "+arguments[2]+"px "+arguments[3]+"px",this._paddingTop=arguments[0],this._paddingRight=arguments[1],this._paddingBottom=arguments[2],this._paddingLeft=arguments[3])},setMargin:function(){1==arguments.length?(this.content.style.margin=arguments[0]+"px",this._padding=arguments[0]):4==arguments.length&&(this.content.style.margin=arguments[0]+"px "+arguments[1]+"px "+arguments[2]+"px "+arguments[3]+"px",this._marginTop=arguments[0],this._marginRight=arguments[1],this._marginBottom=arguments[2],this._marginLeft=arguments[3])},toImage:function(t,e){var i=CanvasUtils.getCanvas("temp-toImage");t=t||this._size,i.width=t.width,i.height=t.height;t=CanvasUtils.getGraphic(i);return this.printToImage(t),i.toDataURL("image/png")},printToImage:function(e){var t;this.iterateLayersFor(function(t){t.printToImage(e)}),e.drawImage(this.markCanvas,0,0),this.synComponent&&(this.synComponent._linkCanvas&&e.drawImage(this.synComponent._linkCanvas,0,0),this.synComponent.toCanvasByRegion&&(t=this.synComponent.toCanvasByRegion({x:0,y:0,width:this._size.width,height:this._size.height},1),e.drawImage(t,0,0)))},closeLayer:function(){this.iterateLayersFor(function(t){t.closeOutput()})},setMarks:function(t){this._marks=t,this.paintMarks()},paintMarks:function(){var t=this._marks.length,e=CanvasUtils.getGraphic(this.markCanvas);e.clearRect(0,0,this.markCanvas.width,this.markCanvas.height);for(var i=0;i<t;i++){var n=this._marks[i],o=bn(n.geo,this.viewportBounds,this.zoomLevel,this.projectionType);n.pos=o,n.paint(e)}this.paintArea(e)},setAreaMarkVisible:function(t){this._areaVisible=t,this.paintArea(CanvasUtils.getGraphic(this.markCanvas))},paintArea:function(t){},installGadget:function(t){for(var e in this._gadgets)if(this._gadgets[e]===t)return null;this._gadgets[this._gadgetIndex]=t;var i=this._gadgetIndex;return this._gadgetIndex++,this.content.appendChild(t),i},removeGadgetById:function(t){t in this._gadgets&&(t=this._gadgets[t],delete this._gadgets[i],this.content.removeChild(t))},autoResizeByCss:function(){var t=MapUtils.getDOMStyle(this._parent),e=null;t.width?e={width:MapUtils.getFloat(t.width),height:MapUtils.getFloat(t.height)}:this._parent.clientWidth&&(e={width:this._parent.clientWidth,height:this._parent.clientHeight}),this.setSize(e)},synchronizeSizeChanged:function(){this.synComponent&&this.synComponent.adjustBounds&&this.synComponent.adjustBounds({x:0,y:0,width:this._size.width,height:this._size.height})},getAppropriateZoomLevel:function(t){return GISUtils.getAppropriateZoomLevel(t,this)},addMark:function(t){this._marks.push(t),this.paintMarks()},removeMark:function(t){t=this._marks.indexof(t);0<=t&&this._marks.splice(t,1),this.paintMarks()},clearMarks:function(){this._marks=[],this.paintMarks()},updateMark:function(t){0<=this._marks.indexof(t)&&this.paintMarks()}}),x.gis.util.EventUtils={addEventListener:function(t,e,i,n,o){null==o&&(o=!1);var s=function(t){i.call(s.scope,t)};s.scope=n,t.addEventListener?t.addEventListener(e,s,o):t.attachEvent("on"+e,s)},cancelHandler:function(t){t=t||window.event;return t.preventDefault()&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.returnValue&&(t.returnValue=!1),!(t.cancelBubble=!0)},getTouchLocation:function(t,e){if(lt.isSingleTouch(t)){t=t||window.event,e=e||t.target;var i=0,n=0,e=MapUtils.getDOMLocation(e),t=t.touches[0];return t.clientX?(i=t.clientX,n=t.clientY):t.pageX&&(i=t.pageX,n=t.pageY),{x:i-e.x,y:n-e.y}}},getMouseLocation:function(t,e){t=t||window.event,e=e||t.target;var i=0,n=0,e=MapUtils.getDOMLocation(e);return t.clientX?(i=t.clientX,n=t.clientY):t.pageX&&(i=t.pageX,n=t.pageY),{x:i-e.x,y:n-e.y}},isLeft:function(t){return(t=t||window.event).which?1==t.which:t.button?x.Util.isIE?1==t.button:0==t.button:void 0},isRight:function(t){return(t=t||window.event).which?3==t.which:t.button?2==t.button:void 0},isMiddle:function(t){return(t=t||window.event).which?2==t.which:t.button?x.Util.isIE?4==t.button:1==t.button:void 0}},x.gis.util.MapFactory={},x.gis.util.MapFactory.createMap=function(t,e,i){var n=null;return n=e!==GISConsts.MAPTYPE_EMBEDED?new To(t,i):n},x.gis.Default={ELEMENTUI_FUNCTION:function(t,e){return e instanceof x.Link?new x.network.SimpleLinkUI(t,e):e instanceof x.Node?new x.network.BaseUI(t,e):null}},x.gis.Adapter=function(){},x.Util.ext("twaver.gis.Adapter",Object,{bindNetworkAndMap:function(t,e){this.network=t,this.network&&(this.network.getView().style.overflow="hidden",g.isTouchable?this.network.setTouchInteractions():this.network.setDefaultInteractions()),this.map=e,this.installListeners(),this.map&&this.map.setSynComponent(this.network),g.isTouchable?this.installTouchInteraction(this.network):t instanceof x.network.Network?this.network.setInteractions([new x.gis.interactions.NetworkSelectionInteraction(this.network),new x.network.interaction.MoveInteraction(this.network,!1),new x.network.interaction.DefaultInteraction(this.network)]):t instanceof x.canvas.Network?this.network.setInteractions([new x.gis.interactions.NetworkSelectionInteraction(this.network),new x.canvas.interaction.MoveInteraction(this.network,!1),new GisCanvasDefaultInteraction(this.network,this.map)]):this.network.setInteractions([new x.gis.interactions.NetworkSelectionInteraction(this.network),new x.canvas.interaction.MoveInteraction(this.network,!1),new GisVectorDefaultInteraction(this.network,this.map)])},unbindNetworkAndMap:function(){this.removeListeners(),this.network&&(this.network.getView().style.overflow="auto",g.isTouchable?this.installTouchInteraction(this.network):this.network.setDefaultInteractions()),this.map&&this.map.setSynComponent(null)},panFunction:function(){return!this.hasSelectedElement()},hasSelectedElement:function(){return!!this.network.getElementBox().getSelectionModel().getLastData()},installListeners:function(){var t;this.network&&(this.installNetworkListeners(),t=this.network.getElementBox(),this.monitorNetworkBox(t)),this.map&&(this.installMapListeners(),this.map.setPanFunction(this.panFunction,this))},installMapListeners:function(){this.map.addMapEventListener(this.monitorMapChangedEvent,this)},removeMapListeners:function(){this.map.removeMapEventListener(this.monitorMapChangedEvent,this)},removeListeners:function(){var t;this.network&&(this.removeNetworkListeners(),t=this.network.getElementBox(),this.clearNetworkBoxListeners(t)),this.map&&this.removeMapListeners()},installNetworkInteraction:function(){this.network.addInteractionListener(this.monitorMoveNode,this,!0)},installNetworkListeners:function(){this.network.addPropertyChangeListener(this.dealwithDataboxChanged,this),this.installNetworkInteraction()},dealwithDataboxChanged:function(t){var e;"elementBox"===t.property&&(e=t.oldValue,this.clearNetworkBoxListeners(e),t=t.newValue,this.monitorMapChangedEvent(t),this.resetElements())},removeNetworkListeners:function(){this.network.removePropertyChangeListener(this.dealwithDataboxChanged,this),this.removeNetworkInteraction()},removeNetworkInteraction:function(){this.network.removeInteractionListener(this.monitorMoveNode,this,!0)},monitorMapChangedEvent:function(t){switch(t.type){case x.gis.event.MapEvent.CENTER_CHANGED:case x.gis.event.MapEvent.ZOOM_CHANGED:case x.gis.event.MapEvent.VIEWPORT_CHANGED:this.relocateElements()}},clearNetworkBoxListeners:function(t){t.removeDataBoxChangeListener(this.handleDataBoxEvent,this),t.removeDataPropertyChangeListener(this.handlePropertyChangedEvent,this)},dealwithDataboxEvent:function(t){"add"===t.kind&&((t=t.data)instanceof x.ShapeNode&&this.resetShapeNode(t),this.locateElement(t))},resetShapeNode:function(t){t.getClient(GISSettings.SHAPE_POINTS)||this.resetShapesByOriginalPoints(t)},dealwithPropertyChangeEvent:function(t){var e=t.property,i=e.indexOf(":");if(0<i)switch(e=e.substring(i+1,e.length)){case GISSettings.GEOCOORDINATE:this.locateElement(t.source);break;case GISSettings.SHAPE_POINTS:case GISSettings.SHAPENODE_GEOM_TYPE:this.adjustShapeNode(t.source)}},monitorNetworkBox:function(t){t.addDataBoxChangeListener(this.dealwithDataboxEvent,this),t.addDataPropertyChangeListener(this.dealwithPropertyChangeEvent,this)},resetElements:function(){this.network&&this.network.getElementBox().forEachByDepthFirst(this.resetElement,null,this)},resetElement:function(t){t instanceof x.ShapeNode&&this.resetShapeNode(t),this.locateElement(t)},relocateElements:function(){this.network&&this.network.getElementBox().forEachByDepthFirst(this.locateElement,null,this)},locateElement:function(t){t instanceof x.Group||this.permitLocating(t)&&(t instanceof x.ShapeNode?this.adjustShapeNode(t):t instanceof x.ShapeLink?this.adjustShapeLink(t):this.locateNormalNode(t))},insertLinesIntoShapeNode:function(t,e){for(var i=0;i<e.length;i++){var n=e[i];this.insertLineIntoShapeNode(t,n)}},adjustShapeNode:function(t){t.setSegments(new x.List),t.setPoints();var e=t.getClient(GISSettings.SHAPE_POINTS);switch(t.getClient(GISSettings.SHAPENODE_GEOM_TYPE)){case x.gis.ogc.geoms.Geom.GEOM_LINE:case x.gis.ogc.geoms.Geom.GEOM_LINERING:this.insertLineIntoShapeNode(t,e);break;case x.gis.ogc.geoms.Geom.GEOM_MULTILINE:this.insertLinesIntoShapeNode(t,e);break;case x.gis.ogc.geoms.Geom.GEOM_MULTISURFACE:for(var i in e)for(var n in i)for(var o in n)this.insertLineIntoShapeNode(t,o[0])}},adjustShapeLink:function(t){t.setPoints();var e=t.getClient(GISSettings.SHAPE_POINTS);switch(t.getClient(GISSettings.SHAPENODE_GEOM_TYPE)){case x.gis.ogc.geoms.Geom.GEOM_LINE:case x.gis.ogc.geoms.Geom.GEOM_LINERING:this.insertLineIntoShapeLink(t,e);break;case x.gis.ogc.geoms.Geom.GEOM_MULTILINE:this.insertLinesIntoShapeNode(t,e);break;case x.gis.ogc.geoms.Geom.GEOM_MULTISURFACE:for(var i in e)for(var n in i)for(var o in n)this.insertLineIntoShapeNode(t,o[0])}},isMultiSurface:function(t){if(t&&t[0]instanceof Array){t=t[0];if(t[0]instanceof Array)if(1<=t[0].length)return!0}return!1},permitLocating:function(t){return!GISUtils.getBoolean(GISSettings.ONLY_LOCATE_VISIBLE_ELEMENT)||this.network.isVisible(t)},insertLineIntoShapeNode:function(t,e){if(0<e.length){for(var i=new x.List,n=new x.List,o={x:-1e7,y:-1e8},s=0;s<e.length;s++){var a=this.getScreenPoint(e[s]);GISUtils.isIllegal(o,a,GISUtils.getLegalDistanceToLeranceOfTileMap(this.map))&&(0==s?i.add("moveto"):i.add("lineto"),n.add(a),o=a)}t.getSegments().addAll(i),t.getPoints().addAll(n),t.firePointsChange()}},insertLineIntoShapeLink:function(t,e){if(0<e.length){for(var i=new x.List,n={x:-1e7,y:-1e8},o=0;o<e.length;o++){var s=this.getScreenPoint(e[o]);GISUtils.isIllegal(n,s,GISUtils.getLegalDistanceToLeranceOfTileMap(this.map))&&(i.add(s),n=s)}t.getPoints().addAll(i),t.firePointsChange()}},getScreenPoint:function(t){return this.map?this.getScreenPointOnTWaverMap(t):{x:0,y:0}},getScreenPointOnTWaverMap:function(t){return bn(t,this.map.getViewportBounds(),this.map.getZoomLevel(),this.map.getProjectionType())},locateNormalNode:function(t){var e=t.getClient(GISSettings.GEOCOORDINATE);e instanceof x.gis.geometry.GeoCoordinate&&(e=this.getScreenPoint(e),t.setCenterLocation(e))},monitorMoveNode:function(t){t=t.kind;"lazeMoveStart"==t||"liveMoveStart"==t?this.startMoving():"lazyMoveEnd"!=t&&"liveMoveEnd"!=t||this.endMoving()},startMoving:function(){},endMoving:function(){var t=this.network.getElementBox().getSelectionModel().getSelection(),e=this;t.forEach(function(t){t instanceof x.ShapeNode?e.resetShapesByOriginalPoints(t):t instanceof x.Node&&e.resetGeoCoordinate(t)})},resetShapesByOriginalPoints:function(t){switch(t.getClient(GISSettings.SHAPENODE_GEOM_TYPE)){case x.gis.ogc.geoms.Geom.GEOM_MULTISURFACE:case x.gis.ogc.geoms.Geom.GEOM_MULTIPOLYGON:this.resetMultiSurfaceShapeNode(t);break;default:this.resetLineShapeNode(t)}},resetMultiSurfaceShapeNode:function(t){for(var e=t.getPoints(),i=t.getSegments(),n=t.getClient(GISSettings.SHAPE_POINTS),o=n.length,s=n[0].length,a=n[0][0].length,r=0,h=0,l=0,c=e.length,u=null,d=0;d<c;d++){"moveto"===i.getItemAt(d)&&(u&&(n[l%o][h%s][r%a][0]=u,l=(h=++r/a)/s),u=[]);var _=e.get(d);u.push(this.map.getGeoPointFromPointOnMap(_.x,_.y))}},resetLineShapeNode:function(t){for(var e=[],i=t.getPoints(),n=0;n<i.length;n++){var o=i.get(n);e.push(this.map.getGeoPointFromPointOnMap(o.x,o.y))}0<e.length&&t.setClient(GISSettings.SHAPE_POINTS,e)},resetGeoCoordinate:function(t){var e,i;t instanceof x.Group?(i=t.getChildren(),e=this,i.forEach(function(t){t instanceof x.Node&&e.resetGeoCoordinate(t)})):(i=this.getGeoCoordinate(t.getCenterLocation()),t.setClient(GISSettings.GEOCOORDINATE,i))},getGeoCoordinate:function(t){return this.map?this.getGeoCoordinateOnTWaverMap(t):new x.gis.geometry.GeoCoordinate},getGeoCoordinateOnTWaverMap:function(t){return Rn(t.x,t.y,this.map.getViewportBounds(),this.map.getZoomLevel(),this.map.getProjectionType())},installTouchInteraction:function(t){t.setInteractions([new x.gis.interactions.NonBlockTouchInteraction(t)])},disableCombineInteraction:function(){this.map.enableCombinationInteraction(!1),this.network.setDefaultInteractions()},enableCombineInteraction:function(){this.map.enableCombinationInteraction(!0),this.network instanceof x.network.Network?this.network.setInteractions([new x.gis.interactions.NetworkSelectionInteraction(this.network),new x.network.interaction.MoveInteraction(this.network,!1),new x.network.interaction.DefaultInteraction(this.network)]):this.network instanceof x.canvas.Network?this.network.setInteractions([new x.gis.interactions.NetworkSelectionInteraction(this.network),new x.canvas.interaction.MoveInteraction(this.network,!1),new GisCanvasDefaultInteraction(this.network,this.map)]):this.network.setInteractions([new x.gis.interactions.NetworkSelectionInteraction(this.network),new x.canvas.interaction.MoveInteraction(this.network,!1),new GisVectorDefaultInteraction(this.network,this.map)])}}),GisCanvasDefaultInteraction=function(t,e){this.map=e,GisCanvasDefaultInteraction.superClass.constructor.call(this,t)},Y.ext("GisCanvasDefaultInteraction",x.canvas.interaction.DefaultInteraction,{handleDoubleClicked:function(t,e){this.map&&!this.map.isEnableDoubleZoom()&&dt.handleDoubleClicked(this.network,t,e)}}),GisVectorDefaultInteraction=function(t,e){this.map=e,GisVectorDefaultInteraction.superClass.constructor.call(this,t)},Y.ext("GisVectorDefaultInteraction",x.vector.interaction.DefaultInteraction,{handleDoubleClicked:function(t,e){this.map&&!this.map.isEnableDoubleZoom()&&dt.handleDoubleClicked(this.network,t,e)}})}();